<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:15:54 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NFTW</title>

</head>
<body>

<h1 align="center">NFTW</h1>

<a href="#PROLOG">PROLOG</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>PROLOG
<a name="PROLOG"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page is part of the POSIX Programmer&rsquo;s Manual. The
Linux implementation of this interface may differ (consult
the corresponding Linux manual page for details of Linux
behavior), or the interface may not be implemented on
Linux.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">nftw &minus;
walk a file tree</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;ftw.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
nftw(const char *</b><i>path</i><b>, int
(*</b><i>fn</i><b>)(const char *,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>
const struct stat *, int, struct FTW *), int</b>
<i>depth</i><b>, int</b> <i>flags</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>nftw</i>() function shall recursively descend the
directory hierarchy rooted in <i>path</i>. The <i>nftw</i>()
function has a similar effect to <i>ftw</i>() except that it
takes an additional argument <i>flags</i>, which is a
bitwise-inclusive OR of zero or more of the following flags:
<br>
FTW_CHDIR</p>

<p style="margin-left:22%;">If set, <i>nftw</i>() shall
change the current working directory to each directory as it
reports files in that directory. If clear, <i>nftw</i>()
shall not change the current working directory.</p>

<p style="margin-left:11%;">FTW_DEPTH</p>

<p style="margin-left:22%;">If set, <i>nftw</i>() shall
report all files in a directory before reporting the
directory itself. If clear, <i>nftw</i>() shall report any
directory before reporting the files in that directory.</p>

<p style="margin-left:11%;">FTW_MOUNT</p>

<p style="margin-left:22%;">If set, <i>nftw</i>() shall
only report files in the same file system as <i>path</i>. If
clear, <i>nftw</i>() shall report all files encountered
during the walk.</p>

<p style="margin-left:11%;">FTW_PHYS</p>

<p style="margin-left:22%;">If set, <i>nftw</i>() shall
perform a physical walk and shall not follow symbolic
links.</p>

<p style="margin-left:11%; margin-top: 1em">If FTW_PHYS is
clear and FTW_DEPTH is set, <i>nftw</i>() shall follow links
instead of reporting them, but shall not report any
directory that would be a descendant of itself. If FTW_PHYS
is clear and FTW_DEPTH is clear, <i>nftw</i>() shall follow
links instead of reporting them, but shall not report the
contents of any directory that would be a descendant of
itself.</p>

<p style="margin-left:11%; margin-top: 1em">At each file it
encounters, <i>nftw</i>() shall call the user-supplied
function <i>fn</i> with four arguments:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p>*</p></td>
<td width="1%"></td>
<td width="85%">


<p>The first argument is the pathname of the object.</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p>*</p></td>
<td width="1%"></td>
<td width="85%">


<p>The second argument is a pointer to the <b>stat</b>
buffer containing information on the object.</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p>*</p></td>
<td width="1%"></td>
<td width="85%">


<p>The third argument is an integer giving additional
information. Its value is one of the following:</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">FTW_F</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%"></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">The object is a file.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FTW_D</p></td>
<td width="2%"></td>
<td width="78%">


<p>The object is a directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FTW_DP</p></td>
<td width="2%"></td>
<td width="78%">


<p>The object is a directory and subdirectories have been
visited. (This condition shall only occur if the FTW_DEPTH
flag is included in <i>flags</i>.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FTW_SL</p></td>
<td width="2%"></td>
<td width="78%">


<p>The object is a symbolic link. (This condition shall
only occur if the FTW_PHYS flag is included in
<i>flags</i>.)</p> </td></tr>
</table>

<p style="margin-left:11%;">FTW_SLN</p>

<p style="margin-left:22%;">The object is a symbolic link
that does not name an existing file. (This condition shall
only occur if the FTW_PHYS flag is not included in
<i>flags</i>.)</p>

<p style="margin-left:11%;">FTW_DNR</p>

<p style="margin-left:22%;">The object is a directory that
cannot be read. The <i>fn</i> function shall not be called
for any of its descendants.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FTW_NS</p></td>
<td width="2%"></td>
<td width="78%">


<p>The <i>stat</i>() function failed on the object because
of lack of appropriate permission. The <b>stat</b> buffer
passed to <i>fn</i> is undefined. Failure of <i>stat</i>()
for any other reason is considered an error and
<i>nftw</i>() shall return -1.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>*</p></td>
<td width="2%"></td>
<td width="78%">
</td></tr>
</table>

<p style="margin-left:15%; margin-top: 1em">The fourth
argument is a pointer to an <b>FTW</b> structure. The value
of <b>base</b> is the offset of the object&rsquo;s filename
in the pathname passed as the first argument to <i>fn</i>.
The value of <b>level</b> indicates depth relative to the
root of the walk, where the root level is 0.</p>

<p style="margin-left:11%; margin-top: 1em">The results are
unspecified if the application-supplied <i>fn</i> function
does not preserve the current working directory.</p>

<p style="margin-left:11%; margin-top: 1em">The argument
<i>depth</i> sets the maximum number of file descriptors
that shall be used by <i>nftw</i>() while traversing the
file tree. At most one file descriptor shall be used for
each directory level.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>nftw</i>() function need not be reentrant. A function
that is not required to be reentrant is not required to be
thread-safe.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>nftw</i>() function shall continue until the first of the
following conditions occurs:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p style="margin-top: 1em">*</p></td>
<td width="1%"></td>
<td width="85%">


<p style="margin-top: 1em">An invocation of <i>fn</i> shall
return a non-zero value, in which case <i>nftw</i>() shall
return that value.</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p>*</p></td>
<td width="1%"></td>
<td width="85%">


<p>The <i>nftw</i>() function detects an error other than
[EACCES] (see FTW_DNR and FTW_NS above), in which case
<i>nftw</i>() shall return -1 and set <i>errno</i> to
indicate the error.</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="2%">


<p>*</p></td>
<td width="1%"></td>
<td width="85%">


<p>The tree is exhausted, in which case <i>nftw</i>() shall
return 0.</p></td></tr>
</table>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>nftw</i>() function shall fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>EACCES</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Search permission is denied for
any component of <i>path</i> or read permission is denied
for <i>path</i>, or <i>fn</i> returns -1 and does not reset
<i>errno</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A loop exists in symbolic links encountered during
resolution of the <i>path</i> argument.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">The length of the <i>path</i>
argument exceeds {PATH_MAX} or a pathname component is
longer than {NAME_MAX}.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENOENT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A component of <i>path</i> does not name an existing
file or <i>path</i> is an empty string.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENOTDIR</b></p>

<p style="margin-left:22%;">A component of <i>path</i> is
not a directory.</p>

<p style="margin-left:11%;"><b>EOVERFLOW</b></p>

<p style="margin-left:22%;">A field in the <b>stat</b>
structure cannot be represented correctly in the current
programming environment for one or more files found in the
file hierarchy.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>nftw</i>() function may fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>More than {SYMLOOP_MAX} symbolic links were encountered
during resolution of the <i>path</i> argument.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EMFILE</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>{OPEN_MAX} file descriptors are currently open in the
calling process.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">Pathname resolution of a
symbolic link produced an intermediate result whose length
exceeds {PATH_MAX}.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENFILE</b></p></td>
<td width="2%"></td>
<td width="73%">


<p>Too many files are currently open in the system.</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In addition,
<i>errno</i> may be set if the function pointed to by
<i>fn</i> causes <i>errno</i> to be set.</p>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
example walks the <b>/tmp</b> directory and its
subdirectories, calling the <i>nftw</i>() function for every
directory entry, to a maximum of 5 levels deep.</p>

<p style="margin-left:22%; margin-top: 1em"><b>#include
&lt;ftw.h&gt; <br>
... <br>
int nftwfunc(const char *, const struct stat *, int, struct
FTW *);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>int
nftwfunc(const char *filename, const struct stat *statptr,
<br>
int fileflags, struct FTW *pfwt) <br>
{ <br>
return 0; <br>
} <br>
... <br>
char *startpath = &quot;/tmp&quot;; <br>
int depth = 5; <br>
int flags = FTW_CHDIR | FTW_DEPTH | FTW_MOUNT; <br>
int ret;</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>ret =
nftw(startpath, nftwfunc, depth, flags);</b></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>lstat</i>(),
<i>opendir</i>(), <i>readdir</i>(), <i>stat</i>(), the Base
Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001,
<i>&lt;ftw.h&gt;</i></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
