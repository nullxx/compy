<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:04:40 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Tk_AllocCursorFromObj</title>

</head>
<body>

<h1 align="center">Tk_AllocCursorFromObj</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Tk_AllocCursorFromObj,
Tk_GetCursor, Tk_GetCursorFromObj, Tk_GetCursorFromData,
Tk_NameOfCursor, Tk_FreeCursorFromObj, Tk_FreeCursor &minus;
maintain database of cursors</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;tk.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">Tk_Cursor
<b><br>
Tk_AllocCursorFromObj(</b><i>interp, tkwin,
objPtr</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">Tk_Cursor
<b><br>
Tk_GetCursor(</b><i>interp, tkwin, name</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">Tk_Cursor
<b><br>
Tk_GetCursorFromObj(</b><i>tkwin, objPtr</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">Tk_Cursor
<b><br>
Tk_GetCursorFromData(</b><i>interp, tkwin, source, mask,
width, height, xHot, yHot, fg, bg</i><b>)</b></p>

<p style="margin-left:11%; margin-top: 1em">const char *
<b><br>
Tk_NameOfCursor(</b><i>display, cursor</i><b>)</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_FreeCursorFromObj(</b><i>tkwin,
objPtr</i><b>)</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_FreeCursor(</b><i>display,
cursor</i><b>)</b></p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p style="margin-top: 1em">Tcl_Interp <i>*interp</i>
(in)</p> </td>
<td width="21%"></td>
<td width="31%">


<p style="margin-top: 1em">Interpreter to use for error
reporting.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Tk_Window <i>tkwin</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Token for window in which the cursor will be used.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Tcl_Obj <i>*objPtr</i> (in/out)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Description of cursor; see below for possible values.
Internal rep will be modified to cache pointer to
corresponding Tk_Cursor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>char <i>*name</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Same as <i>objPtr</i> except description of cursor is
passed as a string and resulting Tk_Cursor is not
cached.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>const char <i>*source</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Data for cursor cursor, in standard cursor format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>const char <i>*mask</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Data for mask cursor, in standard cursor format.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>int <i>width</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Width of <i>source</i> and <i>mask</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>int <i>height</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Height of <i>source</i> and <i>mask</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>int <i>xHot</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>X-location of cursor hot-spot.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>int <i>yHot</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Y-location of cursor hot-spot.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Tk_Uid <i>fg</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Textual description of foreground color for cursor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Tk_Uid <i>bg</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Textual description of background color for cursor.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Display <i>*display</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Display for which <i>cursor</i> was allocated.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="37%">


<p>Tk_Cursor <i>cursor</i> (in)</p></td>
<td width="21%"></td>
<td width="31%">


<p>Opaque Tk identifier for cursor. If passed to
<b>Tk_FreeCursor</b>, must have been returned by some
previous call to <b>Tk_GetCursor</b> or
<b>Tk_GetCursorFromData</b>.</p> </td></tr>
</table>


<p style="margin-left:69%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
procedures manage a collection of cursors being used by an
application. The procedures allow cursors to be re-used
efficiently, thereby avoiding server overhead, and also
allow cursors to be named with character strings.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_AllocCursorFromObj</b>
takes as argument an object describing a cursor, and returns
an opaque Tk identifier for a cursor corresponding to the
description. It re-uses an existing cursor if possible and
creates a new one otherwise. <b>Tk_AllocCursorFromObj</b>
caches information about the return value in <i>objPtr</i>,
which speeds up future calls to procedures such as
<b>Tk_AllocCursorFromObj</b> and <b>Tk_GetCursorFromObj</b>.
If an error occurs in creating the cursor, such as when
<i>objPtr</i> refers to a non-existent file, then
<b>None</b> is returned and an error message will be stored
in <i>interp</i>&rsquo;s result if <i>interp</i> is not
NULL. <i>ObjPtr</i> must contain a standard Tcl list with
one of the following forms: <i><br>
name</i> [<i>fgColor</i> [<i>bgColor</i>]]</p>

<p style="margin-left:22%;"><i>Name</i> is the name of a
cursor in the standard X cursor cursor, i.e., any of the
names defined in <b>cursorcursor.h</b>, without the
<b>XC_</b>. Some example values are <b>X_cursor</b>,
<b>hand2</b>, or <b>left_ptr</b>. Appendix B of &ldquo;The X
Window System&rdquo; by Scheifler &amp; Gettys has
illustrations showing what each of these cursors looks like.
If <i>fgColor</i> and <i>bgColor</i> are both specified,
they give the foreground and background colors to use for
the cursor (any of the forms acceptable to
<b>Tk_GetColor</b> may be used). If only <i>fgColor</i> is
specified, then there will be no background color: the
background will be transparent. If no colors are specified,
then the cursor will use black for its foreground color and
white for its background color.</p>

<p style="margin-left:22%; margin-top: 1em">The Macintosh
version of Tk supports all of the X cursors and will also
accept any of the standard Mac cursors including
<b>ibeam</b>, <b>crosshair</b>, <b>watch</b>, <b>plus</b>,
and <b>arrow</b>. In addition, Tk will load Macintosh cursor
resources of the types <b>crsr</b> (color) and <b>CURS</b>
(black and white) by the name of the resource. The
application and all its open dynamic library&rsquo;s
resource files will be searched for the named cursor. If
there are conflicts color cursors will always be loaded in
preference to black and white cursors.</p>

<p style="margin-left:11%;"><b>@</b><i>sourceName maskName
fgColor bgColor</i></p>

<p style="margin-left:22%;">In this form, <i>sourceName</i>
and <i>maskName</i> are the names of files describing
cursors for the cursor&rsquo;s source bits and mask. Each
file must be in standard X11 or X10 cursor format.
<i>FgColor</i> and <i>bgColor</i> indicate the colors to use
for the cursor, in any of the forms acceptable to
<b>Tk_GetColor</b>. This form of the command will not work
on Macintosh or Windows computers.</p>

<p style="margin-left:11%;"><b>@</b><i>sourceName
fgColor</i></p>

<p style="margin-left:22%;">This form is similar to the one
above, except that the source is used as mask also. This
means that the cursor&rsquo;s background is transparent.
This form of the command will not work on Macintosh or
Windows computers.</p>

<p style="margin-left:11%;"><b>@</b><i>sourceName</i></p>

<p style="margin-left:22%;">This form only works on
Windows, and will load a Windows system cursor (<b>.ani</b>
or <b>.cur</b>) from the file specified in
<i>sourceName</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_GetCursor</b>
is identical to <b>Tk_AllocCursorFromObj</b> except that the
description of the cursor is specified with a string instead
of an object. This prevents <b>Tk_GetCursor</b> from caching
the return value, so <b>Tk_GetCursor</b> is less efficient
than <b>Tk_AllocCursorFromObj</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_GetCursorFromObj</b>
returns the token for an existing cursor, given the window
and description used to create the cursor.
<b>Tk_GetCursorFromObj</b> does not actually create the
cursor; the cursor must already have been created with a
previous call to <b>Tk_AllocCursorFromObj</b> or
<b>Tk_GetCursor</b>. The return value is cached in
<i>objPtr</i>, which speeds up future calls to
<b>Tk_GetCursorFromObj</b> with the same <i>objPtr</i> and
<i>tkwin</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_GetCursorFromData</b>
allows cursors to be created from in-memory descriptions of
their source and mask cursors. <i>Source</i> points to
standard cursor data for the cursor&rsquo;s source bits, and
<i>mask</i> points to standard cursor data describing which
pixels of <i>source</i> are to be drawn and which are to be
considered transparent. <i>Width</i> and <i>height</i> give
the dimensions of the cursor, <i>xHot</i> and <i>yHot</i>
indicate the location of the cursor&rsquo;s hot-spot (the
point that is reported when an event occurs), and <i>fg</i>
and <i>bg</i> describe the cursor&rsquo;s foreground and
background colors textually (any of the forms suitable for
<b>Tk_GetColor</b> may be used). Typically, the arguments to
<b>Tk_GetCursorFromData</b> are created by including a
cursor file directly into the source code for a program, as
in the following example:</p>

<p style="margin-left:22%;">Tk_Cursor cursor; <br>
#include &quot;source.cursor&quot; <br>
#include &quot;mask.cursor&quot; <br>
cursor = Tk_GetCursorFromData(interp, tkwin, source_bits,
<br>
mask_bits, source_width, source_height, source_x_hot, <br>
source_y_hot, Tk_GetUid(&quot;red&quot;),
Tk_GetUid(&quot;blue&quot;));</p>

<p style="margin-left:11%; margin-top: 1em">Under normal
conditions <b>Tk_GetCursorFromData</b> will return an
identifier for the requested cursor. If an error occurs in
creating the cursor then <b>None</b> is returned and an
error message will be stored in <i>interp</i>&rsquo;s
result.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_AllocCursorFromObj</b>,
<b>Tk_GetCursor</b>, and <b>Tk_GetCursorFromData</b>
maintain a database of all the cursors they have created.
Whenever possible, a call to <b>Tk_AllocCursorFromObj</b>,
<b>Tk_GetCursor</b>, or <b>Tk_GetCursorFromData</b> will
return an existing cursor rather than creating a new one.
This approach can substantially reduce server overhead, so
the Tk procedures should generally be used in preference to
Xlib procedures like <b>XCreateFontCursor</b> or
<b>XCreatePixmapCursor</b>, which create a new cursor on
each call. The Tk procedures are also more portable than the
lower-level X procedures.</p>

<p style="margin-left:11%; margin-top: 1em">The procedure
<b>Tk_NameOfCursor</b> is roughly the inverse of
<b>Tk_GetCursor</b>. If its <i>cursor</i> argument was
created by <b>Tk_GetCursor</b>, then the return value is the
<i>name</i> argument that was passed to <b>Tk_GetCursor</b>
to create the cursor. If <i>cursor</i> was created by a call
to <b>Tk_GetCursorFromData</b>, or by any other mechanism,
then the return value is a hexadecimal string giving the X
identifier for the cursor. Note: the string returned by
<b>Tk_NameOfCursor</b> is only guaranteed to persist until
the next call to <b>Tk_NameOfCursor</b>. Also, this call is
not portable except for cursors returned by
<b>Tk_GetCursor</b>.</p>

<p style="margin-left:11%; margin-top: 1em">When a cursor
returned by <b>Tk_AllocCursorFromObj</b>,
<b>Tk_GetCursor</b>, or <b>Tk_GetCursorFromData</b> is no
longer needed, <b>Tk_FreeCursorFromObj</b> or
<b>Tk_FreeCursor</b> should be called to release it. For
<b>Tk_FreeCursorFromObj</b> the cursor to release is
specified with the same information used to create it; for
<b>Tk_FreeCursor</b> the cursor to release is specified with
its Tk_Cursor token. There should be exactly one call to
<b>Tk_FreeCursor</b> for each call to
<b>Tk_AllocCursorFromObj</b>, <b>Tk_GetCursor</b>, or
<b>Tk_GetCursorFromData</b>.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In determining
whether an existing cursor can be used to satisfy a new
request, <b>Tk_AllocCursorFromObj</b>, <b>Tk_GetCursor</b>,
and <b>Tk_GetCursorFromData</b> consider only the immediate
values of their arguments. For example, when a file name is
passed to <b>Tk_GetCursor</b>, <b>Tk_GetCursor</b> will
assume it is safe to re-use an existing cursor created from
the same file name: it will not check to see whether the
file itself has changed, or whether the current directory
has changed, thereby causing the name to refer to a
different file. Similarly, <b>Tk_GetCursorFromData</b>
assumes that if the same <i>source</i> pointer is used in
two different calls, then the pointers refer to the same
data; it does not check to see if the actual data values
have changed.</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>

 
<p style="margin-left:11%; margin-top: 1em">cursor</p>
<hr>
</body>
</html>
