<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:16:36 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>SETPGID</title>

</head>
<body>

<h1 align="center">SETPGID</h1>

<a href="#PROLOG">PROLOG</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>PROLOG
<a name="PROLOG"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page is part of the POSIX Programmer&rsquo;s Manual. The
Linux implementation of this interface may differ (consult
the corresponding Linux manual page for details of Linux
behavior), or the interface may not be implemented on
Linux.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">setpgid &minus;
set process group ID for job control</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;unistd.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
setpgid(pid_t</b> <i>pid</i><b>, pid_t</b>
<i>pgid</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>setpgid</i>() function shall either join an existing
process group or create a new process group within the
session of the calling process. The process group ID of a
session leader shall not change. Upon successful completion,
the process group ID of the process with a process ID that
matches <i>pid</i> shall be set to <i>pgid</i>. As a special
case, if <i>pid</i> is 0, the process ID of the calling
process shall be used. Also, if <i>pgid</i> is 0, the
process ID of the indicated process shall be used.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Upon successful
completion, <i>setpgid</i>() shall return 0; otherwise, -1
shall be returned and <i>errno</i> shall be set to indicate
the error.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>setpgid</i>() function shall fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EACCES</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The value of the <i>pid</i> argument matches the process
ID of a child process of the calling process and the child
process has successfully executed one of the <i>exec</i>
functions.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EINVAL</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The value of the <i>pgid</i> argument is less than 0, or
is not a value supported by the implementation.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EPERM</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The process indicated by the <i>pid</i> argument is a
session leader.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EPERM</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The value of the <i>pid</i> argument matches the process
ID of a child process of the calling process and the child
process is not in the same session as the calling
process.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EPERM</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The value of the <i>pgid</i> argument is valid but does
not match the process ID of the process indicated by the
<i>pid</i> argument and there is no process with a process
group ID that matches the value of the <i>pgid</i> argument
in the same session as the calling process.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ESRCH</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The value of the <i>pid</i> argument does not match the
process ID of the calling process or of a child process of
the calling process.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>setpgid</i>() function shall group processes together for
the purpose of signaling, placement in foreground or
background, and other job control actions.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>setpgid</i>() function is similar to the <i>setpgrp</i>()
function of 4.2 BSD, except that 4.2 BSD allowed the
specified new process group to assume any value. This
presents certain security problems and is more flexible than
necessary to support job control.</p>

<p style="margin-left:11%; margin-top: 1em">To provide
tighter security, <i>setpgid</i>() only allows the calling
process to join a process group already in use inside its
session or create a new process group whose process group ID
was equal to its process ID.</p>

<p style="margin-left:11%; margin-top: 1em">When a job
control shell spawns a new job, the processes in the job
must be placed into a new process group via
<i>setpgid</i>(). There are two timing constraints involved
in this action:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="2%"></td>
<td width="83%">


<p style="margin-top: 1em">The new process must be placed
in the new process group before the appropriate program is
launched via one of the <i>exec</i> functions.</p></td></tr>
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">


<p>2.</p></td>
<td width="2%"></td>
<td width="83%">


<p>The new process must be placed in the new process group
before the shell can correctly send signals to the new
process group.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">To address
these constraints, the following actions are performed. The
new processes call <i>setpgid</i>() to alter their own
process groups after <i>fork</i>() but before <i>exec</i>.
This satisfies the first constraint. Under 4.3 BSD, the
second constraint is satisfied by the synchronization
property of <i>vfork</i>(); that is, the shell is suspended
until the child has completed the <i>exec</i>, thus ensuring
that the child has completed the <i>setpgid</i>(). A new
version of <i>fork</i>() with this same synchronization
property was considered, but it was decided instead to
merely allow the parent shell process to adjust the process
group of its child processes via <i>setpgid</i>(). Both
timing constraints are now satisfied by having both the
parent shell and the child attempt to adjust the process
group of the child process; it does not matter which
succeeds first.</p>

<p style="margin-left:11%; margin-top: 1em">Since it would
be confusing to an application to have its process group
change after it began executing (that is, after
<i>exec</i>), and because the child process would already
have adjusted its process group before this, the [EACCES]
error was added to disallow this.</p>

<p style="margin-left:11%; margin-top: 1em">One non-obvious
use of <i>setpgid</i>() is to allow a job control shell to
return itself to its original process group (the one in
effect when the job control shell was executed). A job
control shell does this before returning control back to its
parent when it is terminating or suspending itself as a way
of restoring its job control &quot;state&quot; back to what
its parent would expect. (Note that the original process
group of the job control shell typically matches the process
group of its parent, but this is not necessarily always the
case.)</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>exec</i>(),
<i>getpgrp</i>(), <i>setsid</i>(), <i>tcsetpgrp</i>(), the
Base Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001,
<i>&lt;sys/types.h&gt;</i>, <i>&lt;unistd.h&gt;</i></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
