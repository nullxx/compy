<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:59:04 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERLEBCDIC</title>

</head>
<body>

<h1 align="center">PERLEBCDIC</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#COMMON CHARACTER CODE SETS">COMMON CHARACTER CODE SETS</a><br>
<a href="#SINGLE OCTET TABLES">SINGLE OCTET TABLES</a><br>
<a href="#IDENTIFYING CHARACTER CODE SETS">IDENTIFYING CHARACTER CODE SETS</a><br>
<a href="#CONVERSIONS">CONVERSIONS</a><br>
<a href="#OPERATOR DIFFERENCES">OPERATOR DIFFERENCES</a><br>
<a href="#FUNCTION DIFFERENCES">FUNCTION DIFFERENCES</a><br>
<a href="#REGULAR EXPRESSION DIFFERENCES">REGULAR EXPRESSION DIFFERENCES</a><br>
<a href="#SOCKETS">SOCKETS</a><br>
<a href="#SORTING">SORTING</a><br>
<a href="#TRANSFORMATION FORMATS">TRANSFORMATION FORMATS</a><br>
<a href="#Hashing order and checksums">Hashing order and checksums</a><br>
<a href="#I18N AND L10N">I18N AND L10N</a><br>
<a href="#MULTI-OCTET CHARACTER SETS">MULTI-OCTET CHARACTER SETS</a><br>
<a href="#OS ISSUES">OS ISSUES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#REFERENCES">REFERENCES</a><br>
<a href="#HISTORY">HISTORY</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perlebcdic
&minus; Considerations for running Perl on EBCDIC
platforms</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An exploration
of some of the issues facing Perl programmers on
<small>EBCDIC</small> based computers. We do not cover
localization, internationalization, or multi-byte character
set issues other than some discussion of
<small>UTF&minus;8</small> and UTF-EBCDIC.</p>

<p style="margin-left:11%; margin-top: 1em">Portions that
are still incomplete are marked with <small>XXX</small>
.</p>

<p style="margin-left:11%; margin-top: 1em">Perl used to
work on <small>EBCDIC</small> machines, but there are now
areas of the code where it doesn&rsquo;t. If you want to use
Perl on an <small>EBCDIC</small> machine, please let us know
by sending mail to perlbug@perl.org</p>

<h2>COMMON CHARACTER CODE SETS
<a name="COMMON CHARACTER CODE SETS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><small>ASCII</small></b>
<br>
The American Standard Code for Information Interchange (
<small>ASCII</small> or US-ASCII) is a set of integers
running from 0 to 127 (decimal) that imply character
interpretation by the display and other systems of
computers. The range 0..127 can be covered by setting the
bits in a 7&minus;bit binary digit, hence the set is
sometimes referred to as &quot;7&minus;bit
<small>ASCII</small> &quot;. <small>ASCII</small> was
described by the American National Standards Institute
document <small>ANSI</small> X3.4&minus;1986. It was also
described by <small>ISO</small> 646:1991 (with localization
for currency symbols). The full <small>ASCII</small> set is
given in the table below as the first 128 elements.
Languages that can be written adequately with the characters
in <small>ASCII</small> include English, Hawaiian,
Indonesian, Swahili and some Native American languages.</p>

<p style="margin-left:11%; margin-top: 1em">There are many
character sets that extend the range of integers from
0..2**7&minus;1 up to 2**8&minus;1, or 8 bit bytes (octets
if you prefer). One common one is the <small>ISO</small>
8859&minus;1 character set.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>ISO</small>
8859</b> <br>
The <small>ISO</small> 8859&minus;$n are a collection of
character code sets from the International Organization for
Standardization ( <small>ISO</small> ) each of which adds
characters to the <small>ASCII</small> set that are
typically found in European languages many of which are
based on the Roman, or Latin, alphabet.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Latin 1 (
<small>ISO</small> 8859&minus;1)</b> <br>
A particular 8&minus;bit extension to <small>ASCII</small>
that includes grave and acute accented Latin characters.
Languages that can employ <small>ISO</small> 8859&minus;1
include all the languages covered by <small>ASCII</small> as
well as Afrikaans, Albanian, Basque, Catalan, Danish,
Faroese, Finnish, Norwegian, Portuguese, Spanish, and
Swedish. Dutch is covered albeit without the ij ligature.
French is covered too but without the oe ligature. German
can use <small>ISO</small> 8859&minus;1 but must do so
without German-style quotation marks. This set is based on
Western European extensions to <small>ASCII</small> and is
commonly encountered in world wide web work. In
<small>IBM</small> character code set identification
terminology <small>ISO</small> 8859&minus;1 is also known as
<small>CCSID</small> 819 (or sometimes 0819 or even
00819).</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>EBCDIC</small></b>
<br>
The Extended Binary Coded Decimal Interchange Code refers to
a large collection of single&minus; and multi-byte coded
character sets that are different from <small>ASCII</small>
or <small>ISO</small> 8859&minus;1 and are all slightly
different from each other; they typically run on host
computers. The <small>EBCDIC</small> encodings derive from
8&minus;bit byte extensions of Hollerith punched card
encodings. The layout on the cards was such that high bits
were set for the upper and lower case alphabet characters
[a&minus;z] and [A&minus;Z], but there were gaps within each
Latin alphabet range.</p>

<p style="margin-left:11%; margin-top: 1em">Some <small>IBM
EBCDIC</small> character sets may be known by character code
set identification numbers ( <small>CCSID</small> numbers)
or code page numbers.</p>

<p style="margin-left:11%; margin-top: 1em">Perl can be
compiled on platforms that run any of three commonly used
<small>EBCDIC</small> character sets, listed below.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The 13
variant characters</b> <br>
Among <small>IBM EBCDIC</small> character code sets there
are 13 characters that are often mapped to different integer
values. Those characters are known as the 13
&quot;variant&quot; characters and are:</p>

<pre style="margin-left:11%; margin-top: 1em">    \ [ ] { } ^ ~ ! # | $ @ `</pre>


<p style="margin-left:11%; margin-top: 1em">When Perl is
compiled for a platform, it looks at some of these
characters to guess which <small>EBCDIC</small> character
set the platform uses, and adapts itself accordingly to that
platform. If the platform uses a character set that is not
one of the three Perl knows about, Perl will either fail to
compile, or mistakenly and silently choose one of the three.
They are:</p>

<p style="margin-left:11%; margin-top: 1em"><b>0037</b>
<br>
Character code set <small>ID</small> 0037 is a mapping of
the <small>ASCII</small> plus Latin&minus;1 characters (i.e.
<small>ISO</small> 8859&minus;1) to an <small>EBCDIC</small>
set. 0037 is used in North American English locales on the
<small>OS/400</small> operating system that runs on
<small>AS/400</small> computers. <small>CCSID</small> 0037
differs from <small>ISO</small> 8859&minus;1 in 237 places,
in other words they agree on only 19 code point values.</p>

<p style="margin-left:11%; margin-top: 1em"><b>1047</b>
<br>
Character code set <small>ID</small> 1047 is also a mapping
of the <small>ASCII</small> plus Latin&minus;1 characters
(i.e. <small>ISO</small> 8859&minus;1) to an
<small>EBCDIC</small> set. 1047 is used under Unix System
Services for <small>OS/390</small> or z/OS, and OpenEdition
for <small>VM/ESA</small> . <small>CCSID</small> 1047
differs from <small>CCSID</small> 0037 in eight places.</p>


<p style="margin-left:11%; margin-top: 1em"><b>POSIX-BC</b>
<br>
The <small>EBCDIC</small> code page in use on Siemens&rsquo;
<small>BS2000</small> system is distinct from 1047 and 0037.
It is identified below as the POSIX-BC set.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unicode code
points versus <small>EBCDIC</small> code points</b> <br>
In Unicode terminology a <i>code point</i> is the number
assigned to a character: for example, in
<small>EBCDIC</small> the character &quot;A&quot; is usually
assigned the number 193. In Unicode the character
&quot;A&quot; is assigned the number 65. This causes a
problem with the semantics of the pack/unpack &quot;U&quot;,
which are supposed to pack Unicode code points to characters
and back to numbers. The problem is: which code points to
use for code points less than 256? (for 256 and over
there&rsquo;s no problem: Unicode code points are used) In
<small>EBCDIC</small> , for the low 256 the
<small>EBCDIC</small> code points are used. This means that
the equivalences</p>

<pre style="margin-left:11%; margin-top: 1em">    pack(&quot;U&quot;, ord($character)) eq $character
    unpack(&quot;U&quot;, $character) == ord $character</pre>


<p style="margin-left:11%; margin-top: 1em">will hold. (If
Unicode code points were applied consistently over all the
possible code points, pack(&quot;U&quot;,ord(&quot;A&quot;))
would in <small>EBCDIC</small> equal <i>A with acute</i> or
chr(101), and unpack(&quot;U&quot;, &quot;A&quot;) would
equal 65, or <i>non-breaking space</i>, not 193, or ord
&quot;A&quot;.)</p>

<p style="margin-left:11%; margin-top: 1em"><b>Remaining
Perl Unicode problems in <small>EBCDIC</small></b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Many of the remaining problems seem to be related to
case-insensitive matching</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The extensions Unicode::Collate and Unicode::Normalized
are not supported under <small>EBCDIC</small> , likewise for
the encoding pragma.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Unicode and
<small>UTF</small></b> <small><br>
UTF</small> stands for <tt>&quot;Unicode Transformation
Format&quot;</tt>. <small>UTF&minus;8</small> is an encoding
of Unicode into a sequence of 8&minus;bit byte chunks, based
on <small>ASCII</small> and Latin&minus;1. The length of a
sequence required to represent a Unicode code point depends
on the ordinal number of that code point, with larger
numbers requiring more bytes. UTF-EBCDIC is like
<small>UTF&minus;8</small> , but based on
<small>EBCDIC</small> .</p>

<p style="margin-left:11%; margin-top: 1em">You may see the
term <tt>&quot;invariant&quot;</tt> character or code point.
This simply means that the character has the same numeric
value when encoded as when not. (Note that this is a very
different concept from &quot;The 13 variant characters&quot;
mentioned above.) For example, the ordinal value of
&rsquo;A&rsquo; is 193 in most <small>EBCDIC</small> code
pages, and also is 193 when encoded in UTF-EBCDIC. All
variant code points occupy at least two bytes when encoded.
In <small>UTF&minus;8</small> , the code points
corresponding to the lowest 128 ordinal numbers (0 &minus;
127: the <small>ASCII</small> characters) are invariant. In
UTF-EBCDIC, there are 160 invariant characters. (If you
care, the <small>EBCDIC</small> invariants are those
characters which have <small>ASCII</small> equivalents, plus
those that correspond to the C1 controls (80..9f on
<small>ASCII</small> platforms).)</p>

<p style="margin-left:11%; margin-top: 1em">A string
encoded in UTF-EBCDIC may be longer (but never shorter) than
one encoded in <small>UTF&minus;8</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>Using
Encode</b> <br>
Starting from Perl 5.8 you can use the standard new module
Encode to translate from <small>EBCDIC</small> to
Latin&minus;1 code points. Encode knows about more
<small>EBCDIC</small> character sets than Perl can currently
be compiled to run on.</p>

<pre style="margin-left:11%; margin-top: 1em">   use Encode 'from_to';
   my %ebcdic = ( 176 =&gt; 'cp37', 95 =&gt; 'cp1047', 106 =&gt; 'posix&minus;bc' );
   # $a is in EBCDIC code points
   from_to($a, $ebcdic{ord '^'}, 'latin1');
   # $a is ISO 8859&minus;1 code points</pre>


<p style="margin-left:11%; margin-top: 1em">and from
Latin&minus;1 code points to <small>EBCDIC</small> code
points</p>

<pre style="margin-left:11%; margin-top: 1em">   use Encode 'from_to';
   my %ebcdic = ( 176 =&gt; 'cp37', 95 =&gt; 'cp1047', 106 =&gt; 'posix&minus;bc' );
   # $a is ISO 8859&minus;1 code points
   from_to($a, 'latin1', $ebcdic{ord '^'});
   # $a is in EBCDIC code points</pre>


<p style="margin-left:11%; margin-top: 1em">For doing I/O
it is suggested that you use the autotranslating features of
PerlIO, see perluniintro.</p>

<p style="margin-left:11%; margin-top: 1em">Since version
5.8 Perl uses the new PerlIO I/O library. This enables you
to use different encodings per <small>IO</small> channel.
For example you may use</p>

<pre style="margin-left:11%; margin-top: 1em">    use Encode;
    open($f, &quot;&gt;:encoding(ascii)&quot;, &quot;test.ascii&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(cp37)&quot;, &quot;test.ebcdic&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(latin1)&quot;, &quot;test.latin1&quot;);
    print $f &quot;Hello World!\n&quot;;
    open($f, &quot;&gt;:encoding(utf8)&quot;, &quot;test.utf8&quot;);
    print $f &quot;Hello World!\n&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">to get four
files containing &quot;Hello World!\n&quot; in
<small>ASCII</small> , <small>CP</small> 0037
<small>EBCDIC</small> , <small>ISO</small> 8859&minus;1
(Latin&minus;1) (in this example identical to
<small>ASCII</small> since only <small>ASCII</small>
characters were printed), and UTF-EBCDIC (in this example
identical to normal <small>EBCDIC</small> since only
characters that don&rsquo;t differ between
<small>EBCDIC</small> and UTF-EBCDIC were printed). See the
documentation of Encode::PerlIO for details.</p>

<p style="margin-left:11%; margin-top: 1em">As the PerlIO
layer uses raw <small>IO</small> (bytes) internally, all
this totally ignores things like the type of your filesystem
( <small>ASCII</small> or <small>EBCDIC</small> ).</p>

<h2>SINGLE OCTET TABLES
<a name="SINGLE OCTET TABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
tables list the <small>ASCII</small> and Latin 1 ordered
sets including the subsets: C0 controls (0..31),
<small>ASCII</small> graphics (32..7e), delete (7f), C1
controls (80..9f), and Latin&minus;1 (a.k.a.
<small>ISO</small> 8859&minus;1) (a0..ff). In the table
non-printing control character names as well as the Latin 1
extensions to <small>ASCII</small> have been labelled with
character names roughly corresponding to <i>The Unicode
Standard, Version 3.0</i> albeit with substitutions such as
s/LATIN// and s/VULGAR// in all cases, s/CAPITAL
<small>LETTER//</small> in some cases, and s/SMALL
<small>LETTER</small> ([A&minus;Z])/\l$1/ in some other
cases. The &quot;names&quot; of the controls listed here are
the Unicode Version 1 names, except for the few that
don&rsquo;t have names, in which case the names in the
Wikipedia article were used
(&lt;http://en.wikipedia.org/wiki/C0_and_C1_control_codes&gt;).
The differences between the 0037 and 1047 sets are flagged
with ***. The differences between the 1047 and POSIX-BC sets
are flagged with ###. All <i>ord()</i> numbers listed are
decimal. If you would rather see this table listing octal
values then run the table (that is, the pod version of this
document since this recipe may not work with a
pod2_other_format translation) through: <br>
recipe 0</p>

<pre style="margin-left:11%; margin-top: 1em">    perl &minus;ne 'if(/(.{43})(\d+)\s+(\d+)\s+(\d+)\s+(\d+)/)' \
     &minus;e '{printf(&quot;%s%&minus;9.03o%&minus;9.03o%&minus;9.03o%.03o\n&quot;,$1,$2,$3,$4,$5)}' \
     perlebcdic.pod</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
retain the UTF-x code points then in script form you might
want to write: <br>
recipe 1</p>

<pre style="margin-left:11%; margin-top: 1em"> open(FH,&quot;&lt;perlebcdic.pod&quot;) or die &quot;Could not open perlebcdic.pod: $!&quot;;
 while (&lt;FH&gt;) {
     if (/(.{43})(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\.?(\d*)\s+(\d+)\.?(\d*)/)
     {
         if ($7 ne '' &amp;&amp; $9 ne '') {
             printf(
                &quot;%s%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;3o.%&minus;5o%&minus;3o.%.03o\n&quot;,
                                            $1,$2,$3,$4,$5,$6,$7,$8,$9);
         }
         elsif ($7 ne '') {
             printf(&quot;%s%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;3o.%&minus;5o%.03o\n&quot;,
                                           $1,$2,$3,$4,$5,$6,$7,$8);
         }
         else {
             printf(&quot;%s%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;9.03o%&minus;9.03o%.03o\n&quot;,
                                                $1,$2,$3,$4,$5,$6,$8);
         }
     }
 }</pre>


<p style="margin-left:11%; margin-top: 1em">If you would
rather see this table listing hexadecimal values then run
the table through: <br>
recipe 2</p>

<pre style="margin-left:11%; margin-top: 1em">    perl &minus;ne 'if(/(.{43})(\d+)\s+(\d+)\s+(\d+)\s+(\d+)/)' \
     &minus;e '{printf(&quot;%s%&minus;9.02X%&minus;9.02X%&minus;9.02X%.02X\n&quot;,$1,$2,$3,$4,$5)}' \
     perlebcdic.pod</pre>


<p style="margin-left:11%; margin-top: 1em">Or, in order to
retain the UTF-x code points in hexadecimal: <br>
recipe 3</p>

<pre style="margin-left:11%; margin-top: 1em"> open(FH,&quot;&lt;perlebcdic.pod&quot;) or die &quot;Could not open perlebcdic.pod: $!&quot;;
 while (&lt;FH&gt;) {
     if (/(.{43})(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\s+(\d+)\.?(\d*)\s+(\d+)\.?(\d*)/)
     {
         if ($7 ne '' &amp;&amp; $9 ne '') {
             printf(
                &quot;%s%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;2X.%&minus;6.02X%02X.%02X\n&quot;,
                                           $1,$2,$3,$4,$5,$6,$7,$8,$9);
         }
         elsif ($7 ne '') {
             printf(&quot;%s%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;2X.%&minus;6.02X%02X\n&quot;,
                                              $1,$2,$3,$4,$5,$6,$7,$8);
         }
         else {
             printf(&quot;%s%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;9.02X%&minus;9.02X%02X\n&quot;,
                                                  $1,$2,$3,$4,$5,$6,$8);
         }
     }
 }
                                      ISO 8859&minus;1  CCSID    CCSID                    CCSID 1047
 chr                                  CCSID 0819  0037     1047    POSIX&minus;BC  UTF&minus;8  UTF&minus;EBCDIC
 &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
 &lt;NULL&gt;                                    0        0        0        0        0        0
 &lt;START OF HEADING&gt;                        1        1        1        1        1        1
 &lt;START OF TEXT&gt;                           2        2        2        2        2        2
 &lt;END OF TEXT&gt;                             3        3        3        3        3        3
 &lt;END OF TRANSMISSION&gt;                     4        55       55       55       4        55
 &lt;ENQUIRY&gt;                                 5        45       45       45       5        45
 &lt;ACKNOWLEDGE&gt;                             6        46       46       46       6        46
 &lt;BELL&gt;                                    7        47       47       47       7        47
 &lt;BACKSPACE&gt;                               8        22       22       22       8        22
 &lt;HORIZONTAL TABULATION&gt;                   9        5        5        5        9        5
 &lt;LINE FEED&gt;                               10       37       21       21       10       21       ***
 &lt;VERTICAL TABULATION&gt;                     11       11       11       11       11       11
 &lt;FORM FEED&gt;                               12       12       12       12       12       12
 &lt;CARRIAGE RETURN&gt;                         13       13       13       13       13       13
 &lt;SHIFT OUT&gt;                               14       14       14       14       14       14
 &lt;SHIFT IN&gt;                                15       15       15       15       15       15
 &lt;DATA LINK ESCAPE&gt;                        16       16       16       16       16       16
 &lt;DEVICE CONTROL ONE&gt;                      17       17       17       17       17       17
 &lt;DEVICE CONTROL TWO&gt;                      18       18       18       18       18       18
 &lt;DEVICE CONTROL THREE&gt;                    19       19       19       19       19       19
 &lt;DEVICE CONTROL FOUR&gt;                     20       60       60       60       20       60
 &lt;NEGATIVE ACKNOWLEDGE&gt;                    21       61       61       61       21       61
 &lt;SYNCHRONOUS IDLE&gt;                        22       50       50       50       22       50
 &lt;END OF TRANSMISSION BLOCK&gt;               23       38       38       38       23       38
 &lt;CANCEL&gt;                                  24       24       24       24       24       24
 &lt;END OF MEDIUM&gt;                           25       25       25       25       25       25
 &lt;SUBSTITUTE&gt;                              26       63       63       63       26       63
 &lt;ESCAPE&gt;                                  27       39       39       39       27       39
 &lt;FILE SEPARATOR&gt;                          28       28       28       28       28       28
 &lt;GROUP SEPARATOR&gt;                         29       29       29       29       29       29
 &lt;RECORD SEPARATOR&gt;                        30       30       30       30       30       30
 &lt;UNIT SEPARATOR&gt;                          31       31       31       31       31       31
 &lt;SPACE&gt;                                   32       64       64       64       32       64
 !                                         33       90       90       90       33       90
 &quot;                                         34       127      127      127      34       127
 #                                         35       123      123      123      35       123
 $                                         36       91       91       91       36       91
 %                                         37       108      108      108      37       108
 &amp;                                         38       80       80       80       38       80
 '                                         39       125      125      125      39       125
 (                                         40       77       77       77       40       77
 )                                         41       93       93       93       41       93
 *                                         42       92       92       92       42       92
 +                                         43       78       78       78       43       78
 ,                                         44       107      107      107      44       107
 &minus;                                         45       96       96       96       45       96
 .                                         46       75       75       75       46       75
 /                                         47       97       97       97       47       97
 0                                         48       240      240      240      48       240
 1                                         49       241      241      241      49       241
 2                                         50       242      242      242      50       242
 3                                         51       243      243      243      51       243
 4                                         52       244      244      244      52       244
 5                                         53       245      245      245      53       245
 6                                         54       246      246      246      54       246
 7                                         55       247      247      247      55       247
 8                                         56       248      248      248      56       248
 9                                         57       249      249      249      57       249
 :                                         58       122      122      122      58       122
 ;                                         59       94       94       94       59       94
 &lt;                                         60       76       76       76       60       76
 =                                         61       126      126      126      61       126
 &gt;                                         62       110      110      110      62       110
 ?                                         63       111      111      111      63       111
 @                                         64       124      124      124      64       124
 A                                         65       193      193      193      65       193
 B                                         66       194      194      194      66       194
 C                                         67       195      195      195      67       195
 D                                         68       196      196      196      68       196
 E                                         69       197      197      197      69       197
 F                                         70       198      198      198      70       198
 G                                         71       199      199      199      71       199
 H                                         72       200      200      200      72       200
 I                                         73       201      201      201      73       201
 J                                         74       209      209      209      74       209
 K                                         75       210      210      210      75       210
 L                                         76       211      211      211      76       211
 M                                         77       212      212      212      77       212
 N                                         78       213      213      213      78       213
 O                                         79       214      214      214      79       214
 P                                         80       215      215      215      80       215
 Q                                         81       216      216      216      81       216
 R                                         82       217      217      217      82       217
 S                                         83       226      226      226      83       226
 T                                         84       227      227      227      84       227
 U                                         85       228      228      228      85       228
 V                                         86       229      229      229      86       229
 W                                         87       230      230      230      87       230
 X                                         88       231      231      231      88       231
 Y                                         89       232      232      232      89       232
 Z                                         90       233      233      233      90       233
 [                                         91       186      173      187      91       173      *** ###
 \                                         92       224      224      188      92       224      ###
 ]                                         93       187      189      189      93       189      ***
 ^                                         94       176      95       106      94       95       *** ###
 _                                         95       109      109      109      95       109
 `                                         96       121      121      74       96       121      ###
 a                                         97       129      129      129      97       129
 b                                         98       130      130      130      98       130
 c                                         99       131      131      131      99       131
 d                                         100      132      132      132      100      132
 e                                         101      133      133      133      101      133
 f                                         102      134      134      134      102      134
 g                                         103      135      135      135      103      135
 h                                         104      136      136      136      104      136
 i                                         105      137      137      137      105      137
 j                                         106      145      145      145      106      145
 k                                         107      146      146      146      107      146
 l                                         108      147      147      147      108      147
 m                                         109      148      148      148      109      148
 n                                         110      149      149      149      110      149
 o                                         111      150      150      150      111      150
 p                                         112      151      151      151      112      151
 q                                         113      152      152      152      113      152
 r                                         114      153      153      153      114      153
 s                                         115      162      162      162      115      162
 t                                         116      163      163      163      116      163
 u                                         117      164      164      164      117      164
 v                                         118      165      165      165      118      165
 w                                         119      166      166      166      119      166
 x                                         120      167      167      167      120      167
 y                                         121      168      168      168      121      168
 z                                         122      169      169      169      122      169
 {                                         123      192      192      251      123      192      ###
 |                                         124      79       79       79       124      79
 }                                         125      208      208      253      125      208      ###
 ~                                         126      161      161      255      126      161      ###
 &lt;DELETE&gt;                                  127      7        7        7        127      7
 &lt;PADDING CHARACTER&gt;                       128      32       32       32       194.128  32
 &lt;HIGH OCTET PRESET&gt;                       129      33       33       33       194.129  33
 &lt;BREAK PERMITTED HERE&gt;                    130      34       34       34       194.130  34
 &lt;NO BREAK HERE&gt;                           131      35       35       35       194.131  35
 &lt;INDEX&gt;                                   132      36       36       36       194.132  36
 &lt;NEXT LINE&gt;                               133      21       37       37       194.133  37       ***
 &lt;START OF SELECTED AREA&gt;                  134      6        6        6        194.134  6
 &lt;END OF SELECTED AREA&gt;                    135      23       23       23       194.135  23
 &lt;CHARACTER TABULATION SET&gt;                136      40       40       40       194.136  40
 &lt;CHARACTER TABULATION WITH JUSTIFICATION&gt; 137      41       41       41       194.137  41
 &lt;LINE TABULATION SET&gt;                     138      42       42       42       194.138  42
 &lt;PARTIAL LINE FORWARD&gt;                    139      43       43       43       194.139  43
 &lt;PARTIAL LINE BACKWARD&gt;                   140      44       44       44       194.140  44
 &lt;REVERSE LINE FEED&gt;                       141      9        9        9        194.141  9
 &lt;SINGLE SHIFT TWO&gt;                        142      10       10       10       194.142  10
 &lt;SINGLE SHIFT THREE&gt;                      143      27       27       27       194.143  27
 &lt;DEVICE CONTROL STRING&gt;                   144      48       48       48       194.144  48
 &lt;PRIVATE USE ONE&gt;                         145      49       49       49       194.145  49
 &lt;PRIVATE USE TWO&gt;                         146      26       26       26       194.146  26
 &lt;SET TRANSMIT STATE&gt;                      147      51       51       51       194.147  51
 &lt;CANCEL CHARACTER&gt;                        148      52       52       52       194.148  52
 &lt;MESSAGE WAITING&gt;                         149      53       53       53       194.149  53
 &lt;START OF GUARDED AREA&gt;                   150      54       54       54       194.150  54
 &lt;END OF GUARDED AREA&gt;                     151      8        8        8        194.151  8
 &lt;START OF STRING&gt;                         152      56       56       56       194.152  56
 &lt;SINGLE GRAPHIC CHARACTER INTRODUCER&gt;     153      57       57       57       194.153  57
 &lt;SINGLE CHARACTER INTRODUCER&gt;             154      58       58       58       194.154  58
 &lt;CONTROL SEQUENCE INTRODUCER&gt;             155      59       59       59       194.155  59
 &lt;STRING TERMINATOR&gt;                       156      4        4        4        194.156  4
 &lt;OPERATING SYSTEM COMMAND&gt;                157      20       20       20       194.157  20
 &lt;PRIVACY MESSAGE&gt;                         158      62       62       62       194.158  62
 &lt;APPLICATION PROGRAM COMMAND&gt;             159      255      255      95       194.159  255      ###
 &lt;NON&minus;BREAKING SPACE&gt;                      160      65       65       65       194.160  128.65
 &lt;INVERTED EXCLAMATION MARK&gt;               161      170      170      170      194.161  128.66
 &lt;CENT SIGN&gt;                               162      74       74       176      194.162  128.67   ###
 &lt;POUND SIGN&gt;                              163      177      177      177      194.163  128.68
 &lt;CURRENCY SIGN&gt;                           164      159      159      159      194.164  128.69
 &lt;YEN SIGN&gt;                                165      178      178      178      194.165  128.70
 &lt;BROKEN BAR&gt;                              166      106      106      208      194.166  128.71   ###
 &lt;SECTION SIGN&gt;                            167      181      181      181      194.167  128.72
 &lt;DIAERESIS&gt;                               168      189      187      121      194.168  128.73   *** ###
 &lt;COPYRIGHT SIGN&gt;                          169      180      180      180      194.169  128.74
 &lt;FEMININE ORDINAL INDICATOR&gt;              170      154      154      154      194.170  128.81
 &lt;LEFT POINTING GUILLEMET&gt;                 171      138      138      138      194.171  128.82
 &lt;NOT SIGN&gt;                                172      95       176      186      194.172  128.83   *** ###
 &lt;SOFT HYPHEN&gt;                             173      202      202      202      194.173  128.84
 &lt;REGISTERED TRADE MARK SIGN&gt;              174      175      175      175      194.174  128.85
 &lt;MACRON&gt;                                  175      188      188      161      194.175  128.86   ###
 &lt;DEGREE SIGN&gt;                             176      144      144      144      194.176  128.87
 &lt;PLUS&minus;OR&minus;MINUS SIGN&gt;                      177      143      143      143      194.177  128.88
 &lt;SUPERSCRIPT TWO&gt;                         178      234      234      234      194.178  128.89
 &lt;SUPERSCRIPT THREE&gt;                       179      250      250      250      194.179  128.98
 &lt;ACUTE ACCENT&gt;                            180      190      190      190      194.180  128.99
 &lt;MICRO SIGN&gt;                              181      160      160      160      194.181  128.100
 &lt;PARAGRAPH SIGN&gt;                          182      182      182      182      194.182  128.101
 &lt;MIDDLE DOT&gt;                              183      179      179      179      194.183  128.102
 &lt;CEDILLA&gt;                                 184      157      157      157      194.184  128.103
 &lt;SUPERSCRIPT ONE&gt;                         185      218      218      218      194.185  128.104
 &lt;MASC. ORDINAL INDICATOR&gt;                 186      155      155      155      194.186  128.105
 &lt;RIGHT POINTING GUILLEMET&gt;                187      139      139      139      194.187  128.106
 &lt;FRACTION ONE QUARTER&gt;                    188      183      183      183      194.188  128.112
 &lt;FRACTION ONE HALF&gt;                       189      184      184      184      194.189  128.113
 &lt;FRACTION THREE QUARTERS&gt;                 190      185      185      185      194.190  128.114
 &lt;INVERTED QUESTION MARK&gt;                  191      171      171      171      194.191  128.115
 &lt;A WITH GRAVE&gt;                            192      100      100      100      195.128  138.65
 &lt;A WITH ACUTE&gt;                            193      101      101      101      195.129  138.66
 &lt;A WITH CIRCUMFLEX&gt;                       194      98       98       98       195.130  138.67
 &lt;A WITH TILDE&gt;                            195      102      102      102      195.131  138.68
 &lt;A WITH DIAERESIS&gt;                        196      99       99       99       195.132  138.69
 &lt;A WITH RING ABOVE&gt;                       197      103      103      103      195.133  138.70
 &lt;CAPITAL LIGATURE AE&gt;                     198      158      158      158      195.134  138.71
 &lt;C WITH CEDILLA&gt;                          199      104      104      104      195.135  138.72
 &lt;E WITH GRAVE&gt;                            200      116      116      116      195.136  138.73
 &lt;E WITH ACUTE&gt;                            201      113      113      113      195.137  138.74
 &lt;E WITH CIRCUMFLEX&gt;                       202      114      114      114      195.138  138.81
 &lt;E WITH DIAERESIS&gt;                        203      115      115      115      195.139  138.82
 &lt;I WITH GRAVE&gt;                            204      120      120      120      195.140  138.83
 &lt;I WITH ACUTE&gt;                            205      117      117      117      195.141  138.84
 &lt;I WITH CIRCUMFLEX&gt;                       206      118      118      118      195.142  138.85
 &lt;I WITH DIAERESIS&gt;                        207      119      119      119      195.143  138.86
 &lt;CAPITAL LETTER ETH&gt;                      208      172      172      172      195.144  138.87
 &lt;N WITH TILDE&gt;                            209      105      105      105      195.145  138.88
 &lt;O WITH GRAVE&gt;                            210      237      237      237      195.146  138.89
 &lt;O WITH ACUTE&gt;                            211      238      238      238      195.147  138.98
 &lt;O WITH CIRCUMFLEX&gt;                       212      235      235      235      195.148  138.99
 &lt;O WITH TILDE&gt;                            213      239      239      239      195.149  138.100
 &lt;O WITH DIAERESIS&gt;                        214      236      236      236      195.150  138.101
 &lt;MULTIPLICATION SIGN&gt;                     215      191      191      191      195.151  138.102
 &lt;O WITH STROKE&gt;                           216      128      128      128      195.152  138.103
 &lt;U WITH GRAVE&gt;                            217      253      253      224      195.153  138.104  ###
 &lt;U WITH ACUTE&gt;                            218      254      254      254      195.154  138.105
 &lt;U WITH CIRCUMFLEX&gt;                       219      251      251      221      195.155  138.106  ###
 &lt;U WITH DIAERESIS&gt;                        220      252      252      252      195.156  138.112
 &lt;Y WITH ACUTE&gt;                            221      173      186      173      195.157  138.113  *** ###
 &lt;CAPITAL LETTER THORN&gt;                    222      174      174      174      195.158  138.114
 &lt;SMALL LETTER SHARP S&gt;                    223      89       89       89       195.159  138.115
 &lt;a WITH GRAVE&gt;                            224      68       68       68       195.160  139.65
 &lt;a WITH ACUTE&gt;                            225      69       69       69       195.161  139.66
 &lt;a WITH CIRCUMFLEX&gt;                       226      66       66       66       195.162  139.67
 &lt;a WITH TILDE&gt;                            227      70       70       70       195.163  139.68
 &lt;a WITH DIAERESIS&gt;                        228      67       67       67       195.164  139.69
 &lt;a WITH RING ABOVE&gt;                       229      71       71       71       195.165  139.70
 &lt;SMALL LIGATURE ae&gt;                       230      156      156      156      195.166  139.71
 &lt;c WITH CEDILLA&gt;                          231      72       72       72       195.167  139.72
 &lt;e WITH GRAVE&gt;                            232      84       84       84       195.168  139.73
 &lt;e WITH ACUTE&gt;                            233      81       81       81       195.169  139.74
 &lt;e WITH CIRCUMFLEX&gt;                       234      82       82       82       195.170  139.81
 &lt;e WITH DIAERESIS&gt;                        235      83       83       83       195.171  139.82
 &lt;i WITH GRAVE&gt;                            236      88       88       88       195.172  139.83
 &lt;i WITH ACUTE&gt;                            237      85       85       85       195.173  139.84
 &lt;i WITH CIRCUMFLEX&gt;                       238      86       86       86       195.174  139.85
 &lt;i WITH DIAERESIS&gt;                        239      87       87       87       195.175  139.86
 &lt;SMALL LETTER eth&gt;                        240      140      140      140      195.176  139.87
 &lt;n WITH TILDE&gt;                            241      73       73       73       195.177  139.88
 &lt;o WITH GRAVE&gt;                            242      205      205      205      195.178  139.89
 &lt;o WITH ACUTE&gt;                            243      206      206      206      195.179  139.98
 &lt;o WITH CIRCUMFLEX&gt;                       244      203      203      203      195.180  139.99
 &lt;o WITH TILDE&gt;                            245      207      207      207      195.181  139.100
 &lt;o WITH DIAERESIS&gt;                        246      204      204      204      195.182  139.101
 &lt;DIVISION SIGN&gt;                           247      225      225      225      195.183  139.102
 &lt;o WITH STROKE&gt;                           248      112      112      112      195.184  139.103
 &lt;u WITH GRAVE&gt;                            249      221      221      192      195.185  139.104  ###
 &lt;u WITH ACUTE&gt;                            250      222      222      222      195.186  139.105
 &lt;u WITH CIRCUMFLEX&gt;                       251      219      219      219      195.187  139.106
 &lt;u WITH DIAERESIS&gt;                        252      220      220      220      195.188  139.112
 &lt;y WITH ACUTE&gt;                            253      141      141      141      195.189  139.113
 &lt;SMALL LETTER thorn&gt;                      254      142      142      142      195.190  139.114
 &lt;y WITH DIAERESIS&gt;                        255      223      223      223      195.191  139.115</pre>


<p style="margin-left:11%; margin-top: 1em">If you would
rather see the above table in <small>CCSID</small> 0037
order rather than <small>ASCII</small> + Latin&minus;1 order
then run the table through: <br>
recipe 4</p>

<pre style="margin-left:11%; margin-top: 1em"> perl \
    &minus;ne 'if(/.{43}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}/)'\
     &minus;e '{push(@l,$_)}' \
     &minus;e 'END{print map{$_&minus;&gt;[0]}' \
     &minus;e '          sort{$a&minus;&gt;[1] &lt;=&gt; $b&minus;&gt;[1]}' \
     &minus;e '          map{[$_,substr($_,52,3)]}@l;}' perlebcdic.pod</pre>


<p style="margin-left:11%; margin-top: 1em">If you would
rather see it in <small>CCSID</small> 1047 order then change
the number 52 in the last line to 61, like this: <br>
recipe 5</p>

<pre style="margin-left:11%; margin-top: 1em"> perl \
    &minus;ne 'if(/.{43}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}/)'\
    &minus;e '{push(@l,$_)}' \
    &minus;e 'END{print map{$_&minus;&gt;[0]}' \
    &minus;e '          sort{$a&minus;&gt;[1] &lt;=&gt; $b&minus;&gt;[1]}' \
    &minus;e '          map{[$_,substr($_,61,3)]}@l;}' perlebcdic.pod</pre>


<p style="margin-left:11%; margin-top: 1em">If you would
rather see it in POSIX-BC order then change the number 61 in
the last line to 70, like this: <br>
recipe 6</p>

<pre style="margin-left:11%; margin-top: 1em"> perl \
    &minus;ne 'if(/.{43}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}\s{6,8}\d{1,3}/)'\
     &minus;e '{push(@l,$_)}' \
     &minus;e 'END{print map{$_&minus;&gt;[0]}' \
     &minus;e '          sort{$a&minus;&gt;[1] &lt;=&gt; $b&minus;&gt;[1]}' \
     &minus;e '          map{[$_,substr($_,70,3)]}@l;}' perlebcdic.pod</pre>


<h2>IDENTIFYING CHARACTER CODE SETS
<a name="IDENTIFYING CHARACTER CODE SETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To determine
the character set you are running under from perl one could
use the return value of <i>ord()</i> or <i>chr()</i> to test
one or more character values. For example:</p>

<pre style="margin-left:11%; margin-top: 1em">    $is_ascii  = &quot;A&quot; eq chr(65);
    $is_ebcdic = &quot;A&quot; eq chr(193);</pre>


<p style="margin-left:11%; margin-top: 1em">Also,
&quot;\t&quot; is a <tt>&quot;HORIZONTAL
TABULATION&quot;</tt> character so that:</p>

<pre style="margin-left:11%; margin-top: 1em">    $is_ascii  = ord(&quot;\t&quot;) == 9;
    $is_ebcdic = ord(&quot;\t&quot;) == 5;</pre>


<p style="margin-left:11%; margin-top: 1em">To distinguish
<small>EBCDIC</small> code pages try looking at one or more
of the characters that differ between them. For example:</p>

<pre style="margin-left:11%; margin-top: 1em">    $is_ebcdic_37   = &quot;\n&quot; eq chr(37);
    $is_ebcdic_1047 = &quot;\n&quot; eq chr(21);</pre>


<p style="margin-left:11%; margin-top: 1em">Or better still
choose a character that is uniquely encoded in any of the
code sets, e.g.:</p>

<pre style="margin-left:11%; margin-top: 1em">    $is_ascii           = ord('[') == 91;
    $is_ebcdic_37       = ord('[') == 186;
    $is_ebcdic_1047     = ord('[') == 173;
    $is_ebcdic_POSIX_BC = ord('[') == 187;</pre>


<p style="margin-left:11%; margin-top: 1em">However, it
would be unwise to write tests such as:</p>

<pre style="margin-left:11%; margin-top: 1em">    $is_ascii = &quot;\r&quot; ne chr(13);  #  WRONG
    $is_ascii = &quot;\n&quot; ne chr(10);  #  ILL ADVISED</pre>


<p style="margin-left:11%; margin-top: 1em">Obviously the
first of these will fail to distinguish most
<small>ASCII</small> platforms from either a
<small>CCSID</small> 0037, a 1047, or a POSIX-BC
<small>EBCDIC</small> platform since &quot;\r&quot; eq
chr(13) under all of those coded character sets. But note
too that because &quot;\n&quot; is chr(13) and
&quot;\r&quot; is chr(10) on the Macintosh (which is an
<small>ASCII</small> platform) the second <tt>$is_ascii</tt>
test will lead to trouble there.</p>

<p style="margin-left:11%; margin-top: 1em">To determine
whether or not perl was built under an <small>EBCDIC</small>
code page you can use the Config module like so:</p>

<pre style="margin-left:11%; margin-top: 1em">    use Config;
    $is_ebcdic = $Config{'ebcdic'} eq 'define';</pre>


<h2>CONVERSIONS
<a name="CONVERSIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>tr///</b>
<br>
In order to convert a string of characters from one
character set to another a simple list of numbers, such as
in the right columns in the above table, along with
perl&rsquo;s tr/// operator is all that is needed. The data
in the table are in ASCII/Latin1 order, hence the
<small>EBCDIC</small> columns provide easy-to-use
ASCII/Latin1 to <small>EBCDIC</small> operations that are
also easily reversed.</p>

<p style="margin-left:11%; margin-top: 1em">For example, to
convert ASCII/Latin1 to code page 037 take the output of the
second numbers column from the output of recipe 2 (modified
to add &rsquo;\&rsquo; characters) and use it in tr/// like
so:</p>

<pre style="margin-left:11%; margin-top: 1em">    $cp_037 =
    '\x00\x01\x02\x03\x37\x2D\x2E\x2F\x16\x05\x25\x0B\x0C\x0D\x0E\x0F' .
    '\x10\x11\x12\x13\x3C\x3D\x32\x26\x18\x19\x3F\x27\x1C\x1D\x1E\x1F' .
    '\x40\x5A\x7F\x7B\x5B\x6C\x50\x7D\x4D\x5D\x5C\x4E\x6B\x60\x4B\x61' .
    '\xF0\xF1\xF2\xF3\xF4\xF5\xF6\xF7\xF8\xF9\x7A\x5E\x4C\x7E\x6E\x6F' .
    '\x7C\xC1\xC2\xC3\xC4\xC5\xC6\xC7\xC8\xC9\xD1\xD2\xD3\xD4\xD5\xD6' .
    '\xD7\xD8\xD9\xE2\xE3\xE4\xE5\xE6\xE7\xE8\xE9\xBA\xE0\xBB\xB0\x6D' .
    '\x79\x81\x82\x83\x84\x85\x86\x87\x88\x89\x91\x92\x93\x94\x95\x96' .
    '\x97\x98\x99\xA2\xA3\xA4\xA5\xA6\xA7\xA8\xA9\xC0\x4F\xD0\xA1\x07' .
    '\x20\x21\x22\x23\x24\x15\x06\x17\x28\x29\x2A\x2B\x2C\x09\x0A\x1B' .
    '\x30\x31\x1A\x33\x34\x35\x36\x08\x38\x39\x3A\x3B\x04\x14\x3E\xFF' .
    '\x41\xAA\x4A\xB1\x9F\xB2\x6A\xB5\xBD\xB4\x9A\x8A\x5F\xCA\xAF\xBC' .
    '\x90\x8F\xEA\xFA\xBE\xA0\xB6\xB3\x9D\xDA\x9B\x8B\xB7\xB8\xB9\xAB' .
    '\x64\x65\x62\x66\x63\x67\x9E\x68\x74\x71\x72\x73\x78\x75\x76\x77' .
    '\xAC\x69\xED\xEE\xEB\xEF\xEC\xBF\x80\xFD\xFE\xFB\xFC\xAD\xAE\x59' .
    '\x44\x45\x42\x46\x43\x47\x9C\x48\x54\x51\x52\x53\x58\x55\x56\x57' .
    '\x8C\x49\xCD\xCE\xCB\xCF\xCC\xE1\x70\xDD\xDE\xDB\xDC\x8D\x8E\xDF';
    my $ebcdic_string = $ascii_string;
    eval '$ebcdic_string =~ tr/\000&minus;\377/' . $cp_037 . '/';</pre>


<p style="margin-left:11%; margin-top: 1em">To convert from
<small>EBCDIC</small> 037 to <small>ASCII</small> just
reverse the order of the tr/// arguments like so:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $ascii_string = $ebcdic_string;
    eval '$ascii_string =~ tr/' . $cp_037 . '/\000&minus;\377/';</pre>


<p style="margin-left:11%; margin-top: 1em">Similarly one
could take the output of the third numbers column from
recipe 2 to obtain a <tt>$cp_1047</tt> table. The fourth
numbers column of the output from recipe 2 could provide a
<tt>$cp_posix_bc</tt> table suitable for transcoding as
well.</p>

<p style="margin-left:11%; margin-top: 1em">If you wanted
to see the inverse tables, you would first have to sort on
the desired numbers column as in recipes 4, 5 or 6, then
take the output of the first numbers column.</p>

<p style="margin-left:11%; margin-top: 1em"><b>iconv</b>
<small><br>
XPG</small> operability often implies the presence of an
<i>iconv</i> utility available from the shell or from the C
library. Consult your system&rsquo;s documentation for
information on iconv.</p>

<p style="margin-left:11%; margin-top: 1em">On
<small>OS/390</small> or z/OS see the <i>iconv</i>(1)
manpage. One way to invoke the iconv shell utility from
within perl would be to:</p>

<pre style="margin-left:11%; margin-top: 1em">    # OS/390 or z/OS example
    $ascii_data = `echo '$ebcdic_data'| iconv &minus;f IBM&minus;1047 &minus;t ISO8859&minus;1`</pre>


<p style="margin-left:11%; margin-top: 1em">or the inverse
map:</p>

<pre style="margin-left:11%; margin-top: 1em">    # OS/390 or z/OS example
    $ebcdic_data = `echo '$ascii_data'| iconv &minus;f ISO8859&minus;1 &minus;t IBM&minus;1047`</pre>


<p style="margin-left:11%; margin-top: 1em">For other
perl-based conversion options see the Convert::* modules on
<small>CPAN</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>C
<small>RTL</small></b> <br>
The <small>OS/390</small> and z/OS C run-time libraries
provide <i>_atoe()</i> and <i>_etoa()</i> functions.</p>

<h2>OPERATOR DIFFERENCES
<a name="OPERATOR DIFFERENCES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;..&quot;</tt> range operator treats certain
character ranges with care on <small>EBCDIC</small>
platforms. For example the following array will have twenty
six elements on either an <small>EBCDIC</small> platform or
an <small>ASCII</small> platform:</p>

<pre style="margin-left:11%; margin-top: 1em">    @alphabet = ('A'..'Z');   #  $#alphabet == 25</pre>


<p style="margin-left:11%; margin-top: 1em">The bitwise
operators such as &amp; ^ | may return different results
when operating on string or character data in a perl program
running on an <small>EBCDIC</small> platform than when run
on an <small>ASCII</small> platform. Here is an example
adapted from the one in perlop:</p>

<pre style="margin-left:11%; margin-top: 1em">    # EBCDIC&minus;based examples
    print &quot;j p \n&quot; ^ &quot; a h&quot;;                      # prints &quot;JAPH\n&quot;
    print &quot;JA&quot; | &quot;  ph\n&quot;;                        # prints &quot;japh\n&quot;
    print &quot;JAPH\nJunk&quot; &amp; &quot;\277\277\277\277\277&quot;;  # prints &quot;japh\n&quot;;
    print 'p N$' ^ &quot; E&lt;H\n&quot;;                      # prints &quot;Perl\n&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">An interesting
property of the 32 C0 control characters in the
<small>ASCII</small> table is that they can
&quot;literally&quot; be constructed as control characters
in perl, e.g. <tt>&quot;(chr(0)&quot;</tt> eq
<tt>&quot;\c@&quot;</tt>)&gt; <tt>&quot;(chr(1)&quot;</tt>
eq <tt>&quot;\cA&quot;</tt>)&gt;, and so on. Perl on
<small>EBCDIC</small> platforms has been ported to take
<tt>&quot;\c@&quot;</tt> to <i>chr</i>(0) and
<tt>&quot;\cA&quot;</tt> to <i>chr</i>(1), etc. as well, but
the thirty three characters that result depend on which code
page you are using. The table below uses the standard
acronyms for the controls. The POSIX-BC and 1047 sets are
identical throughout this range and differ from the 0037 set
at only one spot (21 decimal). Note that the <tt>&quot;LINE
FEED&quot;</tt> character may be generated by
<tt>&quot;\cJ&quot;</tt> on <small>ASCII</small> platforms
but by <tt>&quot;\cU&quot;</tt> on 1047 or POSIX-BC
platforms and cannot be generated as a
<tt>&quot;\c.letter.&quot;</tt> control character on 0037
platforms. Note also that <tt>&quot;\c\&quot;</tt> cannot be
the final element in a string or regex, as it will absorb
the terminator. But
<tt>&quot;\c\</tt><i>X</i><tt>&quot;</tt> is a
<tt>&quot;FILE SEPARATOR&quot;</tt> concatenated with
<i>X</i> for all <i>X</i>.</p>

<pre style="margin-left:11%; margin-top: 1em"> chr   ord   8859&minus;1    0037    1047 &amp;&amp; POSIX&minus;BC
 &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
 \c?   127   &lt;DEL&gt;       &quot;            &quot;
 \c@     0   &lt;NUL&gt;     &lt;NUL&gt;        &lt;NUL&gt;
 \cA     1   &lt;SOH&gt;     &lt;SOH&gt;        &lt;SOH&gt;
 \cB     2   &lt;STX&gt;     &lt;STX&gt;        &lt;STX&gt;
 \cC     3   &lt;ETX&gt;     &lt;ETX&gt;        &lt;ETX&gt;
 \cD     4   &lt;EOT&gt;     &lt;ST&gt;         &lt;ST&gt;
 \cE     5   &lt;ENQ&gt;     &lt;HT&gt;         &lt;HT&gt;
 \cF     6   &lt;ACK&gt;     &lt;SSA&gt;        &lt;SSA&gt;
 \cG     7   &lt;BEL&gt;     &lt;DEL&gt;        &lt;DEL&gt;
 \cH     8   &lt;BS&gt;      &lt;EPA&gt;        &lt;EPA&gt;
 \cI     9   &lt;HT&gt;      &lt;RI&gt;         &lt;RI&gt;
 \cJ    10   &lt;LF&gt;      &lt;SS2&gt;        &lt;SS2&gt;
 \cK    11   &lt;VT&gt;      &lt;VT&gt;         &lt;VT&gt;
 \cL    12   &lt;FF&gt;      &lt;FF&gt;         &lt;FF&gt;
 \cM    13   &lt;CR&gt;      &lt;CR&gt;         &lt;CR&gt;
 \cN    14   &lt;SO&gt;      &lt;SO&gt;         &lt;SO&gt;
 \cO    15   &lt;SI&gt;      &lt;SI&gt;         &lt;SI&gt;
 \cP    16   &lt;DLE&gt;     &lt;DLE&gt;        &lt;DLE&gt;
 \cQ    17   &lt;DC1&gt;     &lt;DC1&gt;        &lt;DC1&gt;
 \cR    18   &lt;DC2&gt;     &lt;DC2&gt;        &lt;DC2&gt;
 \cS    19   &lt;DC3&gt;     &lt;DC3&gt;        &lt;DC3&gt;
 \cT    20   &lt;DC4&gt;     &lt;OSC&gt;        &lt;OSC&gt;
 \cU    21   &lt;NAK&gt;     &lt;NEL&gt;        &lt;LF&gt;              ***
 \cV    22   &lt;SYN&gt;     &lt;BS&gt;         &lt;BS&gt;
 \cW    23   &lt;ETB&gt;     &lt;ESA&gt;        &lt;ESA&gt;
 \cX    24   &lt;CAN&gt;     &lt;CAN&gt;        &lt;CAN&gt;
 \cY    25   &lt;EOM&gt;     &lt;EOM&gt;        &lt;EOM&gt;
 \cZ    26   &lt;SUB&gt;     &lt;PU2&gt;        &lt;PU2&gt;
 \c[    27   &lt;ESC&gt;     &lt;SS3&gt;        &lt;SS3&gt;
 \c\X   28   &lt;FS&gt;X     &lt;FS&gt;X        &lt;FS&gt;X
 \c]    29   &lt;GS&gt;      &lt;GS&gt;         &lt;GS&gt;
 \c^    30   &lt;RS&gt;      &lt;RS&gt;         &lt;RS&gt;
 \c_    31   &lt;US&gt;      &lt;US&gt;         &lt;US&gt;</pre>


<h2>FUNCTION DIFFERENCES
<a name="FUNCTION DIFFERENCES"></a>
</h2>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><i>chr()</i></p></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em"><i>chr()</i> must be given an
<small>EBCDIC</small> code number argument to yield a
desired character return value on an <small>EBCDIC</small>
platform. For example:</p></td></tr>
</table>

<pre style="margin-left:23%; margin-top: 1em">    $CAPITAL_LETTER_A = chr(193);</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><i>ord()</i></p></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em"><i>ord()</i> will return
<small>EBCDIC</small> code number values on an
<small>EBCDIC</small> platform. For example:</p></td></tr>
</table>

<pre style="margin-left:23%; margin-top: 1em">    $the_number_193 = ord(&quot;A&quot;);</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>pack()</i></p></td>
<td width="3%"></td>
<td width="77%">


<p style="margin-top: 1em">The c and C templates for
<i>pack()</i> are dependent upon character set encoding.
Examples of usage on <small>EBCDIC</small> include:</p></td></tr>
</table>

<pre style="margin-left:23%; margin-top: 1em">    $foo = pack(&quot;CCCC&quot;,193,194,195,196);
    # $foo eq &quot;ABCD&quot;
    $foo = pack(&quot;C4&quot;,193,194,195,196);
    # same thing
    $foo = pack(&quot;ccxxcc&quot;,193,194,195,196);
    # $foo eq &quot;AB\0\0CD&quot;</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p style="margin-top: 1em"><i>print()</i></p></td>
<td width="1%"></td>
<td width="77%">


<p style="margin-top: 1em">One must be careful with scalars
and strings that are passed to print that contain
<small>ASCII</small> encodings. One common place for this to
occur is in the output of the <small>MIME</small> type
header for <small>CGI</small> script writing. For example,
many perl programming guides recommend something similar
to:</p> </td></tr>
</table>

<pre style="margin-left:23%; margin-top: 1em">    print &quot;Content&minus;type:\ttext/html\015\012\015\012&quot;;
    # this may be wrong on EBCDIC</pre>


<p style="margin-left:23%; margin-top: 1em">Under the
<small>IBM OS/390 USS</small> Web Server or WebSphere on
z/OS for example you should instead write that as:</p>

<pre style="margin-left:23%; margin-top: 1em">    print &quot;Content&minus;type:\ttext/html\r\n\r\n&quot;; # OK for DGW et al</pre>


<p style="margin-left:23%; margin-top: 1em">That is because
the translation from <small>EBCDIC</small> to
<small>ASCII</small> is done by the web server in this case
(such code will not be appropriate for the Macintosh
however). Consult your web server&rsquo;s documentation for
further details.</p>

<p style="margin-left:11%;"><i>printf()</i></p>

<p style="margin-left:23%;">The formats that can convert
characters to numbers and vice versa will be different from
their <small>ASCII</small> counterparts when executed on an
<small>EBCDIC</small> platform. Examples include:</p>

<pre style="margin-left:23%; margin-top: 1em">    printf(&quot;%c%c%c&quot;,193,194,195);  # prints ABC</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>sort()</i></p></td>
<td width="3%"></td>
<td width="77%">


<p><small>EBCDIC</small> sort results may differ from
<small>ASCII</small> sort results especially for mixed case
strings. This is discussed in more detail below.</p></td></tr>
</table>

<p style="margin-left:11%;"><i>sprintf()</i></p>

<p style="margin-left:23%;">See the discussion of
<i>printf()</i> above. An example of the use of sprintf
would be:</p>

<pre style="margin-left:23%; margin-top: 1em">    $CAPITAL_LETTER_A = sprintf(&quot;%c&quot;,193);</pre>


<p style="margin-left:11%;"><i>unpack()</i></p>

<p style="margin-left:23%;">See the discussion of
<i>pack()</i> above.</p>

<h2>REGULAR EXPRESSION DIFFERENCES
<a name="REGULAR EXPRESSION DIFFERENCES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As of perl
5.005_03 the letter range regular expressions such as
[A&minus;Z] and [a&minus;z] have been especially coded to
not pick up gap characters. For example, characters such as
o <tt>&quot;o WITH CIRCUMFLEX&quot;</tt> that lie between I
and J would not be matched by the regular expression range
<tt>&quot;/[H&minus;K]/&quot;</tt>. This works in the other
direction, too, if either of the range end points is
explicitly numeric: <tt>&quot;[\x89&minus;\x91]&quot;</tt>
will match <tt>&quot;\x8e&quot;</tt>, even though
<tt>&quot;\x89&quot;</tt> is <tt>&quot;i&quot;</tt> and
<tt>&quot;\x91 &quot;</tt> is <tt>&quot;j&quot;</tt>, and
<tt>&quot;\x8e&quot;</tt> is a gap character from the
alphabetic viewpoint.</p>

<p style="margin-left:11%; margin-top: 1em">If you do want
to match the alphabet gap characters in a single octet
regular expression try matching the hex or octal code such
as <tt>&quot;/\313/&quot;</tt> on <small>EBCDIC</small> or
<tt>&quot;/\364/&quot;</tt> on <small>ASCII</small>
platforms to have your regular expression match <tt>&quot;o
WITH CIRCUMFLEX&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Another
construct to be wary of is the inappropriate use of hex or
octal constants in regular expressions. Consider the
following set of subs:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub is_c0 {
        my $char = substr(shift,0,1);
        $char =~ /[\000&minus;\037]/;
    }
    sub is_print_ascii {
        my $char = substr(shift,0,1);
        $char =~ /[\040&minus;\176]/;
    }
    sub is_delete {
        my $char = substr(shift,0,1);
        $char eq &quot;\177&quot;;
    }
    sub is_c1 {
        my $char = substr(shift,0,1);
        $char =~ /[\200&minus;\237]/;
    }
    sub is_latin_1 {
        my $char = substr(shift,0,1);
        $char =~ /[\240&minus;\377]/;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">The above would
be adequate if the concern was only with numeric code
points. However, the concern may be with characters rather
than code points and on an <small>EBCDIC</small> platform it
may be desirable for constructs such as <tt>&quot;if
(is_print_ascii(&quot;A&quot;)) {print &quot;A is a
printable character\n&quot;;}&quot;</tt> to print out the
expected message. One way to represent the above collection
of character classification subs that is capable of working
across the four coded character sets discussed in this
document is as follows:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub Is_c0 {
        my $char = substr(shift,0,1);
        if (ord('^')==94)  { # ascii
            return $char =~ /[\000&minus;\037]/;
        }
        if (ord('^')==176) { # 0037
            return $char =~ /[\000&minus;\003\067\055&minus;\057\026\005\045\013&minus;\023\074\075\062\046\030\031\077\047\034&minus;\037]/;
        }
        if (ord('^')==95 || ord('^')==106) { # 1047 || posix&minus;bc
            return $char =~ /[\000&minus;\003\067\055&minus;\057\026\005\025\013&minus;\023\074\075\062\046\030\031\077\047\034&minus;\037]/;
        }
    }
    sub Is_print_ascii {
        my $char = substr(shift,0,1);
        $char =~ /[ !&quot;\#\$%&amp;'()*+,\&minus;.\/0&minus;9:;&lt;=&gt;?\@A&minus;Z[\\\]^_`a&minus;z{|}~]/;
    }
    sub Is_delete {
        my $char = substr(shift,0,1);
        if (ord('^')==94)  { # ascii
            return $char eq &quot;\177&quot;;
        }
        else  {              # ebcdic
            return $char eq &quot;\007&quot;;
        }
    }
    sub Is_c1 {
        my $char = substr(shift,0,1);
        if (ord('^')==94)  { # ascii
            return $char =~ /[\200&minus;\237]/;
        }
        if (ord('^')==176) { # 0037
            return $char =~ /[\040&minus;\044\025\006\027\050&minus;\054\011\012\033\060\061\032\063&minus;\066\010\070&minus;\073\040\024\076\377]/;
        }
        if (ord('^')==95)  { # 1047
            return $char =~ /[\040&minus;\045\006\027\050&minus;\054\011\012\033\060\061\032\063&minus;\066\010\070&minus;\073\040\024\076\377]/;
        }
        if (ord('^')==106) { # posix&minus;bc
            return $char =~
              /[\040&minus;\045\006\027\050&minus;\054\011\012\033\060\061\032\063&minus;\066\010\070&minus;\073\040\024\076\137]/;
        }
    }
    sub Is_latin_1 {
        my $char = substr(shift,0,1);
        if (ord('^')==94)  { # ascii
            return $char =~ /[\240&minus;\377]/;
        }
        if (ord('^')==176) { # 0037
            return $char =~
              /[\101\252\112\261\237\262\152\265\275\264\232\212\137\312\257\274\220\217\352\372\276\240\266\263\235\332\233\213\267\270\271\253\144\145\142\146\143\147\236\150\164\161&minus;\163\170\165&minus;\167\254\151\355\356\353\357\354\277\200\375\376\373\374\255\256\131\104\105\102\106\103\107\234\110\124\121&minus;\123\130\125&minus;\127\214\111\315\316\313\317\314\341\160\335\336\333\334\215\216\337]/;
        }
        if (ord('^')==95)  { # 1047
            return $char =~
              /[\101\252\112\261\237\262\152\265\273\264\232\212\260\312\257\274\220\217\352\372\276\240\266\263\235\332\233\213\267\270\271\253\144\145\142\146\143\147\236\150\164\161&minus;\163\170\165&minus;\167\254\151\355\356\353\357\354\277\200\375\376\373\374\272\256\131\104\105\102\106\103\107\234\110\124\121&minus;\123\130\125&minus;\127\214\111\315\316\313\317\314\341\160\335\336\333\334\215\216\337]/;
        }
        if (ord('^')==106) { # posix&minus;bc
            return $char =~
              /[\101\252\260\261\237\262\320\265\171\264\232\212\272\312\257\241\220\217\352\372\276\240\266\263\235\332\233\213\267\270\271\253\144\145\142\146\143\147\236\150\164\161&minus;\163\170\165&minus;\167\254\151\355\356\353\357\354\277\200\340\376\335\374\255\256\131\104\105\102\106\103\107\234\110\124\121&minus;\123\130\125&minus;\127\214\111\315\316\313\317\314\341\160\300\336\333\334\215\216\337]/;
        }
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Note however
that only the <tt>&quot;Is_ascii_print()&quot;</tt> sub is
really independent of coded character set. Another way to
write <tt>&quot;Is_latin_1()&quot;</tt> would be to use the
characters in the range explicitly:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub Is_latin_1 {
        my $char = substr(shift,0,1);
        $char =~ /[A&nbsp;AXAXAXAXAXAXAXAXAXAXAXAXAAXAXAXAXAXAXAXAXAXAXAXAXAXAXAXAXAXAXA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~&nbsp;A~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~A~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~X]/;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Although that
form may run into trouble in network transit (due to the
presence of 8 bit characters) or on non ISO-Latin character
sets.</p>

<h2>SOCKETS
<a name="SOCKETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most socket
programming assumes <small>ASCII</small> character encodings
in network byte order. Exceptions can include
<small>CGI</small> script writing under a host web server
where the server may take care of translation for you. Most
host web servers convert <small>EBCDIC</small> data to
<small>ISO&minus;8859&minus;1</small> or Unicode on
output.</p>

<h2>SORTING
<a name="SORTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">One big
difference between ASCII-based character sets and
<small>EBCDIC</small> ones are the relative positions of
upper and lower case letters and the letters compared to the
digits. If sorted on an ASCII-based platform the two-letter
abbreviation for a physician comes before the two letter
abbreviation for drive; that is:</p>

<pre style="margin-left:11%; margin-top: 1em"> @sorted = sort(qw(Dr. dr.));  # @sorted holds ('Dr.','dr.') on ASCII,
                                  # but ('dr.','Dr.') on EBCDIC</pre>


<p style="margin-left:11%; margin-top: 1em">The property of
lowercase before uppercase letters in <small>EBCDIC</small>
is even carried to the Latin 1 <small>EBCDIC</small> pages
such as 0037 and 1047. An example would be that Ee
<tt>&quot;E WITH DIAERESIS&quot;</tt> (203) comes before ee
<tt>&quot;e WITH DIAERESIS&quot;</tt> (235) on an
<small>ASCII</small> platform, but the latter (83) comes
before the former (115) on an <small>EBCDIC</small>
platform. (Astute readers will note that the uppercase
version of ss <tt>&quot;SMALL LETTER SHARP S&quot;</tt> is
simply &quot; <small>SS</small> &quot; and that the upper
case version of ye <tt>&quot;y WITH DIAERESIS&quot;</tt> is
not in the 0..255 range but it is at U+x0178 in Unicode, or
<tt>&quot;\x{178}&quot;</tt> in a Unicode enabled Perl).</p>

<p style="margin-left:11%; margin-top: 1em">The sort order
will cause differences between results obtained on
<small>ASCII</small> platforms versus <small>EBCDIC</small>
platforms. What follows are some suggestions on how to deal
with these differences.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Ignore
<small>ASCII</small> vs. <small>EBCDIC</small> sort
differences.</b> <br>
This is the least computationally expensive strategy. It may
require some user education.</p>

<p style="margin-left:11%; margin-top: 1em"><b><small>MONO
CASE</small> then sort data.</b> <br>
In order to minimize the expense of mono casing mixed-case
text, try to <tt>&quot;tr///&quot;</tt> towards the
character set case most employed within the data. If the
data are primarily <small>UPPERCASE</small> non Latin 1 then
apply tr/[a&minus;z]/[A&minus;Z]/ then <i>sort()</i>. If the
data are primarily lowercase non Latin 1 then apply
tr/[A&minus;Z]/[a&minus;z]/ before sorting. If the data are
primarily <small>UPPERCASE</small> and include Latin&minus;1
characters then apply:</p>

<pre style="margin-left:11%; margin-top: 1em">    tr/[a&minus;z]/[A&minus;Z]/;
    tr/[A~&nbsp;A~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~A~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~X]/[A~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~XA~X/;
    s/A~X/SS/g;</pre>


<p style="margin-left:11%; margin-top: 1em">then
<i>sort()</i>. Do note however that such Latin&minus;1
manipulation does not address the ye <tt>&quot;y WITH
DIAERESIS&quot;</tt> character that will remain at code
point 255 on <small>ASCII</small> platforms, but 223 on most
<small>EBCDIC</small> platforms where it will sort to a
place less than the <small>EBCDIC</small> numerals. With a
Unicode-enabled Perl you might try:</p>

<pre style="margin-left:11%; margin-top: 1em">    tr/^?/\x{178}/;</pre>


<p style="margin-left:11%; margin-top: 1em">The strategy of
mono casing data before sorting does not preserve the case
of the data and may not be acceptable for that reason.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Convert,
sort data, then re convert.</b> <br>
This is the most expensive proposition that does not employ
a network connection.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Perform
sorting on one type of platform only.</b> <br>
This strategy can employ a network connection. As such it
would be computationally expensive.</p>

<h2>TRANSFORMATION FORMATS
<a name="TRANSFORMATION FORMATS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are a
variety of ways of transforming data with an intra character
set mapping that serve a variety of purposes. Sorting was
discussed in the previous section and a few of the other
more popular mapping techniques are discussed next.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>URL</small>
decoding and encoding</b> <br>
Note that some URLs have hexadecimal <small>ASCII</small>
code points in them in an attempt to overcome character or
protocol limitation issues. For example the tilde character
is not on every keyboard hence a <small>URL</small> of the
form:</p>

<pre style="margin-left:11%; margin-top: 1em">    http://www.pvhp.com/~pvhp/</pre>


<p style="margin-left:11%; margin-top: 1em">may also be
expressed as either of:</p>

<pre style="margin-left:11%; margin-top: 1em">    http://www.pvhp.com/%7Epvhp/
    http://www.pvhp.com/%7epvhp/</pre>


<p style="margin-left:11%; margin-top: 1em">where 7E is the
hexadecimal <small>ASCII</small> code point for
&rsquo;~&rsquo;. Here is an example of decoding such a
<small>URL</small> under <small>CCSID</small> 1047:</p>

<pre style="margin-left:11%; margin-top: 1em">    $url = 'http://www.pvhp.com/%7Epvhp/';
    # this array assumes code page 1047
    my @a2e_1047 = (
          0,  1,  2,  3, 55, 45, 46, 47, 22,  5, 21, 11, 12, 13, 14, 15,
         16, 17, 18, 19, 60, 61, 50, 38, 24, 25, 63, 39, 28, 29, 30, 31,
         64, 90,127,123, 91,108, 80,125, 77, 93, 92, 78,107, 96, 75, 97,
        240,241,242,243,244,245,246,247,248,249,122, 94, 76,126,110,111,
        124,193,194,195,196,197,198,199,200,201,209,210,211,212,213,214,
        215,216,217,226,227,228,229,230,231,232,233,173,224,189, 95,109,
        121,129,130,131,132,133,134,135,136,137,145,146,147,148,149,150,
        151,152,153,162,163,164,165,166,167,168,169,192, 79,208,161,  7,
         32, 33, 34, 35, 36, 37,  6, 23, 40, 41, 42, 43, 44,  9, 10, 27,
         48, 49, 26, 51, 52, 53, 54,  8, 56, 57, 58, 59,  4, 20, 62,255,
         65,170, 74,177,159,178,106,181,187,180,154,138,176,202,175,188,
        144,143,234,250,190,160,182,179,157,218,155,139,183,184,185,171,
        100,101, 98,102, 99,103,158,104,116,113,114,115,120,117,118,119,
        172,105,237,238,235,239,236,191,128,253,254,251,252,186,174, 89,
         68, 69, 66, 70, 67, 71,156, 72, 84, 81, 82, 83, 88, 85, 86, 87,
        140, 73,205,206,203,207,204,225,112,221,222,219,220,141,142,223
    );
    $url =~ s/%([0&minus;9a&minus;fA&minus;F]{2})/pack(&quot;c&quot;,$a2e_1047[hex($1)])/ge;</pre>


<p style="margin-left:11%; margin-top: 1em">Conversely,
here is a partial solution for the task of encoding such a
<small>URL</small> under the 1047 code page:</p>

<pre style="margin-left:11%; margin-top: 1em">    $url = 'http://www.pvhp.com/~pvhp/';
    # this array assumes code page 1047
    my @e2a_1047 = (
          0,  1,  2,  3,156,  9,134,127,151,141,142, 11, 12, 13, 14, 15,
         16, 17, 18, 19,157, 10,  8,135, 24, 25,146,143, 28, 29, 30, 31,
        128,129,130,131,132,133, 23, 27,136,137,138,139,140,  5,  6,  7,
        144,145, 22,147,148,149,150,  4,152,153,154,155, 20, 21,158, 26,
         32,160,226,228,224,225,227,229,231,241,162, 46, 60, 40, 43,124,
         38,233,234,235,232,237,238,239,236,223, 33, 36, 42, 41, 59, 94,
         45, 47,194,196,192,193,195,197,199,209,166, 44, 37, 95, 62, 63,
        248,201,202,203,200,205,206,207,204, 96, 58, 35, 64, 39, 61, 34,
        216, 97, 98, 99,100,101,102,103,104,105,171,187,240,253,254,177,
        176,106,107,108,109,110,111,112,113,114,170,186,230,184,198,164,
        181,126,115,116,117,118,119,120,121,122,161,191,208, 91,222,174,
        172,163,165,183,169,167,182,188,189,190,221,168,175, 93,180,215,
        123, 65, 66, 67, 68, 69, 70, 71, 72, 73,173,244,246,242,243,245,
        125, 74, 75, 76, 77, 78, 79, 80, 81, 82,185,251,252,249,250,255,
         92,247, 83, 84, 85, 86, 87, 88, 89, 90,178,212,214,210,211,213,
         48, 49, 50, 51, 52, 53, 54, 55, 56, 57,179,219,220,217,218,159
    );
    # The following regular expression does not address the
    # mappings for: ('.' =&gt; '%2E', '/' =&gt; '%2F', ':' =&gt; '%3A')
    $url =~ s/([\t &quot;#%&amp;\(\),;&lt;=&gt;\?\@\[\\\]^`{|}~])/sprintf(&quot;%%%02X&quot;,$e2a_1047[ord($1)])/ge;</pre>


<p style="margin-left:11%; margin-top: 1em">where a more
complete solution would split the <small>URL</small> into
components and apply a full s/// substitution only to the
appropriate parts.</p>

<p style="margin-left:11%; margin-top: 1em">In the
remaining examples a <tt>@e2a</tt> or <tt>@a2e</tt> array
may be employed but the assignment will not be shown
explicitly. For code page 1047 you could use the
<tt>@a2e_1047</tt> or <tt>@e2a_1047</tt> arrays just
shown.</p>

<p style="margin-left:11%; margin-top: 1em"><b>uu encoding
and decoding</b> <br>
The <tt>&quot;u&quot;</tt> template to <i>pack()</i> or
<i>unpack()</i> will render <small>EBCDIC</small> data in
<small>EBCDIC</small> characters equivalent to their
<small>ASCII</small> counterparts. For example, the
following will print &quot;Yes indeed\n&quot; on either an
<small>ASCII</small> or <small>EBCDIC</small> computer:</p>

<pre style="margin-left:11%; margin-top: 1em">    $all_byte_chrs = '';
    for (0..255) { $all_byte_chrs .= chr($_); }
    $uuencode_byte_chrs = pack('u', $all_byte_chrs);
    ($uu = &lt;&lt;'ENDOFHEREDOC') =~ s/^\s*//gm;
    M``$&quot;`P0%!@&lt;(&quot;0H+#`T.#Q`1$A,4%187&amp;!D:&amp;QP='A\@(2(C)&quot;4F)R@I*BLL
    M+2XO,#$R,S0U&minus;C&lt;X.3H[/#T^/T!!0D&minus;$149'2$E*2TQ&minus;3D]045)35%565UA9
    M6EM&lt;75Y?8&amp;%B8V1E9F=H:6IK;&amp;UN;W!Q&lt;G&minus;T=79W&gt;'EZ&gt;WQ]?G^`@8*#A(6&amp;
    MAXB)BHN,C8Z/D)&amp;2DY25EI&gt;8F9J;G)V&gt;GZ&quot;AHJ.DI::GJ*FJJZRMKJ^PL;*S
    MM+6VM[BYNKN\O;Z_P,'&quot;P\3%QL?(R&lt;K+S,W.S]#1TM/4U=;7V&minus;G:V]S=WM_@
    ?X&gt;+CY.7FY^CIZNOL[&gt;[O\/'R\_3U]O?X^?K[_/W^_P``
    ENDOFHEREDOC
    if ($uuencode_byte_chrs eq $uu) {
        print &quot;Yes &quot;;
    }
    $uudecode_byte_chrs = unpack('u', $uuencode_byte_chrs);
    if ($uudecode_byte_chrs eq $all_byte_chrs) {
        print &quot;indeed\n&quot;;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Here is a very
spartan uudecoder that will work on <small>EBCDIC</small>
provided that the <tt>@e2a</tt> array is filled in
appropriately:</p>

<pre style="margin-left:11%; margin-top: 1em">    #!/usr/local/bin/perl
    @e2a = ( # this must be filled in
           );
    $_ = &lt;&gt; until ($mode,$file) = /^begin\s*(\d*)\s*(\S*)/;
    open(OUT, &quot;&gt; $file&quot;) if $file ne &quot;&quot;;
    while(&lt;&gt;) {
        last if /^end/;
        next if /[a&minus;z]/;
        next unless int(((($e2a[ord()] &minus; 32 ) &amp; 077) + 2) / 3) ==
            int(length() / 4);
        print OUT unpack(&quot;u&quot;, $_);
    }
    close(OUT);
    chmod oct($mode), $file;</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Quoted-Printable
encoding and decoding</b> <br>
On ASCII-encoded platforms it is possible to strip
characters outside of the printable set using:</p>

<pre style="margin-left:11%; margin-top: 1em">    # This QP encoder works on ASCII only
    $qp_string =~ s/([=\x00&minus;\x1F\x80&minus;\xFF])/sprintf(&quot;=%02X&quot;,ord($1))/ge;</pre>


<p style="margin-left:11%; margin-top: 1em">Whereas a
<small>QP</small> encoder that works on both
<small>ASCII</small> and <small>EBCDIC</small> platforms
would look somewhat like the following (where the
<small>EBCDIC</small> branch <tt>@e2a</tt> array is omitted
for brevity):</p>

<pre style="margin-left:11%; margin-top: 1em">    if (ord('A') == 65) {    # ASCII
        $delete = &quot;\x7F&quot;;    # ASCII
        @e2a = (0 .. 255)    # ASCII to ASCII identity map
    }
    else {                   # EBCDIC
        $delete = &quot;\x07&quot;;    # EBCDIC
        @e2a =               # EBCDIC to ASCII map (as shown above)
    }
    $qp_string =~
      s/([^ !&quot;\#\$%&amp;'()*+,\&minus;.\/0&minus;9:;&lt;&gt;?\@A&minus;Z[\\\]^_`a&minus;z{|}~$delete])/sprintf(&quot;=%02X&quot;,$e2a[ord($1)])/ge;</pre>


<p style="margin-left:11%; margin-top: 1em">(although in
production code the substitutions might be done in the
<small>EBCDIC</small> branch with the <tt>@e2a</tt> array
and separately in the <small>ASCII</small> branch without
the expense of the identity map).</p>

<p style="margin-left:11%; margin-top: 1em">Such
<small>QP</small> strings can be decoded with:</p>

<pre style="margin-left:11%; margin-top: 1em">    # This QP decoder is limited to ASCII only
    $string =~ s/=([0&minus;9A&minus;Fa&minus;f][0&minus;9A&minus;Fa&minus;f])/chr hex $1/ge;
    $string =~ s/=[\n\r]+$//;</pre>


<p style="margin-left:11%; margin-top: 1em">Whereas a
<small>QP</small> decoder that works on both
<small>ASCII</small> and <small>EBCDIC</small> platforms
would look somewhat like the following (where the
<tt>@a2e</tt> array is omitted for brevity):</p>

<pre style="margin-left:11%; margin-top: 1em">    $string =~ s/=([0&minus;9A&minus;Fa&minus;f][0&minus;9A&minus;Fa&minus;f])/chr $a2e[hex $1]/ge;
    $string =~ s/=[\n\r]+$//;</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Caesarean
ciphers</b> <br>
The practice of shifting an alphabet one or more characters
for encipherment dates back thousands of years and was
explicitly detailed by Gaius Julius Caesar in his <b>Gallic
Wars</b> text. A single alphabet shift is sometimes referred
to as a rotation and the shift amount is given as a number
<tt>$n</tt> after the string &rsquo;rot&rsquo; or
&quot;rot$n&quot;. Rot0 and rot26 would designate identity
maps on the 26&minus;letter English version of the Latin
alphabet. Rot13 has the interesting property that alternate
subsequent invocations are identity maps (thus rot13 is its
own non-trivial inverse in the group of 26 alphabet
rotations). Hence the following is a rot13 encoder and
decoder that will work on <small>ASCII</small> and
<small>EBCDIC</small> platforms:</p>

<pre style="margin-left:11%; margin-top: 1em">    #!/usr/local/bin/perl
    while(&lt;&gt;){
        tr/n&minus;za&minus;mN&minus;ZA&minus;M/a&minus;zA&minus;Z/;
        print;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">In one-liner
form:</p>

<pre style="margin-left:11%; margin-top: 1em">    perl &minus;ne 'tr/n&minus;za&minus;mN&minus;ZA&minus;M/a&minus;zA&minus;Z/;print'</pre>


<h2>Hashing order and checksums
<a name="Hashing order and checksums"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To the extent
that it is possible to write code that depends on hashing
order there may be differences between hashes as stored on
an ASCII-based platform and hashes stored on an EBCDIC-based
platform. <small>XXX</small></p>

<h2>I18N AND L10N
<a name="I18N AND L10N"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Internationalization
(I18N) and localization (L10N) are supported at least in
principle even on <small>EBCDIC</small> platforms. The
details are system-dependent and discussed under the &quot;
<small>OS ISSUES</small> &quot; in perlebcdic section
below.</p>

<h2>MULTI-OCTET CHARACTER SETS
<a name="MULTI-OCTET CHARACTER SETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Perl may work
with an internal UTF-EBCDIC encoding form for wide
characters on <small>EBCDIC</small> platforms in a manner
analogous to the way that it works with the
<small>UTF&minus;8</small> internal encoding form on
<small>ASCII</small> based platforms.</p>

<p style="margin-left:11%; margin-top: 1em">Legacy multi
byte <small>EBCDIC</small> code pages <small>XXX</small>
.</p>

<h2>OS ISSUES
<a name="OS ISSUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There may be a
few system-dependent issues of concern to
<small>EBCDIC</small> Perl programmers.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>OS/400</small></b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><small>PASE</small></p></td>
<td width="6%"></td>
<td width="77%">


<p>The <small>PASE</small> environment is a runtime
environment for <small>OS/400</small> that can run
executables built for PowerPC <small>AIX</small> in
<small>OS/400</small> ; see perlos400. <small>PASE</small>
is ASCII-based, not EBCDIC-based as the <small>ILE</small>
.</p> </td></tr>
</table>

<p style="margin-left:11%;"><small>IFS</small> access</p>

<p style="margin-left:23%;"><small>XXX</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>OS/390</small>
, z/OS</b> <br>
Perl runs under Unix Systems Services or <small>USS</small>
.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p>chcp</p></td>
<td width="6%"></td>
<td width="77%">


<p><b>chcp</b> is supported as a shell utility for
displaying and changing one&rsquo;s code page. See also
<i>chcp</i>(1).</p> </td></tr>
</table>

<p style="margin-left:11%;">dataset access</p>

<p style="margin-left:23%;">For sequential data set access
try:</p>

<pre style="margin-left:23%; margin-top: 1em">    my @ds_records = `cat //DSNAME`;</pre>


<p style="margin-left:23%; margin-top: 1em">or:</p>

<pre style="margin-left:23%; margin-top: 1em">    my @ds_records = `cat //'HLQ.DSNAME'`;</pre>


<p style="margin-left:23%; margin-top: 1em">See also the
OS390::Stdio module on <small>CPAN</small> .</p>

<p style="margin-left:11%;"><small>OS/390</small> , z/OS
iconv</p>

<p style="margin-left:23%;"><b>iconv</b> is supported as
both a shell utility and a C <small>RTL</small> routine. See
also the <i>iconv</i>(1) and <i>iconv</i>(3) manual
pages.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p>locales</p></td>
<td width="1%"></td>
<td width="77%">


<p>On <small>OS/390</small> or z/OS see locale for
information on locales. The L10N files are in
<i>/usr/nls/locale</i>. <tt>$Config</tt>{d_setlocale} is
&rsquo;define&rsquo; on <small>OS/390</small> or z/OS.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b><small>VM/ESA</small>
?</b> <small><br>
XXX</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>POSIX-BC?</b>
<small><br>
XXX</small> .</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This pod
document contains literal Latin 1 characters and may
encounter translation difficulties. In particular one
popular nroff implementation was known to strip accented
characters to their unaccented counterparts while attempting
to view this document through the <b>pod2man</b> program
(for example, you may see a plain <tt>&quot;y&quot;</tt>
rather than one with a diaeresis as in ye). Another nroff
truncated the resultant manpage at the first occurrence of 8
bit characters.</p>

<p style="margin-left:11%; margin-top: 1em">Not all shells
will allow multiple <tt>&quot;&minus;e&quot;</tt> string
arguments to perl to be concatenated together properly as
recipes 0, 2, 4, 5, and 6 might seem to imply.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perllocale,
perlfunc, perlunicode, utf8.</p>

<h2>REFERENCES
<a name="REFERENCES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&lt;http://anubis.dkuug.dk/i18n/charmaps&gt;</p>


<p style="margin-left:11%; margin-top: 1em">&lt;http://www.unicode.org/&gt;</p>


<p style="margin-left:11%; margin-top: 1em">&lt;http://www.unicode.org/unicode/reports/tr16/&gt;</p>


<p style="margin-left:11%; margin-top: 1em">&lt;http://www.wps.com/projects/codes/&gt;
<b><small>ASCII:</small> American Standard Code for
Information Infiltration</b> Tom Jennings, September
1999.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The Unicode
Standard, Version 3.0</b> The Unicode Consortium, Lisa Moore
ed., <small>ISBN</small> 0&minus;201&minus;61633&minus;5,
Addison Wesley Developers Press, February 2000.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>CDRA:
IBM</small> &minus; Character Data Representation
Architecture &minus; Reference and Registry</b>, <small>IBM
SC09&minus;2190&minus;00</small> , December 1996.</p>


<p style="margin-left:11%; margin-top: 1em">&quot;Demystifying
Character Sets&quot;, Andrea Vine, Multilingual Computing
&amp; Technology, <b>#26 Vol. 10 Issue 4</b>,
August/September 1999; <small>ISSN</small> 1523&minus;0309;
Multilingual Computing Inc. Sandpoint <small>ID</small> ,
<small>USA</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>Codes,
Ciphers, and Other Cryptic and Clandestine Communication</b>
Fred B. Wrixon, <small>ISBN</small>
1&minus;57912&minus;040&minus;7, Black Dog &amp; Leventhal
Publishers, 1998.</p>


<p style="margin-left:11%; margin-top: 1em">http://www.bobbemer.com/P&minus;BIT.HTM
&lt;http://www.bobbemer.com/P-BIT.HTM&gt;
<b><small>IBM</small> &minus; <small>EBCDIC</small> and the
P&minus;bit; The biggest Computer Goof Ever</b> Robert
Bemer.</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">15 April 2001:
added <small>UTF&minus;8</small> and UTF-EBCDIC to main
table, pvhp.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Peter Prymmer
pvhp@best.com wrote this in 1999 and 2000 with
<small>CCSID</small> 0819 and 0037 help from Chris Leach and
Andre Pirard A.Pirard@ulg.ac.be as well as POSIX-BC help
from Thomas Dorner Thomas.Dorner@start.de. Thanks also to
Vickie Cooper, Philip Newton, William Raffloer, and Joe
Smith. Trademarks, registered trademarks, service marks and
registered service marks used in this document are the
property of their respective owners.</p>
<hr>
</body>
</html>
