<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:15:55 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>OPENDIR</title>

</head>
<body>

<h1 align="center">OPENDIR</h1>

<a href="#PROLOG">PROLOG</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>PROLOG
<a name="PROLOG"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page is part of the POSIX Programmer&rsquo;s Manual. The
Linux implementation of this interface may differ (consult
the corresponding Linux manual page for details of Linux
behavior), or the interface may not be implemented on
Linux.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">opendir &minus;
open a directory</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;dirent.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>DIR
*opendir(const char *</b><i>dirname</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>opendir</i>() function shall open a directory stream
corresponding to the directory named by the <i>dirname</i>
argument. The directory stream is positioned at the first
entry. If the type <b>DIR</b> is implemented using a file
descriptor, applications shall only be able to open up to a
total of {OPEN_MAX} files and directories.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Upon successful
completion, <i>opendir</i>() shall return a pointer to an
object of type <b>DIR</b>. Otherwise, a null pointer shall
be returned and <i>errno</i> set to indicate the error.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>opendir</i>() function shall fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EACCES</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Search permission is denied for the component of the
path prefix of <i>dirname</i> or read permission is denied
for <i>dirname</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A loop exists in symbolic links encountered during
resolution of the <i>dirname</i> argument.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">The length of the
<i>dirname</i> argument exceeds {PATH_MAX} or a pathname
component is longer than {NAME_MAX}.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENOENT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A component of <i>dirname</i> does not name an existing
directory or <i>dirname</i> is an empty string.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENOTDIR</b></p>

<p style="margin-left:22%;">A component of <i>dirname</i>
is not a directory.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>opendir</i>() function may fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>More than {SYMLOOP_MAX} symbolic links were encountered
during resolution of the <i>dirname</i> argument.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EMFILE</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>{OPEN_MAX} file descriptors are currently open in the
calling process.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">As a result of encountering a
symbolic link in resolution of the <i>dirname</i> argument,
the length of the substituted pathname string exceeded
{PATH_MAX}.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENFILE</b></p></td>
<td width="2%"></td>
<td width="73%">


<p>Too many files are currently open in the system.</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i><b>Open a
Directory Stream</b></i> <br>
The following program fragment demonstrates how the
<i>opendir</i>() function is used.</p>

<p style="margin-left:22%; margin-top: 1em"><b>#include
&lt;sys/types.h&gt; <br>
#include &lt;dirent.h&gt; <br>
#include &lt;libgen.h&gt; <br>
... <br>
DIR *dir; <br>
struct dirent *dp; <br>
... <br>
if ((dir = opendir (&quot;.&quot;)) == NULL) { <br>
perror (&quot;Cannot open .&quot;); <br>
exit (1); <br>
}</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>while ((dp =
readdir (dir)) != NULL) { <br>
...</b></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>opendir</i>() function should be used in conjunction with
<i>readdir</i>(), <i>closedir</i>(), and <i>rewinddir</i>()
to examine the contents of the directory (see the EXAMPLES
section in <i>readdir</i>()). This method is recommended for
portability.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Based on
historical implementations, the rules about file descriptors
apply to directory streams as well. However, this volume of
IEEE&nbsp;Std&nbsp;1003.1-2001 does not mandate that the
directory stream be implemented using file descriptors. The
description of <i>closedir</i>() clarifies that if a file
descriptor is used for the directory stream, it is mandatory
that <i>closedir</i>() deallocate the file descriptor. When
a file descriptor is used to implement the directory stream,
it behaves as if the FD_CLOEXEC had been set for the file
descriptor.</p>

<p style="margin-left:11%; margin-top: 1em">The directory
entries for dot and dot-dot are optional. This volume of
IEEE&nbsp;Std&nbsp;1003.1-2001 does not provide a way to
test <i>a priori</i> for their existence because an
application that is portable must be written to look for
(and usually ignore) those entries. Writing code that
presumes that they are the first two entries does not always
work, as many implementations permit them to be other than
the first two entries, with a &quot;normal&quot; entry
preceding them. There is negligible value in providing a way
to determine what the implementation does because the code
to deal with dot and dot-dot must be written in any case and
because such a flag would add to the list of those flags
(which has proven in itself to be objectionable) and might
be abused.</p>

<p style="margin-left:11%; margin-top: 1em">Since the
structure and buffer allocation, if any, for directory
operations are defined by the implementation, this volume of
IEEE&nbsp;Std&nbsp;1003.1-2001 imposes no portability
requirements for erroneous program constructs, erroneous
data, or the use of unspecified values such as the use or
referencing of a <i>dirp</i> value or a <b>dirent</b>
structure value after a directory stream has been closed or
after a <i>fork</i>() or one of the <i>exec</i> function
calls.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>closedir</i>(),
<i>lstat</i>(), <i>readdir</i>(), <i>rewinddir</i>(),
<i>symlink</i>(), the Base Definitions volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, <i>&lt;dirent.h&gt;</i>,
<i>&lt;limits.h&gt;</i>, <i>&lt;sys/types.h&gt;</i></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
