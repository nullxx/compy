<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:25:56 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>memory</title>

</head>
<body>

<h1 align="center">memory</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">memory &minus;
Control Tcl memory debugging capabilities</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>memory</b>
<i>option</i> ?<i>arg arg ...</i>?
_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>memory</b> command gives the Tcl developer control of
Tcl&rsquo;s memory debugging capabilities. The memory
command has several suboptions, which are described below.
It is only available when Tcl has been compiled with memory
debugging enabled (when <b>TCL_MEM_DEBUG</b> is defined at
compile time), and after <b>Tcl_InitMemory</b> has been
called. <b><br>
memory active</b> <i>file</i></p>

<p style="margin-left:22%;">Write a list of all currently
allocated memory to the specified <i>file</i>.</p>

<p style="margin-left:11%;"><b>memory break_on_malloc</b>
<i>count</i></p>

<p style="margin-left:22%;">After the <i>count</i>
allocations have been performed, <b>ckalloc</b> outputs a
message to this effect and that it is now attempting to
enter the C debugger. Tcl will then issue a <i>SIGINT</i>
signal against itself. If you are running Tcl under a C
debugger, it should then enter the debugger command
mode.</p>

<p style="margin-left:11%;"><b>memory info</b></p>

<p style="margin-left:22%;">Returns a report containing the
total allocations and frees since Tcl began, the current
packets allocated (the current number of calls to
<b>ckalloc</b> not met by a corresponding call to
<b>ckfree</b>), the current bytes allocated, and the maximum
number of packets and bytes allocated.</p>

<p style="margin-left:11%;"><b>memory init</b>
[<b>on</b>|<b>off</b>]</p>

<p style="margin-left:22%;">Turn on or off the
pre-initialization of all allocated memory with bogus bytes.
Useful for detecting the use of uninitialized values.</p>

<p style="margin-left:11%;"><b>memory objs</b>
<i>file</i></p>

<p style="margin-left:22%;">Causes a list of all allocated
Tcl_Obj values to be written to the specified <i>file</i>
immediately, together with where they were allocated. Useful
for checking for leaks of values.</p>

<p style="margin-left:11%;"><b>memory onexit</b>
<i>file</i></p>

<p style="margin-left:22%;">Causes a list of all allocated
memory to be written to the specified <i>file</i> during the
finalization of Tcl&rsquo;s memory subsystem. Useful for
checking that memory is properly cleaned up during process
exit.</p>

<p style="margin-left:11%;"><b>memory tag</b>
<i>string</i></p>

<p style="margin-left:22%;">Each packet of memory allocated
by <b>ckalloc</b> can have associated with it a
string-valued tag. In the lists of allocated memory
generated by <b>memory active</b> and <b>memory onexit</b>,
the tag for each packet is printed along with other
information about the packet. The <b>memory tag</b> command
sets the tag value for subsequent calls to <b>ckalloc</b> to
be <i>string</i>.</p>

<p style="margin-left:11%;"><b>memory trace</b>
[<b>on</b>|<b>off</b>]</p>

<p style="margin-left:22%;">Turns memory tracing on or off.
When memory tracing is on, every call to <b>ckalloc</b>
causes a line of trace information to be written to
<i>stderr</i>, consisting of the word <i>ckalloc</i>,
followed by the address returned, the amount of memory
allocated, and the C filename and line number of the code
performing the allocation. For example:</p>

<p style="margin-left:32%; margin-top: 1em">ckalloc 40e478
98 tclProc.c 1406</p>

<p style="margin-left:22%; margin-top: 1em">Calls to
<b>ckfree</b> are traced in the same manner.</p>

<p style="margin-left:11%;"><b>memory
trace_on_at_malloc</b> <i>count</i></p>

<p style="margin-left:22%;">Enable memory tracing after
<i>count</i> <b>ckalloc</b>s have been performed. For
example, if you enter <b>memory trace_on_at_malloc 100</b>,
after the 100th call to <b>ckalloc</b>, memory trace
information will begin being displayed for all allocations
and frees. Since there can be a lot of memory activity
before a problem occurs, judicious use of this option can
reduce the slowdown caused by tracing (and the amount of
trace information produced), if you can identify a number of
allocations that occur before the problem sets in. The
current number of memory allocations that have occurred
since Tcl started is printed on a guard zone failure.</p>

<p style="margin-left:11%;"><b>memory validate</b>
[<b>on</b>|<b>off</b>]</p>

<p style="margin-left:22%;">Turns memory validation on or
off. When memory validation is enabled, on every call to
<b>ckalloc</b> or <b>ckfree</b>, the guard zones are checked
for every piece of memory currently in existence that was
allocated by <b>ckalloc</b>. This has a large performance
impact and should only be used when overwrite problems are
strongly suspected. The advantage of enabling memory
validation is that a guard zone overwrite can be detected on
the first call to <b>ckalloc</b> or <b>ckfree</b> after the
overwrite occurred, rather than when the specific memory
with the overwritten guard zone(s) is freed, which may occur
long after the overwrite occurred.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">ckalloc,
ckfree, Tcl_ValidateAllMemory, Tcl_DumpActiveMemory,
TCL_MEM_DEBUG</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">memory,
debug</p>
<hr>
</body>
</html>
