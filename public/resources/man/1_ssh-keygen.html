<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:00:11 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SSH-KEYGEN(1) BSD General Commands Manual
SSH-KEYGEN(1)</p>

<p style="margin-top: 1em"><b>NAME</b></p>

<p style="margin-left:6%;"><b>ssh-keygen</b> &mdash;
authentication key generation, management and conversion</p>

<p style="margin-top: 1em"><b>SYNOPSIS</b></p>

<p style="margin-left:21%;"><b>ssh-keygen</b>
[<b>&minus;q</b>] [<b>&minus;b&nbsp;</b><i>bits</i>]
[<b>&minus;t&nbsp;</b><i>type</i>]
[<b>&minus;N&nbsp;</b><i>new_passphrase</i>]
[<b>&minus;C&nbsp;</b><i>comment</i>]
[<b>&minus;f&nbsp;</b><i>output_keyfile</i>] <b><br>
ssh-keygen &minus;p</b>
[<b>&minus;P&nbsp;</b><i>old_passphrase</i>]
[<b>&minus;N&nbsp;</b><i>new_passphrase</i>]
[<b>&minus;f&nbsp;</b><i>keyfile</i>] <b><br>
ssh-keygen &minus;i</b>
[<b>&minus;m&nbsp;</b><i>key_format</i>]
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;e</b>
[<b>&minus;m&nbsp;</b><i>key_format</i>]
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;y</b>
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;c</b>
[<b>&minus;P&nbsp;</b><i>passphrase</i>]
[<b>&minus;C&nbsp;</b><i>comment</i>]
[<b>&minus;f&nbsp;</b><i>keyfile</i>] <b><br>
ssh-keygen &minus;l</b>
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;B</b>
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;D</b> <i>pkcs11</i> <b><br>
ssh-keygen &minus;F</b> <i>hostname</i>
[<b>&minus;f&nbsp;</b><i>known_hosts_file</i>]
[<b>&minus;l</b>] <b><br>
ssh-keygen &minus;H</b>
[<b>&minus;f&nbsp;</b><i>known_hosts_file</i>] <b><br>
ssh-keygen &minus;R</b> <i>hostname</i>
[<b>&minus;f&nbsp;</b><i>known_hosts_file</i>] <b><br>
ssh-keygen &minus;r</b> <i>hostname</i>
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>]
[<b>&minus;g</b>] <b><br>
ssh-keygen &minus;G</b> <i>output_file</i> [<b>&minus;v</b>]
[<b>&minus;b&nbsp;</b><i>bits</i>]
[<b>&minus;M&nbsp;</b><i>memory</i>]
[<b>&minus;S&nbsp;</b><i>start_point</i>] <b><br>
ssh-keygen &minus;T</b> <i>output_file</i> <b>&minus;f</b>
<i>input_file</i> [<b>&minus;v</b>]
[<b>&minus;a&nbsp;</b><i>rounds</i>]
[<b>&minus;J&nbsp;</b><i>num_lines</i>]
[<b>&minus;j&nbsp;</b><i>start_line</i>]
[<b>&minus;K&nbsp;</b><i>checkpt</i>]
[<b>&minus;W&nbsp;</b><i>generator</i>] <b><br>
ssh-keygen &minus;s</b> <i>ca_key</i> <b>&minus;I</b>
<i>certificate_identity</i> [<b>&minus;h</b>]
[<b>&minus;n&nbsp;</b><i>principals</i>]
[<b>&minus;O&nbsp;</b><i>option</i>]
[<b>&minus;V&nbsp;</b><i>validity_interval</i>]
[<b>&minus;z&nbsp;</b><i>serial_number</i>]
<i>file&nbsp;...</i> <b><br>
ssh-keygen &minus;L</b>
[<b>&minus;f&nbsp;</b><i>input_keyfile</i>] <b><br>
ssh-keygen &minus;A <br>
ssh-keygen &minus;k &minus;f</b> <i>krl_file</i>
[<b>&minus;u</b>] [<b>&minus;s&nbsp;</b><i>ca_public</i>]
[<b>&minus;z&nbsp;</b><i>version_number</i>]
<i>file&nbsp;...</i> <b><br>
ssh-keygen &minus;Q &minus;f</b> <i>krl_file
file&nbsp;...</i></p>

<p style="margin-top: 1em"><b>DESCRIPTION</b></p>

<p style="margin-left:6%;"><b>ssh-keygen</b> generates,
manages and converts authentication keys for ssh(1).
<b>ssh-keygen</b> can create RSA keys for use by SSH
protocol version 1 and DSA, ECDSA, ED25519 or RSA keys for
use by SSH protocol version 2. The type of key to be
generated is specified with the <b>&minus;t</b> option. If
invoked without any arguments, <b>ssh-keygen</b> will
generate an RSA key for use in SSH protocol 2
connections.</p>


<p style="margin-left:6%; margin-top: 1em"><b>ssh-keygen</b>
is also used to generate groups for use in Diffie-Hellman
group exchange (DH-GEX). See the <i>MODULI GENERATION</i>
section for details.</p>

<p style="margin-left:6%; margin-top: 1em">Finally,
<b>ssh-keygen</b> can be used to generate and update Key
Revocation Lists, and to test whether given keys have been
revoked by one. See the <i>KEY REVOCATION LISTS</i> section
for details.</p>

<p style="margin-left:6%; margin-top: 1em">Normally each
user wishing to use SSH with public key authentication runs
this once to create the authentication key in
<i>~/.ssh/identity</i>, <i>~/.ssh/id_dsa</i>,
<i>~/.ssh/id_ecdsa</i>, <i>~/.ssh/id_ed25519</i> or
<i>~/.ssh/id_rsa</i>. Additionally, the system administrator
may use this to generate host keys, as seen in
<i>/etc/rc</i>.</p>

<p style="margin-left:6%; margin-top: 1em">Normally this
program generates the key and asks for a file in which to
store the private key. The public key is stored in a file
with the same name but &lsquo;&lsquo;.pub&rsquo;&rsquo;
appended. The program also asks for a passphrase. The
passphrase may be empty to indicate no passphrase (host keys
must have an empty passphrase), or it may be a string of
arbitrary length. A passphrase is similar to a password,
except it can be a phrase with a series of words,
punctuation, numbers, whitespace, or any string of
characters you want. Good passphrases are 10-30 characters
long, are not simple sentences or otherwise easily guessable
(English prose has only 1-2 bits of entropy per character,
and provides very bad passphrases), and contain a mix of
upper and lowercase letters, numbers, and non-alphanumeric
characters. The passphrase can be changed later by using the
<b>&minus;p</b> option.</p>

<p style="margin-left:6%; margin-top: 1em">There is no way
to recover a lost passphrase. If the passphrase is lost or
forgotten, a new key must be generated and the corresponding
public key copied to other machines.</p>

<p style="margin-left:6%; margin-top: 1em">For RSA1 keys,
there is also a comment field in the key file that is only
for convenience to the user to help identify the key. The
comment can tell what the key is for, or whatever is useful.
The comment is initialized to
&lsquo;&lsquo;user@host&rsquo;&rsquo; when the key is
created, but can be changed using the <b>&minus;c</b>
option.</p>

<p style="margin-left:6%; margin-top: 1em">After a key is
generated, instructions below detail where the keys should
be placed to be activated.</p>

<p style="margin-left:6%; margin-top: 1em">The options are
as follows:</p>

<p style="margin-top: 1em"><b>&minus;A</b></p>

<p style="margin-left:17%; margin-top: 1em">For each of the
key types (rsa1, rsa, dsa, ecdsa and ed25519) for which host
keys do not exist, generate the host keys with the default
key file path, an empty passphrase, default bits for the key
type, and default comment. This is used by <i>/etc/rc</i> to
generate new host keys.</p>

<p style="margin-top: 1em"><b>&minus;a</b>
<i>rounds</i></p>

<p style="margin-left:17%;">When saving a new-format
private key (i.e. an ed25519 key or any SSH protocol 2 key
when the <b>&minus;o</b> flag is set), this option specifies
the number of KDF (key derivation function) rounds used.
Higher numbers result in slower passphrase verification and
increased resistance to brute-force password cracking
(should the keys be stolen).</p>

<p style="margin-left:17%; margin-top: 1em">When screening
DH-GEX candidates ( using the <b>&minus;T</b> command). This
option specifies the number of primality tests to
perform.</p>

<p style="margin-top: 1em"><b>&minus;B</b></p>

<p style="margin-left:17%; margin-top: 1em">Show the
bubblebabble digest of specified private or public key
file.</p>

<p style="margin-top: 1em"><b>&minus;b</b> <i>bits</i></p>

<p style="margin-left:17%;">Specifies the number of bits in
the key to create. For RSA keys, the minimum size is 768
bits and the default is 2048 bits. Generally, 2048 bits is
considered sufficient. DSA keys must be exactly 1024 bits as
specified by FIPS 186-2. For ECDSA keys, the <b>&minus;b</b>
flag determines the key length by selecting from one of
three elliptic curve sizes: 256, 384 or 521 bits. Attempting
to use bit lengths other than these three values for ECDSA
keys will fail. ED25519 keys have a fixed length and the
<b>&minus;b</b> flag will be ignored.</p>

<p style="margin-top: 1em"><b>&minus;C</b>
<i>comment</i></p>

<p style="margin-left:17%;">Provides a new comment.</p>

<p style="margin-top: 1em"><b>&minus;c</b></p>

<p style="margin-left:17%; margin-top: 1em">Requests
changing the comment in the private and public key files.
This operation is only supported for RSA1 keys. The program
will prompt for the file containing the private keys, for
the passphrase if the key has one, and for the new
comment.</p>

<p style="margin-top: 1em"><b>&minus;D</b>
<i>pkcs11</i></p>

<p style="margin-left:17%;">Download the RSA public keys
provided by the PKCS#11 shared library <i>pkcs11</i>. When
used in combination with <b>&minus;s</b>, this option
indicates that a CA key resides in a PKCS#11 token (see the
<i>CERTIFICATES</i> section for details).</p>

<p style="margin-top: 1em"><b>&minus;e</b></p>

<p style="margin-left:17%; margin-top: 1em">This option
will read a private or public OpenSSH key file and print to
stdout the key in one of the formats specified by the
<b>&minus;m</b> option. The default export format is
&lsquo;&lsquo;RFC4716&rsquo;&rsquo;. This option allows
exporting OpenSSH keys for use by other programs, including
several commercial SSH implementations.</p>

<p style="margin-top: 1em"><b>&minus;F</b>
<i>hostname</i></p>

<p style="margin-left:17%;">Search for the specified
<i>hostname</i> in a <i>known_hosts</i> file, listing any
occurrences found. This option is useful to find hashed host
names or addresses and may also be used in conjunction with
the <b>&minus;H</b> option to print found keys in a hashed
format.</p>

<p style="margin-top: 1em"><b>&minus;f</b>
<i>filename</i></p>

<p style="margin-left:17%;">Specifies the filename of the
key file.</p>

<p style="margin-top: 1em"><b>&minus;G</b>
<i>output_file</i></p>

<p style="margin-left:17%;">Generate candidate primes for
DH-GEX. These primes must be screened for safety (using the
<b>&minus;T</b> option) before use.</p>

<p style="margin-top: 1em"><b>&minus;g</b></p>

<p style="margin-left:17%; margin-top: 1em">Use generic DNS
format when printing fingerprint resource records using the
<b>&minus;r</b> command.</p>

<p style="margin-top: 1em"><b>&minus;H</b></p>

<p style="margin-left:17%; margin-top: 1em">Hash a
<i>known_hosts</i> file. This replaces all hostnames and
addresses with hashed representations within the specified
file; the original content is moved to a file with a .old
suffix. These hashes may be used normally by <b>ssh</b> and
<b>sshd</b>, but they do not reveal identifying information
should the file&rsquo;s contents be disclosed. This option
will not modify existing hashed hostnames and is therefore
safe to use on files that mix hashed and non-hashed
names.</p>

<p style="margin-top: 1em"><b>&minus;h</b></p>

<p style="margin-left:17%; margin-top: 1em">When signing a
key, create a host certificate instead of a user
certificate. Please see the <i>CERTIFICATES</i> section for
details.</p>

<p style="margin-top: 1em"><b>&minus;I</b>
<i>certificate_identity</i></p>

<p style="margin-left:17%;">Specify the key identity when
signing a public key. Please see the <i>CERTIFICATES</i>
section for details.</p>

<p style="margin-top: 1em"><b>&minus;i</b></p>

<p style="margin-left:17%; margin-top: 1em">This option
will read an unencrypted private (or public) key file in the
format specified by the <b>&minus;m</b> option and print an
OpenSSH compatible private (or public) key to stdout.</p>

<p style="margin-top: 1em"><b>&minus;J</b>
<i>num_lines</i></p>

<p style="margin-left:17%;">Exit after screening the
specified number of lines while performing DH candidate
screening using the <b>&minus;T</b> option.</p>

<p style="margin-top: 1em"><b>&minus;j</b>
<i>start_line</i></p>

<p style="margin-left:17%;">Start screening at the
specified line number while performing DH candidate
screening using the <b>&minus;T</b> option.</p>

<p style="margin-top: 1em"><b>&minus;K</b>
<i>checkpt</i></p>

<p style="margin-left:17%;">Write the last line processed
to the file <i>checkpt</i> while performing DH candidate
screening using the <b>&minus;T</b> option. This will be
used to skip lines in the input file that have already been
processed if the job is restarted. This option allows
importing keys from other software, including several
commercial SSH implementations. The default import format is
&lsquo;&lsquo;RFC4716&rsquo;&rsquo;.</p>

<p style="margin-top: 1em"><b>&minus;k</b></p>

<p style="margin-left:17%; margin-top: 1em">Generate a KRL
file. In this mode, <b>ssh-keygen</b> will generate a KRL
file at the location specified via the <b>&minus;f</b> flag
that revokes every key or certificate presented on the
command line. Keys/certificates to be revoked may be
specified by public key file or using the format described
in the <i>KEY REVOCATION LISTS</i> section.</p>

<p style="margin-top: 1em"><b>&minus;L</b></p>

<p style="margin-left:17%; margin-top: 1em">Prints the
contents of a certificate.</p>

<p style="margin-top: 1em"><b>&minus;l</b></p>

<p style="margin-left:17%; margin-top: 1em">Show
fingerprint of specified public key file. Private RSA1 keys
are also supported. For RSA and DSA keys <b>ssh-keygen</b>
tries to find the matching public key file and prints its
fingerprint. If combined with <b>&minus;v</b>, an ASCII art
representation of the key is supplied with the
fingerprint.</p>

<p style="margin-top: 1em"><b>&minus;M</b>
<i>memory</i></p>

<p style="margin-left:17%;">Specify the amount of memory to
use (in megabytes) when generating candidate moduli for
DH-GEX.</p>

<p style="margin-top: 1em"><b>&minus;m</b>
<i>key_format</i></p>

<p style="margin-left:17%;">Specify a key format for the
<b>&minus;i</b> (import) or <b>&minus;e</b> (export)
conversion options. The supported key formats are:
&lsquo;&lsquo;RFC4716&rsquo;&rsquo; (RFC 4716/SSH2 public or
private key), &lsquo;&lsquo;PKCS8&rsquo;&rsquo; (PEM PKCS8
public key) or &lsquo;&lsquo;PEM&rsquo;&rsquo; (PEM public
key). The default conversion format is
&lsquo;&lsquo;RFC4716&rsquo;&rsquo;.</p>

<p style="margin-top: 1em"><b>&minus;N</b>
<i>new_passphrase</i></p>

<p style="margin-left:17%;">Provides the new
passphrase.</p>

<p style="margin-top: 1em"><b>&minus;n</b>
<i>principals</i></p>

<p style="margin-left:17%;">Specify one or more principals
(user or host names) to be included in a certificate when
signing a key. Multiple principals may be specified,
separated by commas. Please see the <i>CERTIFICATES</i>
section for details.</p>

<p style="margin-top: 1em"><b>&minus;O</b>
<i>option</i></p>

<p style="margin-left:17%;">Specify a certificate option
when signing a key. This option may be specified multiple
times. Please see the <i>CERTIFICATES</i> section for
details. The options that are valid for user certificates
are:</p>

<p style="margin-top: 1em"><b>clear</b></p>

<p style="margin-left:27%; margin-top: 1em">Clear all
enabled permissions. This is useful for clearing the default
set of permissions so permissions may be added
individually.</p>


<p style="margin-top: 1em"><b>force-command</b>=<i>command</i></p>

<p style="margin-left:27%;">Forces the execution of
<i>command</i> instead of any shell or command specified by
the user when the certificate is used for
authentication.</p>

<p style="margin-top: 1em"><b>no-agent-forwarding</b></p>

<p style="margin-left:27%;">Disable ssh-agent(1) forwarding
(permitted by default).</p>

<p style="margin-top: 1em"><b>no-port-forwarding</b></p>

<p style="margin-left:27%;">Disable port forwarding
(permitted by default).</p>

<p style="margin-top: 1em"><b>no-pty</b></p>

<p style="margin-left:27%; margin-top: 1em">Disable PTY
allocation (permitted by default).</p>

<p style="margin-top: 1em"><b>no-user-rc</b></p>

<p style="margin-left:27%;">Disable execution of
<i>~/.ssh/rc</i> by sshd(8) (permitted by default).</p>

<p style="margin-top: 1em"><b>no-x11-forwarding</b></p>

<p style="margin-left:27%;">Disable X11 forwarding
(permitted by default).</p>


<p style="margin-top: 1em"><b>permit-agent-forwarding</b></p>

<p style="margin-left:27%;">Allows ssh-agent(1)
forwarding.</p>


<p style="margin-top: 1em"><b>permit-port-forwarding</b></p>

<p style="margin-left:27%;">Allows port forwarding.</p>

<p style="margin-top: 1em"><b>permit-pty</b></p>

<p style="margin-left:27%;">Allows PTY allocation.</p>

<p style="margin-top: 1em"><b>permit-user-rc</b></p>

<p style="margin-left:27%;">Allows execution of
<i>~/.ssh/rc</i> by sshd(8).</p>


<p style="margin-top: 1em"><b>permit-x11-forwarding</b></p>

<p style="margin-left:27%;">Allows X11 forwarding.</p>


<p style="margin-top: 1em"><b>source-address</b>=<i>address_list</i></p>

<p style="margin-left:27%;">Restrict the source addresses
from which the certificate is considered valid. The
<i>address_list</i> is a comma-separated list of one or more
address/netmask pairs in CIDR format.</p>

<p style="margin-left:17%; margin-top: 1em">At present, no
options are valid for host keys.</p>

<p style="margin-top: 1em"><b>&minus;o</b></p>

<p style="margin-left:17%; margin-top: 1em">Causes
<b>ssh-keygen</b> to save SSH protocol 2 private keys using
the new OpenSSH format rather than the more compatible PEM
format. The new format has increased resistance to
brute-force password cracking but is not supported by
versions of OpenSSH prior to 6.5. Ed25519 keys always use
the new private key format.</p>

<p style="margin-top: 1em"><b>&minus;P</b>
<i>passphrase</i></p>

<p style="margin-left:17%;">Provides the (old)
passphrase.</p>

<p style="margin-top: 1em"><b>&minus;p</b></p>

<p style="margin-left:17%; margin-top: 1em">Requests
changing the passphrase of a private key file instead of
creating a new private key. The program will prompt for the
file containing the private key, for the old passphrase, and
twice for the new passphrase.</p>

<p style="margin-top: 1em"><b>&minus;Q</b></p>

<p style="margin-left:17%; margin-top: 1em">Test whether
keys have been revoked in a KRL.</p>

<p style="margin-top: 1em"><b>&minus;q</b></p>

<p style="margin-left:17%; margin-top: 1em">Silence
<b>ssh-keygen</b>.</p>

<p style="margin-top: 1em"><b>&minus;R</b>
<i>hostname</i></p>

<p style="margin-left:17%;">Removes all keys belonging to
<i>hostname</i> from a <i>known_hosts</i> file. This option
is useful to delete hashed hosts (see the <b>&minus;H</b>
option above).</p>

<p style="margin-top: 1em"><b>&minus;r</b>
<i>hostname</i></p>

<p style="margin-left:17%;">Print the SSHFP fingerprint
resource record named <i>hostname</i> for the specified
public key file.</p>

<p style="margin-top: 1em"><b>&minus;S</b> <i>start</i></p>

<p style="margin-left:17%;">Specify start point (in hex)
when generating candidate moduli for DH-GEX.</p>

<p style="margin-top: 1em"><b>&minus;s</b>
<i>ca_key</i></p>

<p style="margin-left:17%;">Certify (sign) a public key
using the specified CA key. Please see the
<i>CERTIFICATES</i> section for details.</p>

<p style="margin-left:17%; margin-top: 1em">When generating
a KRL, <b>&minus;s</b> specifies a path to a CA public key
file used to revoke certificates directly by key ID or
serial number. See the <i>KEY REVOCATION LISTS</i> section
for details.</p>

<p style="margin-top: 1em"><b>&minus;T</b>
<i>output_file</i></p>

<p style="margin-left:17%;">Test DH group exchange
candidate primes (generated using the <b>&minus;G</b>
option) for safety.</p>

<p style="margin-top: 1em"><b>&minus;t</b> <i>type</i></p>

<p style="margin-left:17%;">Specifies the type of key to
create. The possible values are
&lsquo;&lsquo;rsa1&rsquo;&rsquo; for protocol version 1 and
&lsquo;&lsquo;dsa&rsquo;&rsquo;,
&lsquo;&lsquo;ecdsa&rsquo;&rsquo;,
&lsquo;&lsquo;ed25519&rsquo;&rsquo;, or
&lsquo;&lsquo;rsa&rsquo;&rsquo; for protocol version 2.</p>

<p style="margin-top: 1em"><b>&minus;u</b></p>

<p style="margin-left:17%; margin-top: 1em">Update a KRL.
When specified with <b>&minus;k</b>, keys listed via the
command line are added to the existing KRL rather than a new
KRL being created.</p>

<p style="margin-top: 1em"><b>&minus;V</b>
<i>validity_interval</i></p>

<p style="margin-left:17%;">Specify a validity interval
when signing a certificate. A validity interval may consist
of a single time, indicating that the certificate is valid
beginning now and expiring at that time, or may consist of
two times separated by a colon to indicate an explicit time
interval. The start time may be specified as a date in
YYYYMMDD format, a time in YYYYMMDDHHMMSS format or a
relative time (to the current time) consisting of a minus
sign followed by a relative time in the format described in
the TIME FORMATS section of sshd_config(5). The end time may
be specified as a YYYYMMDD date, a YYYYMMDDHHMMSS time or a
relative time starting with a plus character.</p>

<p style="margin-left:17%; margin-top: 1em">For example:
&lsquo;&lsquo;+52w1d&rsquo;&rsquo; (valid from now to 52
weeks and one day from now),
&lsquo;&lsquo;-4w:+4w&rsquo;&rsquo; (valid from four weeks
ago to four weeks from now),
&lsquo;&lsquo;20100101123000:20110101123000&rsquo;&rsquo;
(valid from 12:30 PM, January 1st, 2010 to 12:30 PM, January
1st, 2011), &lsquo;&lsquo;-1d:20110101&rsquo;&rsquo; (valid
from yesterday to midnight, January 1st, 2011).</p>

<p style="margin-top: 1em"><b>&minus;v</b></p>

<p style="margin-left:17%; margin-top: 1em">Verbose mode.
Causes <b>ssh-keygen</b> to print debugging messages about
its progress. This is helpful for debugging moduli
generation. Multiple <b>&minus;v</b> options increase the
verbosity. The maximum is 3.</p>

<p style="margin-top: 1em"><b>&minus;W</b>
<i>generator</i></p>

<p style="margin-left:17%;">Specify desired generator when
testing candidate moduli for DH-GEX.</p>

<p style="margin-top: 1em"><b>&minus;y</b></p>

<p style="margin-left:17%; margin-top: 1em">This option
will read a private OpenSSH format file and print an OpenSSH
public key to stdout.</p>

<p style="margin-top: 1em"><b>&minus;z</b>
<i>serial_number</i></p>

<p style="margin-left:17%;">Specifies a serial number to be
embedded in the certificate to distinguish this certificate
from others from the same CA. The default serial number is
zero.</p>

<p style="margin-left:17%; margin-top: 1em">When generating
a KRL, the <b>&minus;z</b> flag is used to specify a KRL
version number.</p>

<p style="margin-top: 1em"><b>MODULI GENERATION</b></p>

<p style="margin-left:6%;"><b>ssh-keygen</b> may be used to
generate groups for the Diffie-Hellman Group Exchange
(DH-GEX) protocol. Generating these groups is a two-step
process: first, candidate primes are generated using a fast,
but memory intensive process. These candidate primes are
then tested for suitability (a CPU-intensive process).</p>

<p style="margin-left:6%; margin-top: 1em">Generation of
primes is performed using the <b>&minus;G</b> option. The
desired length of the primes may be specified by the
<b>&minus;b</b> option. For example:</p>

<p style="margin-left:14%; margin-top: 1em"># ssh-keygen -G
moduli-2048.candidates -b 2048</p>

<p style="margin-left:6%; margin-top: 1em">By default, the
search for primes begins at a random point in the desired
length range. This may be overridden using the
<b>&minus;S</b> option, which specifies a different start
point (in hex).</p>

<p style="margin-left:6%; margin-top: 1em">Once a set of
candidates have been generated, they must be screened for
suitability. This may be performed using the <b>&minus;T</b>
option. In this mode <b>ssh-keygen</b> will read candidates
from standard input (or a file specified using the
<b>&minus;f</b> option). For example:</p>

<p style="margin-left:14%; margin-top: 1em"># ssh-keygen -T
moduli-2048 -f moduli-2048.candidates</p>

<p style="margin-left:6%; margin-top: 1em">By default, each
candidate will be subjected to 100 primality tests. This may
be overridden using the <b>&minus;a</b> option. The DH
generator value will be chosen automatically for the prime
under consideration. If a specific generator is desired, it
may be requested using the <b>&minus;W</b> option. Valid
generator values are 2, 3, and 5.</p>

<p style="margin-left:6%; margin-top: 1em">Screened DH
groups may be installed in <i>/etc/ssh/moduli</i>. It is
important that this file contains moduli of a range of bit
lengths and that both ends of a connection share common
moduli.</p>

<p style="margin-top: 1em"><b>CERTIFICATES</b></p>

<p style="margin-left:6%;"><b>ssh-keygen</b> supports
signing of keys to produce certificates that may be used for
user or host authentication. Certificates consist of a
public key, some identity information, zero or more
principal (user or host) names and a set of options that are
signed by a Certification Authority (CA) key. Clients or
servers may then trust only the CA key and verify its
signature on a certificate rather than trusting many
user/host keys. Note that OpenSSH certificates are a
different, and much simpler, format to the X.509
certificates used in ssl(8).</p>


<p style="margin-left:6%; margin-top: 1em"><b>ssh-keygen</b>
supports two types of certificates: user and host. User
certificates authenticate users to servers, whereas host
certificates authenticate server hosts to users. To generate
a user certificate:</p>

<p style="margin-left:14%; margin-top: 1em">$ ssh-keygen -s
/path/to/ca_key -I key_id /path/to/user_key.pub</p>

<p style="margin-left:6%; margin-top: 1em">The resultant
certificate will be placed in
<i>/path/to/user_key-cert.pub</i>. A host certificate
requires the <b>&minus;h</b> option:</p>

<p style="margin-left:14%; margin-top: 1em">$ ssh-keygen -s
/path/to/ca_key -I key_id -h /path/to/host_key.pub</p>

<p style="margin-left:6%; margin-top: 1em">The host
certificate will be output to
<i>/path/to/host_key-cert.pub</i>.</p>

<p style="margin-left:6%; margin-top: 1em">It is possible
to sign using a CA key stored in a PKCS#11 token by
providing the token library using <b>&minus;D</b> and
identifying the CA key by providing its public half as an
argument to <b>&minus;s</b>:</p>

<p style="margin-left:14%; margin-top: 1em">$ ssh-keygen -s
ca_key.pub -D libpkcs11.so -I key_id host_key.pub</p>

<p style="margin-left:6%; margin-top: 1em">In all cases,
<i>key_id</i> is a &quot;key identifier&quot; that is logged
by the server when the certificate is used for
authentication.</p>

<p style="margin-left:6%; margin-top: 1em">Certificates may
be limited to be valid for a set of principal (user/host)
names. By default, generated certificates are valid for all
users or hosts. To generate a certificate for a specified
set of principals:</p>

<p style="margin-left:14%; margin-top: 1em">$ ssh-keygen -s
ca_key -I key_id -n user1,user2 user_key.pub <br>
$ ssh-keygen -s ca_key -I key_id -h -n host.domain
user_key.pub</p>

<p style="margin-left:6%; margin-top: 1em">Additional
limitations on the validity and use of user certificates may
be specified through certificate options. A certificate
option may disable features of the SSH session, may be valid
only when presented from particular source addresses or may
force the use of a specific command. For a list of valid
certificate options, see the documentation for the
<b>&minus;O</b> option above.</p>

<p style="margin-left:6%; margin-top: 1em">Finally,
certificates may be defined with a validity lifetime. The
<b>&minus;V</b> option allows specification of certificate
start and end times. A certificate that is presented at a
time outside this range will not be considered valid. By
default, certificates are valid from UNIX Epoch to the
distant future.</p>

<p style="margin-left:6%; margin-top: 1em">For certificates
to be used for user or host authentication, the CA public
key must be trusted by sshd(8) or ssh(1). Please refer to
those manual pages for details.</p>

<p style="margin-top: 1em"><b>KEY REVOCATION LISTS</b></p>

<p style="margin-left:6%;"><b>ssh-keygen</b> is able to
manage OpenSSH format Key Revocation Lists (KRLs). These
binary files specify keys or certificates to be revoked
using a compact format, taking as little as one bit per
certificate if they are being revoked by serial number.</p>

<p style="margin-left:6%; margin-top: 1em">KRLs may be
generated using the <b>&minus;k</b> flag. This option reads
one or more files from the command line and generates a new
KRL. The files may either contain a KRL specification (see
below) or public keys, listed one per line. Plain public
keys are revoked by listing their hash or contents in the
KRL and certificates revoked by serial number or key ID (if
the serial is zero or not available).</p>

<p style="margin-left:6%; margin-top: 1em">Revoking keys
using a KRL specification offers explicit control over the
types of record used to revoke keys and may be used to
directly revoke certificates by serial number or key ID
without having the complete original certificate on hand. A
KRL specification consists of lines containing one of the
following directives followed by a colon and some
directive-specific information.</p>

<p style="margin-top: 1em"><b>serial</b>:
<i>serial_number</i>[-<i>serial_number</i>]</p>

<p style="margin-left:17%;">Revokes a certificate with the
specified serial number. Serial numbers are 64-bit values,
not including zero and may be expressed in decimal, hex or
octal. If two serial numbers are specified separated by a
hyphen, then the range of serial numbers including and
between each is revoked. The CA key must have been specified
on the <b>ssh-keygen</b> command line using the
<b>&minus;s</b> option.</p>

<p style="margin-top: 1em"><b>id</b>: <i>key_id</i></p>

<p style="margin-left:17%;">Revokes a certificate with the
specified key ID string. The CA key must have been specified
on the <b>ssh-keygen</b> command line using the
<b>&minus;s</b> option.</p>

<p style="margin-top: 1em"><b>key</b>:
<i>public_key</i></p>

<p style="margin-left:17%;">Revokes the specified key. If a
certificate is listed, then it is revoked as a plain public
key.</p>

<p style="margin-top: 1em"><b>sha1</b>:
<i>public_key</i></p>

<p style="margin-left:17%;">Revokes the specified key by
its SHA1 hash.</p>

<p style="margin-left:6%; margin-top: 1em">KRLs may be
updated using the <b>&minus;u</b> flag in addition to
<b>&minus;k</b>. When this option is specified, keys listed
via the command line are merged into the KRL, adding to
those already there.</p>

<p style="margin-left:6%; margin-top: 1em">It is also
possible, given a KRL, to test whether it revokes a
particular key (or keys). The <b>&minus;Q</b> flag will
query an existing KRL, testing each key specified on the
commandline. If any key listed on the command line has been
revoked (or an error encountered) then <b>ssh-keygen</b>
will exit with a non-zero exit status. A zero exit status
will only be returned if no key was revoked.</p>

<p style="margin-top: 1em"><b>FILES</b> <br>
~/.ssh/identity</p>

<p style="margin-left:17%;">Contains the protocol version 1
RSA authentication identity of the user. This file should
not be readable by anyone but the user. It is possible to
specify a passphrase when generating the key; that
passphrase will be used to encrypt the private part of this
file using 3DES. This file is not automatically accessed by
<b>ssh-keygen</b> but it is offered as the default file for
the private key. ssh(1) will read this file when a login
attempt is made.</p>

<p style="margin-top: 1em">~/.ssh/identity.pub</p>

<p style="margin-left:17%;">Contains the protocol version 1
RSA public key for authentication. The contents of this file
should be added to <i>~/.ssh/authorized_keys</i> on all
machines where the user wishes to log in using RSA
authentication. There is no need to keep the contents of
this file secret.</p>

<p style="margin-top: 1em">~/.ssh/id_dsa <br>
~/.ssh/id_ecdsa <br>
~/.ssh/id_ed25519 <br>
~/.ssh/id_rsa</p>

<p style="margin-left:17%;">Contains the protocol version 2
DSA, ECDSA, ED25519 or RSA authentication identity of the
user. This file should not be readable by anyone but the
user. It is possible to specify a passphrase when generating
the key; that passphrase will be used to encrypt the private
part of this file using 128-bit AES. This file is not
automatically accessed by <b>ssh-keygen</b> but it is
offered as the default file for the private key. ssh(1) will
read this file when a login attempt is made.</p>

<p style="margin-top: 1em">~/.ssh/id_dsa.pub <br>
~/.ssh/id_ecdsa.pub <br>
~/.ssh/id_ed25519.pub <br>
~/.ssh/id_rsa.pub</p>

<p style="margin-left:17%;">Contains the protocol version 2
DSA, ECDSA, ED25519 or RSA public key for authentication.
The contents of this file should be added to
<i>~/.ssh/authorized_keys</i> on all machines where the user
wishes to log in using public key authentication. There is
no need to keep the contents of this file secret.</p>

<p style="margin-top: 1em">/etc/ssh/moduli</p>

<p style="margin-left:17%;">Contains Diffie-Hellman groups
used for DH-GEX. The file format is described in
moduli(5).</p>

<p style="margin-top: 1em"><b>ENVIRONMENT</b> <i><br>
SSH_USE_STRONG_RNG</i></p>

<p style="margin-left:17%;">The reseeding of the OpenSSL
random generator is usually done from <b>/dev/urandom</b>.
If the <b>SSH_USE_STRONG_RNG</b> environment variable is set
to value other than <b>0</b> the OpenSSL random generator is
reseeded from <b>/dev/random</b>. The number of bytes read
is defined by the SSH_USE_STRONG_RNG value. Minimum is 14
bytes. This setting is not recommended on the computers
without the hardware random generator because insufficient
entropy causes the connection to be blocked until enough
entropy is available.</p>

<p style="margin-top: 1em"><b>SEE ALSO</b></p>

<p style="margin-left:6%;">ssh(1), ssh-add(1),
ssh-agent(1), moduli(5), sshd(8)</p>

<p style="margin-top: 1em"><i>The Secure Shell (SSH) Public
Key File Format</i></p>

<p style="margin-left:6%;">,</p>

<p>RFC 4716 , <br>
2006 .</p>

<p style="margin-top: 1em"><b>AUTHORS</b></p>

<p style="margin-left:6%;">OpenSSH is a derivative of the
original and free ssh 1.2.12 release by Tatu Ylonen. Aaron
Campbell, Bob Beck, Markus Friedl, Niels Provos, Theo de
Raadt and Dug Song removed many bugs, re-added newer
features and created OpenSSH. Markus Friedl contributed the
support for SSH protocol versions 1.5 and 2.0.</p>

<p style="margin-left:6%; margin-top: 1em">BSD
August&nbsp;18, 2016 BSD</p>
<hr>
</body>
</html>
