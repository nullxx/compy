<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:23:35 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>terminfo</title>

</head>
<body>

<h1 align="center">terminfo</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#EXTENSIONS">EXTENSIONS</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHORS">AUTHORS</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">terminfo
&minus; terminal capability data base</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/usr/share/terminfo/*/*</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>Terminfo</i>
is a data base describing terminals, used by screen-oriented
programs such as <b>nvi</b>(1), <b>rogue</b>(1) and
libraries such as <b>curses</b>(3X). <i>Terminfo</i>
describes terminals by giving a set of capabilities which
they have, by specifying how to perform screen operations,
and by specifying padding requirements and initialization
sequences. This describes <b>ncurses</b> version 5.9 (patch
20130511).</p>

<p style="margin-left:11%; margin-top: 1em">Entries in
<i>terminfo</i> consist of a sequence of &lsquo;,&rsquo;
separated fields (embedded commas may be escaped with a
backslash or notated as \054). White space after the
&lsquo;,&rsquo; separator is ignored. The first entry for
each terminal gives the names which are known for the
terminal, separated by &lsquo;|&rsquo; characters. The first
name given is the most common abbreviation for the terminal,
the last name given should be a long name fully identifying
the terminal, and all others are understood as synonyms for
the terminal name. All names but the last should be in lower
case and contain no blanks; the last name may well contain
upper case and blanks for readability.</p>

<p style="margin-left:11%; margin-top: 1em">Lines beginning
with a &lsquo;#&rsquo; in the first column are treated as
comments. While comment lines are legal at any point, the
output of <b>captoinfo</b> and <b>infotocap</b> (aliases for
<b>tic</b>) will move comments so they occur only between
entries.</p>

<p style="margin-left:11%; margin-top: 1em">Newlines and
leading tabs may be used for formatting entries for
readability. These are removed from parsed entries. The
<b>infocmp&nbsp;&minus;f</b> option relies on this to format
if-then-else expressions: the result can be read by
<b>tic</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Terminal names
(except for the last, verbose entry) should be chosen using
the following conventions. The particular piece of hardware
making up the terminal should have a root name, thus
&ldquo;hp2621&rdquo;. This name should not contain hyphens.
Modes that the hardware can be in, or user preferences,
should be indicated by appending a hyphen and a mode suffix.
Thus, a vt100 in 132 column mode would be vt100&minus;w. The
following suffixes should be used where possible:</p>

<p style="margin-left:11%; margin-top: 1em">For more on
terminal naming conventions, see the <b>term(7)</b> manual
page.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Predefined
Capabilities</b> <small><br>
The following is a complete table of the capabilities
included in a terminfo description block and available to
terminfo-using code. In each line of the table,</small></p>

<p style="margin-left:11%; margin-top: 1em"><small>The
<b>variable</b> is the name by which the programmer (at the
terminfo level) accesses the capability.</small></p>

<p style="margin-left:11%; margin-top: 1em"><small>The
<b>capname</b> is the short name used in the text of the
database, and is used by a person updating the database.
Whenever possible, capnames are chosen to be the same as or
similar to the ANSI X3.64-1979 standard (now superseded by
ECMA-48, which uses identical or very similar names).
Semantics are also intended to match those of the
specification.</small></p>

<p style="margin-left:11%; margin-top: 1em"><small>The
termcap code is the old <b>termcap</b></small> capability
name (some capabilities are new, and have names which
termcap did not originate).</p>

<p style="margin-left:11%; margin-top: 1em">Capability
names have no hard length limit, but an informal limit of 5
characters has been adopted to keep them short and to allow
the tabs in the source file <b>Caps</b> to line up
nicely.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, the
description field attempts to convey the semantics of the
capability. You may find some codes in the description
field:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>(P)</p></td>
<td width="2%"></td>
<td width="78%">


<p>indicates that padding may be specified</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>#[1-9]</p></td>
<td width="2%"></td>
<td width="78%">


<p>in the description field indicates that the string is
passed through tparm with parms as given (#<i>i</i>).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>(P*)</p></td>
<td width="2%"></td>
<td width="78%">


<p>indicates that padding may vary in proportion to the
number of lines affected</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>(#<i>i</i>)</p></td>
<td width="2%"></td>
<td width="78%">


<p>indicates the <i>i</i>th parameter.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">These are the
boolean capabilities:</p>

<p style="margin-left:11%; margin-top: 1em">These are the
numeric capabilities:</p>

<p style="margin-left:11%; margin-top: 1em">The following
numeric capabilities are present in the SVr4.0 term
structure, but are not yet documented in the man page. They
came in with SVr4&rsquo;s printer support.</p>

<p style="margin-left:11%; margin-top: 1em">These are the
string capabilities:</p>

<p style="margin-left:11%; margin-top: 1em">The following
string capabilities are present in the SVr4.0 term
structure, but were originally not documented in the man
page.</p>

<p style="margin-left:12%; margin-top: 1em">The XSI Curses
standard added these hardcopy capabilities. They were used
in some post-4.1 versions of System V curses, e.g., Solaris
2.5 and IRIX 6.x. Except for <b>YI</b>, the <b>ncurses</b>
termcap names for them are invented. According to the XSI
Curses standard, they have no termcap names. If your
compiled terminfo entries use these, they may not be
binary-compatible with System V terminfo entries after
SVr4.1; beware!</p>


<p style="margin-left:11%; margin-top: 1em"><b>User-Defined
Capabilities</b> <br>
The preceding section listed the <i>predefined</i>
capabilities. They deal with some special features for
terminals no longer (or possibly never) produced.
Occasionally there are special features of newer terminals
which are awkward or impossible to represent by reusing the
predefined capabilities.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ncurses</b>
addresses this limitation by allowing user-defined
capabilities. The <b>tic</b> and <b>infocmp</b> programs
provide the <b>&minus;x</b> option for this purpose. When
<b>&minus;x</b> is set, <b>tic</b> treats unknown
capabilities as user-defined. That is, if <b>tic</b>
encounters a capability name which it does not recognize, it
infers its type (boolean, number or string) from the syntax
and makes an extended table entry for that capability. The
<b>use_extended_names</b> function makes this information
conditionally available to applications. The ncurses library
provides the data leaving most of the behavior to
applications:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">User-defined capability strings
whose name begins with &ldquo;k&rdquo; are treated as
function keys.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The types (boolean, number, string) determined by
<b>tic</b> can be inferred by successful calls on
<b>tigetflag</b>, etc.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If the capability name happens to be two characters, the
capability is also available through the termcap
interface.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">While termcap
is said to be extensible because it does not use a
predefined set of capabilities, in practice it has been
limited to the capabilities defined by terminfo
implementations. As a rule, user-defined capabilities
intended for use by termcap applications should be limited
to booleans and numbers to avoid running past the 1023 byte
limit assumed by termcap implementations and their
applications. In particular, providing extended sets of
function keys (past the 60 numbered keys and the handful of
special named keys) is best done using the longer names
available using terminfo.</p>

<p style="margin-left:11%; margin-top: 1em"><b>A Sample
Entry</b> <br>
The following entry, describing an ANSI-standard terminal,
is representative of what a <b>terminfo</b> entry for a
modern terminal typically looks like.</p>

<pre style="margin-left:8%; margin-top: 1em">ansi|ansi/pc-term compatible with color,
        mc5i,
        colors#8, ncv#3, pairs#64,
        cub=\E[%p1%dD, cud=\E[%p1%dB, cuf=\E[%p1%dC,
        cuu=\E[%p1%dA, dch=\E[%p1%dP, dl=\E[%p1%dM,
        ech=\E[%p1%dX, el1=\E[1K, hpa=\E[%p1%dG, ht=\E[I,
        ich=\E[%p1%d@, il=\E[%p1%dL, indn=\E[%p1%dS, .indn=\E[%p1%dT,
        kbs=^H, kcbt=\E[Z, kcub1=\E[D, kcud1=\E[B,
        kcuf1=\E[C, kcuu1=\E[A, kf1=\E[M, kf10=\E[V,
        kf11=\E[W, kf12=\E[X, kf2=\E[N, kf3=\E[O, kf4=\E[P,
        kf5=\E[Q, kf6=\E[R, kf7=\E[S, kf8=\E[T, kf9=\E[U,
        kich1=\E[L, mc4=\E[4i, mc5=\E[5i, nel=\r\E[S,
        op=\E[37;40m, rep=%p1%c\E[%p2%{1}%&minus;%db,
        rin=\E[%p1%dT, s0ds=\E(B, s1ds=\E)B, s2ds=\E*B,
        s3ds=\E+B, setab=\E[4%p1%dm, setaf=\E[3%p1%dm,
        setb=\E[4%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m,
        setf=\E[3%?%p1%{1}%=%t4%e%p1%{3}%=%t6%e%p1%{4}%=%t1%e%p1%{6}%=%t3%e%p1%d%;m,
        sgr=\E[0;10%?%p1%t;7%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;%?%p6%t;1%;%?%p7%t;8%;%?%p8%t;11%;%?%p9%t;12%;m,
        sgr0=\E[0;10m, tbc=\E[2g, u6=\E[%d;%dR, u7=\E[6n,
        u8=\E[?%[;0123456789]c, u9=\E[c, vpa=\E[%p1%dd,</pre>


<p style="margin-left:11%; margin-top: 1em">Entries may
continue onto multiple lines by placing white space at the
beginning of each line except the first. Comments may be
included on lines beginning with &ldquo;#&rdquo;.
Capabilities in <i>terminfo</i> are of three types:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Boolean capabilities which
indicate that the terminal has some particular feature,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>numeric capabilities giving the size of the terminal or
the size of particular delays, and</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>string capabilities, which give a sequence which can be
used to perform particular terminal operations.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Types of
Capabilities</b> <br>
All capabilities have names. For instance, the fact that
ANSI-standard terminals have <i>automatic margins</i> (i.e.,
an automatic return and line-feed when the end of a line is
reached) is indicated by the capability <b>am</b>. Hence the
description of ansi includes <b>am</b>. Numeric capabilities
are followed by the character &lsquo;#&rsquo; and then a
positive value. Thus <b>cols</b>, which indicates the number
of columns the terminal has, gives the value
&lsquo;80&rsquo; for ansi. Values for numeric capabilities
may be specified in decimal, octal or hexadecimal, using the
C programming language conventions (e.g., 255, 0377 and 0xff
or 0xFF).</p>

<p style="margin-left:11%; margin-top: 1em">Finally, string
valued capabilities, such as <b>el</b> (clear to end of line
sequence) are given by the two-character code, an
&lsquo;=&rsquo;, and then a string ending at the next
following &lsquo;,&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">A number of
escape sequences are provided in the string valued
capabilities for easy encoding of characters there. Both
<b>\E</b> and <b>\e</b> map to an <small>ESCAPE</small>
character, <b>^x</b> maps to a control-x for any appropriate
x, and the sequences <b>\n \l \r \t \b \f \s</b> give a
newline, line-feed, return, tab, backspace, form-feed, and
space. Other escapes include</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p style="margin-top: 1em"><b>\^</b> for <b>^</b>,</p></td>
<td width="58%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p><b>\\</b> for <b>\</b>,</p></td>
<td width="58%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p><b>\</b>, for comma,</p></td>
<td width="58%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p><b>\:</b> for <b>:</b>,</p></td>
<td width="58%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="25%">


<p>and <b>\0</b> for null.</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em"><b>\0</b> will
produce \200, which does not terminate a string but behaves
as a null character on most terminals, providing CS7 is
specified. See stty(1).</p>

<p style="margin-left:17%; margin-top: 1em">The reason for
this quirk is to maintain binary compatibility of the
compiled terminfo files with other implementations, e.g.,
the SVr4 systems, which document this. Compiled terminfo
files use null-terminated strings, with no lengths.
Modifying this would require a new binary format, which
would not work with other implementations.</p>

<p style="margin-left:11%; margin-top: 1em">Finally,
characters may be given as three octal digits after a
<b>\</b>.</p>

<p style="margin-left:11%; margin-top: 1em">A delay in
milliseconds may appear anywhere in a string capability,
enclosed in $&lt;..&gt; brackets, as in
<b>el</b>=\EK$&lt;5&gt;, and padding characters are supplied
by <i>tputs</i> to provide this delay. The delay must be a
number with at most one decimal place of precision; it may
be followed by suffixes &lsquo;*&rsquo; or &rsquo;/&rsquo;
or both. A &lsquo;*&rsquo; indicates that the padding
required is proportional to the number of lines affected by
the operation, and the amount given is the per-affected-unit
padding required. (In the case of insert character, the
factor is still the number of <i>lines</i> affected.)
Normally, padding is advisory if the device has the
<b>xon</b> capability; it is used for cost computation but
does not trigger delays. A &lsquo;/&rsquo; suffix indicates
that the padding is mandatory and forces a delay of the
given number of milliseconds even on devices for which
<b>xon</b> is present to indicate flow control.</p>

<p style="margin-left:11%; margin-top: 1em">Sometimes
individual capabilities must be commented out. To do this,
put a period before the capability name. For example, see
the second <b>ind</b> in the example above.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Fetching
Compiled Descriptions</b> <br>
The <b>ncurses</b> library searches for terminal
descriptions in several places. It uses only the first
description found. The library has a compiled-in list of
places to search which can be overridden by environment
variables. Before starting to search, <b>ncurses</b>
eliminates duplicates in its search list.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">If the environment variable
TERMINFO is set, it is interpreted as the pathname of a
directory containing the compiled description you are
working on. Only that directory is searched.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If TERMINFO is not set, <b>ncurses</b> will instead look
in the directory <b>$HOME/.terminfo</b> for a compiled
description.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Next, if the environment variable TERMINFO_DIRS is set,
<b>ncurses</b> will interpret the contents of that variable
as a list of colon-separated directories (or database files)
to be searched.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">An empty
directory name (i.e., if the variable begins or ends with a
colon, or contains adacent colons) is interpreted as the
system location <i>/usr/share/terminfo</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Finally, <b>ncurses</b> searches
these compiled-in locations:</p></td></tr>
</table>

<p style="margin-left:17%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%"></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em">a list of directories (no
default value), and</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>the system terminfo directory,
<i>/usr/share/terminfo</i> (the compiled-in default).</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Preparing
Descriptions</b> <br>
We now outline how to prepare descriptions of terminals. The
most effective way to prepare a terminal description is by
imitating the description of a similar terminal in
<i>terminfo</i> and to build up a description gradually,
using partial descriptions with <i>vi</i> or some other
screen-oriented program to check that they are correct. Be
aware that a very unusual terminal may expose deficiencies
in the ability of the <i>terminfo</i> file to describe it or
bugs in the screen-handling code of the test program.</p>

<p style="margin-left:11%; margin-top: 1em">To get the
padding for insert line right (if the terminal manufacturer
did not document it) a severe test is to edit a large file
at 9600 baud, delete 16 or so lines from the middle of the
screen, then hit the &lsquo;u&rsquo; key several times
quickly. If the terminal messes up, more padding is usually
needed. A similar test can be used for insert character.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Basic
Capabilities</b> <br>
The number of columns on each line for the terminal is given
by the <b>cols</b> numeric capability. If the terminal is a
<small>CRT</small> , then the number of lines on the screen
is given by the <b>lines</b> capability. If the terminal
wraps around to the beginning of the next line when it
reaches the right margin, then it should have the <b>am</b>
capability. If the terminal can clear its screen, leaving
the cursor in the home position, then this is given by the
<b>clear</b> string capability. If the terminal overstrikes
(rather than clearing a position when a character is struck
over) then it should have the <b>os</b> capability. If the
terminal is a printing terminal, with no soft copy unit,
give it both <b>hc</b> and <b>os</b>. (<b>os</b> applies to
storage scope terminals, such as <small>TEKTRONIX</small>
4010 series, as well as hard copy and APL terminals.) If
there is a code to move the cursor to the left edge of the
current row, give this as <b>cr</b>. (Normally this will be
carriage return, control M.) If there is a code to produce
an audible signal (bell, beep, etc) give this as
<b>bel</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If there is a
code to move the cursor one position to the left (such as
backspace) that capability should be given as <b>cub1</b>.
Similarly, codes to move to the right, up, and down should
be given as <b>cuf1</b>, <b>cuu1</b>, and <b>cud1</b>. These
local cursor motions should not alter the text they pass
over, for example, you would not normally use
&lsquo;<b>cuf1</b>=&nbsp;&rsquo; because the space would
erase the character moved over.</p>

<p style="margin-left:11%; margin-top: 1em">A very
important point here is that the local cursor motions
encoded in <i>terminfo</i> are undefined at the left and top
edges of a <small>CRT</small> terminal. Programs should
never attempt to backspace around the left edge, unless
<b>bw</b> is given, and never attempt to go up locally off
the top. In order to scroll text up, a program will go to
the bottom left corner of the screen and send the <b>ind</b>
(index) string.</p>

<p style="margin-left:11%; margin-top: 1em">To scroll text
down, a program goes to the top left corner of the screen
and sends the <b>ri</b> (reverse index) string. The strings
<b>ind</b> and <b>ri</b> are undefined when not on their
respective corners of the screen.</p>

<p style="margin-left:11%; margin-top: 1em">Parameterized
versions of the scrolling sequences are <b>indn</b> and
<b>rin</b> which have the same semantics as <b>ind</b> and
<b>ri</b> except that they take one parameter, and scroll
that many lines. They are also undefined except at the
appropriate edge of the screen.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>am</b>
capability tells whether the cursor sticks at the right edge
of the screen when text is output, but this does not
necessarily apply to a <b>cuf1</b> from the last column. The
only local motion which is defined from the left edge is if
<b>bw</b> is given, then a <b>cub1</b> from the left edge
will move to the right edge of the previous row. If
<b>bw</b> is not given, the effect is undefined. This is
useful for drawing a box around the edge of the screen, for
example. If the terminal has switch selectable automatic
margins, the <i>terminfo</i> file usually assumes that this
is on; i.e., <b>am</b>. If the terminal has a command which
moves to the first column of the next line, that command can
be given as <b>nel</b> (newline). It does not matter if the
command clears the remainder of the current line, so if the
terminal has no <b>cr</b> and <b>lf</b> it may still be
possible to craft a working <b>nel</b> out of one or both of
them.</p>

<p style="margin-left:11%; margin-top: 1em">These
capabilities suffice to describe hard-copy and
&ldquo;glass-tty&rdquo; terminals. Thus the model 33
teletype is described as</p>
<pre style="margin-left:11%; margin-top: 1em">33|tty33|tty|model 33 teletype,
     bel=^G, cols#72, cr=^M, cud1=^J, hc, ind=^J, os,

while the Lear Siegler ADM-3 is described as

adm3|3|lsi adm3,
     am, bel=^G, clear=^Z, cols#80, cr=^M, cub1=^H, cud1=^J,
     ind=^J, lines#24,</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Parameterized
Strings</b> <br>
Cursor addressing and other strings requiring parameters in
the terminal are described by a parameterized string
capability, with <i>printf</i>(3) like escapes <b>%x</b> in
it. For example, to address the cursor, the <b>cup</b>
capability is given, using two parameters: the row and
column to address to. (Rows and columns are numbered from
zero and refer to the physical screen visible to the user,
not to any unseen memory.) If the terminal has memory
relative cursor addressing, that can be indicated by
<b>mrcup</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
mechanism uses a stack and special <b>%</b> codes to
manipulate it. Typically a sequence will push one of the
parameters onto the stack and then print it in some format.
Print (e.g., &quot;%d&quot;) is a special case. Other
operations, including &quot;%t&quot; pop their operand from
the stack. It is noted that more complex operations are
often necessary, e.g., in the <b>sgr</b> string.</p>

<p style="margin-left:11%; margin-top: 1em">The <b>%</b>
encodings have the following meanings:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><small>%%</small></p></td>
<td width="4%"></td>
<td width="17%">


<p style="margin-top: 1em">outputs &lsquo;%&rsquo;</p></td>
<td width="65%">
</td></tr>
</table>


<p style="margin-left:11%;">%<i>[[</i>:<i>]flags][width[.precision]][</i>doxXs<i>]</i></p>

<p style="margin-left:18%;">as in <b>printf</b>, flags are
[&minus;+#] and space. Use a &lsquo;:&rsquo; to allow the
next character to be a &lsquo;&minus;&rsquo; flag, avoiding
interpreting &quot;%&minus;&quot; as an operator.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>%c</p></td>
<td width="4%"></td>
<td width="45%">


<p>print pop() like %c in <b>printf</b></p></td>
<td width="37%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>%s</p></td>
<td width="4%"></td>
<td width="45%">


<p>print pop() like %s in <b>printf</b></p></td>
<td width="37%">
</td></tr>
</table>

<p style="margin-left:11%;">%p[1&minus;9]</p>

<p style="margin-left:18%;">push <i>i</i>&rsquo;th
parameter</p>

<p style="margin-left:11%;">%P[a&minus;z]</p>

<p style="margin-left:18%;">set dynamic variable
[a&minus;z] to pop()</p>

<p style="margin-left:11%;">%g[a&minus;z]</p>

<p style="margin-left:18%;">get dynamic variable
[a&minus;z] and push it</p>

<p style="margin-left:11%;">%P[A&minus;Z]</p>

<p style="margin-left:18%;">set static variable [a&minus;z]
to pop()</p>

<p style="margin-left:11%;">%g[A&minus;Z]</p>

<p style="margin-left:18%;">get static variable [a&minus;z]
and push it</p>

<p style="margin-left:18%; margin-top: 1em">The terms
&quot;static&quot; and &quot;dynamic&quot; are misleading.
Historically, these are simply two different sets of
variables, whose values are not reset between calls to
<b>tparm</b>. However, that fact is not documented in other
implementations. Relying on it will adversely impact
portability to other implementations.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p>%&rsquo;<i>c</i>&rsquo;</p></td>
<td width="1%"></td>
<td width="24%">


<p>char constant <i>c</i></p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:11%;">%{<i>nn</i>}</p>

<p style="margin-left:18%;">integer constant <i>nn</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>%l</p></td>
<td width="4%"></td>
<td width="25%">


<p>push strlen(pop)</p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:11%;">%+ %&minus; %* %/ %m</p>

<p style="margin-left:18%;">arithmetic (%m is mod):
push(pop() op pop())</p>

<p style="margin-left:11%;">%&amp; %| %^</p>

<p style="margin-left:18%;">bit operations (AND, OR and
exclusive-OR): push(pop() op pop())</p>

<p style="margin-left:11%;">%= %&gt; %&lt;</p>

<p style="margin-left:18%;">logical operations: push(pop()
op pop())</p>

<p style="margin-left:11%;">%A, %O</p>

<p style="margin-left:18%;">logical AND and OR operations
(for conditionals)</p>

<p style="margin-left:11%;">%! %~</p>

<p style="margin-left:18%;">unary operations (logical and
bit complement): push(op pop())</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>%i</p></td>
<td width="4%"></td>
<td width="77%">


<p>add 1 to first two parameters (for ANSI terminals)</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:11%;">%? <i>expr</i> %t
<i>thenpart</i> %e <i>elsepart</i> %;</p>

<p style="margin-left:18%;">This forms an if-then-else. The
%e <i>elsepart</i> is optional. Usually the %? <i>expr</i>
part pushes a value onto the stack, and %t pops it from the
stack, testing if it is nonzero (true). If it is zero
(false), control passes to the %e (else) part.</p>

<p style="margin-left:18%; margin-top: 1em">It is possible
to form else-if&rsquo;s a la Algol 68: <br>
%? c1 %t b1 %e c2 %t b2 %e c3 %t b3 %e c4 %t b4 %e %;</p>

<p style="margin-left:18%; margin-top: 1em">where ci are
conditions, bi are bodies.</p>

<p style="margin-left:18%; margin-top: 1em">Use the
<b>&minus;f</b> option of <b>tic</b> or <b>infocmp</b> to
see the structure of if-then-else&rsquo;s. Some strings,
e.g., <b>sgr</b> can be very complicated when written on one
line. The <b>&minus;f</b> option splits the string into
lines with the parts indented.</p>

<p style="margin-left:11%; margin-top: 1em">Binary
operations are in postfix form with the operands in the
usual order. That is, to get x&minus;5 one would use
&quot;%gx%{5}%-&quot;. %P and %g variables are persistent
across escape-string evaluations.</p>

<p style="margin-left:11%; margin-top: 1em">Consider the
HP2645, which, to get to row 3 and column 12, needs to be
sent \E&amp;a12c03Y padded for 6 milliseconds. Note that the
order of the rows and columns is inverted here, and that the
row and column are printed as two digits. Thus its
<b>cup</b> capability is
&ldquo;cup=6\E&amp;%p2%2dc%p1%2dY&rdquo;.</p>

<p style="margin-left:11%; margin-top: 1em">The Microterm
<small>ACT-IV</small> needs the current row and column sent
preceded by a <b>^T</b>, with the row and column simply
encoded in binary, &ldquo;cup=^T%p1%c%p2%c&rdquo;. Terminals
which use &ldquo;%c&rdquo; need to be able to backspace the
cursor (<b>cub1</b>), and to move the cursor up one line on
the screen (<b>cuu1</b>). This is necessary because it is
not always safe to transmit <b>\n ^D</b> and <b>\r</b>, as
the system may change or discard them. (The library routines
dealing with terminfo set tty modes so that tabs are never
expanded, so \t is safe to send. This turns out to be
essential for the Ann Arbor 4080.)</p>

<p style="margin-left:11%; margin-top: 1em">A final example
is the <small>LSI ADM</small> -3a, which uses row and column
offset by a blank character, thus &ldquo;cup=\E=%p1%&rsquo;
&rsquo;%+%c%p2%&rsquo; &rsquo;%+%c&rdquo;. After sending
&lsquo;\E=&rsquo;, this pushes the first parameter, pushes
the ASCII value for a space (32), adds them (pushing the sum
on the stack in place of the two previous values) and
outputs that value as a character. Then the same is done for
the second parameter. More complex arithmetic is possible
using the stack.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Cursor
Motions</b> <br>
If the terminal has a fast way to home the cursor (to very
upper left corner of screen) then this can be given as
<b>home</b>; similarly a fast way of getting to the lower
left-hand corner can be given as <b>ll</b>; this may involve
going up with <b>cuu1</b> from the home position, but a
program should never do this itself (unless <b>ll</b> does)
because it can make no assumption about the effect of moving
up from the home position. Note that the home position is
the same as addressing to (0,0): to the top left corner of
the screen, not of memory. (Thus, the \EH sequence on HP
terminals cannot be used for <b>home</b>.)</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has row or column absolute cursor addressing, these can be
given as single parameter capabilities <b>hpa</b>
(horizontal position absolute) and <b>vpa</b> (vertical
position absolute). Sometimes these are shorter than the
more general two parameter sequence (as with the hp2645) and
can be used in preference to <b>cup</b>. If there are
parameterized local motions (e.g., move <i>n</i> spaces to
the right) these can be given as <b>cud</b>, <b>cub</b>,
<b>cuf</b>, and <b>cuu</b> with a single parameter
indicating how many spaces to move. These are primarily
useful if the terminal does not have <b>cup</b>, such as the
<small>TEKTRONIX</small> 4025.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
needs to be in a special mode when running a program that
uses these capabilities, the codes to enter and exit this
mode can be given as <b>smcup</b> and <b>rmcup</b>. This
arises, for example, from terminals like the Concept with
more than one page of memory. If the terminal has only
memory relative cursor addressing and not screen relative
cursor addressing, a one screen-sized window must be fixed
into the terminal for cursor addressing to work properly.
This is also used for the <small>TEKTRONIX</small> 4025,
where <b>smcup</b> sets the command character to be the one
used by terminfo. If the <b>smcup</b> sequence will not
restore the screen after an <b>rmcup</b> sequence is output
(to the state prior to outputting <b>rmcup</b>), specify
<b>nrrmc</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Area
Clears</b> <br>
If the terminal can clear from the current position to the
end of the line, leaving the cursor where it is, this should
be given as <b>el</b>. If the terminal can clear from the
beginning of the line to the current position inclusive,
leaving the cursor where it is, this should be given as
<b>el1</b>. If the terminal can clear from the current
position to the end of the display, then this should be
given as <b>ed</b>. <b>Ed</b> is only defined from the first
column of a line. (Thus, it can be simulated by a request to
delete a large number of lines, if a true <b>ed</b> is not
available.)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Insert/delete
line and vertical motions</b> <br>
If the terminal can open a new blank line before the line
where the cursor is, this should be given as <b>il1</b>;
this is done only from the first position of a line. The
cursor must then appear on the newly blank line. If the
terminal can delete the line which the cursor is on, then
this should be given as <b>dl1</b>; this is done only from
the first position on the line to be deleted. Versions of
<b>il1</b> and <b>dl1</b> which take a single parameter and
insert or delete that many lines can be given as <b>il</b>
and <b>dl</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has a settable scrolling region (like the vt100) the command
to set this can be described with the <b>csr</b> capability,
which takes two parameters: the top and bottom lines of the
scrolling region. The cursor position is, alas, undefined
after using this command.</p>

<p style="margin-left:11%; margin-top: 1em">It is possible
to get the effect of insert or delete line using <b>csr</b>
on a properly chosen region; the <b>sc</b> and <b>rc</b>
(save and restore cursor) commands may be useful for
ensuring that your synthesized insert/delete string does not
move the cursor. (Note that the <b>ncurses</b>(3X) library
does this synthesis automatically, so you need not compose
insert/delete strings for an entry with <b>csr</b>).</p>

<p style="margin-left:11%; margin-top: 1em">Yet another way
to construct insert and delete might be to use a combination
of index with the memory-lock feature found on some
terminals (like the HP&minus;700/90 series, which however
also has insert/delete).</p>

<p style="margin-left:11%; margin-top: 1em">Inserting lines
at the top or bottom of the screen can also be done using
<b>ri</b> or <b>ind</b> on many terminals without a true
insert/delete line, and is often faster even on terminals
with those features.</p>

<p style="margin-left:11%; margin-top: 1em">The boolean
<b>non_dest_scroll_region</b> should be set if each
scrolling window is effectively a view port on a
screen-sized canvas. To test for this capability, create a
scrolling region in the middle of the screen, write
something to the bottom line, move the cursor to the top of
the region, and do <b>ri</b> followed by <b>dl1</b> or
<b>ind</b>. If the data scrolled off the bottom of the
region by the <b>ri</b> re-appears, then scrolling is
non-destructive. System V and XSI Curses expect that
<b>ind</b>, <b>ri</b>, <b>indn</b>, and <b>rin</b> will
simulate destructive scrolling; their documentation cautions
you not to define <b>csr</b> unless this is true. This
<b>curses</b> implementation is more liberal and will do
explicit erases after scrolling if <b>ndstr</b> is
defined.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has the ability to define a window as part of memory, which
all commands affect, it should be given as the parameterized
string <b>wind</b>. The four parameters are the starting and
ending lines in memory and the starting and ending columns
in memory, in that order.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
can retain display memory above, then the <b>da</b>
capability should be given; if display memory can be
retained below, then <b>db</b> should be given. These
indicate that deleting a line or scrolling may bring
non-blank lines up from below or that scrolling back with
<b>ri</b> may bring down non-blank lines.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Insert/Delete
Character</b> <br>
There are two basic kinds of intelligent terminals with
respect to insert/delete character which can be described
using <i>terminfo.</i> The most common insert/delete
character operations affect only the characters on the
current line and shift characters off the end of the line
rigidly. Other terminals, such as the Concept 100 and the
Perkin Elmer Owl, make a distinction between typed and
untyped blanks on the screen, shifting upon an insert or
delete only to an untyped blank on the screen which is
either eliminated, or expanded to two untyped blanks.</p>

<p style="margin-left:11%; margin-top: 1em">You can
determine the kind of terminal you have by clearing the
screen and then typing text separated by cursor motions.
Type &ldquo;abc&nbsp;&nbsp;&nbsp;&nbsp;def&rdquo; using
local cursor motions (not spaces) between the
&ldquo;abc&rdquo; and the &ldquo;def&rdquo;. Then position
the cursor before the &ldquo;abc&rdquo; and put the terminal
in insert mode. If typing characters causes the rest of the
line to shift rigidly and characters to fall off the end,
then your terminal does not distinguish between blanks and
untyped positions. If the &ldquo;abc&rdquo; shifts over to
the &ldquo;def&rdquo; which then move together around the
end of the current line and onto the next as you insert, you
have the second type of terminal, and should give the
capability <b>in</b>, which stands for &ldquo;insert
null&rdquo;.</p>

<p style="margin-left:11%; margin-top: 1em">While these are
two logically separate attributes (one line versus
multi-line insert mode, and special treatment of untyped
spaces) we have seen no terminals whose insert mode cannot
be described with the single attribute.</p>

<p style="margin-left:11%; margin-top: 1em">Terminfo can
describe both terminals which have an insert mode, and
terminals which send a simple sequence to open a blank
position on the current line. Give as <b>smir</b> the
sequence to get into insert mode. Give as <b>rmir</b> the
sequence to leave insert mode. Now give as <b>ich1</b> any
sequence needed to be sent just before sending the character
to be inserted. Most terminals with a true insert mode will
not give <b>ich1</b>; terminals which send a sequence to
open a screen position should give it here.</p>

<p style="margin-left:11%; margin-top: 1em">If your
terminal has both, insert mode is usually preferable to
<b>ich1</b>. Technically, you should not give both unless
the terminal actually requires both to be used in
combination. Accordingly, some non-curses applications get
confused if both are present; the symptom is doubled
characters in an update using insert. This requirement is
now rare; most <b>ich</b> sequences do not require previous
smir, and most smir insert modes do not require <b>ich1</b>
before each character. Therefore, the new <b>curses</b>
actually assumes this is the case and uses either
<b>rmir</b>/<b>smir</b> or <b>ich</b>/<b>ich1</b> as
appropriate (but not both). If you have to write an entry to
be used under new curses for a terminal old enough to need
both, include the <b>rmir</b>/<b>smir</b> sequences in
<b>ich1</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If post insert
padding is needed, give this as a number of milliseconds in
<b>ip</b> (a string option). Any other sequence which may
need to be sent after an insert of a single character may
also be given in <b>ip</b>. If your terminal needs both to
be placed into an &lsquo;insert mode&rsquo; and a special
code to precede each inserted character, then both
<b>smir</b>/<b>rmir</b> and <b>ich1</b> can be given, and
both will be used. The <b>ich</b> capability, with one
parameter, <i>n</i>, will repeat the effects of <b>ich1</b>
<i>n</i> times.</p>

<p style="margin-left:11%; margin-top: 1em">If padding is
necessary between characters typed while not in insert mode,
give this as a number of milliseconds padding in
<b>rmp</b>.</p>

<p style="margin-left:11%; margin-top: 1em">It is
occasionally necessary to move around while in insert mode
to delete characters on the same line (e.g., if there is a
tab after the insertion position). If your terminal allows
motion while in insert mode you can give the capability
<b>mir</b> to speed up inserting in this case. Omitting
<b>mir</b> will affect only speed. Some terminals (notably
Datamedia&rsquo;s) must not have <b>mir</b> because of the
way their insert mode works.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, you
can specify <b>dch1</b> to delete a single character,
<b>dch</b> with one parameter, <i>n</i>, to delete <i>n
characters,</i> and delete mode by giving <b>smdc</b> and
<b>rmdc</b> to enter and exit delete mode (any mode the
terminal needs to be placed in for <b>dch1</b> to work).</p>

<p style="margin-left:11%; margin-top: 1em">A command to
erase <i>n</i> characters (equivalent to outputting <i>n</i>
blanks without moving the cursor) can be given as <b>ech</b>
with one parameter.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Highlighting,
Underlining, and Visible Bells</b> <br>
If your terminal has one or more kinds of display
attributes, these can be represented in a number of
different ways. You should choose one display form as
<i>standout mode</i>, representing a good, high contrast,
easy-on-the-eyes, format for highlighting error messages and
other attention getters. (If you have a choice, reverse
video plus half-bright is good, or reverse video alone.) The
sequences to enter and exit standout mode are given as
<b>smso</b> and <b>rmso</b>, respectively. If the code to
change into or out of standout mode leaves one or even two
blank spaces on the screen, as the TVI 912 and Teleray 1061
do, then <b>xmc</b> should be given to tell how many spaces
are left.</p>

<p style="margin-left:11%; margin-top: 1em">Codes to begin
underlining and end underlining can be given as <b>smul</b>
and <b>rmul</b> respectively. If the terminal has a code to
underline the current character and move the cursor one
space to the right, such as the Microterm Mime, this can be
given as <b>uc</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Other
capabilities to enter various highlighting modes include
<b>blink</b> (blinking) <b>bold</b> (bold or extra bright)
<b>dim</b> (dim or half-bright) <b>invis</b> (blanking or
invisible text) <b>prot</b> (protected) <b>rev</b> (reverse
video) <b>sgr0</b> (turn off <i>all</i> attribute modes)
<b>smacs</b> (enter alternate character set mode) and
<b>rmacs</b> (exit alternate character set mode). Turning on
any of these modes singly may or may not turn off other
modes.</p>

<p style="margin-left:11%; margin-top: 1em">If there is a
sequence to set arbitrary combinations of modes, this should
be given as <b>sgr</b> (set attributes), taking 9
parameters. Each parameter is either 0 or nonzero, as the
corresponding attribute is on or off. The 9 parameters are,
in order: standout, underline, reverse, blink, dim, bold,
blank, protect, alternate character set. Not all modes need
be supported by <b>sgr</b>, only those for which
corresponding separate attribute commands exist.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
the DEC vt220 supports most of the modes:</p>

<p style="margin-left:11%; margin-top: 1em">We begin each
escape sequence by turning off any existing modes, since
there is no quick way to determine whether they are active.
Standout is set up to be the combination of reverse and
bold. The vt220 terminal has a protect mode, though it is
not commonly used in sgr because it protects characters on
the screen from the host&rsquo;s erasures. The altcharset
mode also is different in that it is either ^O or ^N,
depending on whether it is off or on. If all modes are
turned on, the resulting sequence is \E[0;1;4;5;7;8m^N.</p>

<p style="margin-left:11%; margin-top: 1em">Some sequences
are common to different modes. For example, ;7 is output
when either p1 or p3 is true, that is, if either standout or
reverse modes are turned on.</p>

<p style="margin-left:11%; margin-top: 1em">Writing out the
above sequences, along with their dependencies yields</p>

<p style="margin-left:11%; margin-top: 1em">Putting this
all together into the sgr sequence gives:</p>


<p style="margin-left:11%; margin-top: 1em">sgr=\E[0%?%p1%p6%|%t;1%;%?%p2%t;4%;%?%p1%p3%|%t;7%;
<br>
%?%p4%t;5%;%?%p7%t;8%;m%?%p9%t\016%e\017%;,</p>

<p style="margin-left:11%; margin-top: 1em">Remember that
if you specify sgr, you must also specify sgr0. Also, some
implementations rely on sgr being given if sgr0 is, Not all
terminfo entries necessarily have an sgr string, however.
Many terminfo entries are derived from termcap entries which
have no sgr string. The only drawback to adding an sgr
string is that termcap also assumes that sgr0 does not exit
alternate character set mode.</p>

<p style="margin-left:11%; margin-top: 1em">Terminals with
the &ldquo;magic cookie&rdquo; glitch (<b>xmc</b>) deposit
special &ldquo;cookies&rdquo; when they receive mode-setting
sequences, which affect the display algorithm rather than
having extra bits for each character. Some terminals, such
as the HP 2621, automatically leave standout mode when they
move to a new line or the cursor is addressed. Programs
using standout mode should exit standout mode before moving
the cursor or sending a newline, unless the <b>msgr</b>
capability, asserting that it is safe to move in standout
mode, is present.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has a way of flashing the screen to indicate an error
quietly (a bell replacement) then this can be given as
<b>flash</b>; it must not move the cursor.</p>

<p style="margin-left:11%; margin-top: 1em">If the cursor
needs to be made more visible than normal when it is not on
the bottom line (to make, for example, a non-blinking
underline into an easier to find block or blinking
underline) give this sequence as <b>cvvis</b>. If there is a
way to make the cursor completely invisible, give that as
<b>civis</b>. The capability <b>cnorm</b> should be given
which undoes the effects of both of these modes.</p>

<p style="margin-left:11%; margin-top: 1em">If your
terminal correctly generates underlined characters (with no
special codes needed) even though it does not overstrike,
then you should give the capability <b>ul</b>. If a
character overstriking another leaves both characters on the
screen, specify the capability <b>os</b>. If overstrikes are
erasable with a blank, then this should be indicated by
giving <b>eo</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Keypad and
Function Keys</b> <br>
If the terminal has a keypad that transmits codes when the
keys are pressed, this information can be given. Note that
it is not possible to handle terminals where the keypad only
works in local (this applies, for example, to the unshifted
HP 2621 keys). If the keypad can be set to transmit or not
transmit, give these codes as <b>smkx</b> and <b>rmkx</b>.
Otherwise the keypad is assumed to always transmit.</p>

<p style="margin-left:11%; margin-top: 1em">The codes sent
by the left arrow, right arrow, up arrow, down arrow, and
home keys can be given as <b>kcub1, kcuf1, kcuu1, kcud1,</b>
and <b>khome</b> respectively. If there are function keys
such as f0, f1, ..., f10, the codes they send can be given
as <b>kf0, kf1, ..., kf10</b>. If these keys have labels
other than the default f0 through f10, the labels can be
given as <b>lf0, lf1, ..., lf10</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The codes
transmitted by certain other special keys can be given:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kll</b> (home down),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kbs</b> (backspace),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>ktbc</b> (clear all tabs),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kctab</b> (clear the tab stop in this column),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kclr</b> (clear screen or erase key),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kdch1</b> (delete character),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kdl1</b> (delete line),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>krmir</b> (exit insert mode),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kel</b> (clear to end of line),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>ked</b> (clear to end of screen),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kich1</b> (insert character or enter insert
mode),</p> </td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kil1</b> (insert line),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>knp</b> (next page),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kpp</b> (previous page),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kind</b> (scroll forward/down),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>kri</b> (scroll backward/up),</p></td>
<td width="12%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p><b>khts</b> (set a tab stop in this column).</p></td>
<td width="12%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In addition, if
the keypad has a 3 by 3 array of keys including the four
arrow keys, the other five keys can be given as <b>ka1</b>,
<b>ka3</b>, <b>kb2</b>, <b>kc1</b>, and <b>kc3</b>. These
keys are useful when the effects of a 3 by 3 directional pad
are needed.</p>

<p style="margin-left:11%; margin-top: 1em">Strings to
program function keys can be given as <b>pfkey</b>,
<b>pfloc</b>, and <b>pfx</b>. A string to program screen
labels should be specified as <b>pln</b>. Each of these
strings takes two parameters: the function key number to
program (from 0 to 10) and the string to program it with.
Function key numbers out of this range may program undefined
keys in a terminal dependent manner. The difference between
the capabilities is that <b>pfkey</b> causes pressing the
given key to be the same as the user typing the given
string; <b>pfloc</b> causes the string to be executed by the
terminal in local; and <b>pfx</b> causes the string to be
transmitted to the computer.</p>

<p style="margin-left:11%; margin-top: 1em">The
capabilities <b>nlab</b>, <b>lw</b> and <b>lh</b> define the
number of programmable screen labels and their width and
height. If there are commands to turn the labels on and off,
give them in <b>smln</b> and <b>rmln</b>. <b>smln</b> is
normally output after one or more pln sequences to make sure
that the change becomes visible.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tabs and
Initialization</b> <br>
If the terminal has hardware tabs, the command to advance to
the next tab stop can be given as <b>ht</b> (usually control
I). A &ldquo;back-tab&rdquo; command which moves leftward to
the preceding tab stop can be given as <b>cbt</b>. By
convention, if the teletype modes indicate that tabs are
being expanded by the computer rather than being sent to the
terminal, programs should not use <b>ht</b> or <b>cbt</b>
even if they are present, since the user may not have the
tab stops properly set. If the terminal has hardware tabs
which are initially set every <i>n</i> spaces when the
terminal is powered up, the numeric parameter <b>it</b> is
given, showing the number of spaces the tabs are set to.
This is normally used by the <i>tset</i> command to
determine whether to set the mode for hardware tab
expansion, and whether to set the tab stops. If the terminal
has tab stops that can be saved in non-volatile memory, the
terminfo description can assume that they are properly
set.</p>

<p style="margin-left:11%; margin-top: 1em">Other
capabilities include <b>is1</b>, <b>is2</b>, and <b>is3</b>,
initialization strings for the terminal, <b>iprog</b>, the
path name of a program to be run to initialize the terminal,
and <b>if</b>, the name of a file containing long
initialization strings. These strings are expected to set
the terminal into modes consistent with the rest of the
terminfo description. They are normally sent to the
terminal, by the <i>init</i> option of the <i>tput</i>
program, each time the user logs in. They will be printed in
the following order:</p>

<p style="margin-left:22%;">run the program</p>

<p style="margin-left:32%;"><b>iprog</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="9%">


<p>output</p></td>
<td width="1%"></td>
<td width="11%">


<p><b>is1 is2</b></p></td>
<td width="57%">
</td></tr>
</table>

<p style="margin-left:22%;">set the margins using</p>

<p style="margin-left:32%;"><b>mgc</b>, <b>smgl</b> and
<b>smgr</b></p>

<p style="margin-left:22%;">set tabs using</p>

<p style="margin-left:32%;"><b>tbc</b> and <b>hts</b></p>

<p style="margin-left:22%;">print the file</p>

<p style="margin-left:32%;"><b>if</b></p>

<p style="margin-left:22%;">and finally</p>

<p style="margin-left:32%;">output <b>is3</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Most
initialization is done with <b>is2</b>. Special terminal
modes can be set up without duplicating strings by putting
the common sequences in <b>is2</b> and special cases in
<b>is1</b> and <b>is3</b>.</p>

<p style="margin-left:11%; margin-top: 1em">A set of
sequences that does a harder reset from a totally unknown
state can be given as <b>rs1</b>, <b>rs2</b>, <b>rf</b> and
<b>rs3</b>, analogous to <b>is1 , is2 , if</b> and
<b>is3</b> respectively. These strings are output by the
<i>reset</i> program, which is used when the terminal gets
into a wedged state. Commands are normally placed in
<b>rs1</b>, <b>rs2 rs3</b> and <b>rf</b> only if they
produce annoying effects on the screen and are not necessary
when logging in. For example, the command to set the vt100
into 80-column mode would normally be part of <b>is2</b>,
but it causes an annoying glitch of the screen and is not
normally needed since the terminal is usually already in 80
column mode.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>reset</i> program writes strings including <b>iprog</b>,
etc., in the same order as the <i>init</i> program, using
<b>rs1</b>, etc., instead of <b>is1</b>, etc. If any of
<b>rs1</b>, <b>rs2</b>, <b>rs3</b>, or <b>rf</b> reset
capability strings are missing, the <i>reset</i> program
falls back upon the corresponding initialization capability
string.</p>

<p style="margin-left:11%; margin-top: 1em">If there are
commands to set and clear tab stops, they can be given as
<b>tbc</b> (clear all tab stops) and <b>hts</b> (set a tab
stop in the current column of every row). If a more complex
sequence is needed to set the tabs than can be described by
this, the sequence can be placed in <b>is2</b> or
<b>if</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Delays and
Padding</b> <br>
Many older and slower terminals do not support either
XON/XOFF or DTR handshaking, including hard copy terminals
and some very archaic CRTs (including, for example, DEC
VT100s). These may require padding characters after certain
cursor motions and screen changes.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
uses xon/xoff handshaking for flow control (that is, it
automatically emits ^S back to the host when its input
buffers are close to full), set <b>xon</b>. This capability
suppresses the emission of padding. You can also set it for
memory-mapped console devices effectively that do not have a
speed limit. Padding information should still be included so
that routines can make better decisions about relative
costs, but actual pad characters will not be
transmitted.</p>

<p style="margin-left:11%; margin-top: 1em">If <b>pb</b>
(padding baud rate) is given, padding is suppressed at baud
rates below the value of <b>pb</b>. If the entry has no
padding baud rate, then whether padding is emitted or not is
completely controlled by <b>xon</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
requires other than a null (zero) character as a pad, then
this can be given as <b>pad</b>. Only the first character of
the <b>pad</b> string is used.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Status
Lines</b> <br>
Some terminals have an extra &lsquo;status line&rsquo; which
is not normally used by software (and thus not counted in
the terminal&rsquo;s <b>lines</b> capability).</p>

<p style="margin-left:11%; margin-top: 1em">The simplest
case is a status line which is cursor-addressable but not
part of the main scrolling region on the screen; the
Heathkit H19 has a status line of this kind, as would a
24-line VT100 with a 23-line scrolling region set up on
initialization. This situation is indicated by the <b>hs</b>
capability.</p>

<p style="margin-left:11%; margin-top: 1em">Some terminals
with status lines need special sequences to access the
status line. These may be expressed as a string with single
parameter <b>tsl</b> which takes the cursor to a given
zero-origin column on the status line. The capability
<b>fsl</b> must return to the main-screen cursor positions
before the last <b>tsl</b>. You may need to embed the string
values of <b>sc</b> (save cursor) and <b>rc</b> (restore
cursor) in <b>tsl</b> and <b>fsl</b> to accomplish this.</p>

<p style="margin-left:11%; margin-top: 1em">The status line
is normally assumed to be the same width as the width of the
terminal. If this is untrue, you can specify it with the
numeric capability <b>wsl</b>.</p>

<p style="margin-left:11%; margin-top: 1em">A command to
erase or blank the status line may be specified as
<b>dsl</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The boolean
capability <b>eslok</b> specifies that escape sequences,
tabs, etc., work ordinarily in the status line.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>ncurses</b> implementation does not yet use any of these
capabilities. They are documented here in case they ever
become important.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Line
Graphics</b> <br>
Many terminals have alternate character sets useful for
forms-drawing. Terminfo and <b>curses</b> build in support
for the drawing characters supported by the VT100, with some
characters from the AT&amp;T 4410v1 added. This alternate
character set may be specified by the <b>acsc</b>
capability.</p>

<p style="margin-left:11%; margin-top: 1em">The best way to
define a new device&rsquo;s graphics set is to add a column
to a copy of this table for your terminal, giving the
character which (when emitted between
<b>smacs</b>/<b>rmacs</b> switches) will be rendered as the
corresponding graphic. Then read off the VT100/your terminal
character pairs right to left in sequence; these become the
ACSC string.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Color
Handling</b> <br>
Most color terminals are either &lsquo;Tektronix-like&rsquo;
or &lsquo;HP-like&rsquo;. Tektronix-like terminals have a
predefined set of N colors (where N usually 8), and can set
character-cell foreground and background characters
independently, mixing them into N&nbsp;*&nbsp;N color-pairs.
On HP-like terminals, the use must set each color pair up
separately (foreground and background are not independently
settable). Up to M color-pairs may be set up from 2*M
different colors. ANSI-compatible terminals are
Tektronix-like.</p>

<p style="margin-left:11%; margin-top: 1em">Some basic
color capabilities are independent of the color method. The
numeric capabilities <b>colors</b> and <b>pairs</b> specify
the maximum numbers of colors and color-pairs that can be
displayed simultaneously. The <b>op</b> (original pair)
string resets foreground and background colors to their
default values for the terminal. The <b>oc</b> string resets
all colors or color-pairs to their default values for the
terminal. Some terminals (including many PC terminal
emulators) erase screen areas with the current background
color rather than the power-up default background; these
should have the boolean capability <b>bce</b>.</p>

<p style="margin-left:11%; margin-top: 1em">To change the
current foreground or background color on a Tektronix-type
terminal, use <b>setaf</b> (set ANSI foreground) and
<b>setab</b> (set ANSI background) or <b>setf</b> (set
foreground) and <b>setb</b> (set background). These take one
parameter, the color number. The SVr4 documentation
describes only <b>setaf</b>/<b>setab</b>; the XPG4 draft
says that &quot;If the terminal supports ANSI escape
sequences to set background and foreground, they should be
coded as <b>setaf</b> and <b>setab</b>, respectively. If the
terminal supports other escape sequences to set background
and foreground, they should be coded as <b>setf</b> and
<b>setb</b>, respectively. The <i>vidputs()</i> function and
the refresh functions use <b>setaf</b> and <b>setab</b> if
they are defined.&quot;</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>setaf</b>/<b>setab</b> and <b>setf</b>/<b>setb</b>
capabilities take a single numeric argument each. Argument
values 0-7 of <b>setaf</b>/<b>setab</b> are portably defined
as follows (the middle column is the symbolic #define
available in the header for the <b>curses</b> or
<b>ncurses</b> libraries). The terminal hardware is free to
map these as it likes, but the RGB values indicate normal
locations in color space.</p>

<p style="margin-left:11%; margin-top: 1em">&nbsp;</p>

<p style="margin-left:11%; margin-top: 1em">The argument
values of <b>setf</b>/<b>setb</b> historically correspond to
a different mapping, i.e.,</p>

<p style="margin-left:11%; margin-top: 1em">&nbsp;</p>

<p style="margin-left:11%; margin-top: 1em">It is important
to not confuse the two sets of color capabilities; otherwise
red/blue will be interchanged on the display.</p>

<p style="margin-left:11%; margin-top: 1em">On an HP-like
terminal, use <b>scp</b> with a color-pair number parameter
to set which color pair is current.</p>

<p style="margin-left:11%; margin-top: 1em">On a
Tektronix-like terminal, the capability <b>ccc</b> may be
present to indicate that colors can be modified. If so, the
<b>initc</b> capability will take a color number (0 to
<b>colors</b> &minus; 1)and three more parameters which
describe the color. These three parameters default to being
interpreted as RGB (Red, Green, Blue) values. If the boolean
capability <b>hls</b> is present, they are instead as HLS
(Hue, Lightness, Saturation) indices. The ranges are
terminal-dependent.</p>

<p style="margin-left:11%; margin-top: 1em">On an HP-like
terminal, <b>initp</b> may give a capability for changing a
color-pair value. It will take seven parameters; a
color-pair number (0 to <b>max_pairs</b> &minus; 1), and two
triples describing first background and then foreground
colors. These parameters must be (Red, Green, Blue) or (Hue,
Lightness, Saturation) depending on <b>hls</b>.</p>

<p style="margin-left:11%; margin-top: 1em">On some color
terminals, colors collide with highlights. You can register
these collisions with the <b>ncv</b> capability. This is a
bit-mask of attributes not to be used when colors are
enabled. The correspondence with the attributes understood
by <b>curses</b> is as follows:</p>

<p style="margin-left:11%; margin-top: 1em">For example, on
many IBM PC consoles, the underline attribute collides with
the foreground color blue and is not available in color
mode. These should have an <b>ncv</b> capability of 2.</p>

<p style="margin-left:11%; margin-top: 1em">SVr4 curses
does nothing with <b>ncv</b>, ncurses recognizes it and
optimizes the output in favor of colors.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous</b>
<br>
If the terminal requires other than a null (zero) character
as a pad, then this can be given as pad. Only the first
character of the pad string is used. If the terminal does
not have a pad character, specify npc. Note that ncurses
implements the termcap-compatible <b>PC</b> variable; though
the application may set this value to something other than a
null, ncurses will test <b>npc</b> first and use napms if
the terminal has no pad character.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
can move up or down half a line, this can be indicated with
<b>hu</b> (half-line up) and <b>hd</b> (half-line down).
This is primarily useful for superscripts and subscripts on
hard-copy terminals. If a hard-copy terminal can eject to
the next page (form feed), give this as <b>ff</b> (usually
control L).</p>

<p style="margin-left:11%; margin-top: 1em">If there is a
command to repeat a given character a given number of times
(to save time transmitting a large number of identical
characters) this can be indicated with the parameterized
string <b>rep</b>. The first parameter is the character to
be repeated and the second is the number of times to repeat
it. Thus, tparm(repeat_char, &rsquo;x&rsquo;, 10) is the
same as &lsquo;xxxxxxxxxx&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has a settable command character, such as the
<small>TEKTRONIX</small> 4025, this can be indicated with
<b>cmdch</b>. A prototype command character is chosen which
is used in all capabilities. This character is given in the
<b>cmdch</b> capability to identify it. The following
convention is supported on some UNIX systems: The
environment is to be searched for a <b>CC</b> variable, and
if found, all occurrences of the prototype character are
replaced with the character in the environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Terminal
descriptions that do not represent a specific kind of known
terminal, such as <i>switch</i>, <i>dialup</i>,
<i>patch</i>, and <i>network</i>, should include the
<b>gn</b> (generic) capability so that programs can complain
that they do not know how to talk to the terminal. (This
capability does not apply to <i>virtual</i> terminal
descriptions for which the escape sequences are known.)</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has a &ldquo;meta key&rdquo; which acts as a shift key,
setting the 8th bit of any character transmitted, this fact
can be indicated with <b>km</b>. Otherwise, software will
assume that the 8th bit is parity and it will usually be
cleared. If strings exist to turn this &ldquo;meta
mode&rdquo; on and off, they can be given as <b>smm</b> and
<b>rmm</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
has more lines of memory than will fit on the screen at
once, the number of lines of memory can be indicated with
<b>lm</b>. A value of <b>lm</b>#0 indicates that the number
of lines is not fixed, but that there is still more memory
than fits on the screen.</p>

<p style="margin-left:11%; margin-top: 1em">If the terminal
is one of those supported by the <small>UNIX</small> virtual
terminal protocol, the terminal number can be given as
<b>vt</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Media copy
strings which control an auxiliary printer connected to the
terminal can be given as <b>mc0</b>: print the contents of
the screen, <b>mc4</b>: turn off the printer, and
<b>mc5</b>: turn on the printer. When the printer is on, all
text sent to the terminal will be sent to the printer. It is
undefined whether the text is also displayed on the terminal
screen when the printer is on. A variation <b>mc5p</b> takes
one parameter, and leaves the printer on for as many
characters as the value of the parameter, then turns the
printer off. The parameter should not exceed 255. All text,
including <b>mc4</b>, is transparently passed to the printer
while an <b>mc5p</b> is in effect.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Glitches and
Braindamage</b> <br>
Hazeltine terminals, which do not allow &lsquo;~&rsquo;
characters to be displayed should indicate <b>hz</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Terminals which
ignore a line-feed immediately after an <b>am</b> wrap, such
as the Concept and vt100, should indicate <b>xenl</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If <b>el</b> is
required to get rid of standout (instead of merely writing
normal text on top of it), <b>xhp</b> should be given.</p>

<p style="margin-left:11%; margin-top: 1em">Teleray
terminals, where tabs turn all characters moved over to
blanks, should indicate <b>xt</b> (destructive tabs). Note:
the variable indicating this is now
&lsquo;dest_tabs_magic_smso&rsquo;; in older versions, it
was teleray_glitch. This glitch is also taken to mean that
it is not possible to position the cursor on top of a
&ldquo;magic cookie&rdquo;, that to erase standout mode it
is instead necessary to use delete and insert line. The
ncurses implementation ignores this glitch.</p>

<p style="margin-left:11%; margin-top: 1em">The Beehive
Superbee, which is unable to correctly transmit the escape
or control C characters, has <b>xsb</b>, indicating that the
f1 key is used for escape and f2 for control C. (Only
certain Superbees have this problem, depending on the ROM.)
Note that in older terminfo versions, this capability was
called &lsquo;beehive_glitch&rsquo;; it is now
&lsquo;no_esc_ctl_c&rsquo;.</p>

<p style="margin-left:11%; margin-top: 1em">Other specific
terminal problems may be corrected by adding more
capabilities of the form <b>x</b><i>x</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Similar
Terminals</b> <br>
If there are two very similar terminals, one (the variant)
can be defined as being just like the other (the base) with
certain exceptions. In the definition of the variant, the
string capability <b>use</b> can be given with the name of
the base terminal. The capabilities given before <b>use</b>
override those in the base type named by <b>use</b>. If
there are multiple <b>use</b> capabilities, they are merged
in reverse order. That is, the rightmost <b>use</b>
reference is processed first, then the one to its left, and
so forth. Capabilities given explicitly in the entry
override those brought in by <b>use</b> references.</p>

<p style="margin-left:11%; margin-top: 1em">A capability
can be canceled by placing <b>xx@</b> to the left of the use
reference that imports it, where <i>xx</i> is the
capability. For example, the entry</p>

<p style="margin-left:22%; margin-top: 1em">2621&minus;nl,
smkx@, rmkx@, use=2621,</p>

<p style="margin-left:11%; margin-top: 1em">defines a
2621&minus;nl that does not have the <b>smkx</b> or
<b>rmkx</b> capabilities, and hence does not turn on the
function key labels when in visual mode. This is useful for
different modes for a terminal, or for different user
preferences.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Pitfalls of
Long Entries</b> <br>
Long terminfo entries are unlikely to be a problem; to date,
no entry has even approached terminfo&rsquo;s 4096-byte
string-table maximum. Unfortunately, the termcap
translations are much more strictly limited (to 1023 bytes),
thus termcap translations of long terminfo entries can cause
problems.</p>

<p style="margin-left:11%; margin-top: 1em">The man pages
for 4.3BSD and older versions of <b>tgetent()</b> instruct
the user to allocate a 1024-byte buffer for the termcap
entry. The entry gets null-terminated by the termcap
library, so that makes the maximum safe length for a termcap
entry 1k&minus;1 (1023) bytes. Depending on what the
application and the termcap library being used does, and
where in the termcap file the terminal type that
<b>tgetent()</b> is searching for is, several bad things can
happen.</p>

<p style="margin-left:11%; margin-top: 1em">Some termcap
libraries print a warning message or exit if they find an
entry that&rsquo;s longer than 1023 bytes; others do not;
others truncate the entries to 1023 bytes. Some application
programs allocate more than the recommended 1K for the
termcap entry; others do not.</p>

<p style="margin-left:11%; margin-top: 1em">Each termcap
entry has two important sizes associated with it: before
&quot;tc&quot; expansion, and after &quot;tc&quot;
expansion. &quot;tc&quot; is the capability that tacks on
another termcap entry to the end of the current one, to add
on its capabilities. If a termcap entry does not use the
&quot;tc&quot; capability, then of course the two lengths
are the same.</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;before tc expansion&quot; length is the most important
one, because it affects more than just users of that
particular terminal. This is the length of the entry as it
exists in /etc/termcap, minus the backslash-newline pairs,
which <b>tgetent()</b> strips out while reading it. Some
termcap libraries strip off the final newline, too (GNU
termcap does not). Now suppose:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>a termcap entry before expansion is more than 1023 bytes
long,</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>and the application has only allocated a 1k buffer,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>and the termcap library (like the one in BSD/OS 1.1 and
GNU) reads the whole entry into the buffer, no matter what
its length, to see if it is the entry it wants,</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>and <b>tgetent()</b> is searching for a terminal type
that either is the long entry, appears in the termcap file
after the long entry, or does not appear in the file at all
(so that <b>tgetent()</b> has to search the whole termcap
file).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Then
<b>tgetent()</b> will overwrite memory, perhaps its stack,
and probably core dump the program. Programs like telnet are
particularly vulnerable; modern telnets pass along values
like the terminal type automatically. The results are almost
as undesirable with a termcap library, like SunOS 4.1.3 and
Ultrix 4.4, that prints warning messages when it reads an
overly long termcap entry. If a termcap library truncates
long entries, like OSF/1 3.0, it is immune to dying here but
will return incorrect data for the terminal.</p>

<p style="margin-left:11%; margin-top: 1em">The &quot;after
tc expansion&quot; length will have a similar effect to the
above, but only for people who actually set TERM to that
terminal type, since <b>tgetent()</b> only does
&quot;tc&quot; expansion once it is found the terminal type
it was looking for, not while searching.</p>

<p style="margin-left:11%; margin-top: 1em">In summary, a
termcap entry that is longer than 1023 bytes can cause, on
various combinations of termcap libraries and applications,
a core dump, warnings, or incorrect operation. If it is too
long even before &quot;tc&quot; expansion, it will have this
effect even for users of some other terminal types and users
whose TERM variable does not have a termcap entry.</p>

<p style="margin-left:11%; margin-top: 1em">When in
&minus;C (translate to termcap) mode, the <b>ncurses</b>
implementation of <b>tic</b>(1M) issues warning messages
when the pre-tc length of a termcap translation is too long.
The &minus;c (check) option also checks resolved (after tc
expansion) lengths.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Binary
Compatibility</b> <br>
It is not wise to count on portability of binary terminfo
entries between commercial UNIX versions. The problem is
that there are at least two versions of terminfo (under
HP&minus;UX and AIX) which diverged from System V terminfo
after SVr1, and have added extension capabilities to the
string table that (in the binary format) collide with System
V and XSI Curses extensions.</p>

<h2>EXTENSIONS
<a name="EXTENSIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Searching for
terminal descriptions in <b>$HOME/.terminfo</b> and
TERMINFO_DIRS is not supported by older implementations.</p>

<p style="margin-left:11%; margin-top: 1em">Some SVr4
<b>curses</b> implementations, and all previous to SVr4, do
not interpret the %A and %O operators in parameter
strings.</p>

<p style="margin-left:11%; margin-top: 1em">SVr4/XPG4 do
not specify whether <b>msgr</b> licenses movement while in
an alternate-character-set mode (such modes may, among other
things, map CR and NL to characters that do not trigger
local motions). The <b>ncurses</b> implementation ignores
<b>msgr</b> in <b>ALTCHARSET</b> mode. This raises the
possibility that an XPG4 implementation making the opposite
interpretation may need terminfo entries made for
<b>ncurses</b> to have <b>msgr</b> turned off.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>ncurses</b> library handles insert-character and
insert-character modes in a slightly non-standard way to get
better update efficiency. See the <b>Insert/Delete
Character</b> subsection above.</p>

<p style="margin-left:11%; margin-top: 1em">The parameter
substitutions for <b>set_clock</b> and <b>display_clock</b>
are not documented in SVr4 or the XSI Curses standard. They
are deduced from the documentation for the AT&amp;T 505
terminal.</p>

<p style="margin-left:11%; margin-top: 1em">Be careful
assigning the <b>kmous</b> capability. The <b>ncurses</b>
wants to interpret it as <b>KEY_MOUSE</b>, for use by
terminals and emulators like xterm that can return
mouse-tracking information in the keyboard-input stream.</p>

<p style="margin-left:11%; margin-top: 1em">Different
commercial ports of terminfo and curses support different
subsets of the XSI Curses standard and (in some cases)
different extension sets. Here is a summary, accurate as of
October 1995:</p>

<p style="margin-left:11%; margin-top: 1em"><b>SVR4,
Solaris, ncurses</b> &minus;&minus; These support all SVr4
capabilities.</p>

<p style="margin-left:11%; margin-top: 1em"><b>SGI</b>
&minus;&minus; Supports the SVr4 set, adds one undocumented
extended string capability (<b>set_pglen</b>).</p>

<p style="margin-left:11%; margin-top: 1em"><b>SVr1,
Ultrix</b> &minus;&minus; These support a restricted subset
of terminfo capabilities. The booleans end with
<b>xon_xoff</b>; the numerics with <b>width_status_line</b>;
and the strings with <b>prtr_non</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>HP/UX</b>
&minus;&minus; Supports the SVr1 subset, plus the SVr[234]
numerics <b>num_labels</b>, <b>label_height</b>,
<b>label_width</b>, plus function keys 11 through 63, plus
<b>plab_norm</b>, <b>label_on</b>, and <b>label_off</b>,
plus some incompatible extensions in the string table.</p>

<p style="margin-left:11%; margin-top: 1em"><b>AIX</b>
&minus;&minus; Supports the SVr1 subset, plus function keys
11 through 63, plus a number of incompatible string table
extensions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>OSF</b>
&minus;&minus; Supports both the SVr4 set and the AIX
extensions.</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="35%">


<p style="margin-top: 1em">/usr/share/terminfo/?/*</p></td>
<td width="3%"></td>
<td width="51%">


<p style="margin-top: 1em">files containing terminal
descriptions</p> </td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>tic</b>(1M),
<b>infocmp</b>(1M), <b>curses</b>(3X), <b>printf</b>(3),
<b>term</b>(5). <b>term_variables</b>(3X).</p>

<h2>AUTHORS
<a name="AUTHORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Zeyd M.
Ben-Halim, Eric S. Raymond, Thomas E. Dickey. Based on
pcurses by Pavel Curtis.</p>
<hr>
</body>
</html>
