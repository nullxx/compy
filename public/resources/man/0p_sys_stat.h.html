<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:56:53 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>&lt;sys/stat.h&gt;</title>

</head>
<body>

<h1 align="center">&lt;sys/stat.h&gt;</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sys/stat.h
&minus; data returned by the stat() function</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;sys/stat.h&gt;</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;sys/stat.h&gt;</i> header shall define the structure
of the data returned by the functions <i>fstat</i>(),
<i>lstat</i>(), and <i>stat</i>().</p>

<p style="margin-left:11%; margin-top: 1em">The <b>stat</b>
structure shall contain at least the following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>dev_t
st_dev</b> Device ID of device containing file. <b><br>
ino_t st_ino</b> File serial number. <b><br>
mode_t st_mode</b> Mode of file (see below). <b><br>
nlink_t st_nlink</b> Number of hard links to the file.
<b><br>
uid_t st_uid</b> User ID of file. <b><br>
gid_t st_gid</b> Group ID of file.</p>

<p style="margin-left:22%; margin-top: 1em"><b>dev_t
st_rdev</b> Device ID (if file is character or block
special).</p>

<p style="margin-left:22%; margin-top: 1em"><b>off_t
st_size</b> For regular files, the file size in bytes. <br>
For symbolic links, the length in bytes of the <br>
pathname contained in the symbolic link.</p>

<p style="margin-left:22%; margin-top: 1em">For a shared
memory object, the length in bytes.</p>

<p style="margin-left:22%; margin-top: 1em">For a typed
memory object, the length in bytes.</p>

<p style="margin-left:22%; margin-top: 1em">For other file
types, the use of this field is <br>
unspecified. <b><br>
time_t st_atime</b> Time of last access. <b><br>
time_t st_mtime</b> Time of last data modification. <b><br>
time_t st_ctime</b> Time of last status change.</p>

<p style="margin-left:22%; margin-top: 1em"><b>blksize_t
st_blksize</b> A file system-specific preferred I/O block
size for <br>
this object. In some file system types, this may <br>
vary from file to file. <b><br>
blkcnt_t st_blocks</b> Number of blocks allocated for this
object.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>st_ino</i> and <i>st_dev</i> fields taken together
uniquely identify the file within the system. The
<b>blkcnt_t</b>, <b>blksize_t</b>, <b>dev_t</b>,
<b>ino_t</b>, <b>mode_t</b>, <b>nlink_t</b>, <b>uid_t</b>,
<b>gid_t</b>, <b>off_t</b>, and <b>time_t</b> types shall be
defined as described in <i>&lt;sys/types.h&gt;</i> . Times
shall be given in seconds since the Epoch.</p>

<p style="margin-left:11%; margin-top: 1em">Unless
otherwise specified, the structure members <i>st_mode</i>,
<i>st_ino</i>, <i>st_dev</i>, <i>st_uid</i>, <i>st_gid</i>,
<i>st_atime</i>, <i>st_ctime</i>, and <i>st_mtime</i> shall
have meaningful values for all file types defined in
IEEE&nbsp;Std&nbsp;1003.1-2001.</p>

<p style="margin-left:11%; margin-top: 1em">For symbolic
links, the <i>st_mode</i> member shall contain meaningful
information, which can be used with the file type macros
described below, that take a <i>mode</i> argument. The
<i>st_size</i> member shall contain the length, in bytes, of
the pathname contained in the symbolic link. File mode bits
and the contents of the remaining members of the <b>stat</b>
structure are unspecified. The value returned in the
<i>st_size</i> field shall be the length of the contents of
the symbolic link, and shall not count a trailing null if
one is present.</p>

<p style="margin-left:11%; margin-top: 1em">The following
symbolic names for the values of type <b>mode_t</b> shall
also be defined.</p>

<p style="margin-left:11%; margin-top: 1em">File type:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>S_IFMT</p></td>
<td width="2%"></td>
<td width="20%">


<p>Type of file.</p></td>
<td width="58%">
</td></tr>
</table>

<p style="margin-left:11%;">S_IFBLK</p>

<p style="margin-left:22%;">Block special.</p>

<p style="margin-left:11%;">S_IFCHR</p>

<p style="margin-left:22%;">Character special.</p>

<p style="margin-left:11%;">S_IFIFO</p>

<p style="margin-left:22%;">FIFO special.</p>

<p style="margin-left:11%;">S_IFREG</p>

<p style="margin-left:22%;">Regular.</p>

<p style="margin-left:11%;">S_IFDIR</p>

<p style="margin-left:22%;">Directory.</p>

<p style="margin-left:11%;">S_IFLNK</p>

<p style="margin-left:22%;">Symbolic link.</p>

<p style="margin-left:11%;">S_IFSOCK</p>

<p style="margin-left:22%;">Socket.</p>

<p style="margin-left:11%; margin-top: 1em">File mode bits:
<br>
S_IRWXU</p>

<p style="margin-left:22%;">Read, write, execute/search by
owner.</p>

<p style="margin-left:11%;">S_IRUSR</p>

<p style="margin-left:22%;">Read permission, owner.</p>

<p style="margin-left:11%;">S_IWUSR</p>

<p style="margin-left:22%;">Write permission, owner.</p>

<p style="margin-left:11%;">S_IXUSR</p>

<p style="margin-left:22%;">Execute/search permission,
owner.</p>

<p style="margin-left:11%;">S_IRWXG</p>

<p style="margin-left:22%;">Read, write, execute/search by
group.</p>

<p style="margin-left:11%;">S_IRGRP</p>

<p style="margin-left:22%;">Read permission, group.</p>

<p style="margin-left:11%;">S_IWGRP</p>

<p style="margin-left:22%;">Write permission, group.</p>

<p style="margin-left:11%;">S_IXGRP</p>

<p style="margin-left:22%;">Execute/search permission,
group.</p>

<p style="margin-left:11%;">S_IRWXO</p>

<p style="margin-left:22%;">Read, write, execute/search by
others.</p>

<p style="margin-left:11%;">S_IROTH</p>

<p style="margin-left:22%;">Read permission, others.</p>

<p style="margin-left:11%;">S_IWOTH</p>

<p style="margin-left:22%;">Write permission, others.</p>

<p style="margin-left:11%;">S_IXOTH</p>

<p style="margin-left:22%;">Execute/search permission,
others.</p>

<p style="margin-left:11%;">S_ISUID</p>

<p style="margin-left:22%;">Set-user-ID on execution.</p>

<p style="margin-left:11%;">S_ISGID</p>

<p style="margin-left:22%;">Set-group-ID on execution.</p>

<p style="margin-left:11%;">S_ISVTX</p>

<p style="margin-left:22%;">On directories, restricted
deletion flag.</p>

<p style="margin-left:11%; margin-top: 1em">The bits
defined by S_IRUSR, S_IWUSR, S_IXUSR, S_IRGRP, S_IWGRP,
S_IXGRP, S_IROTH, S_IWOTH, S_IXOTH, S_ISUID, S_ISGID, and
S_ISVTX shall be unique.</p>

<p style="margin-left:11%; margin-top: 1em">S_IRWXU is the
bitwise-inclusive OR of S_IRUSR, S_IWUSR, and S_IXUSR.</p>

<p style="margin-left:11%; margin-top: 1em">S_IRWXG is the
bitwise-inclusive OR of S_IRGRP, S_IWGRP, and S_IXGRP.</p>

<p style="margin-left:11%; margin-top: 1em">S_IRWXO is the
bitwise-inclusive OR of S_IROTH, S_IWOTH, and S_IXOTH.</p>


<p style="margin-left:11%; margin-top: 1em">Implementations
may OR other implementation-defined bits into S_IRWXU,
S_IRWXG, and S_IRWXO, but they shall not overlap any of the
other bits defined in this volume of
IEEE&nbsp;Std&nbsp;1003.1-2001. The <i>file permission
bits</i> are defined to be those corresponding to the
bitwise-inclusive OR of S_IRWXU, S_IRWXG, and S_IRWXO.</p>

<p style="margin-left:11%; margin-top: 1em">The following
macros shall be provided to test whether a file is of the
specified type. The value <i>m</i> supplied to the macros is
the value of <i>st_mode</i> from a <b>stat</b> structure.
The macro shall evaluate to a non-zero value if the test is
true; 0 if the test is false. <br>
S_ISBLK(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a block special
file.</p>

<p style="margin-left:11%;">S_ISCHR(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a character special
file.</p>

<p style="margin-left:11%;">S_ISDIR(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a directory.</p>

<p style="margin-left:11%;">S_ISFIFO(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a pipe or FIFO special
file.</p>

<p style="margin-left:11%;">S_ISREG(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a regular file.</p>

<p style="margin-left:11%;">S_ISLNK(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a symbolic link.</p>

<p style="margin-left:11%;">S_ISSOCK(<i>m</i>)</p>

<p style="margin-left:22%;">Test for a socket.</p>

<p style="margin-left:11%; margin-top: 1em">The
implementation may implement message queues, semaphores, or
shared memory objects as distinct file types. The following
macros shall be provided to test whether a file is of the
specified type. The value of the <i>buf</i> argument
supplied to the macros is a pointer to a <b>stat</b>
structure. The macro shall evaluate to a non-zero value if
the specified object is implemented as a distinct file type
and the specified file type is contained in the <b>stat</b>
structure referenced by <i>buf</i>. Otherwise, the macro
shall evaluate to zero. <br>
S_TYPEISMQ(<i>buf</i>)</p>

<p style="margin-left:22%;">Test for a message queue.</p>

<p style="margin-left:11%;">S_TYPEISSEM(<i>buf</i>)</p>

<p style="margin-left:22%;">Test for a semaphore.</p>

<p style="margin-left:11%;">S_TYPEISSHM(<i>buf</i>)</p>

<p style="margin-left:22%;">Test for a shared memory
object.</p>

<p style="margin-left:11%; margin-top: 1em">The
implementation may implement typed memory objects as
distinct file types, and the following macro shall test
whether a file is of the specified type. The value of the
<i>buf</i> argument supplied to the macros is a pointer to a
<b>stat</b> structure. The macro shall evaluate to a
non-zero value if the specified object is implemented as a
distinct file type and the specified file type is contained
in the <b>stat</b> structure referenced by <i>buf</i>.
Otherwise, the macro shall evaluate to zero. <br>
S_TYPEISTMO(<i>buf</i>)</p>

<p style="margin-left:22%;">Test macro for a typed memory
object.</p>

<p style="margin-left:11%; margin-top: 1em">The following
shall be declared as functions and may also be defined as
macros. Function prototypes shall be provided.</p>

<p style="margin-left:22%; margin-top: 1em"><b>int
chmod(const char *, mode_t); <br>
int fchmod(int, mode_t); <br>
int fstat(int, struct stat *); <br>
int lstat(const char *restrict, struct stat *restrict); <br>
int mkdir(const char *, mode_t); <br>
int mkfifo(const char *, mode_t);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>int
mknod(const char *, mode_t, dev_t);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>int
stat(const char *restrict, struct stat *restrict); <br>
mode_t umask(mode_t);</b></p>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Use of the
macros is recommended for determining the type of a
file.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A conforming
C-language application must include
<i>&lt;sys/stat.h&gt;</i> for functions that have arguments
or return values of type <b>mode_t</b>, so that symbolic
values for that type can be used. An alternative would be to
require that these constants are also defined by including
<i>&lt;sys/types.h&gt;</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The S_ISUID and
S_ISGID bits may be cleared on any write, not just on
<i>open</i>(), as some historical implementations do.</p>

<p style="margin-left:11%; margin-top: 1em">System calls
that update the time entry fields in the <b>stat</b>
structure must be documented by the implementors.
POSIX-conforming systems should not update the time entry
fields for functions listed in the System Interfaces volume
of IEEE&nbsp;Std&nbsp;1003.1-2001 unless the standard
requires that they do, except in the case of documented
extensions to the standard.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
<i>st_dev</i> must be unique within a Local Area Network
(LAN) in a &lsquo;&lsquo;system&rsquo;&rsquo; made up of
multiple computers&rsquo; file systems connected by a
LAN.</p>

<p style="margin-left:11%; margin-top: 1em">Networked
implementations of a POSIX-conforming system must guarantee
that all files visible within the file tree (including parts
of the tree that may be remotely mounted from other machines
on the network) on each individual processor are uniquely
identified by the combination of the <i>st_ino</i> and
<i>st_dev</i> fields.</p>

<p style="margin-left:11%; margin-top: 1em">The unit for
the <i>st_blocks</i> member of the <b>stat</b> structure is
not defined within IEEE&nbsp;Std&nbsp;1003.1-2001. In some
implementations it is 512 bytes. It may differ on a file
system basis. There is no correlation between values of the
<i>st_blocks</i> and <i>st_blksize</i>, and the
<i>f_bsize</i> (from <i>&lt;sys/statvfs.h&gt;</i>) structure
members.</p>

<p style="margin-left:11%; margin-top: 1em">Traditionally,
some implementations defined the multiplier for
<i>st_blocks</i> in <i>&lt;sys/param.h&gt;</i> as the symbol
DEV_BSIZE.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">No new S_IFMT
symbolic names for the file type values of <b>mode_t</b>
will be defined by IEEE&nbsp;Std&nbsp;1003.1-2001; if new
file types are required, they will only be testable through
<i>S_ISxx</i>() or <i>S_TYPEISxxx</i>() macros instead.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>&lt;sys/statvfs.h&gt;</i>,
<i>&lt;sys/types.h&gt;</i>, the System Interfaces volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, <i>chmod</i>(),
<i>fchmod</i>(), <i>fstat</i>(), <i>lstat</i>(),
<i>mkdir</i>(), <i>mkfifo</i>(), <i>mknod</i>(),
<i>stat</i>(), <i>umask</i>()</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
