<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:17:32 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>O</title>

</head>
<body>

<h1 align="center">O</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONVENTIONS">CONVENTIONS</a><br>
<a href="#IMPLEMENTATION">IMPLEMENTATION</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">O &minus;
Generic interface to Perl Compiler backends</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em">        perl &minus;MO=[&minus;q,]Backend[,OPTIONS] foo.pl</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This is the
module that is used as a frontend to the Perl Compiler.</p>

<p style="margin-left:11%; margin-top: 1em">If you pass the
<tt>&quot;&minus;q&quot;</tt> option to the module, then the
<small>STDOUT</small> filehandle will be redirected into the
variable <tt>$O::BEGIN_output</tt> during compilation. This
has the effect that any output printed to
<small>STDOUT</small> by <small>BEGIN</small> blocks or
use&rsquo;d modules will be stored in this variable rather
than printed. It&rsquo;s useful with those backends which
produce output themselves (<tt>&quot;Deparse&quot;</tt>,
<tt>&quot;Concise&quot;</tt> etc), so that their output is
not confused with that generated by the code being
compiled.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;&minus;qq&quot;</tt> option behaves like
<tt>&quot;&minus;q&quot;</tt>, except that it also closes
<small>STDERR</small> after deparsing has finished. This
suppresses the &quot;Syntax <small>OK</small> &quot; message
normally produced by perl.</p>

<h2>CONVENTIONS
<a name="CONVENTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most compiler
backends use the following conventions:
<small>OPTIONS</small> consists of a comma-separated list of
words (no white-space). The <tt>&quot;&minus;v&quot;</tt>
option usually puts the backend into verbose mode. The
<tt>&quot;&minus;ofile&quot;</tt> option generates output to
<b>file</b> instead of stdout. The
<tt>&quot;&minus;D&quot;</tt> option followed by various
letters turns on various internal debugging flags. See the
documentation for the desired backend (named
<tt>&quot;B::Backend&quot;</tt> for the example above) to
find out about that backend.</p>

<h2>IMPLEMENTATION
<a name="IMPLEMENTATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section is
only necessary for those who want to write a compiler
backend module that can be used via this module.</p>

<p style="margin-left:11%; margin-top: 1em">The
command-line mentioned in the <small>SYNOPSIS</small>
section corresponds to the Perl code</p>

<pre style="margin-left:11%; margin-top: 1em">    use O (&quot;Backend&quot;, OPTIONS);</pre>


<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;O::import&quot;</tt> function loads the
appropriate <tt>&quot;B::Backend&quot;</tt> module and calls
its <tt>&quot;compile&quot;</tt> function, passing it
<small>OPTIONS</small> . That function is expected to return
a sub reference which we&rsquo;ll call
<small>CALLBACK</small> . Next, the &quot;compile-only&quot;
flag is switched on (equivalent to the command-line option
<tt>&quot;&minus;c&quot;</tt>) and a <small>CHECK</small>
block is registered which calls <small>CALLBACK</small> .
Thus the main Perl program mentioned on the command-line is
read in, parsed and compiled into internal syntax tree form.
Since the <tt>&quot;&minus;c&quot;</tt> flag is set, the
program does not start running (excepting
<small>BEGIN</small> blocks of course) but the
<small>CALLBACK</small> function registered by the compiler
backend is called.</p>

<p style="margin-left:11%; margin-top: 1em">In summary, a
compiler backend module should be called &quot;B::Foo&quot;
for some foo and live in the appropriate directory for that
name. It should define a function called
<tt>&quot;compile&quot;</tt>. When the user types</p>

<pre style="margin-left:11%; margin-top: 1em">    perl &minus;MO=Foo,OPTIONS foo.pl</pre>


<p style="margin-left:11%; margin-top: 1em">that function
is called and is passed those <small>OPTIONS</small> (split
on commas). It should return a sub ref to the main
compilation function. After the user&rsquo;s program is
loaded and parsed, that returned sub ref is invoked which
can then go ahead and do the compilation, usually by making
use of the <tt>&quot;B&quot;</tt> module&rsquo;s
functionality.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;&minus;q&quot;</tt> and
<tt>&quot;&minus;qq&quot;</tt> options don&rsquo;t work
correctly if perl isn&rsquo;t compiled with PerlIO support :
<small>STDOUT</small> will be closed instead of being
redirected to <tt>$O::BEGIN_output</tt>.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Malcolm
Beattie, <tt>&quot;mbeattie@sable.ox.ac.uk&quot;</tt></p>
<hr>
</body>
</html>
