<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:22:58 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>e2fsck.conf</title>

</head>
<body>

<h1 align="center">e2fsck.conf</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#THE [options] STANZA">THE [options] STANZA</a><br>
<a href="#THE [problems] STANZA">THE [problems] STANZA</a><br>
<a href="#THE [scratch_files] STANZA">THE [scratch_files] STANZA</a><br>
<a href="#LOGGING">LOGGING</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">e2fsck.conf
&minus; Configuration file for e2fsck</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>e2fsck.conf</i>
is the configuration file for <b>e2fsck</b>(8). It controls
the default behavior of <b>e2fsck</b>(8) while it is
checking ext2, ext3, or ext4 filesystems.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>e2fsck.conf</i> file uses an INI-style format. Stanzas,
or top-level sections, are delimited by square braces: [ ].
Within each section, each line defines a relation, which
assigns tags to values, or to a subsection, which contains
further relations or subsections. An example of the
INI-style format used by this configuration file follows
below:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>[section1]</p></td>
<td width="8%"></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag1 = value_a</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag1 = value_b</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag2 = value_c</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>[section 2]</p></td>
<td width="8%"></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag3 = {</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">


<p>subtag1 = subtag_value_a</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">


<p>subtag1 = subtag_value_b</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">
</td>
<td width="69%">


<p>subtag2 = subtag_value_c</p></td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>}</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag1 = value_d</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%">
</td>
<td width="8%">
</td>
<td width="8%">


<p>tag2 = value_e</p></td>
<td width="69%">
</td></tr>
<tr valign="top" align="left">
<td width="8%"></td>
<td width="7%"></td>
<td width="8%">


<p>}</p></td>
<td width="8%"></td>
<td width="69%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Comments are
delimited by a semicolon (&rsquo;;&rsquo;) or a hash
(&rsquo;#&rsquo;) character at the beginning of the comment,
and are terminated by the end of line character.</p>

<p style="margin-left:11%; margin-top: 1em">Tags and values
must be quoted using double quotes if they contain spaces.
Within a quoted string, the standard backslash
interpretations apply: &quot;\n&quot; (for the newline
character), &quot;\t&quot; (for the tab character),
&quot;\b&quot; (for the backspace character), and
&quot;\\&quot; (for the backslash character).</p>

<p style="margin-left:11%; margin-top: 1em">The following
stanzas are used in the <i>e2fsck.conf</i> file. They will
be described in more detail in future sections of this
document. <i><br>
[options]</i></p>

<p style="margin-left:22%;">This stanza contains general
configuration parameters for <b>e2fsck</b>&rsquo;s
behavior.</p>

<p style="margin-left:11%;"><i>[problems]</i></p>

<p style="margin-left:22%;">This stanza allows the
administrator to reconfigure how e2fsck handles various
filesystem inconsistencies.</p>

<p style="margin-left:11%;"><i>[scratch_files]</i></p>

<p style="margin-left:22%;">This stanza controls when
e2fsck will attempt to use scratch files to reduce the need
for memory.</p>

<h2>THE [options] STANZA
<a name="THE [options] STANZA"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
relations are defined in the <i>[options]</i> stanza.
<i><br>
allow_cancellation</i></p>

<p style="margin-left:22%;">If this relation is set to a
boolean value of true, then if the user interrupts e2fsck
using ^C, and the filesystem is not explicitly flagged as
containing errors, e2fsck will exit with an exit status of 0
instead of 32. This setting defaults to false.</p>

<p style="margin-left:11%;"><i>accept_time_fudge</i></p>

<p style="margin-left:22%;">Unfortunately, due to
Windows&rsquo; unfortunate design decision to configure the
hardware clock to tick localtime, instead of the more proper
and less error-prone UTC time, many users end up in the
situation where the system clock is incorrectly set at the
time when e2fsck is run.</p>

<p style="margin-left:22%; margin-top: 1em">Historically
this was usually due to some distributions having buggy init
scripts and/or installers that didn&rsquo;t correctly detect
this case and take appropriate countermeasures. However,
it&rsquo;s still possible, despite the best efforts of init
script and installer authors to not be able to detect this
misconfiguration, usually due to a buggy or misconfigured
virtualization manager or the installer not having access to
a network time server during the installation process. So by
default, we allow the superblock times to be fudged by up to
24 hours. This can be disabled by setting
<i>accept_time_fudge</i> to the boolean value of false. This
setting defaults to true.</p>

<p style="margin-left:11%;"><i>broken_system_clock</i></p>

<p style="margin-left:22%;">The <b>e2fsck</b>(8) program
has some heuristics that assume that the system clock is
correct. In addition, many system programs make similar
assumptions. For example, the UUID library depends on time
not going backwards in order for it to be able to make its
guarantees about issuing universally unique ID&rsquo;s.
Systems with broken system clocks, are well, broken.
However, broken system clocks, particularly in embedded
systems, do exist. E2fsck will attempt to use heuristics to
determine if the time can not be trusted; and to skip
time-based checks if this is true. If this boolean is set to
true, then e2fsck will always assume that the system clock
can not be trusted.</p>

<p style="margin-left:11%;"><i>buggy_init_scripts</i></p>

<p style="margin-left:22%;">This boolean relation is an
alias for <i>accept_time_fudge</i> for backwards
compatibility; it used to be that the behavior defined by
<i>accept_time_fudge</i> above defaulted to false, and
<i>buggy_init_scripts</i> would enable superblock time field
to be wrong by up to 24 hours. When we changed the default,
we also renamed this boolean relation to
<i>accept_time_fudge.</i></p>

<p style="margin-left:11%;"><i>clear_test_fs_flag</i></p>

<p style="margin-left:22%;">This boolean relation controls
whether or not <b>e2fsck</b>(8) will offer to clear the
test_fs flag if the ext4 filesystem is available on the
system. It defaults to true.</p>


<p style="margin-left:11%;"><i>defer_check_on_battery</i></p>

<p style="margin-left:22%;">This boolean relation controls
whether or not the interval between filesystem checks
(either based on time or number of mounts) should be doubled
if the system is running on battery. This setting defaults
to true.</p>


<p style="margin-left:11%;"><i>indexed_dir_slack_percentage</i></p>

<p style="margin-left:22%;">When <b>e2fsck</b>(8) repacks a
indexed directory, reserve the specified percentage of empty
space in each leaf nodes so that a few new entries can be
added to the directory without splitting leaf nodes, so that
the average fill ratio of directories can be maintained at a
higher, more efficient level. This relation defaults to 20
percent.</p>

<p style="margin-left:11%;"><i>log_dir</i></p>

<p style="margin-left:22%;">If the <i>log_filename</i>
relation contains a relative pathname, then the log file
will be placed in the directory named by the <i>log_dir</i>
relation.</p>

<p style="margin-left:11%;"><i>log_dir_fallback</i></p>

<p style="margin-left:22%;">This relation contains an
alternate directory that will be used if the directory
specified by <i>log_dir</i> is not available or is not
writeable.</p>

<p style="margin-left:11%;"><i>log_dir_wait</i></p>

<p style="margin-left:22%;">If this boolean relation is
true, them if the directories specified by <i>log_dir</i> or
<i>log_dir_fallback</i> are not available or are not yet
writeable, e2fsck will save the output in a memory buffer,
and a child process will periodically test to see if the log
directory has become available after the boot sequence has
mounted the requiste filesytem for reading/writing. This
implements the functionality provided by <b>logsave</b>(8)
for e2fsck log files.</p>

<p style="margin-left:11%;"><i>log_filename</i></p>

<p style="margin-left:22%;">This relation specifies the
file name where a copy of e2fsck&rsquo;s output will be
written. If certain problem reports are suppressed using the
<i>max_count_problems</i> relation, (or on a per-problem
basis using the <i>max_count</i> relation), the full set of
problem reports will be written to the log file. The
filename may contain various percent-expressions (%D, %T,
%N, etc.) which will be expanded so that the file name for
the log file can include things like date, time, device
name, and other run-time parameters. See the <b>LOGGING</b>
section for more details.</p>

<p style="margin-left:11%;"><i>max_count_problems</i></p>

<p style="margin-left:22%;">This relation specifies the
maximum number of problem reports of a particular type will
be printed to stdout before further problem reports of that
type are squelched. This can be useful if the console is
slow (i.e., connected to a serial port) and so a large
amount of output could end up delaying the boot process for
a long time (potentially hours).</p>

<p style="margin-left:11%;"><i>report_features</i></p>

<p style="margin-left:22%;">If this boolean relation is
true, e2fsck will print the file system features as part of
its verbose reporting (i.e., if the <b>-v</b> option is
specified)</p>

<p style="margin-left:11%;"><i>report_time</i></p>

<p style="margin-left:22%;">If this boolean relation is
true, e2fsck will run as if the options <b>-tt</b> are
always specified. This will cause e2fsck to print timing
statistics on a pass by pass basis for full file system
checks.</p>

<p style="margin-left:11%;"><i>report_verbose</i></p>

<p style="margin-left:22%;">If this boolean relation is
true, e2fsck will run as if the option <b>-v</b> is always
specified. This will cause e2fsck to print some additional
information at the end of each full file system check.</p>

<h2>THE [problems] STANZA
<a name="THE [problems] STANZA"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Each tag in the
<i>[problems]</i> stanza names a problem code specified with
a leading &quot;0x&quot; followed by six hex digits. The
value of the tag is a subsection where the relations in that
subsection override the default treatment of that particular
problem code.</p>

<p style="margin-left:11%; margin-top: 1em">Note that
inappropriate settings in this stanza may cause
<b>e2fsck</b> to behave incorrectly, or even crash. Most
system administrators should not be making changes to this
section without referring to source code.</p>

<p style="margin-left:11%; margin-top: 1em">Within each
problem code&rsquo;s subsection, the following tags may be
used: <i><br>
description</i></p>

<p style="margin-left:22%;">This relation allows the
message which is printed when this filesystem inconsistency
is detected to be overridden.</p>

<p style="margin-left:11%;"><i>preen_ok</i></p>

<p style="margin-left:22%;">This boolean relation overrides
the default behavior controlling whether this filesystem
problem should be automatically fixed when <b>e2fsck</b> is
running in preen mode.</p>

<p style="margin-left:11%;"><i>max_count</i></p>

<p style="margin-left:22%;">This integer relation overrides
the <i>max_count_problems</i> parameter (set in the options
section) for this particular problem.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><i>no_ok</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>This boolean relation overrides the default behavior
determining whether or not the filesystem will be marked as
inconsistent if the user declines to fix the reported
problem.</p> </td></tr>
</table>

<p style="margin-left:11%;"><i>no_default</i></p>

<p style="margin-left:22%;">This boolean relation overrides
whether the default answer for this problem (or question)
should be &quot;no&quot;.</p>

<p style="margin-left:11%;"><i>preen_nomessage</i></p>

<p style="margin-left:22%;">This boolean relation overrides
the default behavior controlling whether or not the
description for this filesystem problem should be suppressed
when <b>e2fsck</b> is running in preen mode.</p>

<p style="margin-left:11%;"><i>no_nomsg</i></p>

<p style="margin-left:22%;">This boolean relation overrides
the default behavior controlling whether or not the
description for this filesystem problem should be suppressed
when a problem forced not to be fixed, either because
<b>e2fsck</b> is run with the <b>-n</b> option or because
the <i>force_no</i> flag has been set for the problem.</p>

<p style="margin-left:11%;"><i>force_no</i></p>

<p style="margin-left:22%;">This boolean option, if set to
true, forces a problem to never be fixed. That is, it will
be as if the user problem responds &rsquo;no&rsquo; to the
question of &rsquo;should this problem be fixed?&rsquo;. The
<i>force_no</i> option even overrides the <b>-y</b> option
given on the command-line (just for the specific problem, of
course).</p>

<h2>THE [scratch_files] STANZA
<a name="THE [scratch_files] STANZA"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
relations are defined in the <i>[scratch_files]</i> stanza.
<i><br>
directory</i></p>

<p style="margin-left:22%;">If the directory named by this
relation exists and is writeable, then e2fsck will attempt
to use this directory to store scratch files instead of
using in-memory data structures.</p>

<p style="margin-left:11%;"><i>numdirs_threshold</i></p>

<p style="margin-left:22%;">If this relation is set, then
in-memory data structures be used if the number of
directories in the filesystem are fewer than amount
specified.</p>

<p style="margin-left:11%;"><i>dirinfo</i></p>

<p style="margin-left:22%;">This relation controls whether
or not the scratch file directory is used instead of an
in-memory data structure for directory information. It
defaults to true.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>icount</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>This relation controls whether or not the scratch file
directory is used instead of an in-memory data structure
when tracking inode counts. It defaults to true.</p></td></tr>
</table>

<h2>LOGGING
<a name="LOGGING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">E2fsck has the
facility to save the information from an e2fsck run in a
directory so that a system administrator can review its
output at their leisure. This allows information captured
during the automatic e2fsck preen run, as well as a manually
started e2fsck run, to be saved for posterity. This facility
is controlled by the <i>log_filename</i>, <i>log_dir</i>,
<i>log_dir_fallback</i>, and <i>log_dir_wait</i> relations
in the <i>[options]</i> stanza.</p>

<p style="margin-left:11%; margin-top: 1em">The filename in
<i>log_filename</i> may contain the following
percent-expressions that will be expanded as follows.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>%d</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">The current day of the month</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current date; this is a equivalent of
<b>%Y%m%d</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%h</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The hostname of the system.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%H</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current hour in 24-hour format (00..23)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%m</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current month as a two-digit number (01..12)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%M</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current minute (00..59)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%N</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the block device containing the file system,
with any directory pathname stripped off.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The pid of the e2fsck process</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current time expressed as the number of seconds
since 1970-01-01 00:00:00 UTC</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%S</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current second (00..59)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current time; this is equivalent of
<b>%H%M%S</b></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The name of the user running e2fsck.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%U</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This percent expression does not expand to anything, but
it signals that any following date or time expressions
should be expressed in UTC time instead of the local
timzeone.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The last two digits of the current year (00..99)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%Y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The current year (i.e., 2012).</p></td></tr>
</table>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
recipe will prevent e2fsck from aborting during the boot
process when a filesystem contains orphaned files. (Of
course, this is not always a good idea, since critical files
that are needed for the security of the system could
potentially end up in lost+found, and starting the system
without first having a system administrator check things out
may be dangerous.)</p>

<p style="margin-left:11%; margin-top: 1em">[problems] <br>
0x040002 = { <br>
preen_ok = true <br>
description = &quot;@u @i %i. &quot; <br>
}</p>

<p style="margin-left:11%; margin-top: 1em">The following
recipe will cause an e2fsck logfile to be written to the
directory /var/log/e2fsck, with a filename that contains the
device name, the hostname of the system, the date, and time:
e.g., &quot;e2fsck-sda3.server.INFO.20120314-112142&quot;.
If the directory containing /var/log is located on the root
file system which is initially mounted read-only, then the
output will be saved in memory and written out once the root
file system has been remounted read/write. To avoid too much
detail from being written to the serial console (which could
potentially slow down the boot sequence), only print no more
than 16 instances of each type of file system
corruption.</p>

<p style="margin-left:11%; margin-top: 1em">[options] <br>
max_count_problems = 16 <br>
log_dir = /var/log/e2fsck <br>
log_filename = e2fsck-%N.%h.INFO.%D-%T <br>
log_dir_wait = true</p>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>/etc/e2fsck.conf</i></p>

<p style="margin-left:22%;">The configuration file for
<b>e2fsck</b>(8).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>e2fsck</b>(8)</p>
<hr>
</body>
</html>
