<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:25:48 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>clock</title>

</head>
<body>

<h1 align="center">clock</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CLOCK ARITHMETIC">CLOCK ARITHMETIC</a><br>
<a href="#HIGH RESOLUTION TIMERS">HIGH RESOLUTION TIMERS</a><br>
<a href="#FORMATTING TIMES">FORMATTING TIMES</a><br>
<a href="#SCANNING TIMES">SCANNING TIMES</a><br>
<a href="#FORMAT GROUPS">FORMAT GROUPS</a><br>
<a href="#TIME ZONES">TIME ZONES</a><br>
<a href="#LOCALIZATION">LOCALIZATION</a><br>
<a href="#FREE FORM SCAN">FREE FORM SCAN</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">clock &minus;
Obtain and manipulate dates and times</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">package require
<b>Tcl 8.5</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
add</b> <i>timeVal</i> ?<i>count unit...</i>?
?<i>&minus;option value</i>?</p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
clicks</b> ?<i>&minus;option</i>?</p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
format</b> <i>timeVal</i> ?<i>&minus;option
value</i>...?</p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
microseconds</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
milliseconds</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
scan</b> <i>inputString</i> ?<i>&minus;option
value</i>...?</p>

<p style="margin-left:11%; margin-top: 1em"><b>clock
seconds</b>
_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>clock</b> command performs several operations that obtain
and manipulate values that represent times. The command
supports several subcommands that determine what action is
carried out by the command. <b><br>
clock add</b> <i>timeVal</i> ?<i>count unit...</i>?
?<i>&minus;option value</i>?</p>

<p style="margin-left:22%;">Adds a (possibly negative)
offset to a time that is expressed as an integer number of
seconds. See <b>CLOCK ARITHMETIC</b> for a full
description.</p>

<p style="margin-left:11%;"><b>clock clicks</b>
?<i>&minus;option</i>?</p>

<p style="margin-left:22%;">If no <i>&minus;option</i>
argument is supplied, returns a high-resolution time value
as a system-dependent integer value. The unit of the value
is system-dependent but should be the highest resolution
clock available on the system such as a CPU cycle counter.
See <b>HIGH RESOLUTION TIMERS</b> for a full
description.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>&minus;option</i> argument is <i>&minus;milliseconds</i>,
then the command is synonymous with <b>clock
milliseconds</b> (see below). This usage is obsolete, and
<b>clock milliseconds</b> is to be considered the preferred
way of obtaining a count of milliseconds.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<i>&minus;option</i> argument is <i>&minus;microseconds</i>,
then the command is synonymous with <b>clock
microseconds</b> (see below). This usage is obsolete, and
<b>clock microseconds</b> is to be considered the preferred
way of obtaining a count of microseconds.</p>

<p style="margin-left:11%;"><b>clock format</b>
<i>timeVal</i> ?<i>&minus;option value</i>...?</p>

<p style="margin-left:22%;">Formats a time that is
expressed as an integer number of seconds into a format
intended for consumption by users or external programs. See
<b>FORMATTING TIMES</b> for a full description.</p>

<p style="margin-left:11%;"><b>clock microseconds</b></p>

<p style="margin-left:22%;">Returns the current time as an
integer number of microseconds. See <b>HIGH RESOLUTION
TIMERS</b> for a full description.</p>

<p style="margin-left:11%;"><b>clock milliseconds</b></p>

<p style="margin-left:22%;">Returns the current time as an
integer number of milliseconds. See <b>HIGH RESOLUTION
TIMERS</b> for a full description.</p>

<p style="margin-left:11%;"><b>clock scan</b>
<i>inputString</i> ?<i>&minus;option value</i>...?</p>

<p style="margin-left:22%;">Scans a time that is expressed
as a character string and produces an integer number of
seconds. See <b>SCANNING TIMES</b> for a full
description.</p>

<p style="margin-left:11%;"><b>clock seconds</b></p>

<p style="margin-left:22%;">Returns the current time as an
integer number of seconds.</p>


<p style="margin-left:11%; margin-top: 1em"><b>PARAMETERS</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><i>count</i></p></td>
<td width="4%"></td>
<td width="78%">


<p>An integer representing a count of some unit of time.
See <b>CLOCK ARITHMETIC</b> for the details.</p></td></tr>
</table>

<p style="margin-left:11%;"><i>timeVal</i></p>

<p style="margin-left:22%;">An integer value passed to the
<b>clock</b> command that represents an absolute time as a
number of seconds from the <i>epoch time</i> of 1 January
1970, 00:00 UTC. Note that the count of seconds does not
include any leap seconds; seconds are counted as if each UTC
day has exactly 86400 seconds. Tcl responds to leap seconds
by speeding or slowing its clock by a tiny fraction for some
minutes until it is back in sync with UTC; its data model
does not represent minutes that have 59 or 61 seconds.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><i>unit</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>One of the words, <b>seconds</b>, <b>minutes</b>,
<b>hours</b>, <b>days</b>, <b>weeks</b>, <b>months</b>, or
<b>years</b>, or any unique prefix of such a word. Used in
conjunction with <i>count</i> to identify an interval of
time, for example, <i>3 seconds</i> or <i>1 year</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>OPTIONS <br>
&minus;base</b> time</p>

<p style="margin-left:22%;">Specifies that any relative
times present in a <b>clock scan</b> command are to be given
relative to <i>time</i>. <i>time</i> must be expressed as a
count of nominal seconds from the epoch time of 1 January
1970, 00:00 UTC.</p>

<p style="margin-left:11%;"><b>&minus;format</b> format</p>

<p style="margin-left:22%;">Specifies the desired output
format for <b>clock format</b> or the expected input format
for <b>clock scan</b>. The <i>format</i> string consists of
any number of characters other than the per-cent sign
(&ldquo;<b>%</b>&rdquo;) interspersed with any number of
<i>format groups</i>, which are two-character sequences
beginning with the per-cent sign. The permissible format
groups, and their interpretation, are described under
<b>FORMAT GROUPS</b>.</p>

<p style="margin-left:22%; margin-top: 1em">On <b>clock
format</b>, the default format is</p>

<p style="margin-left:32%;">%a %b %d %H:%M:%S %z %Y</p>

<p style="margin-left:22%; margin-top: 1em">On <b>clock
scan</b>, the lack of a <i>&minus;format</i> option
indicates that a &ldquo;free format scan&rdquo; is
requested; see <b>FREE FORM SCAN</b> for a description of
what happens.</p>

<p style="margin-left:11%;"><b>&minus;gmt</b> boolean</p>

<p style="margin-left:22%;">If <i>boolean</i> is true,
specifies that a time specified to <b>clock add</b>,
<b>clock format</b> or <b>clock scan</b> should be processed
in UTC. If <i>boolean</i> is false, the processing defaults
to the local time zone. This usage is obsolete; the correct
current usage is to specify the UTC time zone with
&ldquo;<b>&minus;timezone</b> <i>:UTC</i>&rdquo; or any of
the equivalent ways to specify it.</p>

<p style="margin-left:11%;"><b>&minus;locale</b>
localeName</p>

<p style="margin-left:22%;">Specifies that locale-dependent
scanning and formatting (and date arithmetic for dates
preceding the adoption of the Gregorian calendar) is to be
done in the locale identified by <i>localeName</i>. The
locale name may be any of the locales acceptable to the
<b>msgcat</b> package, or it may be the special name
<i>system</i>, which represents the current locale of the
process, or the null string, which represents Tcl&rsquo;s
default locale.</p>

<p style="margin-left:22%; margin-top: 1em">The effect of
locale on scanning and formatting is discussed in the
descriptions of the individual format groups under <b>FORMAT
GROUPS</b>. The effect of locale on clock arithmetic is
discussed under <b>CLOCK ARITHMETIC</b>.</p>

<p style="margin-left:11%;"><b>&minus;timezone</b>
zoneName</p>

<p style="margin-left:22%;">Specifies that clock
arithmetic, formatting, and scanning are to be done
according to the rules for the time zone specified by
<i>zoneName</i>. The permissible values, and their
interpretation, are discussed under <b>TIME ZONES</b>. On
subcommands that expect a <b>&minus;timezone</b> argument,
the default is to use the <i>current time zone</i>. The
current time zone is determined, in order of preference,
by:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>[1]</p></td>
<td width="6%"></td>
<td width="68%">


<p>the environment variable <b>TCL_TZ</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>[2]</p></td>
<td width="6%"></td>
<td width="68%">


<p>the environment variable <b>TZ</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="4%">


<p>[3]</p></td>
<td width="6%"></td>
<td width="68%">


<p>on Windows systems, the time zone settings from the
Control Panel.</p></td></tr>
</table>

<p style="margin-left:11%;">If none of these is present,
the C <b>localtime</b> and <b>mktime</b> functions are used
to attempt to convert times between local and Greenwich. On
32-bit systems, this approach is likely to have bugs,
particularly for times that lie outside the window
(approximately the years 1902 to 2037) that can be
represented in a 32-bit integer.</p>

<h2>CLOCK ARITHMETIC
<a name="CLOCK ARITHMETIC"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>clock
add</b> command performs clock arithmetic on a value
(expressed as nominal seconds from the epoch time of 1
January 1970, 00:00 UTC) given as its first argument. The
remaining arguments (other than the possible
<b>&minus;timezone</b>, <b>&minus;locale</b> and
<b>&minus;gmt</b> options) are integers and keywords in
alternation, where the keywords are chosen from
<b>seconds</b>, <b>minutes</b>, <b>hours</b>, <b>days</b>,
<b>weeks</b>, <b>months</b>, or <b>years</b>, or any unique
prefix of such a word.</p>

<p style="margin-left:11%; margin-top: 1em">Addition of
seconds, minutes and hours is fairly straightforward; the
given time increment (times sixty for minutes, or 3600 for
hours) is simply added to the <i>timeVal</i> given to the
<b>clock add</b> command. The result is interpreted as a
nominal number of seconds from the Epoch.</p>

<p style="margin-left:11%; margin-top: 1em">Surprising
results may be obtained when crossing a point at which a
leap second is inserted or removed; the <b>clock add</b>
command simply ignores leap seconds and therefore assumes
that times come in sequence, 23:59:58, 23:59:59, 00:00:00.
(This assumption is handled by the fact that Tcl&rsquo;s
model of time reacts to leap seconds by speeding or slowing
the clock by a minuscule amount until Tcl&rsquo;s time is
back in step with the world.</p>

<p style="margin-left:11%; margin-top: 1em">The fact that
adding and subtracting hours is defined in terms of absolute
time means that it will add fixed amounts of time in time
zones that observe summer time (Daylight Saving Time). For
example, the following code sets the value of <b>x</b> to
<b>04:00:00</b> because the clock has changed in the
interval in question.</p>

<p style="margin-left:22%;">set s [<b>clock scan</b>
{2004-10-30 05:00:00} \ <br>
-format {%Y-%m-%d %H:%M:%S} \ <br>
-timezone :America/New_York] <br>
set a [<b>clock add</b> $s 24 hours -timezone
:America/New_York] <br>
set x [<b>clock format</b> $a \ <br>
-format {%H:%M:%S} -timezone :America/New_York]</p>

<p style="margin-left:11%; margin-top: 1em">Adding and
subtracting days and weeks is accomplished by converting the
given time to a calendar day and time of day in the
appropriate time zone and locale. The requisite number of
days (weeks are converted to days by multiplying by seven)
is added to the calendar day, and the date and time are then
converted back to a count of seconds from the epoch
time.</p>

<p style="margin-left:11%; margin-top: 1em">Adding and
subtracting a given number of days across the point that the
time changes at the start or end of summer time (Daylight
Saving Time) results in the <i>same local time</i> on the
day in question. For instance, the following code sets the
value of <b>x</b> to <b>05:00:00</b>.</p>

<p style="margin-left:22%;">set s [<b>clock scan</b>
{2004-10-30 05:00:00} \ <br>
-format {%Y-%m-%d %H:%M:%S} \ <br>
-timezone :America/New_York] <br>
set a [<b>clock add</b> $s 1 day -timezone
:America/New_York] <br>
set x [<b>clock format</b> $a \ <br>
-format {%H:%M:%S} -timezone :America/New_York]</p>

<p style="margin-left:11%; margin-top: 1em">In cases of
ambiguity, where the same local time happens twice on the
same day, the earlier time is used. In cases where the
conversion yields an impossible time (for instance, 02:30
during the Spring Daylight Saving Time change using US
rules), the time is converted as if the clock had not
changed. Thus, the following code will set the value of
<b>x</b> to <b>03:30:00</b>.</p>

<p style="margin-left:22%;">set s [<b>clock scan</b>
{2004-04-03 02:30:00} \ <br>
-format {%Y-%m-%d %H:%M:%S} \ <br>
-timezone :America/New_York] <br>
set a [<b>clock add</b> $s 1 day -timezone
:America/New_York] <br>
set x [<b>clock format</b> $a \ <br>
-format {%H:%M:%S} -timezone :America/New_York]</p>

<p style="margin-left:11%; margin-top: 1em">Adding a given
number of days or weeks works correctly across the
conversion between the Julian and Gregorian calendars; the
omitted days are skipped. The following code sets <b>z</b>
to <b>1752-09-14</b>.</p>

<p style="margin-left:22%;">set x [<b>clock scan</b>
1752-09-02 -format %Y-%m-%d -locale en_US] <br>
set y [<b>clock add</b> $x 1 day -locale en_US] <br>
set z [<b>clock format</b> $y -format %Y-%m-%d -locale
en_US]</p>

<p style="margin-left:11%; margin-top: 1em">In the bizarre
case that adding the given number of days yields a date that
does not exist because it falls within the dropped days of
the Julian-to-Gregorian conversion, the date is converted as
if it was on the Julian calendar.</p>

<p style="margin-left:11%; margin-top: 1em">Adding a number
of months, or a number of years, is similar; it converts the
given time to a calendar date and time of day. It then adds
the requisite number of months or years, and reconverts the
resulting date and time of day to an absolute time.</p>

<p style="margin-left:11%; margin-top: 1em">If the
resulting date is impossible because the month has too few
days (for example, when adding 1 month to 31 January), the
last day of the month is substituted. Thus, adding 1 month
to 31 January will result in 28 February in a common year or
29 February in a leap year.</p>

<p style="margin-left:11%; margin-top: 1em">The rules for
handling anomalies relating to summer time and to the
Gregorian calendar are the same when adding/subtracting
months and years as they are when adding/subtracting days
and weeks.</p>

<p style="margin-left:11%; margin-top: 1em">If multiple
<i>count unit</i> pairs are present on the command, they are
evaluated consecutively, from left to right.</p>

<h2>HIGH RESOLUTION TIMERS
<a name="HIGH RESOLUTION TIMERS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Most of the
subcommands supported by the <b>clock</b> command deal with
times represented as a count of seconds from the epoch time,
and this is the representation that <b>clock seconds</b>
returns. There are three exceptions, which are all intended
for use where higher-resolution times are required. <b>clock
milliseconds</b> returns the count of milliseconds from the
epoch time, and <b>clock microseconds</b> returns the count
of microseconds from the epoch time. In addition, there is a
<b>clock clicks</b> command that returns a
platform-dependent high-resolution timer. Unlike <b>clock
seconds</b> and <b>clock milliseconds</b>, the value of
<b>clock clicks</b> is not guaranteed to be tied to any
fixed epoch; it is simply intended to be the most precise
interval timer available, and is intended only for relative
timing studies such as benchmarks.</p>

<h2>FORMATTING TIMES
<a name="FORMATTING TIMES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>clock
format</b> command produces times for display to a user or
writing to an external medium. The command accepts times
that are expressed in seconds from the epoch time of 1
January 1970, 00:00 UTC, as returned by <b>clock
seconds</b>, <b>clock scan</b>, <b>clock add</b>, <b>file
atime</b> or <b>file mtime</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;format</b> option is present, the following
argument is a string that specifies how the date and time
are to be formatted. The string consists of any number of
characters other than the per-cent sign
(&ldquo;<b>%</b>&rdquo;) interspersed with any number of
<i>format groups</i>, which are two-character sequences
beginning with the per-cent sign. The permissible format
groups, and their interpretation, are described under
<b>FORMAT GROUPS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;timezone</b> option is present, the following
argument is a string that specifies the time zone in which
the date and time are to be formatted. As an alternative to
&ldquo;<b>&minus;timezone</b> <i>:UTC</i>&rdquo;, the
obsolete usage &ldquo;<b>&minus;gmt</b> <i>true</i>&rdquo;
may be used. See <b>TIME ZONES</b> for the permissible
variants for the time zone.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;locale</b> option is present, the following
argument is a string that specifies the locale in which the
time is to be formatted, in the same format that is used for
the <b>msgcat</b> package. Note that the default, if
<b>&minus;locale</b> is not specified, is the root locale
<b>{}</b> rather than the current locale. The current locale
may be obtained by using <b>&minus;locale current</b>. In
addition, some platforms support a <b>system</b> locale that
reflects the user&rsquo;s current choices. For instance, on
Windows, the format that the user has selected from dates
and times in the Control Panel can be obtained by using the
<b>system</b> locale. On platforms that do not define a user
selection of date and time formats separate from
<b>LC_TIME</b>, <b>&minus;locale system</b> is synonymous
with <b>&minus;locale current</b>.</p>

<h2>SCANNING TIMES
<a name="SCANNING TIMES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>clock
scan</b> command accepts times that are formatted as strings
and converts them to counts of seconds from the epoch time
of 1 January 1970, 00:00 UTC. It normally takes a
<b>&minus;format</b> option that is followed by a string
describing the expected format of the input. (See <b>FREE
FORM SCAN</b> for the effect of <b>clock scan</b> without
such an argument.) The string consists of any number of
characters other than the per-cent sign
(&ldquo;<b>%</b>&rdquo;), interspersed with any number of
<i>format groups</i>, which are two-character sequences
beginning with the per-cent sign. The permissible format
groups, and their interpretation, are described under
<b>FORMAT GROUPS</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;timezone</b> option is present, the following
argument is a string that specifies the time zone in which
the date and time are to be interpreted. As an alternative
to <b>&minus;timezone</b> <i>:UTC</i>, the obsolete usage
<b>&minus;gmt</b> <i>true</i> may be used. See <b>TIME
ZONES</b> for the permissible variants for the time
zone.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;locale</b> option is present, the following
argument is a string that specifies the locale in which the
time is to be interpreted, in the same format that is used
for the <b>msgcat</b> package. Note that the default, if
<b>&minus;locale</b> is not specified, is the root locale
<b>{}</b> rather than the current locale. The current locale
may be obtained by using <b>&minus;locale current</b>. In
addition, some platforms support a <b>system</b> locale that
reflects the user&rsquo;s current choices. For instance, on
Windows, the format that the user has selected from dates
and times in the Control Panel can be obtained by using the
<b>system</b> locale. On platforms that do not define a user
selection of date and time formats separate from
<b>LC_TIME</b>, <b>&minus;locale system</b> is synonymous
with <b>&minus;locale current</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If a
<b>&minus;base</b> option is present, the following argument
is a time (expressed in seconds from the epoch time) that is
used as a <i>base time</i> for interpreting relative times.
If no <b>&minus;base</b> option is present, the base time is
the current time.</p>

<p style="margin-left:11%; margin-top: 1em">Scanning of
times in fixed format works by determining three things: the
date, the time of day, and the time zone. These three are
then combined into a point in time, which is returned as the
number of seconds from the epoch.</p>

<p style="margin-left:11%; margin-top: 1em">Before scanning
begins, the format string is preprocessed to replace
<b>%c</b>, <b>%Ec</b>, <b>%x</b>, <b>%Ex</b>, <b>%X</b>.
<b>%Ex</b>, <b>%r</b>, <b>%R</b>, <b>%T</b>, <b>%D</b>,
<b>%EY</b> and <b>%+</b> format groups with counterparts
that are appropriate to the current locale and contain none
of the above groups. For instance, <b>%D</b> will (in the
<b>en_US</b> locale) be replaced with <b>%m/%d/%Y</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The date is
determined according to the fields that are present in the
preprocessed format string. In order of preference:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">[1]</p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">If the string contains a
<b>%s</b> format group, representing seconds from the epoch,
that group is used to determine the date.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[2]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string contains a <b>%J</b> format group,
representing the Julian Day Number, that group is used to
determine the date.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[3]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string contains a complete set of format groups
specifying century, year, month, and day of month; century,
year, and day of year; or ISO8601 fiscal year, week of year,
and day of week; those groups are combined and used to
determine the date. If more than one complete set is
present, the one at the rightmost position in the string is
used.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[4]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string lacks a century but contains a set of
format groups specifying year of century, month and day of
month; year of century and day of year; or two-digit ISO8601
fiscal year, week of year, and day of week; those groups are
combined and used to determine the date. If more than one
complete set is present, the one at the rightmost position
in the string is used. The year is presumed to lie in the
range 1938 to 2037 inclusive.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[5]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string entirely lacks any specification for the
year (or contains the year only on the locale&rsquo;s
alternative calendar) and contains a set of format groups
specifying month and day of month, day of year, or week of
year and day of week, those groups are combined and used to
determine the date. If more than one complete set is
present, the one at the rightmost position in the string is
used. The year is determined by interpreting the base time
in the given time zone.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[6]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string contains none of the above sets, but has a
day of the month or day of the week, the day of the month or
day of the week are used to determine the date by
interpreting the base time in the given time zone and
returning the given day of the current week or month. (The
week runs from Monday to Sunday, ISO8601-fashion.) If both
day of month and day of week are present, the day of the
month takes priority.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[7]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If none of the above rules results in a usable date, the
date of the base time in the given time zone is used.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The time is
also determined according to the fields that are present in
the preprocessed format string. In order of preference:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">[1]</p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">If the string contains a
<b>%s</b> format group, representing seconds from the epoch,
that group determines the time of day.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[2]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string contains either an hour on the 24-hour
clock or an hour on the 12-hour clock plus an AM/PM
indicator, that hour determines the hour of the day. If the
string further contains a group specifying the minute of the
hour, that group combines with the hour. If the string
further contains a group specifying the second of the
minute, that group combines with the hour and minute.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[3]</p></td>
<td width="7%"></td>
<td width="78%">


<p>If the string contains neither a <b>%s</b> format group
nor a group specifying the hour of the day, then midnight
(<b>00:00</b>, the start of the given date) is used. The
time zone is determined by either the <b>&minus;timezone</b>
or <b>&minus;gmt</b> options, or by using the current time
zone.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">If a format
string lacks a <b>%z</b> or <b>%Z</b> format group, it is
possible for the time to be ambiguous because it appears
twice in the same day, once without and once with Daylight
Saving Time. If this situation occurs, the first occurrence
of the time is chosen. (For this reason, it is wise to have
the input string contain the time zone when converting local
times. This caveat does not apply to UTC times.)</p>

<h2>FORMAT GROUPS
<a name="FORMAT GROUPS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
format groups are recognized by the <b>clock scan</b> and
<b>clock format</b> commands.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em"><b>%a</b></p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">On output, receives an
abbreviation (<i>e.g.,</i> <b>Mon</b>) for the day of the
week in the given locale. On input, matches the name of the
day of the week in the given locale (in either abbreviated
or full form, or any unique prefix of either form).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%A</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, receives the full name (<i>e.g.,</i>
<b>Monday</b>) of the day of the week in the given locale.
On input, matches the name of the day of the week in the
given locale (in either abbreviated or full form, or any
unique prefix of either form).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%b</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, receives an abbreviation (<i>e.g.,</i>
<b>Jan</b>) for the name of the month in the given locale.
On input, matches the name of the month in the given locale
(in either abbreviated or full form, or any unique prefix of
either form).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%B</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, receives the full name (<i>e.g.,</i>
<b>January</b>) of the month in the given locale. On input,
matches the name of the month in the given locale (in either
abbreviated or full form, or any unique prefix of either
form).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%c</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, receives a localized representation of date
and time of day; the localized representation is expected to
use the Gregorian calendar. On input, matches whatever
<b>%c</b> produces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%C</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, receives the number of the century in
Indo-Arabic numerals. On input, matches one or two digits,
possibly with leading whitespace, that are expected to be
the number of the century.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%d</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the number of the day of the month,
as two decimal digits. On input, matches one or two digits,
possibly with leading whitespace, that are expected to be
the number of the day of the month.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%D</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>This format group is synonymous with <b>%m/%d/%Y</b>. It
should be used only in exchanging data within the
<b>en_US</b> locale, since other locales typically do not
use this order for the fields of the date.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%e</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the number of the day of the month,
as one or two decimal digits (with a leading blank for
one-digit dates). On input, matches one or two digits,
possibly with leading whitespace, that are expected to be
the number of the day of the month.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%Ec</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a locale-dependent representation of
the date and time of day in the locale&rsquo;s alternative
calendar. On input, matches whatever <b>%Ec</b> produces.
The locale&rsquo;s alternative calendar need not be the
Gregorian calendar.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%EC</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a locale-dependent name of an era in
the locale&rsquo;s alternative calendar. On input, matches
the name of the era or any unique prefix.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%EE</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the string <b>B.C.E.</b> or
<b>C.E.</b>, or a string of the same meaning in the locale,
to indicate whether <b>%Y</b> refers to years before or
after Year 1 of the Common Era. On input, accepts the string
<b>B.C.E.</b>, <b>B.C.</b>, <b>C.E.</b>, <b>A.D.</b>, or the
abbreviation appropriate to the current locale, and uses it
to fix whether <b>%Y</b> refers to years before or after
Year 1 of the Common Era.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%Ex</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a locale-dependent representation of
the date in the locale&rsquo;s alternative calendar. On
input, matches whatever <b>%Ex</b> produces. The
locale&rsquo;s alternative calendar need not be the
Gregorian calendar.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%EX</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a locale-dependent representation of
the time of day in the locale&rsquo;s alternative numerals.
On input, matches whatever <b>%EX</b> produces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%Ey</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a locale-dependent number of the
year of the era in the locale&rsquo;s alternative calendar
and numerals. On input, matches such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%EY</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a representation of the year in the
locale&rsquo;s alternative calendar and numerals. On input,
matches what <b>%EY</b> produces. Often synonymous with
<b>%EC%Ey</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%g</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a two-digit year number suitable for
use with the week-based ISO8601 calendar; that is, the year
number corresponds to the week number produced by <b>%V</b>.
On input, accepts such a two-digit year number, possibly
with leading whitespace.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%G</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a four-digit year number suitable
for use with the week-based ISO8601 calendar; that is, the
year number corresponds to the week number produced by
<b>%V</b>. On input, accepts such a four-digit year number,
possibly with leading whitespace.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%h</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>This format group is synonymous with <b>%b</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%H</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a two-digit number giving the hour
of the day (00-23) on a 24-hour clock. On input, accepts
such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%I</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a two-digit number giving the hour
of the day (12-11) on a 12-hour clock. On input, accepts
such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%j</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a three-digit number giving the day
of the year (001-366). On input, accepts such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%J</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a string of digits giving the Julian
Day Number. On input, accepts a string of digits and
interprets it as a Julian Day Number. The Julian Day Number
is a count of the number of calendar days that have elapsed
since 1 January, 4713 BCE of the proleptic Julian calendar.
The epoch time of 1 January 1970 corresponds to Julian Day
Number 2440588.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%k</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a one- or two-digit number giving
the hour of the day (0-23) on a 24-hour clock. On input,
accepts such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%l</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces a one- or two-digit number giving
the hour of the day (12-11) on a 12-hour clock. On input,
accepts such a number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%m</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the number of the month (01-12) with
exactly two digits. On input, accepts two digits and
interprets them as the number of the month.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%M</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the number of the minute of the hour
(00-59) with exactly two digits. On input, accepts two
digits and interprets them as the number of the minute of
the hour.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>%N</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>On output, produces the number of the month (1-12) with
one or two digits, and a leading blank for one-digit dates.
On input, accepts one or two digits, possibly with leading
whitespace, and interprets them as the number of the
month.</p> </td></tr>
</table>

<p style="margin-left:11%;"><b>%Od</b>, <b>%Oe</b>,
<b>%OH</b>, <b>%OI</b>, <b>%Ok</b>, <b>%Ol</b>, <b>%Om</b>,
<b>%OM</b>, <b>%OS</b>, <b>%Ou</b>, <b>%Ow</b>,
<b>%Oy</b></p>

<p style="margin-left:22%;">All of these format groups are
synonymous with their counterparts without the
&ldquo;<b>O</b>&rdquo;, except that the string is produced
and parsed in the locale-dependent alternative numerals.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%p</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces an indicator for the part of the
day, <b>AM</b> or <b>PM</b>, appropriate to the given
locale. If the script of the given locale supports multiple
letterforms, lowercase is preferred. On input, matches the
representation <b>AM</b> or <b>PM</b> in the given locale,
in either case.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%P</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces an indicator for the part of the
day, <b>am</b> or <b>pm</b>, appropriate to the given
locale. If the script of the given locale supports multiple
letterforms, uppercase is preferred. On input, matches the
representation <b>AM</b> or <b>PM</b> in the given locale,
in either case.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%Q</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>This format group is reserved for internal use within
the Tcl library.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%r</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a locale-dependent time of day
representation on a 12-hour clock. On input, accepts
whatever <b>%r</b> produces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%R</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a locale-dependent time of day
representation on a 24-hour clock. On input, accepts
whatever <b>%R</b> produces.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%s</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, simply formats the <i>timeVal</i> argument as
a decimal integer and inserts it into the output string. On
input, accepts a decimal integer and uses is as the time
value without any further processing. Since <b>%s</b>
uniquely determines a point in time, it overrides all other
input formats.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%S</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a two-digit number of the second of
the minute (00-59). On input, accepts two digits and uses
them as the second of the minute.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%t</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a TAB character. On input, matches a
TAB character.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%T</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Synonymous with <b>%H:%M:%S</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%u</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the number of the day of the week
(<b>1</b>&rarr;Monday, <b>7</b>&rarr;Sunday). On input,
accepts a single digit and interprets it as the day of the
week. Sunday may be either <b>0</b> or <b>7</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%U</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the ordinal number of the week of
the year (00-53). The first Sunday of the year is the first
day of week 01. On input accepts two digits which are
otherwise ignored. This format group is never used in
determining an input date. This interpretation of the week
of the year was once common in US banking but is now largely
obsolete. See <b>%V</b> for the ISO8601 week number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%V</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the number of the ISO8601 week as a
two digit number (01-53). Week 01 is the week containing
January 4; or the first week of the year containing at least
4 days; or the week containing the first Thursday of the
year (the three statements are equivalent). Each week begins
on a Monday. On input, accepts the ISO8601 week number.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%w</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the ordinal number of the day of the
week (Sunday==0; Saturday==6). On input, accepts a single
digit and interprets it as the day of the week; Sunday may
be represented as either 0 or 7. Note that <b>%w</b> is not
the ISO8601 weekday number, which is produced and accepted
by <b>%u</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%W</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a week number (00-53) within the
year; week 01 begins on the first Monday of the year. On
input, accepts two digits, which are otherwise ignored. This
format group is never used in determining an input date. It
is not the ISO8601 week number; that week is produced and
accepted by <b>%V</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%x</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the date in a locale-dependent
representation. On input, accepts whatever <b>%x</b>
produces and is used to determine calendar date.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%X</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the time of day in a
locale-dependent representation. On input, accepts whatever
<b>%X</b> produces and is used to determine time of day.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the two-digit year of the century.
On input, accepts two digits, and is used to determine
calendar date. The date is presumed to lie between 1938 and
2037 inclusive. Note that <b>%y</b> does not yield a year
appropriate for use with the ISO8601 week number <b>%V</b>;
programs should use <b>%g</b> for that purpose.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%Y</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the four-digit calendar year. On
input, accepts four digits and may be used to determine
calendar date. Note that <b>%Y</b> does not yield a year
appropriate for use with the ISO8601 week number <b>%V</b>;
programs should use <b>%G</b> for that purpose.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%z</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the current time zone, expressed in
hours and minutes east (+hhmm) or west (&minus;hhmm) of
Greenwich. On input, accepts a time zone specifier (see
<b>TIME ZONES</b> below) that will be used to determine the
time zone.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%Z</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces the current time zone&rsquo;s name,
possibly translated to the given locale. On input, accepts a
time zone specifier (see <b>TIME ZONES</b> below) that will
be used to determine the time zone. This option should, in
general, be used on input only when parsing RFC822 dates.
Other uses are fraught with ambiguity; for instance, the
string <b>BST</b> may represent British Summer Time or
Brazilian Standard Time. It is recommended that date/time
strings for use by computers use numeric time zones
instead.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%%</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>On output, produces a literal &ldquo;<b>%</b>&rdquo;
character. On input, matches a literal
&ldquo;<b>%</b>&rdquo; character.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>%+</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Synonymous with &ldquo;<b>%a %b %e %H:%M:%S %Z
%Y</b>&rdquo;.</p> </td></tr>
</table>

<h2>TIME ZONES
<a name="TIME ZONES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When the
<b>clock</b> command is processing a local time, it has
several possible sources for the time zone to use. In order
of preference, they are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p style="margin-top: 1em">[1]</p></td>
<td width="7%"></td>
<td width="78%">


<p style="margin-top: 1em">A time zone specified inside a
string being parsed and matched by a <b>%z</b> or <b>%Z</b>
format group.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[2]</p></td>
<td width="7%"></td>
<td width="78%">


<p>A time zone specified with the <b>&minus;timezone</b>
option to the <b>clock</b> command (or, equivalently, by
<b>&minus;gmt 1</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[3]</p></td>
<td width="7%"></td>
<td width="78%">


<p>A time zone specified in an environment variable
<b>TCL_TZ</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[4]</p></td>
<td width="7%"></td>
<td width="78%">


<p>A time zone specified in an environment variable
<b>TZ</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[5]</p></td>
<td width="7%"></td>
<td width="78%">


<p>The local time zone from the Control Panel on Windows
systems.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p>[6]</p></td>
<td width="7%"></td>
<td width="78%">


<p>The C library&rsquo;s idea of the local time zone, as
defined by the <b>mktime</b> and <b>localtime</b>
functions.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In case [1]
<i>only,</i> the string is tested to see if it is one of the
strings:</p>

<p style="margin-left:22%;">gmt ut utc bst wet wat at <br>
nft nst ndt ast adt est edt <br>
cst cdt mst mdt pst pdt yst <br>
ydt hst hdt cat ahst nt idlw <br>
cet cest met mewt mest swt sst <br>
eet eest bt it zp4 zp5 ist <br>
zp6 wast wadt jt cct jst cast <br>
cadt east eadt gst nzt nzst nzdt <br>
idle</p>

<p style="margin-left:11%;">If it is a string in the above
list, it designates a known time zone, and is interpreted as
such.</p>

<p style="margin-left:11%; margin-top: 1em">For time zones
in case [1] that do not match any of the above strings, and
always for cases [2]-[6], the following rules apply.</p>

<p style="margin-left:11%; margin-top: 1em">If the time
zone begins with a colon, it is one of a standardized list
of names like <b>:America/New_York</b> that give the rules
for various locales. A complete list of the location names
is too lengthy to be listed here. On most Tcl installations,
the definitions of the locations are to be found in named
files in the directory
&ldquo;<i>/no_backup/tools/lib/tcl8.5/clock/tzdata</i>&rdquo;.
On some Unix systems, these files are omitted, and the
definitions are instead obtained from system files in
&ldquo;<i>/usr/share/zoneinfo</i>&rdquo;,
&ldquo;<i>/usr/share/lib/zoneinfo</i>&rdquo; or
&ldquo;<i>/usr/local/etc/zoneinfo</i>&rdquo;. As a special
case, the name <b>:localtime</b> refers to the local time
zone as defined by the C library.</p>

<p style="margin-left:11%; margin-top: 1em">A time zone
string consisting of a plus or minus sign followed by four
or six decimal digits is interpreted as an offset in hours,
minutes, and seconds (if six digits are present) from UTC.
The plus sign denotes a sign east of Greenwich; the minus
sign one west of Greenwich.</p>

<p style="margin-left:11%; margin-top: 1em">A time zone
string conforming to the Posix specification of the
<b>TZ</b> environment variable will be recognized. The
specification may be found at
<i>http://www.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Any other time
zone string is processed by prefixing a colon and attempting
to use it as a location name, as above.</p>

<h2>LOCALIZATION
<a name="LOCALIZATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Developers
wishing to localize the date and time formatting and parsing
are referred to <i>http://tip.tcl.tk/173</i> for a
specification.</p>

<h2>FREE FORM SCAN
<a name="FREE FORM SCAN"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If the <b>clock
scan</b> command is invoked without a <b>&minus;format</b>
option, then it requests a <i>free-form scan. This form of
scan is deprecated.</i> The reason for the deprecation is
that there are too many ambiguities. (Does the string
&ldquo;2000&rdquo; represent a year, a time of day, or a
quantity?) No set of rules for interpreting free-form dates
and times has been found to give unsurprising results in all
cases.</p>

<p style="margin-left:11%; margin-top: 1em">If free-form
scan is used, only the <b>&minus;base</b> and
<b>&minus;gmt</b> options are accepted. The
<b>&minus;timezone</b> and <b>&minus;locale</b> options will
result in an error if <b>&minus;format</b> is not
supplied.</p>

<p style="margin-left:11%; margin-top: 1em">For the benefit
of users who need to understand legacy code that uses
free-form scan, the documentation for how free-form scan
interprets a string is included here:</p>

<p style="margin-left:11%; margin-top: 1em">If only a time
is specified, the current date is assumed. If the
<i>inputString</i> does not contain a time zone mnemonic,
the local time zone is assumed, unless the <b>&minus;gmt</b>
argument is true, in which case the clock value is
calculated assuming that the specified time is relative to
Greenwich Mean Time. <b>&minus;gmt</b>, if specified,
affects only the computed time value; it does not impact the
interpretation of <b>&minus;base</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the
<b>&minus;base</b> flag is specified, the next argument
should contain an integer clock value. Only the date in this
value is used, not the time. This is useful for determining
the time on a specific day or doing other date-relative
conversions.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>inputString</i> argument consists of zero or more
specifications of the following form:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p style="margin-top: 1em"><i>time</i></p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">A time of day, which is of the
form: <b>hh?:mm?:ss?? ?meridian? ?zone?</b> or <b>hhmm
?meridian? ?zone?</b> If no meridian is specified, <b>hh</b>
is interpreted on a 24-hour clock.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><i>date</i></p></td>
<td width="5%"></td>
<td width="78%">


<p>A specific month and day with optional year. The
acceptable formats are
&ldquo;<b>mm/dd</b>?<b>/yy</b>?&rdquo;, &ldquo;<b>monthname
dd</b>?<b>, yy</b>?&rdquo;, &ldquo;<b>day, dd monthname</b>
?<b>yy</b>?&rdquo;, &ldquo;<b>dd monthname yy</b>&rdquo;,
&ldquo;?<b>CC</b>?<b>yymmdd</b>&rdquo;, and
&ldquo;<b>dd-monthname-</b>?<b>CC</b>?<b>yy</b>&rdquo;. The
default year is the current year. If the year is less than
100, we treat the years 00-68 as 2000-2068 and the years
69-99 as 1969-1999. Not all platforms can represent the
years 38-70, so an error may result if these years are
used.</p> </td></tr>
</table>

<p style="margin-left:11%;"><i>ISO 8601
point-in-time</i></p>

<p style="margin-left:22%;">An ISO 8601 point-in-time
specification, such as
&ldquo;<i>CCyymmdd</i><b>T</b><i>hhmmss</i>,&rdquo; where
<b>T</b> is the literal &ldquo;T&rdquo;, &ldquo;<i>CCyymmdd
hhmmss</i>&rdquo;, or
&ldquo;<i>CCyymmdd</i><b>T</b><i>hh:mm:ss</i>&rdquo;. Note
that only these three formats are accepted. The command does
<i>not</i> accept the full range of point-in-time
specifications specified in ISO8601. Other formats can be
recognized by giving an explicit <i>&minus;format</i> option
to the <b>clock scan</b> command.</p>

<p style="margin-left:11%;"><i>relative time</i></p>

<p style="margin-left:22%;">A specification relative to the
current time. The format is <b>number unit</b>. Acceptable
units are <b>year</b>, <b>fortnight</b>, <b>month</b>,
<b>week</b>, <b>day</b>, <b>hour</b>, <b>minute</b> (or
<b>min</b>), and <b>second</b> (or <b>sec</b>). The unit can
be specified as a singular or plural, as in <b>3 weeks</b>.
These modifiers may also be specified: <b>tomorrow</b>,
<b>yesterday</b>, <b>today</b>, <b>now</b>, <b>last</b>,
<b>this</b>, <b>next</b>, <b>ago</b>.</p>

<p style="margin-left:11%; margin-top: 1em">The actual date
is calculated according to the following steps.</p>

<p style="margin-left:11%; margin-top: 1em">First, any
absolute date and/or time is processed and converted. Using
that time as the base, day-of-week specifications are added.
Next, relative specifications are used. If a date or day is
specified, and no absolute or relative time is given,
midnight is used. Finally, a correction is applied so that
the correct hour of the day is produced after allowing for
daylight savings time differences and the correct date is
given when going from the end of a long month to a short
month.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">msgcat(n)</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">clock, date,
time</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (c)
2004 Kevin B. Kenny &lt;kennykb@acm.org&gt;. All rights
reserved.</p>
<hr>
</body>
</html>
