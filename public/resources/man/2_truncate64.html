<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:02:19 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>TRUNCATE</title>

</head>
<body>

<h1 align="center">TRUNCATE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#CONFORMING TO">CONFORMING TO</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COLOPHON">COLOPHON</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">truncate,
ftruncate &minus; truncate a file to a specified length</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;unistd.h&gt; <br>
#include &lt;sys/types.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
truncate(const char *</b><i>path</i><b>, off_t</b>
<i>length</i><b>); <br>
int ftruncate(int</b> <i>fd</i><b>, off_t</b>
<i>length</i><b>);</b></p>

<p style="margin-left:5%; margin-top: 1em">Feature Test
Macro Requirements for glibc (see
<b>feature_test_macros</b>(7)):</p>


<p style="margin-left:11%; margin-top: 1em"><b>truncate</b>():</p>

<p style="margin-left:17%;">_BSD_SOURCE ||
_XOPEN_SOURCE&nbsp;&gt;=&nbsp;500 ||
_XOPEN_SOURCE&nbsp;&amp;&amp;&nbsp;_XOPEN_SOURCE_EXTENDED
<br>
|| /* Since glibc 2.12: */
_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200809L</p>


<p style="margin-left:11%; margin-top: 1em"><b>ftruncate</b>():</p>

<p style="margin-left:17%;">_BSD_SOURCE ||
_XOPEN_SOURCE&nbsp;&gt;=&nbsp;500 ||
_XOPEN_SOURCE&nbsp;&amp;&amp;&nbsp;_XOPEN_SOURCE_EXTENDED
<br>
|| /* Since glibc 2.3.5: */
_POSIX_C_SOURCE&nbsp;&gt;=&nbsp;200112L</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>truncate</b>() and <b>ftruncate</b>() functions cause the
regular file named by <i>path</i> or referenced by <i>fd</i>
to be truncated to a size of precisely <i>length</i>
bytes.</p>

<p style="margin-left:11%; margin-top: 1em">If the file
previously was larger than this size, the extra data is
lost. If the file previously was shorter, it is extended,
and the extended part reads as null bytes ('\0').</p>

<p style="margin-left:11%; margin-top: 1em">The file offset
is not changed.</p>

<p style="margin-left:11%; margin-top: 1em">If the size
changed, then the st_ctime and st_mtime fields
(respectively, time of last status change and time of last
modification; see <b>stat</b>(2)) for the file are updated,
and the set-user-ID and set-group-ID permission bits may be
cleared.</p>

<p style="margin-left:11%; margin-top: 1em">With
<b>ftruncate</b>(), the file must be open for writing; with
<b>truncate</b>(), the file must be writable.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On success,
zero is returned. On error, &minus;1 is returned, and
<i>errno</i> is set appropriately.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For
<b>truncate</b>():</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EACCES</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Search permission is denied for a component of the path
prefix, or the named file is not writable by the user. (See
also <b>path_resolution</b>(7).)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EFAULT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p><i>Path</i> points outside the process&rsquo;s allocated
address space.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EFBIG</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The argument <i>length</i> is larger than the maximum
file size. (XSI)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EINTR</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>While blocked waiting to complete, the call was
interrupted by a signal handler; see <b>fcntl</b>(2) and
<b>signal</b>(7).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EINVAL</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The argument <i>length</i> is negative or larger than
the maximum file size.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EIO</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>An I/O error occurred updating the inode.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EISDIR</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>The named file is a directory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Too many symbolic links were encountered in translating
the pathname.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">A component of a pathname
exceeded 255 characters, or an entire pathname exceeded 1023
characters.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENOENT</b></p></td>
<td width="2%"></td>
<td width="46%">


<p>The named file does not exist.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>ENOTDIR</b></p>

<p style="margin-left:22%;">A component of the path prefix
is not a directory.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>EPERM</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>The underlying file system does not support extending a
file beyond its current size.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>EROFS</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>The named file resides on a read-only file system.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ETXTBSY</b></p>

<p style="margin-left:22%;">The file is a pure procedure
(shared text) file that is being executed.</p>

<p style="margin-left:11%; margin-top: 1em">For
<b>ftruncate</b>() the same errors apply, but instead of
things that can be wrong with <i>path</i>, we now have
things that can be wrong with the file descriptor,
<i>fd</i>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>EBADF</b></p></td>
<td width="4%"></td>
<td width="44%">


<p><i>fd</i> is not a valid descriptor.</p></td>
<td width="34%">
</td></tr>
</table>

<p style="margin-left:11%;"><b>EBADF</b> or
<b>EINVAL</b></p>

<p style="margin-left:22%;"><i>fd</i> is not open for
writing.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EINVAL</b></p></td>
<td width="2%"></td>
<td width="56%">


<p><i>fd</i> does not reference a regular file.</p></td>
<td width="22%">
</td></tr>
</table>

<h2>CONFORMING TO
<a name="CONFORMING TO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">4.4BSD, SVr4,
POSIX.1-2001 (these calls first appeared in 4.2BSD).</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The details in
DESCRIPTION are for XSI-compliant systems. For
non-XSI-compliant systems, the POSIX standard allows two
behaviors for <b>ftruncate</b>() when <i>length</i> exceeds
the file length (note that <b>truncate</b>() is not
specified at all in such an environment): either returning
an error, or extending the file. Like most UNIX
implementations, Linux follows the XSI requirement when
dealing with native file systems. However, some nonnative
file systems do not permit <b>truncate</b>() and
<b>ftruncate</b>() to be used to extend a file beyond its
current length: a notable example on Linux is VFAT.</p>

<p style="margin-left:11%; margin-top: 1em">The original
Linux <b>truncate</b>() and <b>ftruncate</b>() system calls
were not designed to handle large file offsets.
Consequently, Linux 2.4 added <b>truncate64</b>() and
<b>ftruncate64</b>() system calls that handle large files.
However, these details can be ignored by applications using
glibc, whose wrapper functions transparently employ the more
recent system calls where they are available.</p>

<p style="margin-left:11%; margin-top: 1em">On some 32-bit
architectures, the calling signature for these system calls
differ, for the reasons described in <b>syscall</b>(2).</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">A header file
bug in glibc 2.12 meant that the minimum value of
<b>_POSIX_C_SOURCE</b> required to expose the declaration of
<b>ftruncate</b>() was 200809L instead of 200112L. This has
been fixed in later glibc versions.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>open</b>(2),
<b>stat</b>(2), <b>path_resolution</b>(7)</p>

<h2>COLOPHON
<a name="COLOPHON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This page is
part of release 3.53 of the Linux <i>man-pages</i> project.
A description of the project, and information about
reporting bugs, can be found at
http://www.kernel.org/doc/man&minus;pages/.</p>
<hr>
</body>
</html>
