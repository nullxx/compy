<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:59:58 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>rsync</title>

</head>
<body>

<h1 align="center">rsync</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#GENERAL">GENERAL</a><br>
<a href="#SETUP">SETUP</a><br>
<a href="#USAGE">USAGE</a><br>
<a href="#ADVANCED USAGE">ADVANCED USAGE</a><br>
<a href="#CONNECTING TO AN RSYNC DAEMON">CONNECTING TO AN RSYNC DAEMON</a><br>
<a href="#USING RSYNC&minus;DAEMON FEATURES VIA A REMOTE&minus;SHELL CONNECTION">USING RSYNC&minus;DAEMON FEATURES VIA A REMOTE&minus;SHELL CONNECTION</a><br>
<a href="#STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS">STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS</a><br>
<a href="#SORTED TRANSFER ORDER">SORTED TRANSFER ORDER</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#OPTIONS SUMMARY">OPTIONS SUMMARY</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DAEMON OPTIONS">DAEMON OPTIONS</a><br>
<a href="#FILTER RULES">FILTER RULES</a><br>
<a href="#INCLUDE/EXCLUDE PATTERN RULES">INCLUDE/EXCLUDE PATTERN RULES</a><br>
<a href="#MERGE&minus;FILE FILTER RULES">MERGE&minus;FILE FILTER RULES</a><br>
<a href="#LIST&minus;CLEARING FILTER RULE">LIST&minus;CLEARING FILTER RULE</a><br>
<a href="#ANCHORING INCLUDE/EXCLUDE PATTERNS">ANCHORING INCLUDE/EXCLUDE PATTERNS</a><br>
<a href="#PER&minus;DIRECTORY RULES AND DELETE">PER&minus;DIRECTORY RULES AND DELETE</a><br>
<a href="#BATCH MODE">BATCH MODE</a><br>
<a href="#SYMBOLIC LINKS">SYMBOLIC LINKS</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#EXIT VALUES">EXIT VALUES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#VERSION">VERSION</a><br>
<a href="#INTERNAL OPTIONS">INTERNAL OPTIONS</a><br>
<a href="#CREDITS">CREDITS</a><br>
<a href="#THANKS">THANKS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync &minus; a
fast, versatile, remote (and local) file&minus;copying
tool</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Local: rsync
[OPTION...] SRC... [DEST]</p>

<p style="margin-left:11%; margin-top: 1em">Access via
remote shell: <br>
Pull: rsync [OPTION...] [USER@]HOST:SRC... [DEST] <br>
Push: rsync [OPTION...] SRC... [USER@]HOST:DEST</p>

<p style="margin-left:11%; margin-top: 1em">Access via
rsync daemon: <br>
Pull: rsync [OPTION...] [USER@]HOST::SRC... [DEST] <br>
rsync [OPTION...] rsync://[USER@]HOST[:PORT]/SRC... [DEST]
<br>
Push: rsync [OPTION...] SRC... [USER@]HOST::DEST <br>
rsync [OPTION...] SRC... rsync://[USER@]HOST[:PORT]/DEST</p>

<p style="margin-left:11%; margin-top: 1em">Usages with
just one SRC arg and no DEST arg will list the source files
instead of copying.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync is a fast
and extraordinarily versatile file copying tool. It can copy
locally, to/from another host over any remote shell, or
to/from a remote rsync daemon. It offers a large number of
options that control every aspect of its behavior and permit
very flexible specification of the set of files to be
copied. It is famous for its delta&minus;transfer algorithm,
which reduces the amount of data sent over the network by
sending only the differences between the source files and
the existing files in the destination. Rsync is widely used
for backups and mirroring and as an improved copy command
for everyday use.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync finds
files that need to be transferred using a &quot;quick
check&quot; algorithm (by default) that looks for files that
have changed in size or in last&minus;modified time. Any
changes in the other preserved attributes (as requested by
options) are made on the destination file directly when the
quick check indicates that the file&rsquo;s data does not
need to be updated.</p>

<p style="margin-left:11%; margin-top: 1em">Some of the
additional features of rsync are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>support for copying links, devices, owners, groups, and
permissions</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>exclude and exclude&minus;from options similar to GNU
tar</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a CVS exclude mode for ignoring the same files that CVS
would ignore</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>can use any transparent remote shell, including ssh or
rsh</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>does not require super&minus;user privileges</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>pipelining of file transfers to minimize latency
costs</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>support for anonymous or authenticated rsync daemons
(ideal for mirroring)</p></td></tr>
</table>

<h2>GENERAL
<a name="GENERAL"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync copies
files either to or from a remote host, or locally on the
current host (it does not support copying files between two
remote hosts).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
different ways for rsync to contact a remote system: using a
remote&minus;shell program as the transport (such as ssh or
rsh) or contacting an rsync daemon directly via TCP. The
remote&minus;shell transport is used whenever the source or
destination path contains a single colon (:) separator after
a host specification. Contacting an rsync daemon directly
happens when the source or destination path contains a
double colon (::) separator after a host specification, OR
when an rsync:// URL is specified (see also the &quot;USING
RSYNC&minus;DAEMON FEATURES VIA A REMOTE&minus;SHELL
CONNECTION&quot; section for an exception to this latter
rule).</p>

<p style="margin-left:11%; margin-top: 1em">As a special
case, if a single source arg is specified without a
destination, the files are listed in an output format
similar to &quot;ls &minus;l&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">As expected, if
neither the source or destination path specify a remote
host, the copy occurs locally (see also the
<b>&minus;&minus;list&minus;only</b> option).</p>

<p style="margin-left:11%; margin-top: 1em">Rsync refers to
the local side as the &quot;client&quot; and the remote side
as the &quot;server&quot;. Don&rsquo;t confuse
&quot;server&quot; with an rsync daemon &minus;&minus; a
daemon is always a server, but a server can be either a
daemon or a remote&minus;shell spawned process.</p>

<h2>SETUP
<a name="SETUP"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">See the file
README for installation instructions.</p>

<p style="margin-left:11%; margin-top: 1em">Once installed,
you can use rsync to any machine that you can access via a
remote shell (as well as some that you can access using the
rsync daemon&minus;mode protocol). For remote transfers, a
modern rsync uses ssh for its communications, but it may
have been configured to use a different remote shell by
default, such as rsh or remsh.</p>

<p style="margin-left:11%; margin-top: 1em">You can also
specify any remote shell you like, either by using the
<b>&minus;e</b> command line option, or by setting the
RSYNC_RSH environment variable.</p>

<p style="margin-left:11%; margin-top: 1em">Note that rsync
must be installed on both the source and destination
machines.</p>

<h2>USAGE
<a name="USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You use rsync
in the same way you use rcp. You must specify a source and a
destination, one of which may be remote.</p>

<p style="margin-left:11%; margin-top: 1em">Perhaps the
best way to explain the syntax is with some examples:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;t *.c foo:src/</tt></p>

<p style="margin-left:11%; margin-top: 1em">This would
transfer all files matching the pattern *.c from the current
directory to the directory src on the machine foo. If any of
the files already exist on the remote system then the rsync
remote&minus;update protocol is used to update the file by
sending only the differences. See the tech report for
details.</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avz foo:src/bar /data/tmp</tt></p>

<p style="margin-left:11%; margin-top: 1em">This would
recursively transfer all files from the directory src/bar on
the machine foo into the /data/tmp/bar directory on the
local machine. The files are transferred in
&quot;archive&quot; mode, which ensures that symbolic links,
devices, attributes, permissions, ownerships, etc. are
preserved in the transfer. Additionally, compression will be
used to reduce the size of data portions of the
transfer.</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avz foo:src/bar/ /data/tmp</tt></p>

<p style="margin-left:11%; margin-top: 1em">A trailing
slash on the source changes this behavior to avoid creating
an additional directory level at the destination. You can
think of a trailing / on a source as meaning &quot;copy the
contents of this directory&quot; as opposed to &quot;copy
the directory by name&quot;, but in both cases the
attributes of the containing directory are transferred to
the containing directory on the destination. In other words,
each of the following commands copies the files in the same
way, including their setting of the attributes of
/dest/foo:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av /src/foo /dest <br>
rsync &minus;av /src/foo/ /dest/foo</tt></p>

<p style="margin-left:11%; margin-top: 1em">Note also that
host and module references don&rsquo;t require a trailing
slash to copy the contents of the default directory. For
example, both of these copy the remote directory&rsquo;s
contents into &quot;/dest&quot;:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av host: /dest <br>
rsync &minus;av host::module /dest</tt></p>

<p style="margin-left:11%; margin-top: 1em">You can also
use rsync in local&minus;only mode, where both the source
and destination don&rsquo;t have a &rsquo;:&rsquo; in the
name. In this case it behaves like an improved copy
command.</p>

<p style="margin-left:11%; margin-top: 1em">Finally, you
can list all the (listable) modules available from a
particular rsync daemon by leaving off the module name:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
somehost.mydomain.com::</tt></p>

<p style="margin-left:11%; margin-top: 1em">See the
following section for more details.</p>

<h2>ADVANCED USAGE
<a name="ADVANCED USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The syntax for
requesting multiple files from a remote host is done by
specifying additional remote&minus;host args in the same
style as the first, or with the hostname omitted. For
instance, all these work:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av host:file1 :file2 host:file{3,4} /dest/ <br>
rsync &minus;av host::modname/file{1,2} host::modname/file3
/dest/ <br>
rsync &minus;av host::modname/file1
::modname/file{3,4}</tt></p>

<p style="margin-left:11%; margin-top: 1em">Older versions
of rsync required using quoted spaces in the SRC, like these
examples:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av host:&rsquo;dir1/file1 dir2/file2&rsquo; /dest
<br>
rsync host::&rsquo;modname/dir1/file1
modname/dir2/file2&rsquo; /dest</tt></p>

<p style="margin-left:11%; margin-top: 1em">This
word&minus;splitting still works (by default) in the latest
rsync, but is not as easy to use as the first method.</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
transfer a filename that contains whitespace, you can either
specify the <b>&minus;&minus;protect&minus;args</b>
(<b>&minus;s</b>) option, or you&rsquo;ll need to escape the
whitespace in a way that the remote shell will understand.
For instance:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av host:&rsquo;file\ name\ with\ spaces&rsquo;
/dest</tt></p>

<h2>CONNECTING TO AN RSYNC DAEMON
<a name="CONNECTING TO AN RSYNC DAEMON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is also
possible to use rsync without a remote shell as the
transport. In this case you will directly connect to a
remote rsync daemon, typically using TCP port 873. (This
obviously requires the daemon to be running on the remote
system, so refer to the STARTING AN RSYNC DAEMON TO ACCEPT
CONNECTIONS section below for information on that.)</p>

<p style="margin-left:11%; margin-top: 1em">Using rsync in
this way is the same as using it with a remote shell except
that:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">you either use a double colon ::
instead of a single colon to separate the hostname from the
path, or you use an rsync:// URL.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>the first word of the &quot;path&quot; is actually a
module name.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>the remote daemon may print a message of the day when
you connect.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if you specify no path name on the remote daemon then
the list of accessible paths on the daemon will be
shown.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if you specify no local destination then a listing of
the specified files on the remote daemon is provided.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>you must not specify the <b>&minus;&minus;rsh</b>
(<b>&minus;e</b>) option.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">An example that
copies all the files in a remote module named
&quot;src&quot;:</p>

<p style="margin-left:11%; margin-top: 1em">rsync &minus;av
host::src /dest</p>

<p style="margin-left:11%; margin-top: 1em">Some modules on
the remote daemon may require authentication. If so, you
will receive a password prompt when you connect. You can
avoid the password prompt by setting the environment
variable RSYNC_PASSWORD to the password you want to use or
using the <b>&minus;&minus;password&minus;file</b> option.
This may be useful when scripting rsync.</p>

<p style="margin-left:11%; margin-top: 1em">WARNING: On
some systems environment variables are visible to all users.
On those systems using
<b>&minus;&minus;password&minus;file</b> is recommended.</p>

<p style="margin-left:11%; margin-top: 1em">You may
establish the connection via a web proxy by setting the
environment variable RSYNC_PROXY to a hostname:port pair
pointing to your web proxy. Note that your web proxy&rsquo;s
configuration must support proxy connections to port
873.</p>

<p style="margin-left:11%; margin-top: 1em">You may also
establish a daemon connection using a program as a proxy by
setting the environment variable RSYNC_CONNECT_PROG to the
commands you wish to run in place of making a direct socket
connection. The string may contain the escape &quot;%H&quot;
to represent the hostname specified in the rsync command (so
use &quot;%%&quot; if you need a single &quot;%&quot; in
your string). For example:</p>

<p style="margin-left:11%; margin-top: 1em">export
RSYNC_CONNECT_PROG=&rsquo;ssh proxyhost nc %H 873&rsquo;
<br>
rsync &minus;av targethost1::module/src/ /dest/ <br>
rsync &minus;av rsync:://targethost2/module/src/ /dest/</p>

<p style="margin-left:11%; margin-top: 1em">The command
specified above uses ssh to run nc (netcat) on a proxyhost,
which forwards all data to port 873 (the rsync daemon) on
the targethost (%H).</p>

<h2>USING RSYNC&minus;DAEMON FEATURES VIA A REMOTE&minus;SHELL CONNECTION
<a name="USING RSYNC&minus;DAEMON FEATURES VIA A REMOTE&minus;SHELL CONNECTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">It is sometimes
useful to use various features of an rsync daemon (such as
named modules) without actually allowing any new socket
connections into a system (other than what is already
required to allow remote&minus;shell access). Rsync supports
connecting to a host using a remote shell and then spawning
a single&minus;use &quot;daemon&quot; server that expects to
read its config file in the home dir of the remote user.
This can be useful if you want to encrypt a
daemon&minus;style transfer&rsquo;s data, but since the
daemon is started up fresh by the remote user, you may not
be able to use features such as chroot or change the uid
used by the daemon. (For another way to encrypt a daemon
transfer, consider using ssh to tunnel a local port to a
remote machine and configure a normal rsync daemon on that
remote host to only allow connections from
&quot;localhost&quot;.)</p>

<p style="margin-left:11%; margin-top: 1em">From the
user&rsquo;s perspective, a daemon transfer via a
remote&minus;shell connection uses nearly the same
command&minus;line syntax as a normal rsync&minus;daemon
transfer, with the only exception being that you must
explicitly set the remote shell program on the
command&minus;line with the <b>&minus;&minus;rsh=COMMAND</b>
option. (Setting the RSYNC_RSH in the environment will not
turn on this functionality.) For example:</p>

<p style="margin-left:11%; margin-top: 1em">rsync &minus;av
&minus;&minus;rsh=ssh host::module /dest</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
specify a different remote&minus;shell user, keep in mind
that the user@ prefix in front of the host is specifying the
rsync&minus;user value (for a module that requires
user&minus;based authentication). This means that you must
give the &rsquo;&minus;l user&rsquo; option to ssh when
specifying the remote&minus;shell, as in this example that
uses the short version of the <b>&minus;&minus;rsh</b>
option:</p>

<p style="margin-left:11%; margin-top: 1em">rsync &minus;av
&minus;e &quot;ssh &minus;l ssh&minus;user&quot;
rsync&minus;user@host::module /dest</p>

<p style="margin-left:11%; margin-top: 1em">The
&quot;ssh&minus;user&quot; will be used at the ssh level;
the &quot;rsync&minus;user&quot; will be used to
log&minus;in to the &quot;module&quot;.</p>

<h2>STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS
<a name="STARTING AN RSYNC DAEMON TO ACCEPT CONNECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In order to
connect to an rsync daemon, the remote system needs to have
a daemon already running (or it needs to have configured
something like inetd to spawn an rsync daemon for incoming
connections on a particular port). For full information on
how to start a daemon that will handling incoming socket
connections, see the <b>rsyncd.conf</b>(5) man page
&minus;&minus; that is the config file for the daemon, and
it contains the full details for how to run the daemon
(including stand&minus;alone and inetd configurations).</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
using one of the remote&minus;shell transports for the
transfer, there is no need to manually start an rsync
daemon.</p>

<h2>SORTED TRANSFER ORDER
<a name="SORTED TRANSFER ORDER"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync always
sorts the specified filenames into its internal transfer
list. This handles the merging together of the contents of
identically named directories, makes it easy to remove
duplicate filenames, and may confuse someone when the files
are transferred in a different order than what was given on
the command&minus;line.</p>

<p style="margin-left:11%; margin-top: 1em">If you need a
particular file to be transferred prior to another, either
separate the files into different rsync calls, or consider
using <b>&minus;&minus;delay&minus;updates</b> (which
doesn&rsquo;t affect the sorted transfer order, but does
make the final file&minus;updating phase happen much more
rapidly).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here are some
examples of how I use rsync.</p>

<p style="margin-left:11%; margin-top: 1em">To backup my
wife&rsquo;s home directory, which consists of large MS Word
files and mail folders, I use a cron job that runs</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;Cavz . arvidsjaur:backup</tt></p>

<p style="margin-left:11%; margin-top: 1em">each night over
a PPP connection to a duplicate directory on my machine
&quot;arvidsjaur&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">To synchronize
my samba source trees I use the following Makefile
targets:</p>

<p style="margin-left:11%; margin-top: 1em">get: <br>
rsync &minus;avuzb &minus;&minus;exclude &rsquo;*~&rsquo;
samba:samba/ . <br>
put: <br>
rsync &minus;Cavuzb . samba:samba/ <br>
sync: get put</p>

<p style="margin-left:11%; margin-top: 1em">this allows me
to sync with a CVS directory at the other end of the
connection. I then do CVS operations on the remote machine,
which saves a lot of time as the remote CVS protocol
isn&rsquo;t very efficient.</p>

<p style="margin-left:11%; margin-top: 1em">I mirror a
directory between my &quot;old&quot; and &quot;new&quot; ftp
sites with the command:</p>

<p style="margin-left:11%; margin-top: 1em"><tt>rsync
&minus;az &minus;e ssh &minus;&minus;delete ~ftp/pub/samba
nimbus:&quot;~ftp/pub/tridge&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em">This is
launched from cron every few hours.</p>

<h2>OPTIONS SUMMARY
<a name="OPTIONS SUMMARY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is a short
summary of the options available in rsync. Please refer to
the detailed description below for a complete
description.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;v,
&minus;&minus;verbose increase verbosity <br>
&minus;q, &minus;&minus;quiet suppress non&minus;error
messages <br>
&minus;&minus;no&minus;motd suppress daemon&minus;mode MOTD
(see caveat) <br>
&minus;c, &minus;&minus;checksum skip based on checksum, not
mod&minus;time &amp; size <br>
&minus;a, &minus;&minus;archive archive mode; equals
&minus;rlptgoD (no &minus;H,&minus;A,&minus;X) <br>
&minus;&minus;no&minus;OPTION turn off an implied OPTION
(e.g. &minus;&minus;no&minus;D) <br>
&minus;r, &minus;&minus;recursive recurse into directories
<br>
&minus;R, &minus;&minus;relative use relative path names
<br>
&minus;&minus;no&minus;implied&minus;dirs don&rsquo;t send
implied dirs with &minus;&minus;relative <br>
&minus;b, &minus;&minus;backup make backups (see
&minus;&minus;suffix &amp; &minus;&minus;backup&minus;dir)
<br>
&minus;&minus;backup&minus;dir=DIR make backups into
hierarchy based in DIR <br>
&minus;&minus;suffix=SUFFIX backup suffix (default ~ w/o
&minus;&minus;backup&minus;dir) <br>
&minus;u, &minus;&minus;update skip files that are newer on
the receiver <br>
&minus;&minus;inplace update destination files
in&minus;place <br>
&minus;&minus;append append data onto shorter files <br>
&minus;&minus;append&minus;verify &minus;&minus;append w/old
data in file checksum <br>
&minus;d, &minus;&minus;dirs transfer directories without
recursing <br>
&minus;l, &minus;&minus;links copy symlinks as symlinks <br>
&minus;L, &minus;&minus;copy&minus;links transform symlink
into referent file/dir <br>
&minus;&minus;copy&minus;unsafe&minus;links only
&quot;unsafe&quot; symlinks are transformed <br>
&minus;&minus;safe&minus;links ignore symlinks that point
outside the tree <br>
&minus;k, &minus;&minus;copy&minus;dirlinks transform
symlink to dir into referent dir <br>
&minus;K, &minus;&minus;keep&minus;dirlinks treat symlinked
dir on receiver as dir <br>
&minus;H, &minus;&minus;hard&minus;links preserve hard links
<br>
&minus;p, &minus;&minus;perms preserve permissions <br>
&minus;E, &minus;&minus;executability preserve executability
<br>
&minus;&minus;chmod=CHMOD affect file and/or directory
permissions <br>
&minus;A, &minus;&minus;acls preserve ACLs (implies
&minus;p) <br>
&minus;X, &minus;&minus;xattrs preserve extended attributes
<br>
&minus;o, &minus;&minus;owner preserve owner
(super&minus;user only) <br>
&minus;g, &minus;&minus;group preserve group <br>
&minus;&minus;devices preserve device files
(super&minus;user only) <br>
&minus;&minus;copy-devices copy device contents as regular
file <br>
&minus;&minus;specials preserve special files <br>
&minus;D same as &minus;&minus;devices
&minus;&minus;specials <br>
&minus;t, &minus;&minus;times preserve modification times
<br>
&minus;O, &minus;&minus;omit&minus;dir&minus;times omit
directories from &minus;&minus;times <br>
&minus;&minus;super receiver attempts super&minus;user
activities <br>
&minus;&minus;fake&minus;super store/recover privileged
attrs using xattrs <br>
&minus;S, &minus;&minus;sparse handle sparse files
efficiently <br>
&minus;n, &minus;&minus;dry&minus;run perform a trial run
with no changes made <br>
&minus;W, &minus;&minus;whole&minus;file copy files whole
(w/o delta&minus;xfer algorithm) <br>
&minus;x, &minus;&minus;one&minus;file&minus;system
don&rsquo;t cross filesystem boundaries <br>
&minus;B, &minus;&minus;block&minus;size=SIZE force a fixed
checksum block&minus;size <br>
&minus;e, &minus;&minus;rsh=COMMAND specify the remote shell
to use <br>
&minus;&minus;rsync&minus;path=PROGRAM specify the rsync to
run on remote machine <br>
&minus;&minus;existing skip creating new files on receiver
<br>
&minus;&minus;ignore&minus;existing skip updating files that
exist on receiver <br>
&minus;&minus;remove&minus;source&minus;files sender removes
synchronized files (non&minus;dir) <br>
&minus;&minus;del an alias for
&minus;&minus;delete&minus;during <br>
&minus;&minus;delete delete extraneous files from dest dirs
<br>
&minus;&minus;delete&minus;before receiver deletes before
xfer, not during <br>
&minus;&minus;delete&minus;during receiver deletes during
the transfer <br>
&minus;&minus;delete&minus;delay find deletions during,
delete after <br>
&minus;&minus;delete&minus;after receiver deletes after
transfer, not during <br>
&minus;&minus;delete&minus;excluded also delete excluded
files from dest dirs <br>
&minus;&minus;ignore&minus;errors delete even if there are
I/O errors <br>
&minus;&minus;force force deletion of dirs even if not empty
<br>
&minus;&minus;max&minus;delete=NUM don&rsquo;t delete more
than NUM files <br>
&minus;&minus;max&minus;size=SIZE don&rsquo;t transfer any
file larger than SIZE <br>
&minus;&minus;min&minus;size=SIZE don&rsquo;t transfer any
file smaller than SIZE <br>
&minus;&minus;partial keep partially transferred files <br>
&minus;&minus;partial&minus;dir=DIR put a partially
transferred file into DIR <br>
&minus;&minus;delay&minus;updates put all updated files into
place at end <br>
&minus;m, &minus;&minus;prune&minus;empty&minus;dirs prune
empty directory chains from file&minus;list <br>
&minus;&minus;numeric&minus;ids don&rsquo;t map uid/gid
values by user/group name <br>
&minus;&minus;timeout=SECONDS set I/O timeout in seconds
<br>
&minus;&minus;contimeout=SECONDS set daemon connection
timeout in seconds <br>
&minus;I, &minus;&minus;ignore&minus;times don&rsquo;t skip
files that match size and time <br>
&minus;&minus;size&minus;only skip files that match in size
<br>
&minus;&minus;modify&minus;window=NUM compare
mod&minus;times with reduced accuracy <br>
&minus;T, &minus;&minus;temp&minus;dir=DIR create temporary
files in directory DIR <br>
&minus;y, &minus;&minus;fuzzy find similar file for basis if
no dest file <br>
&minus;&minus;compare&minus;dest=DIR also compare received
files relative to DIR <br>
&minus;&minus;copy&minus;dest=DIR ... and include copies of
unchanged files <br>
&minus;&minus;link&minus;dest=DIR hardlink to files in DIR
when unchanged <br>
&minus;z, &minus;&minus;compress compress file data during
the transfer <br>
&minus;&minus;compress&minus;level=NUM explicitly set
compression level <br>
&minus;&minus;skip&minus;compress=LIST skip compressing
files with suffix in LIST <br>
&minus;C, &minus;&minus;cvs&minus;exclude auto&minus;ignore
files in the same way CVS does <br>
&minus;f, &minus;&minus;filter=RULE add a
file&minus;filtering RULE <br>
&minus;F same as &minus;&minus;filter=&rsquo;dir&minus;merge
/.rsync&minus;filter&rsquo; <br>
repeated: &minus;&minus;filter=&rsquo;&minus;
.rsync&minus;filter&rsquo; <br>
&minus;&minus;exclude=PATTERN exclude files matching PATTERN
<br>
&minus;&minus;exclude&minus;from=FILE read exclude patterns
from FILE <br>
&minus;&minus;include=PATTERN don&rsquo;t exclude files
matching PATTERN <br>
&minus;&minus;include&minus;from=FILE read include patterns
from FILE <br>
&minus;&minus;files&minus;from=FILE read list of
source&minus;file names from FILE <br>
&minus;0, &minus;&minus;from0 all *from/filter files are
delimited by 0s <br>
&minus;s, &minus;&minus;protect&minus;args no
space&minus;splitting; wildcard chars only <br>
&minus;&minus;address=ADDRESS bind address for outgoing
socket to daemon <br>
&minus;&minus;port=PORT specify double&minus;colon alternate
port number <br>
&minus;&minus;sockopts=OPTIONS specify custom TCP options
<br>
&minus;&minus;blocking&minus;io use blocking I/O for the
remote shell <br>
&minus;&minus;stats give some file&minus;transfer stats <br>
&minus;8, &minus;&minus;8&minus;bit&minus;output leave
high&minus;bit chars unescaped in output <br>
&minus;h, &minus;&minus;human&minus;readable output numbers
in a human&minus;readable format <br>
&minus;&minus;progress show progress during transfer <br>
&minus;P same as &minus;&minus;partial
&minus;&minus;progress <br>
&minus;i, &minus;&minus;itemize&minus;changes output a
change&minus;summary for all updates <br>
&minus;&minus;out&minus;format=FORMAT output updates using
the specified FORMAT <br>
&minus;&minus;log&minus;file=FILE log what we&rsquo;re doing
to the specified FILE <br>
&minus;&minus;log&minus;file&minus;format=FMT log updates
using the specified FMT <br>
&minus;&minus;password&minus;file=FILE read
daemon&minus;access password from FILE <br>
&minus;&minus;list&minus;only list the files instead of
copying them <br>
&minus;&minus;bwlimit=KBPS limit I/O bandwidth; KBytes per
second <br>
&minus;&minus;write&minus;batch=FILE write a batched update
to FILE <br>
&minus;&minus;only&minus;write&minus;batch=FILE like
&minus;&minus;write&minus;batch but w/o updating dest <br>
&minus;&minus;read&minus;batch=FILE read a batched update
from FILE <br>
&minus;&minus;protocol=NUM force an older protocol version
to be used <br>
&minus;&minus;iconv=CONVERT_SPEC request charset conversion
of filenames <br>
&minus;&minus;checksum&minus;seed=NUM set block/file
checksum seed (advanced) <br>
&minus;4, &minus;&minus;ipv4 prefer IPv4 <br>
&minus;6, &minus;&minus;ipv6 prefer IPv6 <br>
&minus;&minus;version print version number <br>
(&minus;h) &minus;&minus;help show this help (see below for
&minus;h comment)</p>

<p style="margin-left:11%; margin-top: 1em">Rsync can also
be run as a daemon, in which case the following options are
accepted:</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;daemon
run as an rsync daemon <br>
&minus;&minus;address=ADDRESS bind to the specified address
<br>
&minus;&minus;bwlimit=KBPS limit I/O bandwidth; KBytes per
second <br>
&minus;&minus;config=FILE specify alternate rsyncd.conf file
<br>
&minus;&minus;no&minus;detach do not detach from the parent
<br>
&minus;&minus;port=PORT listen on alternate port number <br>
&minus;&minus;log&minus;file=FILE override the &quot;log
file&quot; setting <br>
&minus;&minus;log&minus;file&minus;format=FMT override the
&quot;log format&quot; setting <br>
&minus;&minus;sockopts=OPTIONS specify custom TCP options
<br>
&minus;v, &minus;&minus;verbose increase verbosity <br>
&minus;4, &minus;&minus;ipv4 prefer IPv4 <br>
&minus;6, &minus;&minus;ipv6 prefer IPv6 <br>
&minus;h, &minus;&minus;help show this help (if used after
&minus;&minus;daemon)</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Rsync accepts
both long (double&minus;dash + word) and short
(single&minus;dash + letter) options. The full list of the
available options are described below. If an option can be
specified in more than one way, the choices are
comma&minus;separated. Some options only have a long
variant, not a short. If the option takes a parameter, the
parameter is only listed after the long variant, even though
it must also be specified for the short. When specifying a
parameter, you can either use the form
&minus;&minus;option=param or replace the &rsquo;=&rsquo;
with whitespace. The parameter may need to be quoted in some
manner for it to survive the shell&rsquo;s
command&minus;line parsing. Keep in mind that a leading
tilde (~) in a filename is substituted by your shell, so
&minus;&minus;option=~/foo will not change the tilde into
your home directory (remove the &rsquo;=&rsquo; for
that).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>&minus;&minus;help</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Print a short help page
describing the options available in rsync and exit. For
backward&minus;compatibility with older versions of rsync,
the help will also be output if you use the <b>&minus;h</b>
option without any other args.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">print the rsync version number
and exit.</p>

<p style="margin-left:11%;"><b>&minus;v,
&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">This option increases the
amount of information you are given during the transfer. By
default, rsync works silently. A single <b>&minus;v</b> will
give you information about what files are being transferred
and a brief summary at the end. Two <b>&minus;v</b> options
will give you information on what files are being skipped
and slightly more information at the end. More than two
<b>&minus;v</b> options should only be used if you are
debugging rsync.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
names of the transferred files that are output are done
using a default <b>&minus;&minus;out&minus;format</b> of
&quot;%n%L&quot;, which tells you just the name of the file
and, if the item is a link, where it points. At the single
<b>&minus;v</b> level of verbosity, this does not mention
when a file gets its attributes changed. If you ask for an
itemized list of changed attributes (either
<b>&minus;&minus;itemize&minus;changes</b> or adding
&quot;%i&quot; to the <b>&minus;&minus;out&minus;format</b>
setting), the output (on the client) increases to mention
all items that are changed in any way. See the
<b>&minus;&minus;out&minus;format</b> option for more
details.</p>

<p style="margin-left:11%;"><b>&minus;q,
&minus;&minus;quiet</b></p>

<p style="margin-left:22%;">This option decreases the
amount of information you are given during the transfer,
notably suppressing information messages from the remote
server. This option is useful when invoking rsync from
cron.</p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;motd</b></p>

<p style="margin-left:22%;">This option affects the
information that is output by the client at the start of a
daemon transfer. This suppresses the
message&minus;of&minus;the&minus;day (MOTD) text, but it
also affects the list of modules that the daemon sends in
response to the &quot;rsync host::&quot; request (due to a
limitation in the rsync protocol), so omit this option if
you want to request the list of modules from the daemon.</p>

<p style="margin-left:11%;"><b>&minus;I,
&minus;&minus;ignore&minus;times</b></p>

<p style="margin-left:22%;">Normally rsync will skip any
files that are already the same size and have the same
modification timestamp. This option turns off this
&quot;quick check&quot; behavior, causing all files to be
updated.</p>


<p style="margin-left:11%;"><b>&minus;&minus;size&minus;only</b></p>

<p style="margin-left:22%;">This modifies rsync&rsquo;s
&quot;quick check&quot; algorithm for finding files that
need to be transferred, changing it from the default of
transferring files with either a changed size or a changed
last&minus;modified time to just looking for files that have
changed in size. This is useful when starting to use rsync
after using another mirroring system which may not preserve
timestamps exactly.</p>


<p style="margin-left:11%;"><b>&minus;&minus;modify&minus;window</b></p>

<p style="margin-left:22%;">When comparing two timestamps,
rsync treats the timestamps as being equal if they differ by
no more than the modify&minus;window value. This is normally
0 (for an exact match), but you may find it useful to set
this to a larger value in some situations. In particular,
when transferring to or from an MS Windows FAT filesystem
(which represents times with a 2&minus;second resolution),
<b>&minus;&minus;modify&minus;window=1</b> is useful
(allowing times to differ by up to 1 second).</p>

<p style="margin-left:11%;"><b>&minus;c,
&minus;&minus;checksum</b></p>

<p style="margin-left:22%;">This changes the way rsync
checks if the files have been changed and are in need of a
transfer. Without this option, rsync uses a &quot;quick
check&quot; that (by default) checks if each file&rsquo;s
size and time of last modification match between the sender
and receiver. This option changes this to compare a
128&minus;bit checksum for each file that has a matching
size. Generating the checksums means that both sides will
expend a lot of disk I/O reading all the data in the files
in the transfer (and this is prior to any reading that will
be done to transfer changed files), so this can slow things
down significantly.</p>

<p style="margin-left:22%; margin-top: 1em">The sending
side generates its checksums while it is doing the
file&minus;system scan that builds the list of the available
files. The receiver generates its checksums when it is
scanning for changed files, and will checksum any file that
has the same size as the corresponding sender&rsquo;s file:
files with either a changed size or a changed checksum are
selected for transfer.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
always verifies that each <i>transferred</i> file was
correctly reconstructed on the receiving side by checking a
whole&minus;file checksum that is generated as the file is
transferred, but that automatic
after&minus;the&minus;transfer verification has nothing to
do with this option&rsquo;s before&minus;the&minus;transfer
&quot;Does this file need to be updated?&quot; check.</p>

<p style="margin-left:22%; margin-top: 1em">For protocol 30
and beyond (first supported in 3.0.0), the checksum used is
MD5. For older protocols, the checksum used is MD4.</p>

<p style="margin-left:11%;"><b>&minus;a,
&minus;&minus;archive</b></p>

<p style="margin-left:22%;">This is equivalent to
<b>&minus;rlptgoD</b>. It is a quick way of saying you want
recursion and want to preserve almost everything (with
&minus;H being a notable omission). The only exception to
the above equivalence is when
<b>&minus;&minus;files&minus;from</b> is specified, in which
case <b>&minus;r</b> is not implied.</p>

<p style="margin-left:22%; margin-top: 1em">Note that
<b>&minus;a does not preserve hardlinks</b>, because finding
multiply&minus;linked files is expensive. You must
separately specify <b>&minus;H</b>.</p>


<p style="margin-left:11%;">&minus;&minus;no&minus;OPTION</p>

<p style="margin-left:22%;">You may turn off one or more
implied options by prefixing the option name with
&quot;no&minus;&quot;. Not all options may be prefixed with
a &quot;no&minus;&quot;: only options that are implied by
other options (e.g. <b>&minus;&minus;no&minus;D</b>,
<b>&minus;&minus;no&minus;perms</b>) or have different
defaults in various circumstances (e.g.
<b>&minus;&minus;no&minus;whole&minus;file</b>,
<b>&minus;&minus;no&minus;blocking&minus;io</b>,
<b>&minus;&minus;no&minus;dirs</b>). You may specify either
the short or the long option name after the
&quot;no&minus;&quot; prefix (e.g.
<b>&minus;&minus;no&minus;R</b> is the same as
<b>&minus;&minus;no&minus;relative</b>).</p>

<p style="margin-left:22%; margin-top: 1em">For example: if
you want to use <b>&minus;a</b>
(<b>&minus;&minus;archive</b>) but don&rsquo;t want
<b>&minus;o</b> (<b>&minus;&minus;owner</b>), instead of
converting <b>&minus;a</b> into <b>&minus;rlptgD</b>, you
could specify <b>&minus;a &minus;&minus;no&minus;o</b> (or
<b>&minus;a &minus;&minus;no&minus;owner</b>).</p>

<p style="margin-left:22%; margin-top: 1em">The order of
the options is important: if you specify
<b>&minus;&minus;no&minus;r &minus;a</b>, the
<b>&minus;r</b> option would end up being turned on, the
opposite of <b>&minus;a &minus;&minus;no&minus;r</b>. Note
also that the side&minus;effects of the
<b>&minus;&minus;files&minus;from</b> option are NOT
positional, as it affects the default state of several
options and slightly changes the meaning of <b>&minus;a</b>
(see the <b>&minus;&minus;files&minus;from</b> option for
more details).</p>

<p style="margin-left:11%;"><b>&minus;r,
&minus;&minus;recursive</b></p>

<p style="margin-left:22%;">This tells rsync to copy
directories recursively. See also <b>&minus;&minus;dirs</b>
(<b>&minus;d</b>).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
rsync 3.0.0, the recursive algorithm used is now an
incremental scan that uses much less memory than before and
begins the transfer after the scanning of the first few
directories have been completed. This incremental scan only
affects our recursion algorithm, and does not change a
non&minus;recursive transfer. It is also only possible when
both ends of the transfer are at least version 3.0.0.</p>

<p style="margin-left:22%; margin-top: 1em">Some options
require rsync to know the full file list, so these options
disable the incremental recursion mode. These include:
<b>&minus;&minus;delete&minus;before</b>,
<b>&minus;&minus;delete&minus;after</b>,
<b>&minus;&minus;prune&minus;empty&minus;dirs</b>, and
<b>&minus;&minus;delay&minus;updates</b>. Because of this,
the default delete mode when you specify
<b>&minus;&minus;delete</b> is now
<b>&minus;&minus;delete&minus;during</b> when both ends of
the connection are at least 3.0.0 (use
<b>&minus;&minus;del</b> or
<b>&minus;&minus;delete&minus;during</b> to request this
improved deletion mode explicitly). See also the
<b>&minus;&minus;delete&minus;delay</b> option that is a
better choice than using
<b>&minus;&minus;delete&minus;after</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Incremental
recursion can be disabled using the
<b>&minus;&minus;no&minus;inc&minus;recursive</b> option or
its shorter <b>&minus;&minus;no&minus;i&minus;r</b>
alias.</p>

<p style="margin-left:11%;"><b>&minus;R,
&minus;&minus;relative</b></p>

<p style="margin-left:22%;">Use relative paths. This means
that the full path names specified on the command line are
sent to the server rather than just the last parts of the
filenames. This is particularly useful when you want to send
several different directories at the same time. For example,
if you used this command:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av /foo/bar/baz.c remote:/tmp/</tt></p>

<p style="margin-left:22%; margin-top: 1em">... this would
create a file named baz.c in /tmp/ on the remote machine. If
instead you used</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avR /foo/bar/baz.c remote:/tmp/</tt></p>

<p style="margin-left:22%; margin-top: 1em">then a file
named /tmp/foo/bar/baz.c would be created on the remote
machine, preserving its full path. These extra path elements
are called &quot;implied directories&quot; (i.e. the
&quot;foo&quot; and the &quot;foo/bar&quot; directories in
the above example).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning with
rsync 3.0.0, rsync always sends these implied directories as
real directories in the file list, even if a path element is
really a symlink on the sending side. This prevents some
really unexpected behaviors when copying the full path of a
file that you didn&rsquo;t realize had a symlink in its
path. If you want to duplicate a server&minus;side symlink,
include both the symlink via its path, and referent
directory via its real path. If you&rsquo;re dealing with an
older rsync on the sending side, you may need to use the
<b>&minus;&minus;no&minus;implied&minus;dirs</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">It is also
possible to limit the amount of path information that is
sent as implied directories for each path you specify. With
a modern rsync on the sending side (beginning with 2.6.7),
you can insert a dot and a slash into the source path, like
this:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avR /foo/./bar/baz.c remote:/tmp/</tt></p>

<p style="margin-left:22%; margin-top: 1em">That would
create /tmp/bar/baz.c on the remote machine. (Note that the
dot must be followed by a slash, so &quot;/foo/.&quot; would
not be abbreviated.) For older rsync versions, you would
need to use a chdir to limit the source path. For example,
when pushing files:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>(cd /foo;
rsync &minus;avR bar/baz.c remote:/tmp/)</tt></p>

<p style="margin-left:22%; margin-top: 1em">(Note that the
parens put the two commands into a sub&minus;shell, so that
the &quot;cd&quot; command doesn&rsquo;t remain in effect
for future commands.) If you&rsquo;re pulling files from an
older rsync, use this idiom (but only for a non&minus;daemon
transfer):</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avR &minus;&minus;rsync&minus;path=&quot;cd /foo;
rsync&quot; \ <br>
remote:bar/baz.c /tmp/</tt></p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;implied&minus;dirs</b></p>

<p style="margin-left:22%;">This option affects the default
behavior of the <b>&minus;&minus;relative</b> option. When
it is specified, the attributes of the implied directories
from the source names are not included in the transfer. This
means that the corresponding path elements on the
destination system are left unchanged if they exist, and any
missing implied directories are created with default
attributes. This even allows these implied path elements to
have big differences, such as being a symlink to a directory
on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">For instance,
if a command&minus;line arg or a files&minus;from entry told
rsync to transfer the file &quot;path/foo/file&quot;, the
directories &quot;path&quot; and &quot;path/foo&quot; are
implied when <b>&minus;&minus;relative</b> is used. If
&quot;path/foo&quot; is a symlink to &quot;bar&quot; on the
destination system, the receiving rsync would ordinarily
delete &quot;path/foo&quot;, recreate it as a directory, and
receive the file into the new directory. With
<b>&minus;&minus;no&minus;implied&minus;dirs</b>, the
receiving rsync updates &quot;path/foo/file&quot; using the
existing path elements, which means that the file ends up
being created in &quot;path/bar&quot;. Another way to
accomplish this link preservation is to use the
<b>&minus;&minus;keep&minus;dirlinks</b> option (which will
also affect symlinks to directories in the rest of the
transfer).</p>

<p style="margin-left:22%; margin-top: 1em">When pulling
files from an rsync older than 3.0.0, you may need to use
this option if the sending side has a symlink in the path
you request and you wish the implied directories to be
transferred as normal directories.</p>

<p style="margin-left:11%;"><b>&minus;b,
&minus;&minus;backup</b></p>

<p style="margin-left:22%;">With this option, preexisting
destination files are renamed as each file is transferred or
deleted. You can control where the backup file goes and what
(if any) suffix gets appended using the
<b>&minus;&minus;backup&minus;dir</b> and
<b>&minus;&minus;suffix</b> options.</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you don&rsquo;t specify
<b>&minus;&minus;backup&minus;dir</b>, (1) the
<b>&minus;&minus;omit&minus;dir&minus;times</b> option will
be implied, and (2) if <b>&minus;&minus;delete</b> is also
in effect (without
<b>&minus;&minus;delete&minus;excluded</b>), rsync will add
a &quot;protect&quot; filter&minus;rule for the backup
suffix to the end of all your existing excludes (e.g.
<b>&minus;f &quot;P *~&quot;</b>). This will prevent
previously backed&minus;up files from being deleted. Note
that if you are supplying your own filter rules, you may
need to manually insert your own exclude/protect rule
somewhere higher up in the list so that it has a high enough
priority to be effective (e.g., if your rules specify a
trailing inclusion/exclusion of &rsquo;*&rsquo;, the
auto&minus;added rule would never be reached).</p>


<p style="margin-left:11%;"><b>&minus;&minus;backup&minus;dir=DIR</b></p>

<p style="margin-left:22%;">In combination with the
<b>&minus;&minus;backup</b> option, this tells rsync to
store all backups in the specified directory on the
receiving side. This can be used for incremental backups.
You can additionally specify a backup suffix using the
<b>&minus;&minus;suffix</b> option (otherwise the files
backed up in the specified directory will keep their
original filenames).</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you specify a relative path, the backup directory will be
relative to the destination directory, so you probably want
to specify either an absolute path or a path that starts
with &quot;../&quot;. If an rsync daemon is the receiver,
the backup dir cannot go outside the module&rsquo;s path
hierarchy, so take extra care not to delete it or copy into
it.</p>


<p style="margin-left:11%;"><b>&minus;&minus;suffix=SUFFIX</b></p>

<p style="margin-left:22%;">This option allows you to
override the default backup suffix used with the
<b>&minus;&minus;backup</b> (<b>&minus;b</b>) option. The
default suffix is a ~ if no
&minus;<b>&minus;backup&minus;dir</b> was specified,
otherwise it is an empty string.</p>

<p style="margin-left:11%;"><b>&minus;u,
&minus;&minus;update</b></p>

<p style="margin-left:22%;">This forces rsync to skip any
files which exist on the destination and have a modified
time that is newer than the source file. (If an existing
destination file has a modification time equal to the source
file&rsquo;s, it will be updated if the sizes are
different.)</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
does not affect the copying of symlinks or other special
files. Also, a difference of file format between the sender
and receiver is always considered to be important enough for
an update, no matter what date is on the objects. In other
words, if the source has a directory where the destination
has a file, the transfer would occur regardless of the
timestamps.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file&minus;lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>


<p style="margin-left:11%;"><b>&minus;&minus;inplace</b></p>

<p style="margin-left:22%;">This option changes how rsync
transfers a file when its data needs to be updated: instead
of the default method of creating a new copy of the file and
moving it into place when it is complete, rsync instead
writes the updated data directly to the destination
file.</p>

<p style="margin-left:22%; margin-top: 1em">This has
several effects:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>Hard links are not broken. This means the new data will
be visible through other hard links to the destination file.
Moreover, attempts to copy differing source files onto a
multiply&minus;linked destination file will result in a
&quot;tug of war&quot; with the destination data changing
back and forth.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>In&minus;use binaries cannot be updated (either the OS
will prevent this from happening, or binaries that attempt
to swap&minus;in their data will misbehave or crash).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The file&rsquo;s data will be in an inconsistent state
during the transfer and will be left that way if the
transfer is interrupted or if an update fails.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A file that rsync cannot write to cannot be updated.
While a super user can update any file, a normal user needs
to be granted write permission for the open of the file for
writing to be successful.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The efficiency of rsync&rsquo;s delta&minus;transfer
algorithm may be reduced if some data in the destination
file is overwritten before it can be copied to a position
later in the file. This does not apply if you use
<b>&minus;&minus;backup</b>, since rsync is smart enough to
use the backup file as the basis file for the transfer.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">WARNING: you
should not use this option to update files that are being
accessed by others, so be careful when choosing to use this
for a copy.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
useful for transferring large files with block&minus;based
changes or appended data, and also on systems that are disk
bound, not network bound. It can also help keep a
copy&minus;on&minus;write filesystem snapshot from diverging
the entire contents of a file that only has minor
changes.</p>

<p style="margin-left:22%; margin-top: 1em">The option
implies <b>&minus;&minus;partial</b> (since an interrupted
transfer does not delete the file), but conflicts with
<b>&minus;&minus;partial&minus;dir</b> and
<b>&minus;&minus;delay&minus;updates</b>. Prior to rsync
2.6.4 <b>&minus;&minus;inplace</b> was also incompatible
with <b>&minus;&minus;compare&minus;dest</b> and
<b>&minus;&minus;link&minus;dest</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;append</b></p>

<p style="margin-left:22%;">This causes rsync to update a
file by appending data onto the end of the file, which
presumes that the data that already exists on the receiving
side is identical with the start of the file on the sending
side. If a file needs to be transferred and its size on the
receiver is the same or longer than the size on the sender,
the file is skipped. This does not interfere with the
updating of a file&rsquo;s non&minus;content attributes
(e.g. permissions, ownership, etc.) when the file does not
need to be transferred, nor does it affect the updating of
any non&minus;regular files. Implies
<b>&minus;&minus;inplace</b>, but does not conflict with
<b>&minus;&minus;sparse</b> (since it is always extending a
file&rsquo;s length).</p>


<p style="margin-left:11%;"><b>&minus;&minus;append&minus;verify</b></p>

<p style="margin-left:22%;">This works just like the
<b>&minus;&minus;append</b> option, but the existing data on
the receiving side is included in the full&minus;file
checksum verification step, which will cause a file to be
resent if the final verification step fails (rsync uses a
normal, non&minus;appending <b>&minus;&minus;inplace</b>
transfer for the resend).</p>

<p style="margin-left:22%; margin-top: 1em">Note: prior to
rsync 3.0.0, the <b>&minus;&minus;append</b> option worked
like <b>&minus;&minus;append&minus;verify</b>, so if you are
interacting with an older rsync (or the transfer is using a
protocol prior to 30), specifying either append option will
initiate an <b>&minus;&minus;append&minus;verify</b>
transfer.</p>

<p style="margin-left:11%;"><b>&minus;d,
&minus;&minus;dirs</b></p>

<p style="margin-left:22%;">Tell the sending side to
include any directories that are encountered. Unlike
<b>&minus;&minus;recursive</b>, a directory&rsquo;s contents
are not copied unless the directory name specified is
&quot;.&quot; or ends with a trailing slash (e.g.
&quot;.&quot;, &quot;dir/.&quot;, &quot;dir/&quot;, etc.).
Without this option or the <b>&minus;&minus;recursive</b>
option, rsync will skip all directories it encounters (and
output a message to that effect for each one). If you
specify both <b>&minus;&minus;dirs</b> and
<b>&minus;&minus;recursive</b>,
<b>&minus;&minus;recursive</b> takes precedence.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;&minus;dirs</b> option is implied by the
<b>&minus;&minus;files&minus;from</b> option or the
<b>&minus;&minus;list&minus;only</b> option (including an
implied <b>&minus;&minus;list&minus;only</b> usage) if
<b>&minus;&minus;recursive</b> wasn&rsquo;t specified (so
that directories are seen in the listing). Specify
<b>&minus;&minus;no&minus;dirs</b> (or
<b>&minus;&minus;no&minus;d</b>) if you want to turn this
off.</p>

<p style="margin-left:22%; margin-top: 1em">There is also a
backward&minus;compatibility helper option,
<b>&minus;&minus;old&minus;dirs</b> (or
<b>&minus;&minus;old&minus;d</b>) that tells rsync to use a
hack of &quot;&minus;r
&minus;&minus;exclude=&rsquo;/*/*&rsquo;&quot; to get an
older rsync to list a single directory without
recursing.</p>

<p style="margin-left:11%;"><b>&minus;l,
&minus;&minus;links</b></p>

<p style="margin-left:22%;">When symlinks are encountered,
recreate the symlink on the destination.</p>

<p style="margin-left:11%;"><b>&minus;L,
&minus;&minus;copy&minus;links</b></p>

<p style="margin-left:22%;">When symlinks are encountered,
the item that they point to (the referent) is copied, rather
than the symlink. In older versions of rsync, this option
also had the side&minus;effect of telling the receiving side
to follow symlinks, such as symlinks to directories. In a
modern rsync such as this one, you&rsquo;ll need to specify
<b>&minus;&minus;keep&minus;dirlinks</b> (<b>&minus;K</b>)
to get this extra behavior. The only exception is when
sending files to an rsync that is too old to understand
<b>&minus;K</b> &minus;&minus; in that case, the
<b>&minus;L</b> option will still have the side&minus;effect
of <b>&minus;K</b> on that older receiving rsync.</p>


<p style="margin-left:11%;"><b>&minus;&minus;copy&minus;unsafe&minus;links</b></p>

<p style="margin-left:22%;">This tells rsync to copy the
referent of symbolic links that point outside the copied
tree. Absolute symlinks are also treated like ordinary
files, and so are any symlinks in the source path itself
when <b>&minus;&minus;relative</b> is used. This option has
no additional effect if
<b>&minus;&minus;copy&minus;links</b> was also
specified.</p>


<p style="margin-left:11%;"><b>&minus;&minus;safe&minus;links</b></p>

<p style="margin-left:22%;">This tells rsync to ignore any
symbolic links which point outside the copied tree. All
absolute symlinks are also ignored. Using this option in
conjunction with <b>&minus;&minus;relative</b> may give
unexpected results.</p>

<p style="margin-left:11%;"><b>&minus;k,
&minus;&minus;copy&minus;dirlinks</b></p>

<p style="margin-left:22%;">This option causes the sending
side to treat a symlink to a directory as though it were a
real directory. This is useful if you don&rsquo;t want
symlinks to non&minus;directories to be affected, as they
would be using <b>&minus;&minus;copy&minus;links</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Without this
option, if the sending side has replaced a directory with a
symlink to a directory, the receiving side will delete
anything that is in the way of the new symlink, including a
directory hierarchy (as long as <b>&minus;&minus;force</b>
or <b>&minus;&minus;delete</b> is in effect).</p>

<p style="margin-left:22%; margin-top: 1em">See also
<b>&minus;&minus;keep&minus;dirlinks</b> for an analogous
option for the receiving side.</p>


<p style="margin-left:22%; margin-top: 1em"><b>&minus;&minus;copy&minus;dirlinks</b>
applies to all symlinks to directories in the source. If you
want to follow only a few specified symlinks, a trick you
can use is to pass them as additional source args with a
trailing slash, using <b>&minus;&minus;relative</b> to make
the paths match up right. For example:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;r &minus;&minus;relative src/./
src/./follow&minus;me/ dest/</tt></p>

<p style="margin-left:22%; margin-top: 1em">This works
because rsync calls <b>lstat</b>(2) on the source arg as
given, and the trailing slash makes <b>lstat</b>(2) follow
the symlink, giving rise to a directory in the
file&minus;list which overrides the symlink found during the
scan of &quot;src/./&quot;.</p>

<p style="margin-left:11%;"><b>&minus;K,
&minus;&minus;keep&minus;dirlinks</b></p>

<p style="margin-left:22%;">This option causes the
receiving side to treat a symlink to a directory as though
it were a real directory, but only if it matches a real
directory from the sender. Without this option, the
receiver&rsquo;s symlink would be deleted and replaced with
a real directory.</p>

<p style="margin-left:22%; margin-top: 1em">For example,
suppose you transfer a directory &quot;foo&quot; that
contains a file &quot;file&quot;, but &quot;foo&quot; is a
symlink to directory &quot;bar&quot; on the receiver.
Without <b>&minus;&minus;keep&minus;dirlinks</b>, the
receiver deletes symlink &quot;foo&quot;, recreates it as a
directory, and receives the file into the new directory.
With <b>&minus;&minus;keep&minus;dirlinks</b>, the receiver
keeps the symlink and &quot;file&quot; ends up in
&quot;bar&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">One note of
caution: if you use
<b>&minus;&minus;keep&minus;dirlinks</b>, you must trust all
the symlinks in the copy! If it is possible for an untrusted
user to create their own symlink to any directory, the user
could then (on a subsequent copy) replace the symlink with a
real directory and affect the content of whatever directory
the symlink references. For backup copies, you are better
off using something like a bind mount instead of a symlink
to modify your receiving hierarchy.</p>

<p style="margin-left:22%; margin-top: 1em">See also
<b>&minus;&minus;copy&minus;dirlinks</b> for an analogous
option for the sending side.</p>

<p style="margin-left:11%;"><b>&minus;H,
&minus;&minus;hard&minus;links</b></p>

<p style="margin-left:22%;">This tells rsync to look for
hard&minus;linked files in the source and link together the
corresponding files on the destination. Without this option,
hard&minus;linked files in the source are treated as though
they were separate files.</p>

<p style="margin-left:22%; margin-top: 1em">This option
does NOT necessarily ensure that the pattern of hard links
on the destination exactly matches that on the source. Cases
in which the destination may end up with extra hard links
include the following:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>If the destination contains extraneous hard&minus;links
(more linking than what is present in the source file list),
the copying algorithm will not break them explicitly.
However, if one or more of the paths have content
differences, the normal file&minus;update process will break
those extra links (unless you are using the
<b>&minus;&minus;inplace</b> option).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>If you specify a <b>&minus;&minus;link&minus;dest</b>
directory that contains hard links, the linking of the
destination files against the
<b>&minus;&minus;link&minus;dest</b> files can cause some
paths in the destination to become linked together due to
the <b>&minus;&minus;link&minus;dest</b> associations.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
can only detect hard links between files that are inside the
transfer set. If rsync updates a file that has extra
hard&minus;link connections to files outside the transfer,
that linkage will be broken. If you are tempted to use the
<b>&minus;&minus;inplace</b> option to avoid this breakage,
be very careful that you know how your files are being
updated so that you are certain that no unintended changes
happen due to lingering hard links (and see the
<b>&minus;&minus;inplace</b> option for more caveats).</p>

<p style="margin-left:22%; margin-top: 1em">If incremental
recursion is active (see <b>&minus;&minus;recursive</b>),
rsync may transfer a missing hard&minus;linked file before
it finds that another link for that contents exists
elsewhere in the hierarchy. This does not affect the
accuracy of the transfer (i.e. which files are
hard&minus;linked together), just its efficiency (i.e.
copying the data for a new, early copy of a
hard&minus;linked file that could have been found later in
the transfer in another member of the hard&minus;linked set
of files). One way to avoid this inefficiency is to disable
incremental recursion using the
<b>&minus;&minus;no&minus;inc&minus;recursive</b>
option.</p>

<p style="margin-left:11%;"><b>&minus;p,
&minus;&minus;perms</b></p>

<p style="margin-left:22%;">This option causes the
receiving rsync to set the destination permissions to be the
same as the source permissions. (See also the
<b>&minus;&minus;chmod</b> option for a way to modify what
rsync considers to be the source permissions.)</p>

<p style="margin-left:22%; margin-top: 1em">When this
option is <i>off</i>, permissions are set as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>Existing files (including updated files) retain their
existing permissions, though the
<b>&minus;&minus;executability</b> option might change just
the execute permission for the file.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>New files get their &quot;normal&quot; permission bits
set to the source file&rsquo;s permissions masked with the
receiving directory&rsquo;s default permissions (either the
receiving process&rsquo;s umask, or the permissions
specified via the destination directory&rsquo;s default
ACL), and their special permission bits disabled except in
the case where a new directory inherits a setgid bit from
its parent directory.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Thus, when
<b>&minus;&minus;perms</b> and
<b>&minus;&minus;executability</b> are both disabled,
rsync&rsquo;s behavior is the same as that of other
file&minus;copy utilities, such as <b>cp</b>(1) and
<b>tar</b>(1).</p>

<p style="margin-left:22%; margin-top: 1em">In summary: to
give destination files (both old and new) the source
permissions, use <b>&minus;&minus;perms</b>. To give new
files the destination&minus;default permissions (while
leaving existing files unchanged), make sure that the
<b>&minus;&minus;perms</b> option is off and use
<b>&minus;&minus;chmod=ugo=rwX</b> (which ensures that all
non&minus;masked bits get enabled). If you&rsquo;d care to
make this latter behavior easier to type, you could define a
popt alias for it, such as putting this line in the file
~/.popt (the following defines the <b>&minus;Z</b> option,
and includes &minus;&minus;no&minus;g to use the default
group of the destination dir):</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync alias
&minus;Z &minus;&minus;no&minus;p &minus;&minus;no&minus;g
&minus;&minus;chmod=ugo=rwX</tt></p>

<p style="margin-left:22%; margin-top: 1em">You could then
use this new option in a command such as this one:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avZ src/ dest/</tt></p>

<p style="margin-left:22%; margin-top: 1em">(Caveat: make
sure that <b>&minus;a</b> does not follow <b>&minus;Z</b>,
or it will re&minus;enable the two
&quot;&minus;&minus;no&minus;*&quot; options mentioned
above.)</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of the destination&rsquo;s setgid bit on
newly&minus;created directories when
<b>&minus;&minus;perms</b> is off was added in rsync 2.6.7.
Older rsync versions erroneously preserved the three special
permission bits for newly&minus;created files when
<b>&minus;&minus;perms</b> was off, while overriding the
destination&rsquo;s setgid bit setting on a
newly&minus;created directory. Default ACL observance was
added to the ACL patch for rsync 2.6.7, so older (or
non&minus;ACL&minus;enabled) rsyncs use the umask even if
default ACLs are present. (Keep in mind that it is the
version of the receiving rsync that affects these
behaviors.)</p>

<p style="margin-left:11%;"><b>&minus;E,
&minus;&minus;executability</b></p>

<p style="margin-left:22%;">This option causes rsync to
preserve the executability (or non&minus;executability) of
regular files when <b>&minus;&minus;perms</b> is not
enabled. A regular file is considered to be executable if at
least one &rsquo;x&rsquo; is turned on in its permissions.
When an existing destination file&rsquo;s executability
differs from that of the corresponding source file, rsync
modifies the destination file&rsquo;s permissions as
follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>To make a file non&minus;executable, rsync turns off all
its &rsquo;x&rsquo; permissions.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>To make a file executable, rsync turns on each
&rsquo;x&rsquo; permission that has a corresponding
&rsquo;r&rsquo; permission enabled.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">If
<b>&minus;&minus;perms</b> is enabled, this option is
ignored.</p>

<p style="margin-left:11%;"><b>&minus;A,
&minus;&minus;acls</b></p>

<p style="margin-left:22%;">This option causes rsync to
update the destination ACLs to be the same as the source
ACLs. The option also implies
<b>&minus;&minus;perms</b>.</p>

<p style="margin-left:22%; margin-top: 1em">The source and
destination systems must have compatible ACL entries for
this option to work properly. See the
<b>&minus;&minus;fake&minus;super</b> option for a way to
backup and restore ACLs that are not compatible.</p>

<p style="margin-left:11%;"><b>&minus;X,
&minus;&minus;xattrs</b></p>

<p style="margin-left:22%;">This option causes rsync to
update the destination extended attributes to be the same as
the source ones.</p>

<p style="margin-left:22%; margin-top: 1em">For systems
that support extended&minus;attribute namespaces, a copy
being done by a super&minus;user copies all namespaces
except system.*. A normal user only copies the user.*
namespace. To be able to backup and restore non&minus;user
namespaces as a normal user, see the
<b>&minus;&minus;fake&minus;super</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
option does not copy rsyncs special xattr values (e.g. those
used by <b>&minus;&minus;fake&minus;super</b>) unless you
repeat the option (e.g. &minus;XX). This &quot;copy all
xattrs&quot; mode cannot be used with
<b>&minus;&minus;fake&minus;super</b>.</p>

<p style="margin-left:11%;"><b>&minus;&minus;chmod</b></p>

<p style="margin-left:22%;">This option tells rsync to
apply one or more comma&minus;separated &quot;chmod&quot;
modes to the permission of the files in the transfer. The
resulting value is treated as though it were the permissions
that the sending side supplied for the file, which means
that this option can seem to have no effect on existing
files if <b>&minus;&minus;perms</b> is not enabled.</p>

<p style="margin-left:22%; margin-top: 1em">In addition to
the normal parsing rules specified in the <b>chmod</b>(1)
manpage, you can specify an item that should only apply to a
directory by prefixing it with a &rsquo;D&rsquo;, or specify
an item that should only apply to a file by prefixing it
with a &rsquo;F&rsquo;. For example, the following will
ensure that all directories get marked set&minus;gid, that
no files are other&minus;writable, that both are
user&minus;writable and group&minus;writable, and that both
have consistent executability across all bits:</p>


<p style="margin-left:22%; margin-top: 1em">&minus;&minus;chmod=Dg+s,ug+w,Fo&minus;w,+X</p>

<p style="margin-left:22%; margin-top: 1em">It is also
legal to specify multiple <b>&minus;&minus;chmod</b>
options, as each additional option is just appended to the
list of changes to make.</p>

<p style="margin-left:22%; margin-top: 1em">See the
<b>&minus;&minus;perms</b> and
<b>&minus;&minus;executability</b> options for how the
resulting permission value can be applied to the files in
the transfer.</p>

<p style="margin-left:11%;"><b>&minus;o,
&minus;&minus;owner</b></p>

<p style="margin-left:22%;">This option causes rsync to set
the owner of the destination file to be the same as the
source file, but only if the receiving rsync is being run as
the super&minus;user (see also the
<b>&minus;&minus;super</b> and
<b>&minus;&minus;fake&minus;super</b> options). Without this
option, the owner of new and/or transferred files are set to
the invoking user on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of ownership will associate matching names by
default, but may fall back to using the ID number in some
circumstances (see also the
<b>&minus;&minus;numeric&minus;ids</b> option for a full
discussion).</p>

<p style="margin-left:11%;"><b>&minus;g,
&minus;&minus;group</b></p>

<p style="margin-left:22%;">This option causes rsync to set
the group of the destination file to be the same as the
source file. If the receiving program is not running as the
super&minus;user (or if <b>&minus;&minus;no&minus;super</b>
was specified), only groups that the invoking user on the
receiving side is a member of will be preserved. Without
this option, the group is set to the default group of the
invoking user on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">The
preservation of group information will associate matching
names by default, but may fall back to using the ID number
in some circumstances (see also the
<b>&minus;&minus;numeric&minus;ids</b> option for a full
discussion).</p>


<p style="margin-left:11%;"><b>&minus;&minus;devices</b></p>

<p style="margin-left:22%;">This option causes rsync to
transfer character and block device files to the remote
system to recreate these devices. This option has no effect
if the receiving rsync is not run as the super&minus;user
(see also the <b>&minus;&minus;super</b> and
<b>&minus;&minus;fake&minus;super</b> options).</p>


<p style="margin-left:11%;"><b>&minus;&minus;specials</b></p>

<p style="margin-left:22%;">This option causes rsync to
transfer special files such as named sockets and fifos.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;D</b> option is equivalent to
<b>&minus;&minus;devices &minus;&minus;specials</b>.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;t,
&minus;&minus;times</b></p>

<p style="margin-left:22%;">This tells rsync to transfer
modification times along with the files and update them on
the remote system. Note that if this option is not used, the
optimization that excludes files that have not been modified
cannot be effective; in other words, a missing
<b>&minus;t</b> or <b>&minus;a</b> will cause the next
transfer to behave as if it used <b>&minus;I</b>, causing
all files to be updated (though rsync&rsquo;s
delta&minus;transfer algorithm will make the update fairly
efficient if the files haven&rsquo;t actually changed,
you&rsquo;re much better off using <b>&minus;t</b>).</p>

<p style="margin-left:11%;"><b>&minus;O,
&minus;&minus;omit&minus;dir&minus;times</b></p>

<p style="margin-left:22%;">This tells rsync to omit
directories when it is preserving modification times (see
<b>&minus;&minus;times</b>). If NFS is sharing the
directories on the receiving side, it is a good idea to use
<b>&minus;O</b>. This option is inferred if you use
<b>&minus;&minus;backup</b> without
<b>&minus;&minus;backup&minus;dir</b>.</p>

<p style="margin-left:11%;"><b>&minus;&minus;super</b></p>

<p style="margin-left:22%;">This tells the receiving side
to attempt super&minus;user activities even if the receiving
rsync wasn&rsquo;t run by the super&minus;user. These
activities include: preserving users via the
<b>&minus;&minus;owner</b> option, preserving all groups
(not just the current user&rsquo;s groups) via the
<b>&minus;&minus;groups</b> option, and copying devices via
the <b>&minus;&minus;devices</b> option. This is useful for
systems that allow such activities without being the
super&minus;user, and also for ensuring that you will get
errors if the receiving side isn&rsquo;t being run as the
super&minus;user. To turn off super&minus;user activities,
the super&minus;user can use
<b>&minus;&minus;no&minus;super</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;fake&minus;super</b></p>

<p style="margin-left:22%;">When this option is enabled,
rsync simulates super&minus;user activities by
saving/restoring the privileged attributes via special
extended attributes that are attached to each file (as
needed). This includes the file&rsquo;s owner and group (if
it is not the default), the file&rsquo;s device info (device
&amp; special files are created as empty text files), and
any permission bits that we won&rsquo;t allow to be set on
the real file (e.g. the real file gets
u&minus;s,g&minus;s,o&minus;t for safety) or that would
limit the owner&rsquo;s access (since the real
super&minus;user can always access/change a file, the files
we create can always be accessed/changed by the creating
user). This option also handles ACLs (if
<b>&minus;&minus;acls</b> was specified) and non&minus;user
extended attributes (if <b>&minus;&minus;xattrs</b> was
specified).</p>

<p style="margin-left:22%; margin-top: 1em">This is a good
way to backup data without using a super&minus;user, and to
store ACLs from incompatible systems.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;&minus;fake&minus;super</b> option only affects
the side where the option is used. To affect the remote side
of a remote&minus;shell connection, specify an rsync
path:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av &minus;&minus;rsync&minus;path=&quot;rsync
&minus;&minus;fake&minus;super&quot; /src/
host:/dest/</tt></p>

<p style="margin-left:22%; margin-top: 1em">Since there is
only one &quot;side&quot; in a local copy, this option
affects both the sending and receiving of files.
You&rsquo;ll need to specify a copy using
&quot;localhost&quot; if you need to avoid this, possibly
using the &quot;lsh&quot; shell script (from the support
directory) as a substitute for an actual remote shell (see
<b>&minus;&minus;rsh</b>).</p>

<p style="margin-left:22%; margin-top: 1em">This option is
overridden by both <b>&minus;&minus;super</b> and
<b>&minus;&minus;no&minus;super</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
&quot;fake super&quot; setting in the daemon&rsquo;s
rsyncd.conf file.</p>

<p style="margin-left:11%;"><b>&minus;S,
&minus;&minus;sparse</b></p>

<p style="margin-left:22%;">Try to handle sparse files
efficiently so they take up less space on the destination.
Conflicts with <b>&minus;&minus;inplace</b> because
it&rsquo;s not possible to overwrite data in a sparse
fashion.</p>

<p style="margin-left:11%;"><b>&minus;n,
&minus;&minus;dry&minus;run</b></p>

<p style="margin-left:22%;">This makes rsync perform a
trial run that doesn&rsquo;t make any changes (and produces
mostly the same output as a real run). It is most commonly
used in combination with the <b>&minus;v,
&minus;&minus;verbose</b> and/or <b>&minus;i,
&minus;&minus;itemize&minus;changes</b> options to see what
an rsync command is going to do before one actually runs
it.</p>

<p style="margin-left:22%; margin-top: 1em">The output of
<b>&minus;&minus;itemize&minus;changes</b> is supposed to be
exactly the same on a dry run and a subsequent real run
(barring intentional trickery and system call failures); if
it isn&rsquo;t, that&rsquo;s a bug. Other output should be
mostly unchanged, but may differ in some areas. Notably, a
dry run does not send the actual data for file transfers, so
<b>&minus;&minus;progress</b> has no effect, the &quot;bytes
sent&quot;, &quot;bytes received&quot;, &quot;literal
data&quot;, and &quot;matched data&quot; statistics are too
small, and the &quot;speedup&quot; value is equivalent to a
run where no file transfers were needed.</p>

<p style="margin-left:11%;"><b>&minus;W,
&minus;&minus;whole&minus;file</b></p>

<p style="margin-left:22%;">With this option rsync&rsquo;s
delta&minus;transfer algorithm is not used and the whole
file is sent as&minus;is instead. The transfer may be faster
if this option is used when the bandwidth between the source
and destination machines is higher than the bandwidth to
disk (especially when the &quot;disk&quot; is actually a
networked filesystem). This is the default when both the
source and destination are specified as local paths, but
only if no batch&minus;writing option is in effect.</p>

<p style="margin-left:11%;"><b>&minus;x,
&minus;&minus;one&minus;file&minus;system</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
crossing a filesystem boundary when recursing. This does not
limit the user&rsquo;s ability to specify items to copy from
multiple filesystems, just rsync&rsquo;s recursion through
the hierarchy of each directory that the user specified, and
also the analogous recursion on the receiving side during
deletion. Also keep in mind that rsync treats a
&quot;bind&quot; mount to the same device as being on the
same filesystem.</p>

<p style="margin-left:22%; margin-top: 1em">If this option
is repeated, rsync omits all mount&minus;point directories
from the copy. Otherwise, it includes an empty directory at
each mount&minus;point it encounters (using the attributes
of the mounted directory because those of the underlying
mount&minus;point directory are inaccessible).</p>

<p style="margin-left:22%; margin-top: 1em">If rsync has
been told to collapse symlinks (via
<b>&minus;&minus;copy&minus;links</b> or
<b>&minus;&minus;copy&minus;unsafe&minus;links</b>), a
symlink to a directory on another device is treated like a
mount&minus;point. Symlinks to non&minus;directories are
unaffected by this option.</p>

<p style="margin-left:11%;"><b>&minus;&minus;existing,
&minus;&minus;ignore&minus;non&minus;existing</b></p>

<p style="margin-left:22%;">This tells rsync to skip
creating files (including directories) that do not exist yet
on the destination. If this option is combined with the
<b>&minus;&minus;ignore&minus;existing</b> option, no files
will be updated (which can be useful if all you want to do
is delete extraneous files).</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file&minus;lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ignore&minus;existing</b></p>

<p style="margin-left:22%;">This tells rsync to skip
updating files that already exist on the destination (this
does <i>not</i> ignore existing directories, or nothing
would get done). See also <b>&minus;&minus;existing</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file&minus;lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be useful for those doing backups using the
<b>&minus;&minus;link&minus;dest</b> option when they need
to continue a backup run that got interrupted. Since a
<b>&minus;&minus;link&minus;dest</b> run is copied into a
new directory hierarchy (when it is used properly), using
<b>&minus;&minus;ignore existing</b> will ensure that the
already&minus;handled files don&rsquo;t get tweaked (which
avoids a change in permissions on the hard&minus;linked
files). This does mean that this option is only looking at
the existing files in the destination hierarchy itself.</p>


<p style="margin-left:11%;"><b>&minus;&minus;remove&minus;source&minus;files</b></p>

<p style="margin-left:22%;">This tells rsync to remove from
the sending side the files (meaning non&minus;directories)
that are a part of the transfer and have been successfully
duplicated on the receiving side.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
should only use this option on source files that are
quiescent. If you are using this to move files that show up
in a particular directory over to another host, make sure
that the finished files get renamed into the source
directory, not directly written into it, so that rsync
can&rsquo;t possibly transfer a file that is not yet fully
written. If you can&rsquo;t first write the files into a
different directory, you should use a naming idiom that lets
rsync avoid transferring files that are not yet finished
(e.g. name the file &quot;foo.new&quot; when it is written,
rename it to &quot;foo&quot; when it is done, and then use
the option <b>&minus;&minus;exclude=&rsquo;*.new&rsquo;</b>
for the rsync transfer).</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete</b></p>

<p style="margin-left:22%;">This tells rsync to delete
extraneous files from the receiving side (ones that
aren&rsquo;t on the sending side), but only for the
directories that are being synchronized. You must have asked
rsync to send the whole directory (e.g. &quot;dir&quot; or
&quot;dir/&quot;) without using a wildcard for the
directory&rsquo;s contents (e.g. &quot;dir/*&quot;) since
the wildcard is expanded by the shell and rsync thus gets a
request to transfer individual files, not the files&rsquo;
parent directory. Files that are excluded from the transfer
are also excluded from being deleted unless you use the
<b>&minus;&minus;delete&minus;excluded</b> option or mark
the rules as only matching on the sending side (see the
include/exclude modifiers in the FILTER RULES section).</p>

<p style="margin-left:22%; margin-top: 1em">Prior to rsync
2.6.7, this option would have no effect unless
<b>&minus;&minus;recursive</b> was enabled. Beginning with
2.6.7, deletions will also occur when
<b>&minus;&minus;dirs</b> (<b>&minus;d</b>) is enabled, but
only for directories whose contents are being copied.</p>

<p style="margin-left:22%; margin-top: 1em">This option can
be dangerous if used incorrectly! It is a very good idea to
first try a run using the <b>&minus;&minus;dry&minus;run</b>
option (<b>&minus;n</b>) to see what files are going to be
deleted.</p>

<p style="margin-left:22%; margin-top: 1em">If the sending
side detects any I/O errors, then the deletion of any files
at the destination will be automatically disabled. This is
to prevent temporary filesystem failures (such as NFS
errors) on the sending side from causing a massive deletion
of files on the destination. You can override this with the
<b>&minus;&minus;ignore&minus;errors</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">The
<b>&minus;&minus;delete</b> option may be combined with one
of the &minus;&minus;delete&minus;WHEN options without
conflict, as well as
<b>&minus;&minus;delete&minus;excluded</b>. However, if none
of the &minus;&minus;delete&minus;WHEN options are
specified, rsync will choose the
<b>&minus;&minus;delete&minus;during</b> algorithm when
talking to rsync 3.0.0 or newer, and the
<b>&minus;&minus;delete&minus;before</b> algorithm when
talking to an older rsync. See also
<b>&minus;&minus;delete&minus;delay</b> and
<b>&minus;&minus;delete&minus;after</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete&minus;before</b></p>

<p style="margin-left:22%;">Request that the
file&minus;deletions on the receiving side be done before
the transfer starts. See <b>&minus;&minus;delete</b> (which
is implied) for more details on file&minus;deletion.</p>

<p style="margin-left:22%; margin-top: 1em">Deleting before
the transfer is helpful if the filesystem is tight for space
and removing extraneous files would help to make the
transfer possible. However, it does introduce a delay before
the start of the transfer, and this delay might cause the
transfer to timeout (if <b>&minus;&minus;timeout</b> was
specified). It also forces rsync to use the old,
non&minus;incremental recursion algorithm that requires
rsync to scan all the files in the transfer into memory at
once (see <b>&minus;&minus;recursive</b>).</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete&minus;during,
&minus;&minus;del</b></p>

<p style="margin-left:22%;">Request that the
file&minus;deletions on the receiving side be done
incrementally as the transfer happens. The
per&minus;directory delete scan is done right before each
directory is checked for updates, so it behaves like a more
efficient <b>&minus;&minus;delete&minus;before</b>,
including doing the deletions prior to any
per&minus;directory filter files being updated. This option
was first added in rsync version 2.6.4. See
<b>&minus;&minus;delete</b> (which is implied) for more
details on file&minus;deletion.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete&minus;delay</b></p>

<p style="margin-left:22%;">Request that the
file&minus;deletions on the receiving side be computed
during the transfer (like
<b>&minus;&minus;delete&minus;during</b>), and then removed
after the transfer completes. This is useful when combined
with <b>&minus;&minus;delay&minus;updates</b> and/or
<b>&minus;&minus;fuzzy</b>, and is more efficient than using
<b>&minus;&minus;delete&minus;after</b> (but can behave
differently, since <b>&minus;&minus;delete&minus;after</b>
computes the deletions in a separate pass after all updates
are done). If the number of removed files overflows an
internal buffer, a temporary file will be created on the
receiving side to hold the names (it is removed while open,
so you shouldn&rsquo;t see it during the transfer). If the
creation of the temporary file fails, rsync will try to fall
back to using <b>&minus;&minus;delete&minus;after</b> (which
it cannot do if <b>&minus;&minus;recursive</b> is doing an
incremental scan). See <b>&minus;&minus;delete</b> (which is
implied) for more details on file&minus;deletion.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete&minus;after</b></p>

<p style="margin-left:22%;">Request that the
file&minus;deletions on the receiving side be done after the
transfer has completed. This is useful if you are sending
new per&minus;directory merge files as a part of the
transfer and you want their exclusions to take effect for
the delete phase of the current transfer. It also forces
rsync to use the old, non&minus;incremental recursion
algorithm that requires rsync to scan all the files in the
transfer into memory at once (see
<b>&minus;&minus;recursive</b>). See
<b>&minus;&minus;delete</b> (which is implied) for more
details on file&minus;deletion.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delete&minus;excluded</b></p>

<p style="margin-left:22%;">In addition to deleting the
files on the receiving side that are not on the sending
side, this tells rsync to also delete any files on the
receiving side that are excluded (see
<b>&minus;&minus;exclude</b>). See the FILTER RULES section
for a way to make individual exclusions behave this way on
the receiver, and for a way to protect files from
<b>&minus;&minus;delete&minus;excluded</b>. See
<b>&minus;&minus;delete</b> (which is implied) for more
details on file&minus;deletion.</p>


<p style="margin-left:11%;"><b>&minus;&minus;ignore&minus;errors</b></p>

<p style="margin-left:22%;">Tells
<b>&minus;&minus;delete</b> to go ahead and delete files
even when there are I/O errors.</p>

<p style="margin-left:11%;"><b>&minus;&minus;force</b></p>

<p style="margin-left:22%;">This option tells rsync to
delete a non&minus;empty directory when it is to be replaced
by a non&minus;directory. This is only relevant if deletions
are not active (see <b>&minus;&minus;delete</b> for
details).</p>

<p style="margin-left:22%; margin-top: 1em">Note for older
rsync versions: <b>&minus;&minus;force</b> used to still be
required when using <b>&minus;&minus;delete&minus;after</b>,
and it used to be non&minus;functional unless the
<b>&minus;&minus;recursive</b> option was also enabled.</p>


<p style="margin-left:11%;"><b>&minus;&minus;max&minus;delete=NUM</b></p>

<p style="margin-left:22%;">This tells rsync not to delete
more than NUM files or directories. If that limit is
exceeded, a warning is output and rsync exits with an error
code of 25 (new for 3.0.0).</p>

<p style="margin-left:22%; margin-top: 1em">Also new for
version 3.0.0, you may specify
<b>&minus;&minus;max&minus;delete=0</b> to be warned about
any extraneous files in the destination without removing any
of them. Older clients interpreted this as
&quot;unlimited&quot;, so if you don&rsquo;t know what
version the client is, you can use the less obvious
<b>&minus;&minus;max&minus;delete=&minus;1</b> as a
backward&minus;compatible way to specify that no deletions
be allowed (though older versions didn&rsquo;t warn when the
limit was exceeded).</p>


<p style="margin-left:11%;"><b>&minus;&minus;max&minus;size=SIZE</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
transferring any file that is larger than the specified
SIZE. The SIZE value can be suffixed with a string to
indicate a size multiplier, and may be a fractional value
(e.g.
&quot;<b>&minus;&minus;max&minus;size=1.5m</b>&quot;).</p>

<p style="margin-left:22%; margin-top: 1em">This option is
a transfer rule, not an exclude, so it doesn&rsquo;t affect
the data that goes into the file&minus;lists, and thus it
doesn&rsquo;t affect deletions. It just limits the files
that the receiver requests to be transferred.</p>

<p style="margin-left:22%; margin-top: 1em">The suffixes
are as follows: &quot;K&quot; (or &quot;KiB&quot;) is a
kibibyte (1024), &quot;M&quot; (or &quot;MiB&quot;) is a
mebibyte (1024*1024), and &quot;G&quot; (or &quot;GiB&quot;)
is a gibibyte (1024*1024*1024). If you want the multiplier
to be 1000 instead of 1024, use &quot;KB&quot;,
&quot;MB&quot;, or &quot;GB&quot;. (Note: lower&minus;case
is also accepted for all values.) Finally, if the suffix
ends in either &quot;+1&quot; or &quot;&minus;1&quot;, the
value will be offset by one byte in the indicated
direction.</p>

<p style="margin-left:22%; margin-top: 1em">Examples:
&minus;&minus;max&minus;size=1.5mb&minus;1 is 1499999 bytes,
and &minus;&minus;max&minus;size=2g+1 is 2147483649
bytes.</p>


<p style="margin-left:11%;"><b>&minus;&minus;min&minus;size=SIZE</b></p>

<p style="margin-left:22%;">This tells rsync to avoid
transferring any file that is smaller than the specified
SIZE, which can help in not transferring small, junk files.
See the <b>&minus;&minus;max&minus;size</b> option for a
description of SIZE and other information.</p>

<p style="margin-left:11%;"><b>&minus;B,
&minus;&minus;block&minus;size=BLOCKSIZE</b></p>

<p style="margin-left:22%;">This forces the block size used
in rsync&rsquo;s delta&minus;transfer algorithm to a fixed
value. It is normally selected based on the size of each
file being updated. See the technical report for
details.</p>

<p style="margin-left:11%;"><b>&minus;e,
&minus;&minus;rsh=COMMAND</b></p>

<p style="margin-left:22%;">This option allows you to
choose an alternative remote shell program to use for
communication between the local and remote copies of rsync.
Typically, rsync is configured to use ssh by default, but
you may prefer to use rsh on a local network.</p>

<p style="margin-left:22%; margin-top: 1em">If this option
is used with <b>[user@]host::module/path</b>, then the
remote shell <i>COMMAND</i> will be used to run an rsync
daemon on the remote host, and all data will be transmitted
through that remote shell connection, rather than through a
direct socket connection to a running rsync daemon on the
remote host. See the section &quot;USING RSYNC&minus;DAEMON
FEATURES VIA A REMOTE&minus;SHELL CONNECTION&quot;
above.</p>


<p style="margin-left:22%; margin-top: 1em">Command&minus;line
arguments are permitted in COMMAND provided that COMMAND is
presented to rsync as a single argument. You must use spaces
(not tabs or other whitespace) to separate the command and
args from each other, and you can use single&minus; and/or
double&minus;quotes to preserve spaces in an argument (but
not backslashes). Note that doubling a single&minus;quote
inside a single&minus;quoted string gives you a
single&minus;quote; likewise for double&minus;quotes (though
you need to pay attention to which quotes your shell is
parsing and which quotes rsync is parsing). Some
examples:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>&minus;e
&rsquo;ssh &minus;p 2234&rsquo; <br>
&minus;e &rsquo;ssh &minus;o &quot;ProxyCommand nohup ssh
firewall nc &minus;w1 %h %p&quot;&rsquo;</tt></p>

<p style="margin-left:22%; margin-top: 1em">(Note that ssh
users can alternately customize site&minus;specific connect
options in their .ssh/config file.)</p>

<p style="margin-left:22%; margin-top: 1em">You can also
choose the remote shell program using the RSYNC_RSH
environment variable, which accepts the same range of values
as <b>&minus;e</b>.</p>

<p style="margin-left:22%; margin-top: 1em">See also the
<b>&minus;&minus;blocking&minus;io</b> option which is
affected by this option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;rsync&minus;path=PROGRAM</b></p>

<p style="margin-left:22%;">Use this to specify what
program is to be run on the remote machine to start&minus;up
rsync. Often used when rsync is not in the default
remote&minus;shell&rsquo;s path (e.g.
&minus;&minus;rsync&minus;path=/usr/local/bin/rsync). Note
that PROGRAM is run with the help of a shell, so it can be
any program, script, or command sequence you&rsquo;d care to
run, so long as it does not corrupt the standard&minus;in
&amp; standard&minus;out that rsync is using to
communicate.</p>

<p style="margin-left:22%; margin-top: 1em">One tricky
example is to set a different default directory on the
remote machine for use with the
<b>&minus;&minus;relative</b> option. For instance:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avR &minus;&minus;rsync&minus;path=&quot;cd /a/b
&amp;&amp; rsync&quot; host:c/d /e/</tt></p>

<p style="margin-left:11%;"><b>&minus;C,
&minus;&minus;cvs&minus;exclude</b></p>

<p style="margin-left:22%;">This is a useful shorthand for
excluding a broad range of files that you often don&rsquo;t
want to transfer between systems. It uses a similar
algorithm to CVS to determine if a file should be
ignored.</p>

<p style="margin-left:22%; margin-top: 1em">The exclude
list is initialized to exclude the following items (these
initial items are marked as perishable &minus;&minus; see
the FILTER RULES section):</p>

<p style="margin-left:32%; margin-top: 1em"><tt>RCS SCCS
CVS CVS.adm RCSLOG cvslog.* tags TAGS .make.state
.nse_depinfo *~ #* .#* ,* _$* *$ *.old *.bak *.BAK *.orig
*.rej .del&minus;* *.a *.olb *.o *.obj *.so *.exe *.Z *.elc
*.ln core .svn/ .git/ .hg/ .bzr/</tt></p>

<p style="margin-left:22%; margin-top: 1em">then, files
listed in a $HOME/.cvsignore are added to the list and any
files listed in the CVSIGNORE environment variable (all
cvsignore names are delimited by whitespace).</p>

<p style="margin-left:22%; margin-top: 1em">Finally, any
file is ignored if it is in the same directory as a
.cvsignore file and matches one of the patterns listed
therein. Unlike rsync&rsquo;s filter/exclude files, these
patterns are split on whitespace. See the <b>cvs</b>(1)
manual for more information.</p>

<p style="margin-left:22%; margin-top: 1em">If you&rsquo;re
combining <b>&minus;C</b> with your own
<b>&minus;&minus;filter</b> rules, you should note that
these CVS excludes are appended at the end of your own
rules, regardless of where the <b>&minus;C</b> was placed on
the command&minus;line. This makes them a lower priority
than any rules you specified explicitly. If you want to
control where these CVS excludes get inserted into your
filter rules, you should omit the <b>&minus;C</b> as a
command&minus;line option and use a combination of
<b>&minus;&minus;filter=:C</b> and
<b>&minus;&minus;filter=&minus;C</b> (either on your
command&minus;line or by putting the &quot;:C&quot; and
&quot;&minus;C&quot; rules into a filter file with your
other rules). The first option turns on the
per&minus;directory scanning for the .cvsignore file. The
second option does a one&minus;time import of the CVS
excludes mentioned above.</p>

<p style="margin-left:11%;"><b>&minus;f,
&minus;&minus;filter=RULE</b></p>

<p style="margin-left:22%;">This option allows you to add
rules to selectively exclude certain files from the list of
files to be transferred. This is most useful in combination
with a recursive transfer.</p>

<p style="margin-left:22%; margin-top: 1em">You may use as
many <b>&minus;&minus;filter</b> options on the command line
as you like to build up the list of files to exclude. If the
filter contains whitespace, be sure to quote it so that the
shell gives the rule to rsync as a single argument. The text
below also mentions that you can use an underscore to
replace the space that separates a rule from its arg.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;F</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;F</b> option is a shorthand for adding two
<b>&minus;&minus;filter</b> rules to your command. The first
time it is used is a shorthand for this rule:</p></td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em"><tt>&minus;&minus;filter=&rsquo;dir&minus;merge
/.rsync&minus;filter&rsquo;</tt></p>

<p style="margin-left:22%; margin-top: 1em">This tells
rsync to look for per&minus;directory .rsync&minus;filter
files that have been sprinkled through the hierarchy and use
their rules to filter the files in the transfer. If
<b>&minus;F</b> is repeated, it is a shorthand for this
rule:</p>


<p style="margin-left:22%; margin-top: 1em"><tt>&minus;&minus;filter=&rsquo;exclude
.rsync&minus;filter&rsquo;</tt></p>

<p style="margin-left:22%; margin-top: 1em">This filters
out the .rsync&minus;filter files themselves from the
transfer.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on how these options
work.</p>


<p style="margin-left:11%;"><b>&minus;&minus;exclude=PATTERN</b></p>

<p style="margin-left:22%;">This option is a simplified
form of the <b>&minus;&minus;filter</b> option that defaults
to an exclude rule and does not allow the full
rule&minus;parsing syntax of normal filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;exclude&minus;from=FILE</b></p>

<p style="margin-left:22%;">This option is related to the
<b>&minus;&minus;exclude</b> option, but it specifies a FILE
that contains exclude patterns (one per line). Blank lines
in the file and lines starting with &rsquo;;&rsquo; or
&rsquo;#&rsquo; are ignored. If <i>FILE</i> is
<b>&minus;</b>, the list will be read from standard
input.</p>


<p style="margin-left:11%;"><b>&minus;&minus;include=PATTERN</b></p>

<p style="margin-left:22%;">This option is a simplified
form of the <b>&minus;&minus;filter</b> option that defaults
to an include rule and does not allow the full
rule&minus;parsing syntax of normal filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">See the FILTER
RULES section for detailed information on this option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;include&minus;from=FILE</b></p>

<p style="margin-left:22%;">This option is related to the
<b>&minus;&minus;include</b> option, but it specifies a FILE
that contains include patterns (one per line). Blank lines
in the file and lines starting with &rsquo;;&rsquo; or
&rsquo;#&rsquo; are ignored. If <i>FILE</i> is
<b>&minus;</b>, the list will be read from standard
input.</p>


<p style="margin-left:11%;"><b>&minus;&minus;files&minus;from=FILE</b></p>

<p style="margin-left:22%;">Using this option allows you to
specify the exact list of files to transfer (as read from
the specified FILE or <b>&minus;</b> for standard input). It
also tweaks the default behavior of rsync to make
transferring just the specified files and directories
easier:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>&minus;&minus;relative</b> (<b>&minus;R</b>)
option is implied, which preserves the path information that
is specified for each item in the file (use
<b>&minus;&minus;no&minus;relative</b> or
<b>&minus;&minus;no&minus;R</b> if you want to turn that
off).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>&minus;&minus;dirs</b> (<b>&minus;d</b>) option
is implied, which will create directories specified in the
list on the destination rather than noisily skipping them
(use <b>&minus;&minus;no&minus;dirs</b> or
<b>&minus;&minus;no&minus;d</b> if you want to turn that
off).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>&minus;&minus;archive</b> (<b>&minus;a</b>)
option&rsquo;s behavior does not imply
<b>&minus;&minus;recursive</b> (<b>&minus;r</b>), so specify
it explicitly, if you want it.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>These side&minus;effects change the default state of
rsync, so the position of the
<b>&minus;&minus;files&minus;from</b> option on the
command&minus;line has no bearing on how other options are
parsed (e.g. <b>&minus;a</b> works the same before or after
<b>&minus;&minus;files&minus;from</b>, as does
<b>&minus;&minus;no&minus;R</b> and all other options).</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The filenames
that are read from the FILE are all relative to the source
dir &minus;&minus; any leading slashes are removed and no
&quot;..&quot; references are allowed to go higher than the
source dir. For example, take this command:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;a &minus;&minus;files&minus;from=/tmp/foo /usr
remote:/backup</tt></p>

<p style="margin-left:22%; margin-top: 1em">If /tmp/foo
contains the string &quot;bin&quot; (or even
&quot;/bin&quot;), the /usr/bin directory will be created as
/backup/bin on the remote host. If it contains
&quot;bin/&quot; (note the trailing slash), the immediate
contents of the directory would also be sent (without
needing to be explicitly mentioned in the file
&minus;&minus; this began in version 2.6.4). In both cases,
if the <b>&minus;r</b> option was enabled, that dir&rsquo;s
entire hierarchy would also be transferred (keep in mind
that <b>&minus;r</b> needs to be specified explicitly with
<b>&minus;&minus;files&minus;from</b>, since it is not
implied by <b>&minus;a</b>). Also note that the effect of
the (enabled by default) <b>&minus;&minus;relative</b>
option is to duplicate only the path info that is read from
the file &minus;&minus; it does not force the duplication of
the source&minus;spec path (/usr in this case).</p>

<p style="margin-left:22%; margin-top: 1em">In addition,
the <b>&minus;&minus;files&minus;from</b> file can be read
from the remote host instead of the local host if you
specify a &quot;host:&quot; in front of the file (the host
must match one end of the transfer). As a short&minus;cut,
you can specify just a prefix of &quot;:&quot; to mean
&quot;use the remote end of the transfer&quot;. For
example:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;a
&minus;&minus;files&minus;from=:/path/file&minus;list src:/
/tmp/copy</tt></p>

<p style="margin-left:22%; margin-top: 1em">This would copy
all the files specified in the /path/file&minus;list file
that was located on the remote &quot;src&quot; host.</p>

<p style="margin-left:22%; margin-top: 1em">If the
<b>&minus;&minus;iconv</b> and
<b>&minus;&minus;protect&minus;args</b> options are
specified and the <b>&minus;&minus;files&minus;from</b>
filenames are being sent from one host to another, the
filenames will be translated from the sending host&rsquo;s
charset to the receiving host&rsquo;s charset.</p>

<p style="margin-left:22%; margin-top: 1em">NOTE: sorting
the list of files in the &minus;&minus;files&minus;from
input helps rsync to be more efficient, as it will avoid
re&minus;visiting the path elements that are shared between
adjacent entries. If the input is not sorted, some path
elements (implied directories) may end up being scanned
multiple times, and rsync will eventually unduplicate them
after they get turned into file&minus;list elements.</p>

<p style="margin-left:11%;"><b>&minus;0,
&minus;&minus;from0</b></p>

<p style="margin-left:22%;">This tells rsync that the
rules/filenames it reads from a file are terminated by a
null (&rsquo;\0&rsquo;) character, not a NL, CR, or CR+LF.
This affects <b>&minus;&minus;exclude&minus;from</b>,
<b>&minus;&minus;include&minus;from</b>,
<b>&minus;&minus;files&minus;from</b>, and any merged files
specified in a <b>&minus;&minus;filter</b> rule. It does not
affect <b>&minus;&minus;cvs&minus;exclude</b> (since all
names read from a .cvsignore file are split on
whitespace).</p>

<p style="margin-left:11%;"><b>&minus;s,
&minus;&minus;protect&minus;args</b></p>

<p style="margin-left:22%;">This option sends all filenames
and most options to the remote rsync without allowing the
remote shell to interpret them. This means that spaces are
not split in names, and any non&minus;wildcard special
characters are not translated (such as ~, $, ;, &amp;,
etc.). Wildcards are expanded on the remote host by rsync
(instead of the shell doing it).</p>

<p style="margin-left:22%; margin-top: 1em">If you use this
option with <b>&minus;&minus;iconv</b>, the args related to
the remote side will also be translated from the local to
the remote character&minus;set. The translation happens
before wild&minus;cards are expanded. See also the
<b>&minus;&minus;files&minus;from</b> option.</p>

<p style="margin-left:11%;"><b>&minus;T,
&minus;&minus;temp&minus;dir=DIR</b></p>

<p style="margin-left:22%;">This option instructs rsync to
use DIR as a scratch directory when creating temporary
copies of the files transferred on the receiving side. The
default behavior is to create each temporary file in the
same directory as the associated destination file.</p>

<p style="margin-left:22%; margin-top: 1em">This option is
most often used when the receiving disk partition does not
have enough free space to hold a copy of the largest file in
the transfer. In this case (i.e. when the scratch directory
is on a different disk partition), rsync will not be able to
rename each received temporary file over the top of the
associated destination file, but instead must copy it into
place. Rsync does this by copying the file over the top of
the destination file, which means that the destination file
will contain truncated data during this copy. If this were
not done this way (even if the destination file were first
removed, the data locally copied to a temporary file in the
destination directory, and then renamed into place) it would
be possible for the old file to continue taking up disk
space (if someone had it open), and thus there might not be
enough room to fit the new version on the disk at the same
time.</p>

<p style="margin-left:22%; margin-top: 1em">If you are
using this option for reasons other than a shortage of disk
space, you may wish to combine it with the
<b>&minus;&minus;delay&minus;updates</b> option, which will
ensure that all copied files get put into subdirectories in
the destination hierarchy, awaiting the end of the transfer.
If you don&rsquo;t have enough room to duplicate all the
arriving files on the destination partition, another way to
tell rsync that you aren&rsquo;t overly concerned about disk
space is to use the <b>&minus;&minus;partial&minus;dir</b>
option with a relative path; because this tells rsync that
it is OK to stash off a copy of a single file in a subdir in
the destination hierarchy, rsync will use the
partial&minus;dir as a staging area to bring over the copied
file, and then rename it into place from there. (Specifying
a <b>&minus;&minus;partial&minus;dir</b> with an absolute
path does not have this side&minus;effect.)</p>

<p style="margin-left:11%;"><b>&minus;y,
&minus;&minus;fuzzy</b></p>

<p style="margin-left:22%;">This option tells rsync that it
should look for a basis file for any destination file that
is missing. The current algorithm looks in the same
directory as the destination file for either a file that has
an identical size and modified&minus;time, or a
similarly&minus;named file. If found, rsync uses the fuzzy
basis file to try to speed up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
use of the <b>&minus;&minus;delete</b> option might get rid
of any potential fuzzy&minus;match files, so either use
<b>&minus;&minus;delete&minus;after</b> or specify some
filename exclusions if you need to prevent this.</p>


<p style="margin-left:11%;"><b>&minus;&minus;compare&minus;dest=DIR</b></p>

<p style="margin-left:22%;">This option instructs rsync to
use <i>DIR</i> on the destination machine as an additional
hierarchy to compare destination files against doing
transfers (if the files are missing in the destination
directory). If a file is found in <i>DIR</i> that is
identical to the sender&rsquo;s file, the file will NOT be
transferred to the destination directory. This is useful for
creating a sparse backup of just files that have changed
from an earlier backup.</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
version 2.6.4, multiple
<b>&minus;&minus;compare&minus;dest</b> directories may be
provided, which will cause rsync to search the list in the
order specified for an exact match. If a match is found that
differs only in attributes, a local copy is made and the
attributes updated. If a match is not found, a basis file
from one of the <i>DIR</i>s will be selected to try to speed
up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;copy&minus;dest</b> and
<b>&minus;&minus;link&minus;dest</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;copy&minus;dest=DIR</b></p>

<p style="margin-left:22%;">This option behaves like
<b>&minus;&minus;compare&minus;dest</b>, but rsync will also
copy unchanged files found in <i>DIR</i> to the destination
directory using a local copy. This is useful for doing
transfers to a new destination while leaving existing files
intact, and then doing a flash&minus;cutover when all files
have been successfully transferred.</p>

<p style="margin-left:22%; margin-top: 1em">Multiple
<b>&minus;&minus;copy&minus;dest</b> directories may be
provided, which will cause rsync to search the list in the
order specified for an unchanged file. If a match is not
found, a basis file from one of the <i>DIR</i>s will be
selected to try to speed up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;compare&minus;dest</b>
and <b>&minus;&minus;link&minus;dest</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;link&minus;dest=DIR</b></p>

<p style="margin-left:22%;">This option behaves like
<b>&minus;&minus;copy&minus;dest</b>, but unchanged files
are hard linked from <i>DIR</i> to the destination
directory. The files must be identical in all preserved
attributes (e.g. permissions, possibly ownership) in order
for the files to be linked together. An example:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av &minus;&minus;link&minus;dest=$PWD/prior_dir
host:src_dir/ new_dir/</tt></p>

<p style="margin-left:22%; margin-top: 1em">If file&rsquo;s
aren&rsquo;t linking, double&minus;check their attributes.
Also check if some attributes are getting forced outside of
rsync&rsquo;s control, such a mount option that squishes
root to a single user, or mounts a removable drive with
generic ownership (such as OS X&rsquo;s &quot;Ignore
ownership on this volume&quot; option).</p>

<p style="margin-left:22%; margin-top: 1em">Beginning in
version 2.6.4, multiple <b>&minus;&minus;link&minus;dest</b>
directories may be provided, which will cause rsync to
search the list in the order specified for an exact match.
If a match is found that differs only in attributes, a local
copy is made and the attributes updated. If a match is not
found, a basis file from one of the <i>DIR</i>s will be
selected to try to speed up the transfer.</p>

<p style="margin-left:22%; margin-top: 1em">This option
works best when copying into an empty destination hierarchy,
as rsync treats existing files as definitive (so it never
looks in the link&minus;dest dirs when a destination file
already exists), and as malleable (so it might change the
attributes of a destination file, which affects all the
hard&minus;linked versions).</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
you combine this option with
<b>&minus;&minus;ignore&minus;times</b>, rsync will not link
any files together because it only links identical files
together as a substitute for transferring the file, never as
an additional check after the file is updated.</p>

<p style="margin-left:22%; margin-top: 1em">If <i>DIR</i>
is a relative path, it is relative to the destination
directory. See also <b>&minus;&minus;compare&minus;dest</b>
and <b>&minus;&minus;copy&minus;dest</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
versions prior to 2.6.1 had a bug that could prevent
<b>&minus;&minus;link&minus;dest</b> from working properly
for a non&minus;super&minus;user when <b>&minus;o</b> was
specified (or implied by <b>&minus;a</b>). You can
work&minus;around this bug by avoiding the <b>&minus;o</b>
option when sending to an old rsync.</p>

<p style="margin-left:11%;"><b>&minus;z,
&minus;&minus;compress</b></p>

<p style="margin-left:22%;">With this option, rsync
compresses the file data as it is sent to the destination
machine, which reduces the amount of data being transmitted
&minus;&minus; something that is useful over a slow
connection.</p>

<p style="margin-left:22%; margin-top: 1em">Note that this
option typically achieves better compression ratios than can
be achieved by using a compressing remote shell or a
compressing transport because it takes advantage of the
implicit information in the matching data blocks that are
not explicitly sent over the connection.</p>

<p style="margin-left:22%; margin-top: 1em">See the
<b>&minus;&minus;skip&minus;compress</b> option for the
default list of file suffixes that will not be
compressed.</p>


<p style="margin-left:11%;"><b>&minus;&minus;compress&minus;level=NUM</b></p>

<p style="margin-left:22%;">Explicitly set the compression
level to use (see <b>&minus;&minus;compress</b>) instead of
letting it default. If NUM is non&minus;zero, the
<b>&minus;&minus;compress</b> option is implied.</p>


<p style="margin-left:11%;"><b>&minus;&minus;skip&minus;compress=LIST</b></p>

<p style="margin-left:22%;">Override the list of file
suffixes that will not be compressed. The <b>LIST</b> should
be one or more file suffixes (without the dot) separated by
slashes (/).</p>

<p style="margin-left:22%; margin-top: 1em">You may specify
an empty string to indicate that no file should be
skipped.</p>

<p style="margin-left:22%; margin-top: 1em">Simple
character&minus;class matching is supported: each must
consist of a list of letters inside the square brackets
(e.g. no special classes, such as &quot;[:alpha:]&quot;, are
supported, and &rsquo;&minus;&rsquo; has no special
meaning).</p>

<p style="margin-left:22%; margin-top: 1em">The characters
asterisk (*) and question&minus;mark (?) have no special
meaning.</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s an
example that specifies 6 suffixes to skip (since 1 of the 5
rules matches 2 suffixes):</p>


<p style="margin-left:22%; margin-top: 1em">&minus;&minus;skip&minus;compress=gz/jpg/mp[34]/7z/bz2</p>

<p style="margin-left:22%; margin-top: 1em">The default
list of suffixes that will not be compressed is this (in
this version of rsync):</p>

<p style="margin-left:22%; margin-top: 1em"><b>7z avi bz2
deb gz iso jpeg jpg mov mp3 mp4 ogg rpm tbz tgz z
zip</b></p>

<p style="margin-left:22%; margin-top: 1em">This list will
be replaced by your <b>&minus;&minus;skip&minus;compress</b>
list in all but one situation: a copy from a daemon rsync
will add your skipped suffixes to its list of
non&minus;compressing files (and its list may be configured
to a different default).</p>


<p style="margin-left:11%;"><b>&minus;&minus;numeric&minus;ids</b></p>

<p style="margin-left:22%;">With this option rsync will
transfer numeric group and user IDs rather than using user
and group names and mapping them at both ends.</p>

<p style="margin-left:22%; margin-top: 1em">By default
rsync will use the username and groupname to determine what
ownership to give files. The special uid 0 and the special
group 0 are never mapped via user/group names even if the
<b>&minus;&minus;numeric&minus;ids</b> option is not
specified.</p>

<p style="margin-left:22%; margin-top: 1em">If a user or
group has no name on the source system or it has no match on
the destination system, then the numeric ID from the source
system is used instead. See also the comments on the
&quot;use chroot&quot; setting in the rsyncd.conf manpage
for information on how the chroot setting affects
rsync&rsquo;s ability to look up the names of the users and
groups and what you can do about it.</p>


<p style="margin-left:11%;"><b>&minus;&minus;timeout=TIMEOUT</b></p>

<p style="margin-left:22%;">This option allows you to set a
maximum I/O timeout in seconds. If no data is transferred
for the specified time then rsync will exit. The default is
0, which means no timeout.</p>


<p style="margin-left:11%;"><b>&minus;&minus;contimeout</b></p>

<p style="margin-left:22%;">This option allows you to set
the amount of time that rsync will wait for its connection
to an rsync daemon to succeed. If the timeout is reached,
rsync exits with an error.</p>


<p style="margin-left:11%;"><b>&minus;&minus;address</b></p>

<p style="margin-left:22%;">By default rsync will bind to
the wildcard address when connecting to an rsync daemon. The
<b>&minus;&minus;address</b> option allows you to specify a
specific IP address (or hostname) to bind to. See also this
option in the <b>&minus;&minus;daemon</b> mode section.</p>


<p style="margin-left:11%;"><b>&minus;&minus;port=PORT</b></p>

<p style="margin-left:22%;">This specifies an alternate TCP
port number to use rather than the default of 873. This is
only needed if you are using the double&minus;colon (::)
syntax to connect with an rsync daemon (since the URL syntax
has a way to specify the port as a part of the URL). See
also this option in the <b>&minus;&minus;daemon</b> mode
section.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sockopts</b></p>

<p style="margin-left:22%;">This option can provide endless
fun for people who like to tune their systems to the utmost
degree. You can set all sorts of socket options which may
make transfers faster (or slower!). Read the man page for
the <tt>setsockopt()</tt> system call for details on some of
the options you may be able to set. By default no special
socket options are set. This only affects direct socket
connections to a remote rsync daemon. This option also
exists in the <b>&minus;&minus;daemon</b> mode section.</p>


<p style="margin-left:11%;"><b>&minus;&minus;blocking&minus;io</b></p>

<p style="margin-left:22%;">This tells rsync to use
blocking I/O when launching a remote shell transport. If the
remote shell is either rsh or remsh, rsync defaults to using
blocking I/O, otherwise it defaults to using
non&minus;blocking I/O. (Note that ssh prefers
non&minus;blocking I/O.)</p>

<p style="margin-left:11%;"><b>&minus;i,
&minus;&minus;itemize&minus;changes</b></p>

<p style="margin-left:22%;">Requests a simple itemized list
of the changes that are being made to each file, including
attribute changes. This is exactly the same as specifying
<b>&minus;&minus;out&minus;format=&rsquo;%i %n%L&rsquo;</b>.
If you repeat the option, unchanged files will also be
output, but only if the receiving rsync is at least version
2.6.7 (you can use <b>&minus;vv</b> with older versions of
rsync, but that also turns on the output of other verbose
messages).</p>

<p style="margin-left:22%; margin-top: 1em">The
&quot;%i&quot; escape has a cryptic output that is 11
letters long. The general format is like the string
<b>YXcstpoguax</b>, where <b>Y</b> is replaced by the type
of update being done, <b>X</b> is replaced by the
file&minus;type, and the other letters represent attributes
that may be output if they are being modified.</p>

<p style="margin-left:22%; margin-top: 1em">The update
types that replace the <b>Y</b> are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>&lt;</b> means that a file is being transferred to
the remote host (sent).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>&gt;</b> means that a file is being transferred to
the local host (received).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>c</b> means that a local change/creation is
occurring for the item (such as the creation of a directory
or the changing of a symlink, etc.).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>h</b> means that the item is a hard link to another
item (requires <b>&minus;&minus;hard&minus;links</b>).</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>.</b> means that the item is not being updated
(though it might have attributes that are being
modified).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>*</b> means that the rest of the
itemized&minus;output area contains a message (e.g.
&quot;deleting&quot;).</p> </td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">The
file&minus;types that replace the <b>X</b> are: <b>f</b> for
a file, a <b>d</b> for a directory, an <b>L</b> for a
symlink, a <b>D</b> for a device, and a <b>S</b> for a
special file (e.g. named sockets and fifos).</p>

<p style="margin-left:22%; margin-top: 1em">The other
letters in the string above are the actual letters that will
be output if the associated attribute for the item is being
updated or a &quot;.&quot; for no change. Three exceptions
to this are: (1) a newly created item replaces each letter
with a &quot;+&quot;, (2) an identical item replaces the
dots with spaces, and (3) an unknown attribute replaces each
letter with a &quot;?&quot; (this can happen when talking to
an older rsync).</p>

<p style="margin-left:22%; margin-top: 1em">The attribute
that is associated with each letter is as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="9%"></td>
<td width="68%">


<p style="margin-top: 1em">A <b>c</b> means either that a
regular file has a different checksum (requires
<b>&minus;&minus;checksum</b>) or that a symlink, device, or
special file has a changed value. Note that if you are
sending files to an rsync prior to 3.0.1, this change flag
will be present only for checksum&minus;differing regular
files.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>s</b> means the size of a regular file is different
and will be updated by the file transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>t</b> means the modification time is different and
is being updated to the sender&rsquo;s value (requires
<b>&minus;&minus;times</b>). An alternate value of <b>T</b>
means that the modification time will be set to the transfer
time, which happens when a file/symlink/device is updated
without <b>&minus;&minus;times</b> and when a symlink is
changed and the receiver can&rsquo;t set its time. (Note:
when using an rsync 3.0.0 client, you might see the <b>s</b>
flag combined with <b>t</b> instead of the proper <b>T</b>
flag for this time&minus;setting failure.)</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>p</b> means the permissions are different and are
being updated to the sender&rsquo;s value (requires
<b>&minus;&minus;perms</b>).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>An <b>o</b> means the owner is different and is being
updated to the sender&rsquo;s value (requires
<b>&minus;&minus;owner</b> and super&minus;user
privileges).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>A <b>g</b> means the group is different and is being
updated to the sender&rsquo;s value (requires
<b>&minus;&minus;group</b> and the authority to set the
group).</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>u</b> slot is reserved for future use.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>a</b> means that the ACL information changed.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p>The <b>x</b> means that the extended attribute
information changed.</p></td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">One other
output is possible: when deleting files, the &quot;%i&quot;
will output the string &quot;*deleting&quot; for each item
that is being removed (assuming that you are talking to a
recent enough rsync that it logs deletions instead of
outputting them as a verbose message).</p>


<p style="margin-left:11%;"><b>&minus;&minus;out&minus;format=FORMAT</b></p>

<p style="margin-left:22%;">This allows you to specify
exactly what the rsync client outputs to the user on a
per&minus;update basis. The format is a text string
containing embedded single&minus;character escape sequences
prefixed with a percent (%) character. A default format of
&quot;%n%L&quot; is assumed if <b>&minus;v</b> is specified
(which reports the name of the file and, if the item is a
link, where it points). For a full list of the possible
escape characters, see the &quot;log format&quot; setting in
the rsyncd.conf manpage.</p>

<p style="margin-left:22%; margin-top: 1em">Specifying the
<b>&minus;&minus;out&minus;format</b> option will mention
each file, dir, etc. that gets updated in a significant way
(a transferred file, a recreated symlink/device, or a
touched directory). In addition, if the
itemize&minus;changes escape (%i) is included in the string
(e.g. if the <b>&minus;&minus;itemize&minus;changes</b>
option was used), the logging of names increases to mention
any item that is changed in any way (as long as the
receiving side is at least 2.6.4). See the
<b>&minus;&minus;itemize&minus;changes</b> option for a
description of the output of &quot;%i&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">Rsync will
output the out&minus;format string prior to a file&rsquo;s
transfer unless one of the transfer&minus;statistic escapes
is requested, in which case the logging is done at the end
of the file&rsquo;s transfer. When this late logging is in
effect and <b>&minus;&minus;progress</b> is also specified,
rsync will also output the name of the file being
transferred prior to its progress information (followed, of
course, by the out&minus;format output).</p>


<p style="margin-left:11%;"><b>&minus;&minus;log&minus;file=FILE</b></p>

<p style="margin-left:22%;">This option causes rsync to log
what it is doing to a file. This is similar to the logging
that a daemon does, but can be requested for the client side
and/or the server side of a non&minus;daemon transfer. If
specified as a client option, transfer logging will be
enabled with a default format of &quot;%i %n%L&quot;. See
the <b>&minus;&minus;log&minus;file&minus;format</b> option
if you wish to override this.</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s a
example command that requests the remote side to log what is
happening:</p>

<p style="margin-left:22%; margin-top: 1em">rsync &minus;av
&minus;&minus;rsync&minus;path=&quot;rsync
&minus;&minus;log&minus;file=/tmp/rlog&quot; src/ dest/</p>

<p style="margin-left:22%; margin-top: 1em">This is very
useful if you need to debug why a connection is closing
unexpectedly.</p>


<p style="margin-left:11%;"><b>&minus;&minus;log&minus;file&minus;format=FORMAT</b></p>

<p style="margin-left:22%;">This allows you to specify
exactly what per&minus;update logging is put into the file
specified by the <b>&minus;&minus;log&minus;file</b> option
(which must also be specified for this option to have any
effect). If you specify an empty string, updated files will
not be mentioned in the log file. For a list of the possible
escape characters, see the &quot;log format&quot; setting in
the rsyncd.conf manpage.</p>

<p style="margin-left:22%; margin-top: 1em">The default
FORMAT used if <b>&minus;&minus;log&minus;file</b> is
specified and this option is not is &rsquo;%i
%n%L&rsquo;.</p>

<p style="margin-left:11%;"><b>&minus;&minus;stats</b></p>

<p style="margin-left:22%;">This tells rsync to print a
verbose set of statistics on the file transfer, allowing you
to tell how effective rsync&rsquo;s delta&minus;transfer
algorithm is for your data.</p>

<p style="margin-left:22%; margin-top: 1em">The current
statistics are as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Number of files</b> is the count of all
&quot;files&quot; (in the generic sense), which includes
directories, symlinks, etc.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Number of files transferred</b> is the count of
normal files that were updated via rsync&rsquo;s
delta&minus;transfer algorithm, which does not include
created dirs, symlinks, etc.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total file size</b> is the total sum of all file
sizes in the transfer. This does not count any size for
directories or special files, but does include the size of
symlinks.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total transferred file size</b> is the total sum of
all files sizes for just the transferred files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Literal data</b> is how much unmatched
file&minus;update data we had to send to the receiver for it
to recreate the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Matched data</b> is how much data the receiver got
locally when recreating the updated files.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File list size</b> is how big the file&minus;list
data was when the sender sent it to the receiver. This is
smaller than the in&minus;memory size for the file list due
to some compressing of duplicated data when rsync sends the
list.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File list generation time</b> is the number of
seconds that the sender spent creating the file list. This
requires a modern rsync on the sending side for this to be
present.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>File list transfer time</b> is the number of seconds
that the sender spent sending the file list to the
receiver.</p> </td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total bytes sent</b> is the count of all the bytes
that rsync sent from the client side to the server side.</p></td></tr>
<tr valign="top" align="left">
<td width="22%"></td>
<td width="1%">


<p>o</p></td>
<td width="9%"></td>
<td width="68%">


<p><b>Total bytes received</b> is the count of all
non&minus;message bytes that rsync received by the client
side from the server side. &quot;Non&minus;message&quot;
bytes means that we don&rsquo;t count the bytes for a
verbose message that the server sent to us, which makes the
stats more consistent.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;8,
&minus;&minus;8&minus;bit&minus;output</b></p>

<p style="margin-left:22%;">This tells rsync to leave all
high&minus;bit characters unescaped in the output instead of
trying to test them to see if they&rsquo;re valid in the
current locale and escaping the invalid ones. All control
characters (but never tabs) are always escaped, regardless
of this option&rsquo;s setting.</p>

<p style="margin-left:22%; margin-top: 1em">The escape
idiom that started in 2.6.7 is to output a literal backslash
(\) and a hash (#), followed by exactly 3 octal digits. For
example, a newline would output as &quot;\#012&quot;. A
literal backslash that is in a filename is not escaped
unless it is followed by a hash and 3 digits
(0&minus;9).</p>

<p style="margin-left:11%;"><b>&minus;h,
&minus;&minus;human&minus;readable</b></p>

<p style="margin-left:22%;">Output numbers in a more
human&minus;readable format. This makes big numbers output
using larger units, with a K, M, or G suffix. If this option
was specified once, these units are K (1000), M (1000*1000),
and G (1000*1000*1000); if the option is repeated, the units
are powers of 1024 instead of 1000.</p>


<p style="margin-left:11%;"><b>&minus;&minus;partial</b></p>

<p style="margin-left:22%;">By default, rsync will delete
any partially transferred file if the transfer is
interrupted. In some circumstances it is more desirable to
keep partially transferred files. Using the
<b>&minus;&minus;partial</b> option tells rsync to keep the
partial file which should make a subsequent transfer of the
rest of the file much faster.</p>


<p style="margin-left:11%;"><b>&minus;&minus;partial&minus;dir=DIR</b></p>

<p style="margin-left:22%;">A better way to keep partial
files than the <b>&minus;&minus;partial</b> option is to
specify a <i>DIR</i> that will be used to hold the partial
data (instead of writing it out to the destination file). On
the next transfer, rsync will use a file found in this dir
as data to speed up the resumption of the transfer and then
delete it after it has served its purpose.</p>

<p style="margin-left:22%; margin-top: 1em">Note that if
<b>&minus;&minus;whole&minus;file</b> is specified (or
implied), any partial&minus;dir file that is found for a
file that is being updated will simply be removed (since
rsync is sending files without using rsync&rsquo;s
delta&minus;transfer algorithm).</p>

<p style="margin-left:22%; margin-top: 1em">Rsync will
create the <i>DIR</i> if it is missing (just the last dir
&minus;&minus; not the whole path). This makes it easy to
use a relative path (such as
&quot;<b>&minus;&minus;partial&minus;dir=.rsync&minus;partial</b>&quot;)
to have rsync create the partial&minus;directory in the
destination file&rsquo;s directory when needed, and then
remove it again when the partial file is deleted.</p>

<p style="margin-left:22%; margin-top: 1em">If the
partial&minus;dir value is not an absolute path, rsync will
add an exclude rule at the end of all your existing
excludes. This will prevent the sending of any
partial&minus;dir files that may exist on the sending side,
and will also prevent the untimely deletion of
partial&minus;dir items on the receiving side. An example:
the above <b>&minus;&minus;partial&minus;dir</b> option
would add the equivalent of &quot;<b>&minus;f
&rsquo;&minus;p .rsync&minus;partial/&rsquo;</b>&quot; at
the end of any other filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">If you are
supplying your own exclude rules, you may need to add your
own exclude/hide/protect rule for the partial&minus;dir
because (1) the auto&minus;added rule may be ineffective at
the end of your other rules, or (2) you may wish to override
rsync&rsquo;s exclude choice. For instance, if you want to
make rsync clean&minus;up any left&minus;over
partial&minus;dirs that may be lying around, you should
specify <b>&minus;&minus;delete&minus;after</b> and add a
&quot;risk&quot; filter rule, e.g. <b>&minus;f &rsquo;R
.rsync&minus;partial/&rsquo;</b>. (Avoid using
<b>&minus;&minus;delete&minus;before</b> or
<b>&minus;&minus;delete&minus;during</b> unless you
don&rsquo;t need rsync to use any of the left&minus;over
partial&minus;dir data during the current run.)</p>

<p style="margin-left:22%; margin-top: 1em">IMPORTANT: the
<b>&minus;&minus;partial&minus;dir</b> should not be
writable by other users or it is a security risk. E.g. AVOID
&quot;/tmp&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">You can also
set the partial&minus;dir value the RSYNC_PARTIAL_DIR
environment variable. Setting this in the environment does
not force <b>&minus;&minus;partial</b> to be enabled, but
rather it affects where partial files go when
<b>&minus;&minus;partial</b> is specified. For instance,
instead of using
<b>&minus;&minus;partial&minus;dir=.rsync&minus;tmp</b>
along with <b>&minus;&minus;progress</b>, you could set
RSYNC_PARTIAL_DIR=.rsync&minus;tmp in your environment and
then just use the <b>&minus;P</b> option to turn on the use
of the .rsync&minus;tmp dir for partial transfers. The only
times that the <b>&minus;&minus;partial</b> option does not
look for this environment value are (1) when
<b>&minus;&minus;inplace</b> was specified (since
<b>&minus;&minus;inplace</b> conflicts with
<b>&minus;&minus;partial&minus;dir</b>), and (2) when
<b>&minus;&minus;delay&minus;updates</b> was specified (see
below).</p>

<p style="margin-left:22%; margin-top: 1em">For the
purposes of the daemon&minus;config&rsquo;s &quot;refuse
options&quot; setting,
<b>&minus;&minus;partial&minus;dir</b> does <i>not</i> imply
<b>&minus;&minus;partial</b>. This is so that a refusal of
the <b>&minus;&minus;partial</b> option can be used to
disallow the overwriting of destination files with a partial
transfer, while still allowing the safer idiom provided by
<b>&minus;&minus;partial&minus;dir</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;delay&minus;updates</b></p>

<p style="margin-left:22%;">This option puts the temporary
file from each updated file into a holding directory until
the end of the transfer, at which time all the files are
renamed into place in rapid succession. This attempts to
make the updating of the files a little more atomic. By
default the files are placed into a directory named
&quot;.~tmp~&quot; in each file&rsquo;s destination
directory, but if you&rsquo;ve specified the
<b>&minus;&minus;partial&minus;dir</b> option, that
directory will be used instead. See the comments in the
<b>&minus;&minus;partial&minus;dir</b> section for a
discussion of how this &quot;.~tmp~&quot; dir will be
excluded from the transfer, and what you can do if you want
rsync to cleanup old &quot;.~tmp~&quot; dirs that might be
lying around. Conflicts with <b>&minus;&minus;inplace</b>
and <b>&minus;&minus;append</b>.</p>

<p style="margin-left:22%; margin-top: 1em">This option
uses more memory on the receiving side (one bit per file
transferred) and also requires enough free disk space on the
receiving side to hold an additional copy of all the updated
files. Note also that you should not use an absolute path to
<b>&minus;&minus;partial&minus;dir</b> unless (1) there is
no chance of any of the files in the transfer having the
same name (since all the updated files will be put into a
single directory if the path is absolute) and (2) there are
no mount points in the hierarchy (since the delayed updates
will fail if they can&rsquo;t be renamed into place).</p>

<p style="margin-left:22%; margin-top: 1em">See also the
&quot;atomic&minus;rsync&quot; perl script in the
&quot;support&quot; subdir for an update algorithm that is
even more atomic (it uses
<b>&minus;&minus;link&minus;dest</b> and a parallel
hierarchy of files).</p>

<p style="margin-left:11%;"><b>&minus;m,
&minus;&minus;prune&minus;empty&minus;dirs</b></p>

<p style="margin-left:22%;">This option tells the receiving
rsync to get rid of empty directories from the
file&minus;list, including nested directories that have no
non&minus;directory children. This is useful for avoiding
the creation of a bunch of useless directories when the
sending rsync is recursively scanning a hierarchy of files
using include/exclude/filter rules.</p>

<p style="margin-left:22%; margin-top: 1em">Note that the
use of transfer rules, such as the
<b>&minus;&minus;min&minus;size</b> option, does not affect
what goes into the file list, and thus does not leave
directories empty, even if none of the files in a directory
match the transfer rule.</p>

<p style="margin-left:22%; margin-top: 1em">Because the
file&minus;list is actually being pruned, this option also
affects what directories get deleted when a delete is
active. However, keep in mind that excluded files and
directories can prevent existing items from being deleted
due to an exclude both hiding source files and protecting
destination files. See the perishable filter&minus;rule
option for how to avoid this.</p>

<p style="margin-left:22%; margin-top: 1em">You can prevent
the pruning of certain empty directories from the
file&minus;list by using a global &quot;protect&quot;
filter. For instance, this option would ensure that the
directory &quot;emptydir&quot; was kept in the
file&minus;list:</p>


<p style="margin-left:22%; margin-top: 1em">&minus;&minus;filter
&rsquo;protect emptydir/&rsquo;</p>

<p style="margin-left:22%; margin-top: 1em">Here&rsquo;s an
example that copies all .pdf files in a hierarchy, only
creating the necessary destination directories to hold the
.pdf files, and ensures that any superfluous files and
directories in the destination are removed (note the hide
filter of non&minus;directories being used instead of an
exclude):</p>

<p style="margin-left:22%; margin-top: 1em">rsync
&minus;avm &minus;&minus;del
&minus;&minus;include=&rsquo;*.pdf&rsquo; &minus;f
&rsquo;hide,! */&rsquo; src/ dest</p>

<p style="margin-left:22%; margin-top: 1em">If you
didn&rsquo;t want to remove superfluous destination files,
the more time&minus;honored options of
&quot;<b>&minus;&minus;include=&rsquo;*/&rsquo;
&minus;&minus;exclude=&rsquo;*&rsquo;</b>&quot; would work
fine in place of the hide&minus;filter (if that is more
natural to you).</p>


<p style="margin-left:11%;"><b>&minus;&minus;progress</b></p>

<p style="margin-left:22%;">This option tells rsync to
print information showing the progress of the transfer. This
gives a bored user something to watch. Implies
<b>&minus;&minus;verbose</b> if it wasn&rsquo;t already
specified.</p>

<p style="margin-left:22%; margin-top: 1em">While rsync is
transferring a regular file, it updates a progress line that
looks like this:</p>

<p style="margin-left:22%; margin-top: 1em">782448 63%
110.64kB/s 0:00:04</p>

<p style="margin-left:22%; margin-top: 1em">In this
example, the receiver has reconstructed 782448 bytes or 63%
of the sender&rsquo;s file, which is being reconstructed at
a rate of 110.64 kilobytes per second, and the transfer will
finish in 4 seconds if the current rate is maintained until
the end.</p>

<p style="margin-left:22%; margin-top: 1em">These
statistics can be misleading if rsync&rsquo;s
delta&minus;transfer algorithm is in use. For example, if
the sender&rsquo;s file consists of the basis file followed
by additional data, the reported rate will probably drop
dramatically when the receiver gets to the literal data, and
the transfer will probably take much longer to finish than
the receiver estimated as it was finishing the matched part
of the file.</p>

<p style="margin-left:22%; margin-top: 1em">When the file
transfer finishes, rsync replaces the progress line with a
summary line that looks like this:</p>

<p style="margin-left:22%; margin-top: 1em">1238099 100%
146.38kB/s 0:00:08 (xfer#5, to&minus;check=169/396)</p>

<p style="margin-left:22%; margin-top: 1em">In this
example, the file was 1238099 bytes long in total, the
average rate of transfer for the whole file was 146.38
kilobytes per second over the 8 seconds that it took to
complete, it was the 5th transfer of a regular file during
the current rsync session, and there are 169 more files for
the receiver to check (to see if they are
up&minus;to&minus;date or not) remaining out of the 396
total files in the file&minus;list.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;P</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The <b>&minus;P</b> option is equivalent to
<b>&minus;&minus;partial &minus;&minus;progress</b>. Its
purpose is to make it much easier to specify these two
options for a long transfer that may be interrupted.</p></td></tr>
</table>


<p style="margin-left:11%;"><b>&minus;&minus;password&minus;file</b></p>

<p style="margin-left:22%;">This option allows you to
provide a password in a file for accessing an rsync daemon.
The file must not be world readable. It should contain just
the password as the first line of the file (all other lines
are ignored).</p>

<p style="margin-left:22%; margin-top: 1em">This option
does not supply a password to a remote shell transport such
as ssh; to learn how to do that, consult the remote
shell&rsquo;s documentation. When accessing an rsync daemon
using a remote shell as the transport, this option only
comes into effect after the remote shell finishes its
authentication (i.e. if you have also specified a password
in the daemon&rsquo;s config file).</p>


<p style="margin-left:11%;"><b>&minus;&minus;list&minus;only</b></p>

<p style="margin-left:22%;">This option will cause the
source files to be listed instead of transferred. This
option is inferred if there is a single source arg and no
destination specified, so its main uses are: (1) to turn a
copy command that includes a destination arg into a
file&minus;listing command, or (2) to be able to specify
more than one source arg (note: be sure to include the
destination). Caution: keep in mind that a source arg with a
wild&minus;card is expanded by the shell into multiple args,
so it is never safe to try to list such an arg without using
this option. For example:</p>

<p style="margin-left:22%; margin-top: 1em">rsync &minus;av
&minus;&minus;list&minus;only foo* dest/</p>

<p style="margin-left:22%; margin-top: 1em">Compatibility
note: when requesting a remote listing of files from an
rsync that is version 2.6.3 or older, you may encounter an
error if you ask for a non&minus;recursive listing. This is
because a file listing implies the <b>&minus;&minus;dirs</b>
option w/o <b>&minus;&minus;recursive</b>, and older rsyncs
don&rsquo;t have that option. To avoid this problem, either
specify the <b>&minus;&minus;no&minus;dirs</b> option (if
you don&rsquo;t need to expand a directory&rsquo;s content),
or turn on recursion and exclude the content of
subdirectories: <b>&minus;r
&minus;&minus;exclude=&rsquo;/*/*&rsquo;</b>.</p>


<p style="margin-left:11%;"><b>&minus;&minus;bwlimit=KBPS</b></p>

<p style="margin-left:22%;">This option allows you to
specify a maximum transfer rate in kilobytes per second.
This option is most effective when using rsync with large
files (several megabytes and up). Due to the nature of rsync
transfers, blocks of data are sent, then if rsync determines
the transfer was too fast, it will wait before sending the
next data block. The result is an average transfer rate
equaling the specified limit. A value of zero specifies no
limit.</p>


<p style="margin-left:11%;"><b>&minus;&minus;write&minus;batch=FILE</b></p>

<p style="margin-left:22%;">Record a file that can later be
applied to another identical destination with
<b>&minus;&minus;read&minus;batch</b>. See the &quot;BATCH
MODE&quot; section for details, and also the
<b>&minus;&minus;only&minus;write&minus;batch</b>
option.</p>


<p style="margin-left:11%;"><b>&minus;&minus;only&minus;write&minus;batch=FILE</b></p>

<p style="margin-left:22%;">Works like
<b>&minus;&minus;write&minus;batch</b>, except that no
updates are made on the destination system when creating the
batch. This lets you transport the changes to the
destination system via some other means and then apply the
changes via <b>&minus;&minus;read&minus;batch</b>.</p>

<p style="margin-left:22%; margin-top: 1em">Note that you
can feel free to write the batch directly to some portable
media: if this media fills to capacity before the end of the
transfer, you can just apply that partial transfer to the
destination and repeat the whole process to get the rest of
the changes (as long as you don&rsquo;t mind a partially
updated destination system while the multi&minus;update
cycle is happening).</p>

<p style="margin-left:22%; margin-top: 1em">Also note that
you only save bandwidth when pushing changes to a remote
system because this allows the batched data to be diverted
from the sender into the batch file without having to flow
over the wire to the receiver (when pulling, the sender is
remote, and thus can&rsquo;t write the batch).</p>


<p style="margin-left:11%;"><b>&minus;&minus;read&minus;batch=FILE</b></p>

<p style="margin-left:22%;">Apply all of the changes stored
in FILE, a file previously generated by
<b>&minus;&minus;write&minus;batch</b>. If <i>FILE</i> is
<b>&minus;</b>, the batch data will be read from standard
input. See the &quot;BATCH MODE&quot; section for
details.</p>


<p style="margin-left:11%;"><b>&minus;&minus;protocol=NUM</b></p>

<p style="margin-left:22%;">Force an older protocol version
to be used. This is useful for creating a batch file that is
compatible with an older version of rsync. For instance, if
rsync 2.6.4 is being used with the
<b>&minus;&minus;write&minus;batch</b> option, but rsync
2.6.3 is what will be used to run the
<b>&minus;&minus;read&minus;batch</b> option, you should use
&quot;&minus;&minus;protocol=28&quot; when creating the
batch file to force the older protocol version to be used in
the batch file (assuming you can&rsquo;t upgrade the rsync
on the reading system).</p>


<p style="margin-left:11%;"><b>&minus;&minus;iconv=CONVERT_SPEC</b></p>

<p style="margin-left:22%;">Rsync can convert filenames
between character sets using this option. Using a
CONVERT_SPEC of &quot;.&quot; tells rsync to look up the
default character&minus;set via the locale setting.
Alternately, you can fully specify what conversion to do by
giving a local and a remote charset separated by a comma in
the order <b>&minus;&minus;iconv=LOCAL,REMOTE</b>, e.g.
<b>&minus;&minus;iconv=utf8,iso88591</b>. This order ensures
that the option will stay the same whether you&rsquo;re
pushing or pulling files. Finally, you can specify either
<b>&minus;&minus;no&minus;iconv</b> or a CONVERT_SPEC of
&quot;&minus;&quot; to turn off any conversion. The default
setting of this option is site&minus;specific, and can also
be affected via the RSYNC_ICONV environment variable.</p>

<p style="margin-left:22%; margin-top: 1em">For a list of
what charset names your local iconv library supports, you
can run &quot;iconv &minus;&minus;list&quot;.</p>

<p style="margin-left:22%; margin-top: 1em">If you specify
the <b>&minus;&minus;protect&minus;args</b> option
(<b>&minus;s</b>), rsync will translate the filenames you
specify on the command&minus;line that are being sent to the
remote host. See also the
<b>&minus;&minus;files&minus;from</b> option.</p>

<p style="margin-left:22%; margin-top: 1em">Note that rsync
does not do any conversion of names in filter files
(including include/exclude files). It is up to you to ensure
that you&rsquo;re specifying matching rules that can match
on both sides of the transfer. For instance, you can specify
extra include/exclude rules if there are filename
differences on the two sides that need to be accounted
for.</p>

<p style="margin-left:22%; margin-top: 1em">When you pass
an <b>&minus;&minus;iconv</b> option to an rsync daemon that
allows it, the daemon uses the charset specified in its
&quot;charset&quot; configuration parameter regardless of
the remote charset you actually pass. Thus, you may feel
free to specify just the local charset for a daemon transfer
(e.g. <b>&minus;&minus;iconv=utf8</b>).</p>

<p style="margin-left:11%;"><b>&minus;4,
&minus;&minus;ipv4</b> or <b>&minus;6,
&minus;&minus;ipv6</b></p>

<p style="margin-left:22%;">Tells rsync to prefer IPv4/IPv6
when creating sockets. This only affects sockets that rsync
has direct control over, such as the outgoing socket when
directly contacting an rsync daemon. See also these options
in the <b>&minus;&minus;daemon</b> mode section.</p>

<p style="margin-left:22%; margin-top: 1em">If rsync was
complied without support for IPv6, the
<b>&minus;&minus;ipv6</b> option will have no effect. The
<b>&minus;&minus;version</b> output will tell you if this is
the case.</p>


<p style="margin-left:11%;"><b>&minus;&minus;checksum&minus;seed=NUM</b></p>

<p style="margin-left:22%;">Set the checksum seed to the
integer NUM. This 4 byte checksum seed is included in each
block and file checksum calculation. By default the checksum
seed is generated by the server and defaults to the current
<tt>time()</tt> . This option is used to set a specific
checksum seed, which is useful for applications that want
repeatable block and file checksums, or in the case where
the user wants a more random checksum seed. Setting NUM to 0
causes rsync to use the default of <tt>time()</tt> for
checksum seed.</p>

<h2>DAEMON OPTIONS
<a name="DAEMON OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
allowed when starting an rsync daemon are as follows:
<b><br>
&minus;&minus;daemon</b></p>

<p style="margin-left:22%;">This tells rsync that it is to
run as a daemon. The daemon you start running may be
accessed using an rsync client using the <b>host::module</b>
or <b>rsync://host/module/</b> syntax.</p>

<p style="margin-left:22%; margin-top: 1em">If standard
input is a socket then rsync will assume that it is being
run via inetd, otherwise it will detach from the current
terminal and become a background daemon. The daemon will
read the config file (rsyncd.conf) on each connect made by a
client and respond to requests accordingly. See the
<b>rsyncd.conf</b>(5) man page for more details.</p>


<p style="margin-left:11%;"><b>&minus;&minus;address</b></p>

<p style="margin-left:22%;">By default rsync will bind to
the wildcard address when run as a daemon with the
<b>&minus;&minus;daemon</b> option. The
<b>&minus;&minus;address</b> option allows you to specify a
specific IP address (or hostname) to bind to. This makes
virtual hosting possible in conjunction with the
<b>&minus;&minus;config</b> option. See also the
&quot;address&quot; global option in the rsyncd.conf
manpage.</p>


<p style="margin-left:11%;"><b>&minus;&minus;bwlimit=KBPS</b></p>

<p style="margin-left:22%;">This option allows you to
specify a maximum transfer rate in kilobytes per second for
the data the daemon sends. The client can still specify a
smaller <b>&minus;&minus;bwlimit</b> value, but their
requested value will be rounded down if they try to exceed
it. See the client version of this option (above) for some
extra details.</p>


<p style="margin-left:11%;"><b>&minus;&minus;config=FILE</b></p>

<p style="margin-left:22%;">This specifies an alternate
config file than the default. This is only relevant when
<b>&minus;&minus;daemon</b> is specified. The default is
/etc/rsyncd.conf unless the daemon is running over a remote
shell program and the remote user is not the
super&minus;user; in that case the default is rsyncd.conf in
the current directory (typically $HOME).</p>


<p style="margin-left:11%;"><b>&minus;&minus;no&minus;detach</b></p>

<p style="margin-left:22%;">When running as a daemon, this
option instructs rsync to not detach itself and become a
background process. This option is required when running as
a service on Cygwin, and may also be useful when rsync is
supervised by a program such as <b>daemontools</b> or
AIX&rsquo;s <b>System Resource Controller</b>.
<b>&minus;&minus;no&minus;detach</b> is also recommended
when rsync is run under a debugger. This option has no
effect if rsync is run from inetd or sshd.</p>


<p style="margin-left:11%;"><b>&minus;&minus;port=PORT</b></p>

<p style="margin-left:22%;">This specifies an alternate TCP
port number for the daemon to listen on rather than the
default of 873. See also the &quot;port&quot; global option
in the rsyncd.conf manpage.</p>


<p style="margin-left:11%;"><b>&minus;&minus;log&minus;file=FILE</b></p>

<p style="margin-left:22%;">This option tells the rsync
daemon to use the given log&minus;file name instead of using
the &quot;log file&quot; setting in the config file.</p>


<p style="margin-left:11%;"><b>&minus;&minus;log&minus;file&minus;format=FORMAT</b></p>

<p style="margin-left:22%;">This option tells the rsync
daemon to use the given FORMAT string instead of using the
&quot;log format&quot; setting in the config file. It also
enables &quot;transfer logging&quot; unless the string is
empty, in which case transfer logging is turned off.</p>


<p style="margin-left:11%;"><b>&minus;&minus;sockopts</b></p>

<p style="margin-left:22%;">This overrides the <b>socket
options</b> setting in the rsyncd.conf file and has the same
syntax.</p>

<p style="margin-left:11%;"><b>&minus;v,
&minus;&minus;verbose</b></p>

<p style="margin-left:22%;">This option increases the
amount of information the daemon logs during its startup
phase. After the client connects, the daemon&rsquo;s
verbosity level will be controlled by the options that the
client used and the &quot;max verbosity&quot; setting in the
module&rsquo;s config section.</p>

<p style="margin-left:11%;"><b>&minus;4,
&minus;&minus;ipv4</b> or <b>&minus;6,
&minus;&minus;ipv6</b></p>

<p style="margin-left:22%;">Tells rsync to prefer IPv4/IPv6
when creating the incoming sockets that the rsync daemon
will use to listen for connections. One of these options may
be required in older versions of Linux to work around an
IPv6 bug in the kernel (if you see an &quot;address already
in use&quot; error when nothing else is using the port, try
specifying <b>&minus;&minus;ipv6</b> or
<b>&minus;&minus;ipv4</b> when starting the daemon).</p>

<p style="margin-left:22%; margin-top: 1em">If rsync was
complied without support for IPv6, the
<b>&minus;&minus;ipv6</b> option will have no effect. The
<b>&minus;&minus;version</b> output will tell you if this is
the case.</p>

<p style="margin-left:11%;"><b>&minus;h,
&minus;&minus;help</b></p>

<p style="margin-left:22%;">When specified after
<b>&minus;&minus;daemon</b>, print a short help page
describing the options available for starting an rsync
daemon.</p>

<h2>FILTER RULES
<a name="FILTER RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The filter
rules allow for flexible selection of which files to
transfer (include) and which files to skip (exclude). The
rules either directly specify include/exclude patterns or
they specify a way to acquire more include/exclude patterns
(e.g. to read them from a file).</p>

<p style="margin-left:11%; margin-top: 1em">As the list of
files/directories to transfer is built, rsync checks each
name to be transferred against the list of include/exclude
patterns in turn, and the first matching pattern is acted
on: if it is an exclude pattern, then that file is skipped;
if it is an include pattern then that filename is not
skipped; if no matching pattern is found, then the filename
is not skipped.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync builds an
ordered list of filter rules as specified on the
command&minus;line. Filter rules have the following
syntax:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>RULE
[PATTERN_OR_FILENAME] <br>
RULE,MODIFIERS [PATTERN_OR_FILENAME]</tt></p>

<p style="margin-left:11%; margin-top: 1em">You have your
choice of using either short or long RULE names, as
described below. If you use a short&minus;named rule, the
&rsquo;,&rsquo; separating the RULE from the MODIFIERS is
optional. The PATTERN or FILENAME that follows (when
present) must come after either a single space or an
underscore (_). Here are the available rule prefixes:</p>

<p style="margin-left:22%; margin-top: 1em"><b>exclude,
&minus;</b> specifies an exclude pattern. <b><br>
include, +</b> specifies an include pattern. <b><br>
merge, .</b> specifies a merge&minus;file to read for more
rules. <b><br>
dir&minus;merge, :</b> specifies a per&minus;directory
merge&minus;file. <b><br>
hide, H</b> specifies a pattern for hiding files from the
transfer. <b><br>
show, S</b> files that match the pattern are not hidden.
<b><br>
protect, P</b> specifies a pattern for protecting files from
deletion. <b><br>
risk, R</b> files that match the pattern are not protected.
<b><br>
clear, !</b> clears the current include/exclude list (takes
no arg)</p>

<p style="margin-left:11%; margin-top: 1em">When rules are
being read from a file, empty lines are ignored, as are
comment lines that start with a &quot;#&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
<b>&minus;&minus;include</b>/<b>&minus;&minus;exclude</b>
command&minus;line options do not allow the full range of
rule parsing as described above &minus;&minus; they only
allow the specification of include/exclude patterns plus a
&quot;!&quot; token to clear the list (and the normal
comment parsing when rules are read from a file). If a
pattern does not begin with &quot;&minus; &quot; (dash,
space) or &quot;+ &quot; (plus, space), then the rule will
be interpreted as if &quot;+ &quot; (for an include option)
or &quot;&minus; &quot; (for an exclude option) were
prefixed to the string. A <b>&minus;&minus;filter</b>
option, on the other hand, must always contain either a
short or long rule name at the start of the rule.</p>

<p style="margin-left:11%; margin-top: 1em">Note also that
the <b>&minus;&minus;filter</b>,
<b>&minus;&minus;include</b>, and
<b>&minus;&minus;exclude</b> options take one rule/pattern
each. To add multiple ones, you can repeat the options on
the command&minus;line, use the merge&minus;file syntax of
the <b>&minus;&minus;filter</b> option, or the
<b>&minus;&minus;include&minus;from</b>/<b>&minus;&minus;exclude&minus;from</b>
options.</p>

<h2>INCLUDE/EXCLUDE PATTERN RULES
<a name="INCLUDE/EXCLUDE PATTERN RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can include
and exclude files by specifying patterns using the
&quot;+&quot;, &quot;&minus;&quot;, etc. filter rules (as
introduced in the FILTER RULES section above). The
include/exclude rules each specify a pattern that is matched
against the names of the files that are going to be
transferred. These patterns can take several forms:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern starts with a / then it is anchored to a
particular spot in the hierarchy of files, otherwise it is
matched against the end of the pathname. This is similar to
a leading ^ in regular expressions. Thus &quot;/foo&quot;
would match a name of &quot;foo&quot; at either the
&quot;root of the transfer&quot; (for a global rule) or in
the merge&minus;file&rsquo;s directory (for a
per&minus;directory rule). An unqualified &quot;foo&quot;
would match a name of &quot;foo&quot; anywhere in the tree
because the algorithm is applied recursively from the top
down; it behaves as if each path component gets a turn at
being the end of the filename. Even the unanchored
&quot;sub/foo&quot; would match at any point in the
hierarchy where a &quot;foo&quot; was found within a
directory named &quot;sub&quot;. See the section on
ANCHORING INCLUDE/EXCLUDE PATTERNS for a full discussion of
how to specify a pattern that matches at the root of the
transfer.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern ends with a / then it will only match a
directory, not a regular file, symlink, or device.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>rsync chooses between doing a simple string match and
wildcard matching by checking if the pattern contains one of
these three wildcard characters: &rsquo;*&rsquo;,
&rsquo;?&rsquo;, and &rsquo;[&rsquo; .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;*&rsquo; matches any path component, but it
stops at slashes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>use &rsquo;**&rsquo; to match anything, including
slashes.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;?&rsquo; matches any character except a slash
(/).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a &rsquo;[&rsquo; introduces a character class, such as
[a&minus;z] or [[:alpha:]].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>in a wildcard pattern, a backslash can be used to escape
a wildcard character, but it is matched literally when no
wildcards are present.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>if the pattern contains a / (not counting a trailing /)
or a &quot;**&quot;, then it is matched against the full
pathname, including any leading directories. If the pattern
doesn&rsquo;t contain a / or a &quot;**&quot;, then it is
matched only against the final component of the filename.
(Remember that the algorithm is applied recursively so
&quot;full filename&quot; can actually be any portion of a
path from the starting directory on down.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>a trailing &quot;dir_name/***&quot; will match both the
directory (as if &quot;dir_name/&quot; had been specified)
and everything in the directory (as if
&quot;dir_name/**&quot; had been specified). This behavior
was added in version 2.6.7.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Note that, when
using the <b>&minus;&minus;recursive</b> (<b>&minus;r</b>)
option (which is implied by <b>&minus;a</b>), every
subcomponent of every path is visited from the top down, so
include/exclude patterns get applied recursively to each
subcomponent&rsquo;s full name (e.g. to include
&quot;/foo/bar/baz&quot; the subcomponents &quot;/foo&quot;
and &quot;/foo/bar&quot; must not be excluded). The exclude
patterns actually short&minus;circuit the directory
traversal stage when rsync finds the files to send. If a
pattern excludes a particular parent directory, it can
render a deeper include pattern ineffectual because rsync
did not descend through that excluded section of the
hierarchy. This is particularly important when using a
trailing &rsquo;*&rsquo; rule. For instance, this
won&rsquo;t work:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>+
/some/path/this&minus;file&minus;will&minus;not&minus;be&minus;found
<br>
+ /file&minus;is&minus;included <br>
&minus; *</tt></p>

<p style="margin-left:11%; margin-top: 1em">This fails
because the parent directory &quot;some&quot; is excluded by
the &rsquo;*&rsquo; rule, so rsync never visits any of the
files in the &quot;some&quot; or &quot;some/path&quot;
directories. One solution is to ask for all directories in
the hierarchy to be included by using a single rule: &quot;+
*/&quot; (put it somewhere before the &quot;&minus; *&quot;
rule), and perhaps use the
<b>&minus;&minus;prune&minus;empty&minus;dirs</b> option.
Another solution is to add specific include rules for all
the parent dirs that need to be visited. For instance, this
set of rules works fine:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>+ /some/
<br>
+ /some/path/ <br>
+ /some/path/this&minus;file&minus;is&minus;found <br>
+ /file&minus;also&minus;included <br>
&minus; *</tt></p>

<p style="margin-left:11%; margin-top: 1em">Here are some
examples of exclude/include matching:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">&quot;&minus; *.o&quot; would
exclude all names matching *.o</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;&minus; /foo&quot; would exclude a file (or
directory) named foo in the transfer&minus;root
directory</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;&minus; foo/&quot; would exclude any directory
named foo</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;&minus; /foo/*/bar&quot; would exclude any file
named bar which is at two levels below a directory named foo
in the transfer&minus;root directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>&quot;&minus; /foo/**/bar&quot; would exclude any file
named bar two or more levels below a directory named foo in
the transfer&minus;root directory</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The combination of &quot;+ */&quot;, &quot;+ *.c&quot;,
and &quot;&minus; *&quot; would include all directories and
C source files but nothing else (see also the
<b>&minus;&minus;prune&minus;empty&minus;dirs</b>
option)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The combination of &quot;+ foo/&quot;, &quot;+
foo/bar.c&quot;, and &quot;&minus; *&quot; would include
only the foo directory and foo/bar.c (the foo directory must
be explicitly included or it would be excluded by the
&quot;*&quot;)</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">The following
modifiers are accepted after a &quot;+&quot; or
&quot;&minus;&quot;:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">A <b>/</b> specifies that the
include/exclude rule should be matched against the absolute
pathname of the current item. For example, &quot;&minus;/
/etc/passwd&quot; would exclude the passwd file any time the
transfer was sending files from the &quot;/etc&quot;
directory, and &quot;&minus;/ subdir/foo&quot; would always
exclude &quot;foo&quot; when it is in a dir named
&quot;subdir&quot;, even if &quot;foo&quot; is at the root
of the current transfer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>!</b> specifies that the include/exclude should
take effect if the pattern fails to match. For instance,
&quot;&minus;! */&quot; would exclude all
non&minus;directories.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>C</b> is used to indicate that all the global
CVS&minus;exclude rules should be inserted as excludes in
place of the &quot;&minus;C&quot;. No arg should follow.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>s</b> is used to indicate that the rule applies to
the sending side. When a rule affects the sending side, it
prevents files from being transferred. The default is for a
rule to affect both sides unless
<b>&minus;&minus;delete&minus;excluded</b> was specified, in
which case default rules become sender&minus;side only. See
also the hide (H) and show (S) rules, which are an alternate
way to specify sending&minus;side includes/excludes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>r</b> is used to indicate that the rule applies to
the receiving side. When a rule affects the receiving side,
it prevents files from being deleted. See the <b>s</b>
modifier for more info. See also the protect (P) and risk
(R) rules, which are an alternate way to specify
receiver&minus;side includes/excludes.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>p</b> indicates that a rule is perishable, meaning
that it is ignored in directories that are being deleted.
For instance, the <b>&minus;C</b> option&rsquo;s default
rules that exclude things like &quot;CVS&quot; and
&quot;*.o&quot; are marked as perishable, and will not
prevent a directory that was removed on the source from
being deleted on the destination.</p></td></tr>
</table>

<h2>MERGE&minus;FILE FILTER RULES
<a name="MERGE&minus;FILE FILTER RULES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can merge
whole files into your filter rules by specifying either a
merge (.) or a dir&minus;merge (:) filter rule (as
introduced in the FILTER RULES section above).</p>

<p style="margin-left:11%; margin-top: 1em">There are two
kinds of merged files &minus;&minus; single&minus;instance
(&rsquo;.&rsquo;) and per&minus;directory (&rsquo;:&rsquo;).
A single&minus;instance merge file is read one time, and its
rules are incorporated into the filter list in the place of
the &quot;.&quot; rule. For per&minus;directory merge files,
rsync will scan every directory that it traverses for the
named file, merging its contents when the file exists into
the current list of inherited rules. These
per&minus;directory rule files must be created on the
sending side because it is the sending side that is being
scanned for the available files to transfer. These rule
files may also need to be transferred to the receiving side
if you want them to affect what files don&rsquo;t get
deleted (see PER&minus;DIRECTORY RULES AND DELETE
below).</p>

<p style="margin-left:11%; margin-top: 1em">Some
examples:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>merge
/etc/rsync/default.rules <br>
. /etc/rsync/default.rules <br>
dir&minus;merge .per&minus;dir&minus;filter <br>
dir&minus;merge,n&minus;
.non&minus;inherited&minus;per&minus;dir&minus;excludes <br>
:n&minus;
.non&minus;inherited&minus;per&minus;dir&minus;excludes</tt></p>

<p style="margin-left:11%; margin-top: 1em">The following
modifiers are accepted after a merge or dir&minus;merge
rule:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">A <b>&minus;</b> specifies that
the file should consist of only exclude patterns, with no
other rule&minus;parsing except for in&minus;file
comments.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>+</b> specifies that the file should consist of
only include patterns, with no other rule&minus;parsing
except for in&minus;file comments.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>C</b> is a way to specify that the file should be
read in a CVS&minus;compatible manner. This turns on
&rsquo;n&rsquo;, &rsquo;w&rsquo;, and &rsquo;&minus;&rsquo;,
but also allows the list&minus;clearing token (!) to be
specified. If no filename is provided,
&quot;.cvsignore&quot; is assumed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>e</b> will exclude the merge&minus;file name from
the transfer; e.g. &quot;dir&minus;merge,e .rules&quot; is
like &quot;dir&minus;merge .rules&quot; and &quot;&minus;
.rules&quot;.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>An <b>n</b> specifies that the rules are not inherited
by subdirectories.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>A <b>w</b> specifies that the rules are word&minus;split
on whitespace instead of the normal line&minus;splitting.
This also turns off comments. Note: the space that separates
the prefix from the rule is treated specially, so
&quot;&minus; foo + bar&quot; is parsed as two rules
(assuming that prefix&minus;parsing wasn&rsquo;t also
disabled).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>You may also specify any of the modifiers for the
&quot;+&quot; or &quot;&minus;&quot; rules (above) in order
to have the rules that are read in from the file default to
having that modifier set (except for the <b>!</b> modifier,
which would not be useful). For instance,
&quot;merge,&minus;/ .excl&quot; would treat the contents of
.excl as absolute&minus;path excludes, while
&quot;dir&minus;merge,s .filt&quot; and &quot;:sC&quot;
would each make all their per&minus;directory rules apply
only on the sending side. If the merge rule specifies sides
to affect (via the <b>s</b> or <b>r</b> modifier or both),
then the rules in the file must not specify sides (via a
modifier or a rule prefix such as <b>hide</b>).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em">Per&minus;directory
rules are inherited in all subdirectories of the directory
where the merge&minus;file was found unless the
&rsquo;n&rsquo; modifier was used. Each subdirectory&rsquo;s
rules are prefixed to the inherited per&minus;directory
rules from its parents, which gives the newest rules a
higher priority than the inherited rules. The entire set of
dir&minus;merge rules are grouped together in the spot where
the merge&minus;file was specified, so it is possible to
override dir&minus;merge rules via a rule that got specified
earlier in the list of global rules. When the
list&minus;clearing rule (&quot;!&quot;) is read from a
per&minus;directory file, it only clears the inherited rules
for the current merge file.</p>

<p style="margin-left:11%; margin-top: 1em">Another way to
prevent a single rule from a dir&minus;merge file from being
inherited is to anchor it with a leading slash. Anchored
rules in a per&minus;directory merge&minus;file are relative
to the merge&minus;file&rsquo;s directory, so a pattern
&quot;/foo&quot; would only match the file &quot;foo&quot;
in the directory where the dir&minus;merge filter file was
found.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s an
example filter file which you&rsquo;d specify via
<b>&minus;&minus;filter=&quot;. file&quot;:</b></p>

<p style="margin-left:22%; margin-top: 1em"><tt>merge
/home/user/.global&minus;filter <br>
&minus; *.gz <br>
dir&minus;merge .rules <br>
+ *.[ch] <br>
&minus; *.o</tt></p>

<p style="margin-left:11%; margin-top: 1em">This will merge
the contents of the /home/user/.global&minus;filter file at
the start of the list and also turns the &quot;.rules&quot;
filename into a per&minus;directory filter file. All rules
read in prior to the start of the directory scan follow the
global anchoring rules (i.e. a leading slash matches at the
root of the transfer).</p>

<p style="margin-left:11%; margin-top: 1em">If a
per&minus;directory merge&minus;file is specified with a
path that is a parent directory of the first transfer
directory, rsync will scan all the parent dirs from that
starting point to the transfer directory for the indicated
per&minus;directory file. For instance, here is a common
filter (see <b>&minus;F</b>):</p>


<p style="margin-left:22%; margin-top: 1em"><tt>&minus;&minus;filter=&rsquo;:
/.rsync&minus;filter&rsquo;</tt></p>

<p style="margin-left:11%; margin-top: 1em">That rule tells
rsync to scan for the file .rsync&minus;filter in all
directories from the root down through the parent directory
of the transfer prior to the start of the normal directory
scan of the file in the directories that are sent as a part
of the transfer. (Note: for an rsync daemon, the root is
always the same as the module&rsquo;s &quot;path&quot;.)</p>

<p style="margin-left:11%; margin-top: 1em">Some examples
of this pre&minus;scanning for per&minus;directory
files:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avF /src/path/ /dest/dir <br>
rsync &minus;av &minus;&minus;filter=&rsquo;:
../../.rsync&minus;filter&rsquo; /src/path/ /dest/dir <br>
rsync &minus;av &minus;&minus;filter=&rsquo;:
.rsync&minus;filter&rsquo; /src/path/ /dest/dir</tt></p>

<p style="margin-left:11%; margin-top: 1em">The first two
commands above will look for &quot;.rsync&minus;filter&quot;
in &quot;/&quot; and &quot;/src&quot; before the normal scan
begins looking for the file in &quot;/src/path&quot; and its
subdirectories. The last command avoids the parent&minus;dir
scan and only looks for the &quot;.rsync&minus;filter&quot;
files in each directory that is a part of the transfer.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
include the contents of a &quot;.cvsignore&quot; in your
patterns, you should use the rule &quot;:C&quot;, which
creates a dir&minus;merge of the .cvsignore file, but parsed
in a CVS&minus;compatible manner. You can use this to affect
where the <b>&minus;&minus;cvs&minus;exclude</b>
(<b>&minus;C</b>) option&rsquo;s inclusion of the
per&minus;directory .cvsignore file gets placed into your
rules by putting the &quot;:C&quot; wherever you like in
your filter rules. Without this, rsync would add the
dir&minus;merge rule for the .cvsignore file at the end of
all your other rules (giving it a lower priority than your
command&minus;line rules). For example:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>cat
&lt;&lt;EOT | rsync &minus;avC &minus;&minus;filter=&rsquo;.
&minus;&rsquo; a/ b <br>
+ foo.o <br>
:C <br>
&minus; *.old <br>
EOT <br>
rsync &minus;avC &minus;&minus;include=foo.o &minus;f :C
&minus;&minus;exclude=&rsquo;*.old&rsquo; a/ b</tt></p>

<p style="margin-left:11%; margin-top: 1em">Both of the
above rsync commands are identical. Each one will merge all
the per&minus;directory .cvsignore rules in the middle of
the list rather than at the end. This allows their
dir&minus;specific rules to supersede the rules that follow
the :C instead of being subservient to all your rules. To
affect the other CVS exclude rules (i.e. the default list of
exclusions, the contents of $HOME/.cvsignore, and the value
of $CVSIGNORE) you should omit the <b>&minus;C</b>
command&minus;line option and instead insert a
&quot;&minus;C&quot; rule into your filter rules; e.g.
&quot;<b>&minus;&minus;filter=&minus;C</b>&quot;.</p>

<h2>LIST&minus;CLEARING FILTER RULE
<a name="LIST&minus;CLEARING FILTER RULE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You can clear
the current include/exclude list by using the &quot;!&quot;
filter rule (as introduced in the FILTER RULES section
above). The &quot;current&quot; list is either the global
list of rules (if the rule is encountered while parsing the
filter options) or a set of per&minus;directory rules (which
are inherited in their own sub&minus;list, so a subdirectory
can use this to clear out the parent&rsquo;s rules).</p>

<h2>ANCHORING INCLUDE/EXCLUDE PATTERNS
<a name="ANCHORING INCLUDE/EXCLUDE PATTERNS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">As mentioned
earlier, global include/exclude patterns are anchored at the
&quot;root of the transfer&quot; (as opposed to
per&minus;directory patterns, which are anchored at the
merge&minus;file&rsquo;s directory). If you think of the
transfer as a subtree of names that are being sent from
sender to receiver, the transfer&minus;root is where the
tree starts to be duplicated in the destination directory.
This root governs where patterns that start with a /
match.</p>

<p style="margin-left:11%; margin-top: 1em">Because the
matching is relative to the transfer&minus;root, changing
the trailing slash on a source path or changing your use of
the <b>&minus;&minus;relative</b> option affects the path
you need to use in your matching (in addition to changing
how much of the file tree is duplicated on the destination
host). The following examples demonstrate this.</p>

<p style="margin-left:11%; margin-top: 1em">Let&rsquo;s say
that we want to match two source files, one with an absolute
path of &quot;/home/me/foo/bar&quot;, and one with a path of
&quot;/home/you/bar/baz&quot;. Here is how the various
command choices differ for a 2&minus;source transfer:</p>

<p style="margin-left:22%; margin-top: 1em">Example cmd:
rsync &minus;a /home/me /home/you /dest <br>
+/&minus; pattern: /me/foo/bar <br>
+/&minus; pattern: /you/bar/baz <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:22%; margin-top: 1em">Example cmd:
rsync &minus;a /home/me/ /home/you/ /dest <br>
+/&minus; pattern: /foo/bar (note missing &quot;me&quot;)
<br>
+/&minus; pattern: /bar/baz (note missing &quot;you&quot;)
<br>
Target file: /dest/foo/bar <br>
Target file: /dest/bar/baz</p>

<p style="margin-left:22%; margin-top: 1em">Example cmd:
rsync &minus;a &minus;&minus;relative /home/me/ /home/you
/dest <br>
+/&minus; pattern: /home/me/foo/bar (note full path) <br>
+/&minus; pattern: /home/you/bar/baz (ditto) <br>
Target file: /dest/home/me/foo/bar <br>
Target file: /dest/home/you/bar/baz</p>

<p style="margin-left:22%; margin-top: 1em">Example cmd: cd
/home; rsync &minus;a &minus;&minus;relative me/foo you/
/dest <br>
+/&minus; pattern: /me/foo/bar (starts at specified path)
<br>
+/&minus; pattern: /you/bar/baz (ditto) <br>
Target file: /dest/me/foo/bar <br>
Target file: /dest/you/bar/baz</p>

<p style="margin-left:11%; margin-top: 1em">The easiest way
to see what name you should filter is to just look at the
output when using <b>&minus;&minus;verbose</b> and put a /
in front of the name (use the
<b>&minus;&minus;dry&minus;run</b> option if you&rsquo;re
not yet ready to copy any files).</p>

<h2>PER&minus;DIRECTORY RULES AND DELETE
<a name="PER&minus;DIRECTORY RULES AND DELETE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Without a
delete option, per&minus;directory rules are only relevant
on the sending side, so you can feel free to exclude the
merge files themselves without affecting the transfer. To
make this easy, the &rsquo;e&rsquo; modifier adds this
exclude for you, as seen in these two equivalent
commands:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;av &minus;&minus;filter=&rsquo;: .excl&rsquo;
&minus;&minus;exclude=.excl host:src/dir /dest <br>
rsync &minus;av &minus;&minus;filter=&rsquo;:e .excl&rsquo;
host:src/dir /dest</tt></p>

<p style="margin-left:11%; margin-top: 1em">However, if you
want to do a delete on the receiving side AND you want some
files to be excluded from being deleted, you&rsquo;ll need
to be sure that the receiving side knows what files to
exclude. The easiest way is to include the
per&minus;directory merge files in the transfer and use
<b>&minus;&minus;delete&minus;after</b>, because this
ensures that the receiving side gets all the same exclude
rules as the sending side before it tries to delete
anything:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>rsync
&minus;avF &minus;&minus;delete&minus;after host:src/dir
/dest</tt></p>

<p style="margin-left:11%; margin-top: 1em">However, if the
merge files are not a part of the transfer, you&rsquo;ll
need to either specify some global exclude rules (i.e.
specified on the command line), or you&rsquo;ll need to
maintain your own per&minus;directory merge files on the
receiving side. An example of the first is this (assume that
the remote .rules files exclude themselves):</p>

<p style="margin-left:11%; margin-top: 1em">rsync &minus;av
&minus;&minus;filter=&rsquo;: .rules&rsquo;
&minus;&minus;filter=&rsquo;. /my/extra.rules&rsquo; <br>
&minus;&minus;delete host:src/dir /dest</p>

<p style="margin-left:11%; margin-top: 1em">In the above
example the extra.rules file can affect both sides of the
transfer, but (on the sending side) the rules are
subservient to the rules merged from the .rules files
because they were specified after the per&minus;directory
merge rule.</p>

<p style="margin-left:11%; margin-top: 1em">In one final
example, the remote side is excluding the
.rsync&minus;filter files from the transfer, but we want to
use our own .rsync&minus;filter files to control what gets
deleted on the receiving side. To do this we must
specifically exclude the per&minus;directory merge files (so
that they don&rsquo;t get deleted) and then put rules into
the local files to control what else should not get deleted.
Like one of these commands:</p>

<p style="margin-left:11%; margin-top: 1em">rsync &minus;av
&minus;&minus;filter=&rsquo;:e /.rsync&minus;filter&rsquo;
&minus;&minus;delete \ <br>
host:src/dir /dest <br>
rsync &minus;avFF &minus;&minus;delete host:src/dir
/dest</p>

<h2>BATCH MODE
<a name="BATCH MODE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Batch mode can
be used to apply the same set of updates to many identical
systems. Suppose one has a tree which is replicated on a
number of hosts. Now suppose some changes have been made to
this source tree and those changes need to be propagated to
the other hosts. In order to do this using batch mode, rsync
is run with the write&minus;batch option to apply the
changes made to the source tree to one of the destination
trees. The write&minus;batch option causes the rsync client
to store in a &quot;batch file&quot; all the information
needed to repeat this operation against other, identical
destination trees.</p>

<p style="margin-left:11%; margin-top: 1em">Generating the
batch file once saves having to perform the file status,
checksum, and data block generation more than once when
updating multiple destination trees. Multicast transport
protocols can be used to transfer the batch update files in
parallel to many hosts at once, instead of sending the same
data to every host individually.</p>

<p style="margin-left:11%; margin-top: 1em">To apply the
recorded changes to another destination tree, run rsync with
the read&minus;batch option, specifying the name of the same
batch file, and the destination tree. Rsync updates the
destination tree using the information stored in the batch
file.</p>

<p style="margin-left:11%; margin-top: 1em">For your
convenience, a script file is also created when the
write&minus;batch option is used: it will be named the same
as the batch file with &quot;.sh&quot; appended. This script
file contains a command&minus;line suitable for updating a
destination tree using the associated batch file. It can be
executed using a Bourne (or Bourne&minus;like) shell,
optionally passing in an alternate destination tree pathname
which is then used instead of the original destination path.
This is useful when the destination tree path on the current
host differs from the one used to create the batch file.</p>

<p style="margin-left:11%; margin-top: 1em">Examples:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>$ rsync
&minus;&minus;write&minus;batch=foo &minus;a
host:/source/dir/ /adest/dir/ <br>
$ scp foo* remote: <br>
$ ssh remote ./foo.sh /bdest/dir/</tt></p>

<p style="margin-left:22%; margin-top: 1em"><tt>$ rsync
&minus;&minus;write&minus;batch=foo &minus;a /source/dir/
/adest/dir/ <br>
$ ssh remote rsync &minus;&minus;read&minus;batch=&minus;
&minus;a /bdest/dir/ &lt;foo</tt></p>

<p style="margin-left:11%; margin-top: 1em">In these
examples, rsync is used to update /adest/dir/ from
/source/dir/ and the information to repeat this operation is
stored in &quot;foo&quot; and &quot;foo.sh&quot;. The host
&quot;remote&quot; is then updated with the batched data
going into the directory /bdest/dir. The differences between
the two examples reveals some of the flexibility you have in
how you deal with batches:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">o</p></td>
<td width="10%"></td>
<td width="78%">


<p style="margin-top: 1em">The first example shows that the
initial copy doesn&rsquo;t have to be local &minus;&minus;
you can push or pull data to/from a remote host using either
the remote&minus;shell syntax or rsync daemon syntax, as
desired.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The first example uses the created &quot;foo.sh&quot;
file to get the right rsync options when running the
read&minus;batch command on the remote host.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>o</p></td>
<td width="10%"></td>
<td width="78%">


<p>The second example reads the batch data via standard
input so that the batch file doesn&rsquo;t need to be copied
to the remote machine first. This example avoids the foo.sh
script because it needed to use a modified
<b>&minus;&minus;read&minus;batch</b> option, but you could
edit the script file if you wished to make use of it (just
be sure that no other option is trying to use standard
input, such as the
&quot;<b>&minus;&minus;exclude&minus;from=&minus;</b>&quot;
option).</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Caveats:</p>

<p style="margin-left:11%; margin-top: 1em">The
read&minus;batch option expects the destination tree that it
is updating to be identical to the destination tree that was
used to create the batch update fileset. When a difference
between the destination trees is encountered the update
might be discarded with a warning (if the file appears to be
up&minus;to&minus;date already) or the file&minus;update may
be attempted and then, if the file fails to verify, the
update discarded with an error. This means that it should be
safe to re&minus;run a read&minus;batch operation if the
command got interrupted. If you wish to force the
batched&minus;update to always be attempted regardless of
the file&rsquo;s size and date, use the <b>&minus;I</b>
option (when reading the batch). If an error occurs, the
destination tree will probably be in a partially updated
state. In that case, rsync can be used in its regular
(non&minus;batch) mode of operation to fix up the
destination tree.</p>

<p style="margin-left:11%; margin-top: 1em">The rsync
version used on all destinations must be at least as new as
the one used to generate the batch file. Rsync will die with
an error if the protocol version in the batch file is too
new for the batch&minus;reading rsync to handle. See also
the <b>&minus;&minus;protocol</b> option for a way to have
the creating rsync generate a batch file that an older rsync
can understand. (Note that batch files changed format in
version 2.6.3, so mixing versions older than that with newer
versions will not work.)</p>

<p style="margin-left:11%; margin-top: 1em">When reading a
batch file, rsync will force the value of certain options to
match the data in the batch file if you didn&rsquo;t set
them to the same as the batch&minus;writing command. Other
options can (and should) be changed. For instance
<b>&minus;&minus;write&minus;batch</b> changes to
<b>&minus;&minus;read&minus;batch</b>,
<b>&minus;&minus;files&minus;from</b> is dropped, and the
<b>&minus;&minus;filter</b>/<b>&minus;&minus;include</b>/<b>&minus;&minus;exclude</b>
options are not needed unless one of the
<b>&minus;&minus;delete</b> options is specified.</p>

<p style="margin-left:11%; margin-top: 1em">The code that
creates the BATCH.sh file transforms any
filter/include/exclude options into a single list that is
appended as a &quot;here&quot; document to the shell script
file. An advanced user can use this to modify the exclude
list if a change in what gets deleted by
<b>&minus;&minus;delete</b> is desired. A normal user can
ignore this detail and just use the shell script as an easy
way to run the appropriate
<b>&minus;&minus;read&minus;batch</b> command for the
batched data.</p>

<p style="margin-left:11%; margin-top: 1em">The original
batch mode in rsync was based on &quot;rsync+&quot;, but the
latest version uses a new implementation.</p>

<h2>SYMBOLIC LINKS
<a name="SYMBOLIC LINKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Three basic
behaviors are possible when rsync encounters a symbolic link
in the source directory.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
symbolic links are not transferred at all. A message
&quot;skipping non&minus;regular&quot; file is emitted for
any symlinks that exist.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>&minus;&minus;links</b> is specified, then symlinks are
recreated with the same target on the destination. Note that
<b>&minus;&minus;archive</b> implies
<b>&minus;&minus;links</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If
<b>&minus;&minus;copy&minus;links</b> is specified, then
symlinks are &quot;collapsed&quot; by copying their
referent, rather than the symlink.</p>

<p style="margin-left:11%; margin-top: 1em">Rsync can also
distinguish &quot;safe&quot; and &quot;unsafe&quot; symbolic
links. An example where this might be used is a web site
mirror that wishes to ensure that the rsync module that is
copied does not include symbolic links to <b>/etc/passwd</b>
in the public section of the site. Using
<b>&minus;&minus;copy&minus;unsafe&minus;links</b> will
cause any links to be copied as the file they point to on
the destination. Using <b>&minus;&minus;safe&minus;links</b>
will cause unsafe links to be omitted altogether. (Note that
you must specify <b>&minus;&minus;links</b> for
<b>&minus;&minus;safe&minus;links</b> to have any
effect.)</p>

<p style="margin-left:11%; margin-top: 1em">Symbolic links
are considered unsafe if they are absolute symlinks (start
with <b>/</b>), empty, or if they contain enough
&quot;..&quot; components to ascend from the directory being
copied.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s a
summary of how the symlink options are interpreted. The list
is in order of precedence, so if your combination of options
isn&rsquo;t mentioned, use the first line that is a complete
subset of your options: <b><br>
&minus;&minus;copy&minus;links</b></p>

<p style="margin-left:22%;">Turn all symlinks into normal
files (leaving no symlinks for any other options to
affect).</p>

<p style="margin-left:11%;"><b>&minus;&minus;links
&minus;&minus;copy&minus;unsafe&minus;links</b></p>

<p style="margin-left:22%;">Turn all unsafe symlinks into
files and duplicate all safe symlinks.</p>


<p style="margin-left:11%;"><b>&minus;&minus;copy&minus;unsafe&minus;links</b></p>

<p style="margin-left:22%;">Turn all unsafe symlinks into
files, noisily skip all safe symlinks.</p>

<p style="margin-left:11%;"><b>&minus;&minus;links
&minus;&minus;safe&minus;links</b></p>

<p style="margin-left:22%;">Duplicate safe symlinks and
skip unsafe ones.</p>

<p style="margin-left:11%;"><b>&minus;&minus;links</b></p>

<p style="margin-left:22%;">Duplicate all symlinks.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync
occasionally produces error messages that may seem a little
cryptic. The one that seems to cause the most confusion is
&quot;protocol version mismatch &minus;&minus; is your shell
clean?&quot;.</p>

<p style="margin-left:11%; margin-top: 1em">This message is
usually caused by your startup scripts or remote shell
facility producing unwanted garbage on the stream that rsync
is using for its transport. The way to diagnose this problem
is to run your remote shell like this:</p>

<p style="margin-left:22%; margin-top: 1em"><tt>ssh
remotehost /bin/true &gt; out.dat</tt></p>

<p style="margin-left:11%; margin-top: 1em">then look at
out.dat. If everything is working correctly then out.dat
should be a zero length file. If you are getting the above
error from rsync then you will probably find that out.dat
contains some text or data. Look at the contents and try to
work out what is producing it. The most common cause is
incorrectly configured shell startup scripts (such as .cshrc
or .profile) that contain output statements for
non&minus;interactive logins.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
having trouble debugging filter patterns, then try
specifying the <b>&minus;vv</b> option. At this level of
verbosity rsync will show why each individual file is
included or excluded.</p>

<h2>EXIT VALUES
<a name="EXIT VALUES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em"><b>0</b></p></td>
<td width="8%"></td>
<td width="78%">


<p style="margin-top: 1em">Success</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>1</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Syntax or usage error</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>2</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Protocol incompatibility</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>3</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Errors selecting input/output files, dirs</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>4</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Requested action not supported: an attempt was made to
manipulate 64&minus;bit files on a platform that cannot
support them; or an option was specified that is supported
by the client and not by the server.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>5</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error starting client&minus;server protocol</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>6</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Daemon unable to append to log&minus;file</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>10</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in socket I/O</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>11</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in file I/O</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>12</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in rsync protocol data stream</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>13</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Errors with program diagnostics</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>14</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error in IPC code</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>20</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Received SIGUSR1 or SIGINT</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>21</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Some error returned by <tt>waitpid()</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>22</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Error allocating core memory buffers</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>23</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Partial transfer due to error</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>24</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Partial transfer due to vanished source files</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>25</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>The &minus;&minus;max&minus;delete limit stopped
deletions</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>30</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Timeout in data send/receive</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>35</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Timeout waiting for daemon connection</p></td></tr>
</table>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>CVSIGNORE</b></p>

<p style="margin-left:22%;">The CVSIGNORE environment
variable supplements any ignore patterns in .cvsignore
files. See the <b>&minus;&minus;cvs&minus;exclude</b> option
for more details.</p>

<p style="margin-left:11%;"><b>RSYNC_ICONV</b></p>

<p style="margin-left:22%;">Specify a default
<b>&minus;&minus;iconv</b> setting using this environment
variable. (First supported in 3.0.0.)</p>

<p style="margin-left:11%;"><b>RSYNC_RSH</b></p>

<p style="margin-left:22%;">The RSYNC_RSH environment
variable allows you to override the default shell used as
the transport for rsync. Command line options are permitted
after the command name, just as in the <b>&minus;e</b>
option.</p>

<p style="margin-left:11%;"><b>RSYNC_PROXY</b></p>

<p style="margin-left:22%;">The RSYNC_PROXY environment
variable allows you to redirect your rsync client to use a
web proxy when connecting to a rsync daemon. You should set
RSYNC_PROXY to a hostname:port pair.</p>

<p style="margin-left:11%;"><b>RSYNC_PASSWORD</b></p>

<p style="margin-left:22%;">Setting RSYNC_PASSWORD to the
required password allows you to run authenticated rsync
connections to an rsync daemon without user intervention.
Note that this does not supply a password to a remote shell
transport such as ssh; to learn how to do that, consult the
remote shell&rsquo;s documentation.</p>

<p style="margin-left:11%;"><b>USER</b> or
<b>LOGNAME</b></p>

<p style="margin-left:22%;">The USER or LOGNAME environment
variables are used to determine the default username sent to
an rsync daemon. If neither is set, the username defaults to
&quot;nobody&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>HOME</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>The HOME environment variable is used to find the
user&rsquo;s default .cvsignore file.</p></td></tr>
</table>

<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">/etc/rsyncd.conf
or rsyncd.conf</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>rsyncd.conf</b>(5)</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">times are
transferred as *nix time_t values</p>

<p style="margin-left:11%; margin-top: 1em">When
transferring to FAT filesystems rsync may re&minus;sync
unmodified files. See the comments on the
<b>&minus;&minus;modify&minus;window</b> option.</p>

<p style="margin-left:11%; margin-top: 1em">file
permissions, devices, etc. are transferred as native
numerical values</p>

<p style="margin-left:11%; margin-top: 1em">see also the
comments on the <b>&minus;&minus;delete</b> option</p>

<p style="margin-left:11%; margin-top: 1em">Please report
bugs! See the web site at http://rsync.samba.org/</p>

<h2>VERSION
<a name="VERSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This man page
is current for version 3.0.9 of rsync.</p>

<h2>INTERNAL OPTIONS
<a name="INTERNAL OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The options
<b>&minus;&minus;server</b> and <b>&minus;&minus;sender</b>
are used internally by rsync, and should never be typed by a
user under normal circumstances. Some awareness of these
options may be needed in certain scenarios, such as when
setting up a login that can only run an rsync command. For
instance, the support directory of the rsync distribution
has an example script named rrsync (for restricted rsync)
that can be used with a restricted ssh login.</p>

<h2>CREDITS
<a name="CREDITS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync is
distributed under the GNU public license. See the file
COPYING for details.</p>

<p style="margin-left:11%; margin-top: 1em">A WEB site is
available at http://rsync.samba.org/. The site includes an
FAQ&minus;O&minus;Matic which may cover questions unanswered
by this manual page.</p>

<p style="margin-left:11%; margin-top: 1em">The primary ftp
site for rsync is ftp://rsync.samba.org/pub/rsync.</p>

<p style="margin-left:11%; margin-top: 1em">We would be
delighted to hear from you if you like this program. Please
contact the mailing&minus;list at rsync@lists.samba.org.</p>

<p style="margin-left:11%; margin-top: 1em">This program
uses the excellent zlib compression library written by
Jean&minus;loup Gailly and Mark Adler.</p>

<h2>THANKS
<a name="THANKS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Special thanks
go out to: John Van Essen, Matt McCutchen, Wesley W.
Terpstra, David Dykstra, Jos Backus, Sebastian Krahmer,
Martin Pool, and our
gone&minus;but&minus;not&minus;forgotten compadre, J.W.
Schultz.</p>

<p style="margin-left:11%; margin-top: 1em">Thanks also to
Richard Brent, Brendan Mackay, Bill Waite, Stephen Rothwell
and David Bell. I&rsquo;ve probably missed some people, my
apologies if I have.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">rsync was
originally written by Andrew Tridgell and Paul Mackerras.
Many people have later contributed to it. It is currently
maintained by Wayne Davison.</p>

<p style="margin-left:11%; margin-top: 1em">Mailing lists
for support and development are available at
http://lists.samba.org</p>
<hr>
</body>
</html>
