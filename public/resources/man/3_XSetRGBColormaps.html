<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:05:54 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XAllocStandardColormap</title>

</head>
<body>

<h1 align="center">XAllocStandardColormap</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNTAX">SYNTAX</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#STRUCTURES">STRUCTURES</a><br>
<a href="#DIAGNOSTICS">DIAGNOSTICS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">XAllocStandardColormap,
XSetRGBColormaps, XGetRGBColormaps, XStandardColormap
&minus; allocate, set, or read a standard colormap
structure</p>

<h2>SYNTAX
<a name="SYNTAX"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">XStandardColormap
*XAllocStandardColormap(void);</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">void XSetRGBColormaps(Display
*<i>display</i>, Window <i>w</i>, XStandardColormap
*<i>std_colormap</i>, int <i>count</i>, Atom
<i>property</i>);</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="89%">


<p style="margin-top: 1em">Status XGetRGBColormaps(Display
*<i>display</i>, Window <i>w</i>, XStandardColormap
**<i>std_colormap_return</i>, int *<i>count_return</i>, Atom
<i>property</i>);</p> </td></tr>
</table>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">


<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>
<td width="11%"></td>
<td width="11%"></td>
<td width="4%"></td>
<td width="63%">
</td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><i>display</i></p></td>
<td width="4%"></td>
<td width="63%">


<p>Specifies the connection to the X server.</p></td>
<td width="11%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="11%">


<p><i>count</i></p></td>
<td width="4%"></td>
<td width="63%">


<p>Specifies the number of colormaps.</p></td>
<td width="11%">
</td></tr>
</table>

<p style="margin-left:11%;"><i>count_return</i></p>

<p style="margin-left:26%;">Returns the number of
colormaps.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="12%">


<p><i>property</i></p></td>
<td width="3%"></td>
<td width="43%">


<p>Specifies the property name.</p></td>
<td width="31%">
</td></tr>
</table>

<p style="margin-left:11%;"><i>std_colormap</i></p>

<p style="margin-left:26%;">Specifies the
<i>XStandardColormap</i> structure to be used.</p>

<p style="margin-left:11%;"><i>std_colormap_return</i></p>

<p style="margin-left:26%;">Returns the
<i>XStandardColormap</i> structure.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>XAllocStandardColormap</i> function allocates and returns
a pointer to a <i>XStandardColormap</i> structure. Note that
all fields in the <i>XStandardColormap</i> structure are
initially set to zero. If insufficient memory is available,
<i>XAllocStandardColormap</i> returns NULL. To free the
memory allocated to this structure, use <i>XFree</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>XSetRGBColormaps</i> function replaces the RGB colormap
definition in the specified property on the named window. If
the property does not already exist, <i>XSetRGBColormaps</i>
sets the RGB colormap definition in the specified property
on the named window. The property is stored with a type of
RGB_COLOR_MAP and a format of 32. Note that it is the
caller&rsquo;s responsibility to honor the ICCCM restriction
that only RGB_DEFAULT_MAP contain more than one
definition.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>XSetRGBColormaps</i> function usually is only used by
window or session managers. To create a standard colormap,
follow this procedure:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>1.</p></td>
<td width="4%"></td>
<td width="82%">


<p>Open a new connection to the same server.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>2.</p></td>
<td width="4%"></td>
<td width="82%">


<p>Grab the server.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>3.</p></td>
<td width="4%"></td>
<td width="82%">


<p>See if the property is on the property list of the root
window for the screen.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p>4.</p></td>
<td width="4%"></td>
<td width="82%">


<p>If the desired property is not present:</p></td></tr>
</table>

<p style="margin-left:18%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%"></td>
<td width="6%"></td>
<td width="74%">


<p style="margin-top: 1em">Create a colormap (unless you
are using the default colormap of the screen).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Determine the color characteristics of the visual.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Allocate cells in the colormap (or create it with
<i>AllocAll</i>).</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Call <i>XStoreColors</i> to store appropriate color
values in the colormap.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Fill in the descriptive members in the
<i>XStandardColormap</i> structure.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Attach the property to the root window.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="74%">


<p>Use <i>XSetCloseDownMode</i> to make the resource
permanent.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>5.</p></td>
<td width="6%"></td>
<td width="74%">
</td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">Ungrab the
server.</p>


<p style="margin-left:11%; margin-top: 1em"><i>XSetRGBColormaps</i>
can generate <i>BadAlloc</i>, <i>BadAtom</i>, and
<i>BadWindow</i> errors.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>XGetRGBColormaps</i> function returns the RGB colormap
definitions stored in the specified property on the named
window. If the property exists, is of type RGB_COLOR_MAP, is
of format 32, and is long enough to contain a colormap
definition, <i>XGetRGBColormaps</i> allocates and fills in
space for the returned colormaps and returns a nonzero
status. If the visualid is not present,
<i>XGetRGBColormaps</i> assumes the default visual for the
screen on which the window is located; if the killid is not
present, <i>None</i> is assumed, which indicates that the
resources cannot be released. Otherwise, none of the fields
are set, and <i>XGetRGBColormaps</i> returns a zero status.
Note that it is the caller&rsquo;s responsibility to honor
the ICCCM restriction that only RGB_DEFAULT_MAP contain more
than one definition.</p>


<p style="margin-left:11%; margin-top: 1em"><i>XGetRGBColormaps</i>
can generate <i>BadAtom</i> and <i>BadWindow</i> errors.</p>

<h2>STRUCTURES
<a name="STRUCTURES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>XStandardColormap</i> structure contains:</p>

<p style="margin-left:11%; margin-top: 1em">/* Hints */</p>

<p style="margin-left:11%; margin-top: 1em">/* Values
*/</p>

<pre style="margin-left:11%;">typedef struct {
        Colormap colormap;
        unsigned long red_max;
        unsigned long red_mult;
        unsigned long green_max;
        unsigned long green_mult;
        unsigned long blue_max;
        unsigned long blue_mult;
        unsigned long base_pixel;
        VisualID visualid;
        XID killid;
} XStandardColormap;</pre>


<p style="margin-left:11%; margin-top: 1em">The colormap
member is the colormap created by the <i>XCreateColormap</i>
function. The red_max, green_max, and blue_max members give
the maximum red, green, and blue values, respectively. Each
color coefficient ranges from zero to its max, inclusive.
For example, a common colormap allocation is 3/3/2 (3 planes
for red, 3 planes for green, and 2 planes for blue). This
colormap would have red_max = 7, green_max = 7, and blue_max
= 3. An alternate allocation that uses only 216 colors is
red_max = 5, green_max = 5, and blue_max = 5.</p>

<p style="margin-left:11%; margin-top: 1em">The red_mult,
green_mult, and blue_mult members give the scale factors
used to compose a full pixel value. (See the discussion of
the base_pixel members for further information.) For a 3/3/2
allocation, red_mult might be 32, green_mult might be 4, and
blue_mult might be 1. For a 6-colors-each allocation,
red_mult might be 36, green_mult might be 6, and blue_mult
might be 1.</p>

<p style="margin-left:11%; margin-top: 1em">The base_pixel
member gives the base pixel value used to compose a full
pixel value. Usually, the base_pixel is obtained from a call
to the <i>XAllocColorPlanes</i> function. Given integer red,
green, and blue coefficients in their appropriate ranges,
one then can compute a corresponding pixel value by using
the following expression:</p>

<pre style="margin-left:11%; margin-top: 1em">(r * red_mult + g * green_mult + b * blue_mult + base_pixel) &amp; 0xFFFFFFFF</pre>


<p style="margin-left:11%; margin-top: 1em">For
<i>GrayScale</i> colormaps, only the colormap, red_max,
red_mult, and base_pixel members are defined. The other
members are ignored. To compute a <i>GrayScale</i> pixel
value, use the following expression:</p>

<pre style="margin-left:11%; margin-top: 1em">(gray * red_mult + base_pixel) &amp; 0xFFFFFFFF</pre>


<p style="margin-left:11%; margin-top: 1em">Negative
multipliers can be represented by converting the 2&rsquo;s
complement representation of the multiplier into an unsigned
long and storing the result in the appropriate _mult field.
The step of masking by 0xFFFFFFFF effectively converts the
resulting positive multiplier into a negative one. The
masking step will take place automatically on many machine
architectures, depending on the size of the integer type
used to do the computation,</p>

<p style="margin-left:11%; margin-top: 1em">The visualid
member gives the ID number of the visual from which the
colormap was created. The killid member gives a resource ID
that indicates whether the cells held by this standard
colormap are to be released by freeing the colormap ID or by
calling the <i>XKillClient</i> function on the indicated
resource. (Note that this method is necessary for allocating
out of an existing colormap.)</p>

<p style="margin-left:11%; margin-top: 1em">The properties
containing the <i>XStandardColormap</i> information have the
type RGB_COLOR_MAP.</p>

<h2>DIAGNOSTICS
<a name="DIAGNOSTICS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p style="margin-top: 1em"><i>BadAlloc</i></p></td>
<td width="1%"></td>
<td width="74%">


<p style="margin-top: 1em">The server failed to allocate
the requested resource or server memory.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p><i>BadAtom</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>A value for an Atom argument does not name a defined
Atom.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="14%">


<p><i>BadWindow</i></p></td>
<td width="1%"></td>
<td width="74%">


<p>A value for a Window argument does not name a defined
Window.</p> </td></tr>
</table>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">XAllocColor(3),
XCreateColormap(3), XFree(3), XSetCloseDownMode(3) <i><br>
Xlib &minus; C Language X Interface</i></p>
<hr>
</body>
</html>
