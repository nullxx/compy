<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:59:02 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERLDOS</title>

</head>
<body>

<h1 align="center">PERLDOS</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#BUILDING AND INSTALLING MODULES ON DOS">BUILDING AND INSTALLING MODULES ON DOS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perldos &minus;
Perl under DOS, W31, W95.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These are
instructions for building Perl under <small>DOS</small> (or
w??), using <small>DJGPP</small> v2.03 or later. Under w95
long filenames are supported.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Before you
start, you should glance through the <small>README</small>
file found in the top-level directory where the Perl
distribution was extracted. Make sure you read and
understand the terms under which this software is being
distributed.</p>

<p style="margin-left:11%; margin-top: 1em">This port
currently supports MakeMaker (the set of modules that is
used to build extensions to perl). Therefore, you should be
able to build and install most extensions found in the
<small>CPAN</small> sites.</p>

<p style="margin-left:11%; margin-top: 1em">Detailed
instructions on how to build and install perl extension
modules, including XS-type modules, is included. See &rsquo;
<small>BUILDING AND INSTALLING MODULES</small> &rsquo;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Prerequisites
for Compiling Perl on <small>DOS</small></b> <small><br>
DJGPP</small></p>

<p style="margin-left:17%;"><small>DJGPP</small> is a port
of <small>GNU</small> C/C <small>++</small> compiler and
development tools to 32&minus;bit, protected-mode
environment on Intel 32&minus;bit CPUs running MS-DOS and
compatible operating systems, by <small>DJ</small> Delorie
&lt;dj@delorie.com&gt; and friends.</p>

<p style="margin-left:17%; margin-top: 1em">For more
details ( <small>FAQ</small> ), check out the home of
<small>DJGPP</small> at:</p>

<pre style="margin-left:17%; margin-top: 1em">        http://www.delorie.com/djgpp/</pre>


<p style="margin-left:17%; margin-top: 1em">If you have
questions about <small>DJGPP</small> , try posting to the
<small>DJGPP</small> newsgroup: comp.os.msdos.djgpp, or use
the email gateway djgpp@delorie.com.</p>

<p style="margin-left:17%; margin-top: 1em">You can find
the full <small>DJGPP</small> distribution on any of the
mirrors listed here:</p>

<pre style="margin-left:17%; margin-top: 1em">        http://www.delorie.com/djgpp/getting.html</pre>


<p style="margin-left:17%; margin-top: 1em">You need the
following files to build perl (or add new modules):</p>

<pre style="margin-left:17%; margin-top: 1em">        v2/djdev203.zip
        v2gnu/bnu2112b.zip
        v2gnu/gcc2953b.zip
        v2gnu/bsh204b.zip
        v2gnu/mak3791b.zip
        v2gnu/fil40b.zip
        v2gnu/sed3028b.zip
        v2gnu/txt20b.zip
        v2gnu/dif272b.zip
        v2gnu/grep24b.zip
        v2gnu/shl20jb.zip
        v2gnu/gwk306b.zip
        v2misc/csdpmi5b.zip</pre>


<p style="margin-left:17%; margin-top: 1em">or possibly any
newer version.</p>

<p style="margin-left:11%;">Pthreads</p>

<p style="margin-left:17%;">Thread support is not tested in
this version of the djgpp perl.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Shortcomings
of Perl under <small>DOS</small></b> <br>
Perl under <small>DOS</small> lacks some features of perl
under <small>UNIX</small> because of deficiencies in the
UNIX-emulation, most notably:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>fork()</i> and <i>pipe()</i></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>some features of the <small>UNIX</small> filesystem
regarding link count and file dates</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>in-place operation is a little bit broken with short
filenames</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>sockets</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Building
Perl on <small>DOS</small></b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Unpack the source package
<i>perl5.8*.tar.gz</i> with djtarx. If you want to use long
file names under w95 and also to get Perl to pass all its
tests, don&rsquo;t forget to use</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">        set LFN=y
        set FNCASE=y</pre>


<p style="margin-left:17%; margin-top: 1em">before
unpacking the archive.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Create a &quot;symlink&quot; or
copy your bash.exe to sh.exe in your
<tt>&quot;($DJDIR)/bin&quot;</tt> directory.</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">        ln &minus;s bash.exe sh.exe</pre>


<p style="margin-left:17%; margin-top: 1em">[If you have
the recommended version of bash for <small>DJGPP</small> ,
this is already done for you.]</p>

<p style="margin-left:17%; margin-top: 1em">And make the
<tt>&quot;SHELL&quot;</tt> environment variable point to
this <i>sh.exe</i>:</p>

<pre style="margin-left:17%; margin-top: 1em">        set SHELL=c:/djgpp/bin/sh.exe (use full path name!)</pre>


<p style="margin-left:17%; margin-top: 1em">You can do this
in <i>djgpp.env</i> too. Add this line <small>BEFORE</small>
any section definition:</p>

<pre style="margin-left:17%; margin-top: 1em">        +SHELL=%DJDIR%/bin/sh.exe</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">If you have <i>split.exe</i> and
<i>gsplit.exe</i> in your path, then rename <i>split.exe</i>
to <i>djsplit.exe</i>, and <i>gsplit.exe</i> to
<i>split.exe</i>. Copy or link <i>gecho.exe</i> to
<i>echo.exe</i> if you don&rsquo;t have <i>echo.exe</i>.
Copy or link <i>gawk.exe</i> to <i>awk.exe</i> if you
don&rsquo;t have <i>awk.exe</i>.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">[If you have
the recommended versions of djdev, shell utilities and gawk,
all these are already done for you, and you will not need to
do anything.]</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Chdir to the djgpp subdirectory
of perl toplevel and type the following commands:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">        set FNCASE=y
        configure.bat</pre>


<p style="margin-left:17%; margin-top: 1em">This will do
some preprocessing then run the Configure script for you.
The Configure script is interactive, but in most cases you
just need to press <small>ENTER</small> . The
&quot;set&quot; command ensures that <small>DJGPP</small>
preserves the letter case of file names when reading
directories. If you already issued this set command when
unpacking the archive, and you are in the same
<small>DOS</small> session as when you unpacked the archive,
you don&rsquo;t have to issue the set command again. This
command is necessary *before* you start to (re)configure or
(re)build perl in order to ensure both that perl builds
correctly and that building XS-type modules can succeed. See
the <small>DJGPP</small> info entry for
&quot;_preserve_fncase&quot; for more information:</p>

<pre style="margin-left:17%; margin-top: 1em">        info libc alphabetical _preserve_fncase</pre>


<p style="margin-left:17%; margin-top: 1em">If the script
says that your package is incomplete, and asks whether to
continue, just answer with Y (this can only happen if you
don&rsquo;t use long filenames or forget to issue &quot;set
FNCASE=y&quot; first).</p>

<p style="margin-left:17%; margin-top: 1em">When Configure
asks about the extensions, I suggest <small>IO</small> and
Fcntl, and if you want database handling then SDBM_File or
GDBM_File (you need to install gdbm for this one). If you
want to use the <small>POSIX</small> extension (this is the
default), make sure that the stack size of your
<i>cc1.exe</i> is at least 512kbyte (you can check this
with: <tt>&quot;stubedit cc1.exe&quot;</tt>).</p>

<p style="margin-left:17%; margin-top: 1em">You can use the
Configure script in non-interactive mode too. When I built
my <i>perl.exe</i>, I used something like this:</p>

<pre style="margin-left:17%; margin-top: 1em">        configure.bat &minus;des</pre>


<p style="margin-left:17%; margin-top: 1em">You can find
more info about Configure&rsquo;s command line switches in
the <i><small>INSTALL</small></i> file.</p>

<p style="margin-left:17%; margin-top: 1em">When the script
ends, and you want to change some values in the generated
<i>config.sh</i> file, then run</p>

<pre style="margin-left:17%; margin-top: 1em">        sh Configure &minus;S</pre>


<p style="margin-left:17%; margin-top: 1em">after you made
your modifications.</p>


<p style="margin-left:17%; margin-top: 1em"><small>IMPORTANT:</small>
if you use this <tt>&quot;&minus;S&quot;</tt> switch, be
sure to delete the <small>CONFIG</small> environment
variable before running the script:</p>

<pre style="margin-left:17%; margin-top: 1em">        set CONFIG=</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="48%">


<p style="margin-top: 1em">Now you can compile Perl.
Type:</p> </td>
<td width="35%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">        make</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Testing Perl
on <small>DOS</small></b> <br>
Type:</p>

<pre style="margin-left:11%; margin-top: 1em">        make test</pre>


<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
lucky you should see &quot;All tests successful&quot;. But
there can be a few failed subtests (less than 5 hopefully)
depending on some external conditions (e.g. some subtests
fail under linux/dosemu or plain dos with short filenames
only).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Installation
of Perl on <small>DOS</small></b> <br>
Type:</p>

<pre style="margin-left:11%; margin-top: 1em">        make install</pre>


<p style="margin-left:11%; margin-top: 1em">This will copy
the newly compiled perl and libraries into your
<small>DJGPP</small> directory structure. Perl.exe and the
utilities go into <tt>&quot;($DJDIR)/bin&quot;</tt>, and the
library goes under <tt>&quot;($DJDIR)/lib/perl5&quot;</tt>.
The pod documentation goes under
<tt>&quot;($DJDIR)/lib/perl5/pod&quot;</tt>.</p>

<h2>BUILDING AND INSTALLING MODULES ON DOS
<a name="BUILDING AND INSTALLING MODULES ON DOS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Building
Prerequisites for Perl on <small>DOS</small></b> <br>
For building and installing non-XS modules, all you need is
a working perl under <small>DJGPP</small> . Non-XS modules
do not require re-linking the perl binary, and so are
simpler to build and install.</p>

<p style="margin-left:11%; margin-top: 1em">XS-type modules
do require re-linking the perl binary, because part of an
<small>XS</small> module is written in &quot;C&quot;, and
has to be linked together with the perl binary to be
executed. This is required because perl under
<small>DJGPP</small> is built with the &quot;static
link&quot; option, due to the lack of &quot;dynamic
linking&quot; in the <small>DJGPP</small> environment.</p>

<p style="margin-left:11%; margin-top: 1em">Because
<small>XS</small> modules require re-linking of the perl
binary, you need both the perl binary distribution and the
perl source distribution to build an <small>XS</small>
extension module. In addition, you will have to have built
your perl binary from the source distribution so that all of
the components of the perl binary are available for the
required link step.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unpacking
<small>CPAN</small> Modules on <small>DOS</small></b> <br>
First, download the module package from <small>CPAN</small>
(e.g., the &quot;Comma Separated Value&quot; text package,
Text&minus;CSV&minus;0.01.tar.gz). Then expand the contents
of the package into some location on your disk. Most
<small>CPAN</small> modules are built with an internal
directory structure, so it is usually safe to expand it in
the root of your <small>DJGPP</small> installation. Some
people prefer to locate source trees under /usr/src (i.e.,
<tt>&quot;($DJDIR)/usr/src&quot;</tt>), but you may put it
wherever seems most logical to you, *EXCEPT* under the same
directory as your perl source code. There are special rules
that apply to modules which live in the perl source tree
that do not apply to most of the modules in
<small>CPAN</small> .</p>

<p style="margin-left:11%; margin-top: 1em">Unlike other
<small>DJGPP</small> packages, which are normal
&quot;zip&quot; files, most <small>CPAN</small> module
packages are &quot;gzipped tarballs&quot;. Recent versions
of WinZip will safely unpack and expand them, *UNLESS* they
have zero-length files. It is a known WinZip bug (as of
v7.0) that it will not extract zero-length files.</p>

<p style="margin-left:11%; margin-top: 1em">From the
command line, you can use the djtar utility provided with
<small>DJGPP</small> to unpack and expand these files. For
example:</p>

<pre style="margin-left:11%; margin-top: 1em">        C:\djgpp&gt;djtarx &minus;v Text&minus;CSV&minus;0.01.tar.gz</pre>


<p style="margin-left:11%; margin-top: 1em">This will
create the new directory
<tt>&quot;($DJDIR)/Text&minus;CSV&minus;0.01&quot;</tt>,
filling it with the source for this module.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Building
Non-XS Modules on <small>DOS</small></b> <br>
To build a non-XS module, you can use the standard
module-building instructions distributed with perl
modules.</p>

<pre style="margin-left:11%; margin-top: 1em">    perl Makefile.PL
    make
    make test
    make install</pre>


<p style="margin-left:11%; margin-top: 1em">This is
sufficient because non-XS modules install only
&quot;.pm&quot; files and (sometimes) pod and/or man
documentation. No re-linking of the perl binary is needed to
build, install or use non-XS modules.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Building
<small>XS</small> Modules on <small>DOS</small></b> <br>
To build an <small>XS</small> module, you must use the
standard module-building instructions distributed with perl
modules *PLUS* three extra instructions specific to the
<small>DJGPP</small> &quot;static link&quot; build
environment.</p>

<pre style="margin-left:11%; margin-top: 1em">    set FNCASE=y
    perl Makefile.PL
    make
    make perl
    make test
    make &minus;f Makefile.aperl inst_perl MAP_TARGET=perl.exe
    make install</pre>


<p style="margin-left:11%; margin-top: 1em">The first extra
instruction sets <small>DJGPP</small> &rsquo;s
<small>FNCASE</small> environment variable so that the new
perl binary which you must build for an XS-type module will
build correctly. The second extra instruction re-builds the
perl binary in your module directory before you run
&quot;make test&quot;, so that you are testing with the new
module code you built with &quot;make&quot;. The third extra
instruction installs the perl binary from your module
directory into the standard <small>DJGPP</small> binary
directory, <tt>&quot;($DJDIR)/bin&quot;</tt>, replacing your
previous perl binary.</p>

<p style="margin-left:11%; margin-top: 1em">Note that the
<small>MAP_TARGET</small> value *must* have the
&quot;.exe&quot; extension or you will not create a
&quot;perl.exe&quot; to replace the one in
<tt>&quot;($DJDIR)/bin&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">When you are
done, the XS-module install process will have added
information to your &quot;perllocal&quot; information
telling that the perl binary has been replaced, and what
module was installed. You can view this information at any
time by using the command:</p>

<pre style="margin-left:11%; margin-top: 1em">        perl &minus;S perldoc perllocal</pre>


<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Laszlo Molnar,
<i>laszlo.molnar@eth.ericsson.se</i> [Installing/building
perl]</p>

<p style="margin-left:11%; margin-top: 1em">Peter J. Farley
<small>III</small> <i>pjfarley@banet.net</i>
[Building/installing modules]</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>perl</i>(1).</p>
<hr>
</body>
</html>
