<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:01:20 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>S_SERVER</title>

</head>
<body>

<h1 align="center">S_SERVER</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONNECTED COMMANDS">CONNECTED COMMANDS</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">s_server
&minus; SSL/TLS server program</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>openssl
s_server</b> [<b>&minus;accept port</b>] [<b>&minus;context
id</b>] [<b>&minus;verify depth</b>] [<b>&minus;Verify
depth</b>] [<b>&minus;crl_check</b>]
[<b>&minus;crl_check_all</b>] [<b>&minus;cert filename</b>]
[<b>&minus;certform DER|PEM</b>] [<b>&minus;key keyfile</b>]
[<b>&minus;keyform DER|PEM</b>] [<b>&minus;pass arg</b>]
[<b>&minus;dcert filename</b>] [<b>&minus;dcertform
DER|PEM</b>] [<b>&minus;dkey keyfile</b>]
[<b>&minus;dkeyform DER|PEM</b>] [<b>&minus;dpass arg</b>]
[<b>&minus;dhparam filename</b>] [<b>&minus;nbio</b>]
[<b>&minus;nbio_test</b>] [<b>&minus;crlf</b>]
[<b>&minus;debug</b>] [<b>&minus;msg</b>]
[<b>&minus;state</b>] [<b>&minus;CApath directory</b>]
[<b>&minus;CAfile filename</b>]
[<b>&minus;trusted_first</b>] [<b>&minus;nocert</b>]
[<b>&minus;cipher cipherlist</b>] [<b>&minus;quiet</b>]
[<b>&minus;no_tmp_rsa</b>] [<b>&minus;ssl2</b>]
[<b>&minus;ssl3</b>] [<b>&minus;tls1</b>]
[<b>&minus;tls1_1</b>] [<b>&minus;tls1_2</b>]
[<b>&minus;dtls1</b>] [<b>&minus;no_ssl2</b>]
[<b>&minus;no_ssl3</b>] [<b>&minus;no_tls1</b>]
[<b>&minus;no_tls1_1</b>] [<b>&minus;no_tls1_2</b>]
[<b>&minus;no_dhe</b>] [<b>&minus;no_ecdhe</b>]
[<b>&minus;bugs</b>] [<b>&minus;hack</b>]
[<b>&minus;www</b>] [<b>&minus;WWW</b>] [<b>&minus;HTTP</b>]
[<b>&minus;engine id</b>] [<b>&minus;tlsextdebug</b>]
[<b>&minus;no_ticket</b>] [<b>&minus;id_prefix arg</b>]
[<b>&minus;rand file(s)</b>] [<b>&minus;nextprotoneg
protocols</b>]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>s_server</b> command implements a generic
<small>SSL/TLS</small> server which listens for connections
on a given port using <small>SSL/TLS.</small></p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&minus;accept
port</b></p>

<p style="margin-left:17%;">the <small>TCP</small> port to
listen on for connections. If not specified 4433 is
used.</p>

<p style="margin-left:11%;"><b>&minus;context id</b></p>

<p style="margin-left:17%;">sets the <small>SSL</small>
context id. It can be given any string value. If this option
is not present a default value will be used.</p>

<p style="margin-left:11%;"><b>&minus;cert certname</b></p>

<p style="margin-left:17%;">The certificate to use, most
servers cipher suites require the use of a certificate and
some require a certificate with a certain public key type:
for example the <small>DSS</small> cipher suites require a
certificate containing a <small>DSS</small> (
<small>DSA</small> ) key. If not specified then the filename
&quot;server.pem&quot; will be used.</p>

<p style="margin-left:11%;"><b>&minus;certform
format</b></p>

<p style="margin-left:17%;">The certificate format to use:
<small>DER</small> or <small>PEM. PEM</small> is the
default.</p>

<p style="margin-left:11%;"><b>&minus;key keyfile</b></p>

<p style="margin-left:17%;">The private key to use. If not
specified then the certificate file will be used.</p>

<p style="margin-left:11%;"><b>&minus;keyform
format</b></p>

<p style="margin-left:17%;">The private format to use:
<small>DER</small> or <small>PEM. PEM</small> is the
default.</p>

<p style="margin-left:11%;"><b>&minus;pass arg</b></p>

<p style="margin-left:17%;">the private key password
source. For more information about the format of <b>arg</b>
see the <b><small>PASS PHRASE ARGUMENTS</small></b> section
in <i>openssl</i>(1).</p>

<p style="margin-left:11%;"><b>&minus;dcert filename</b>,
<b>&minus;dkey keyname</b></p>

<p style="margin-left:17%;">specify an additional
certificate and private key, these behave in the same manner
as the <b>&minus;cert</b> and <b>&minus;key</b> options
except there is no default if they are not specified (no
additional certificate and key is used). As noted above some
cipher suites require a certificate containing a key of a
certain type. Some cipher suites need a certificate carrying
an <small>RSA</small> key and some a <small>DSS</small> (
<small>DSA</small> ) key. By using <small>RSA</small> and
<small>DSS</small> certificates and keys a server can
support clients which only support <small>RSA</small> or
<small>DSS</small> cipher suites by using an appropriate
certificate.</p>

<p style="margin-left:11%;"><b>&minus;dcertform format</b>,
<b>&minus;dkeyform format</b>, <b>&minus;dpass arg</b></p>

<p style="margin-left:17%;">addtional certificate and
private key format and passphrase respectively.</p>

<p style="margin-left:11%;"><b>&minus;nocert</b></p>

<p style="margin-left:17%;">if this option is set then no
certificate is used. This restricts the cipher suites
available to the anonymous ones (currently just anonymous
<small>DH</small> ).</p>

<p style="margin-left:11%;"><b>&minus;dhparam
filename</b></p>

<p style="margin-left:17%;">the <small>DH</small> parameter
file to use. The ephemeral <small>DH</small> cipher suites
generate keys using a set of <small>DH</small> parameters.
If not specified then an attempt is made to load the
parameters from the server certificate file. If this fails
then a static set of parameters hard coded into the s_server
program will be used.</p>

<p style="margin-left:11%;"><b>&minus;no_dhe</b></p>

<p style="margin-left:17%;">if this option is set then no
<small>DH</small> parameters will be loaded effectively
disabling the ephemeral <small>DH</small> cipher suites.</p>

<p style="margin-left:11%;"><b>&minus;no_ecdhe</b></p>

<p style="margin-left:17%;">if this option is set then
ephemeral <small>ECDH</small> cipher suites will be
disabled.</p>

<p style="margin-left:11%;"><b>&minus;no_tmp_rsa</b></p>

<p style="margin-left:17%;">certain export cipher suites
sometimes use a temporary <small>RSA</small> key, this
option disables temporary <small>RSA</small> key
generation.</p>

<p style="margin-left:11%;"><b>&minus;verify depth</b>,
<b>&minus;Verify depth</b></p>

<p style="margin-left:17%;">The verify depth to use. This
specifies the maximum length of the client certificate chain
and makes the server request a certificate from the client.
With the <b>&minus;verify</b> option a certificate is
requested but the client does not have to send one, with the
<b>&minus;Verify</b> option the client must supply a
certificate or an error occurs.</p>

<p style="margin-left:11%;"><b>&minus;crl_check</b>,
<b>&minus;crl_check_all</b></p>

<p style="margin-left:17%;">Check the peer certificate has
not been revoked by its <small>CA.</small> The
<small>CRL</small> (s) are appended to the certificate file.
With the <b>&minus;crl_check_all</b> option all CRLs of all
CAs in the chain are checked.</p>

<p style="margin-left:11%;"><b>&minus;CApath
directory</b></p>

<p style="margin-left:17%;">The directory to use for client
certificate verification. This directory must be in
&quot;hash format&quot;, see <b>verify</b> for more
information. These are also used when building the server
certificate chain.</p>

<p style="margin-left:11%;"><b>&minus;CAfile file</b></p>

<p style="margin-left:17%;">A file containing trusted
certificates to use during client authentication and to use
when attempting to build the server certificate chain. The
list is also used in the list of acceptable client CAs
passed to the client when a certificate is requested.</p>


<p style="margin-left:11%;"><b>&minus;trusted_first</b></p>

<p style="margin-left:17%;">Use certificates in
<small>CA</small> file or <small>CA</small> directory before
other certificates when building the trust chain to verify
client certificates. This is mainly useful in environments
with Bridge <small>CA</small> or Cross-Certified CAs.</p>

<p style="margin-left:11%;"><b>&minus;state</b></p>

<p style="margin-left:17%;">prints out the
<small>SSL</small> session states.</p>

<p style="margin-left:11%;"><b>&minus;debug</b></p>

<p style="margin-left:17%;">print extensive debugging
information including a hex dump of all traffic.</p>

<p style="margin-left:11%;"><b>&minus;msg</b></p>

<p style="margin-left:17%;">show all protocol messages with
hex dump.</p>

<p style="margin-left:11%;"><b>&minus;nbio_test</b></p>

<p style="margin-left:17%;">tests non blocking I/O</p>

<p style="margin-left:11%;"><b>&minus;nbio</b></p>

<p style="margin-left:17%;">turns on non blocking I/O</p>

<p style="margin-left:11%;"><b>&minus;crlf</b></p>

<p style="margin-left:17%;">this option translated a line
feed from the terminal into <small>CR+LF.</small></p>

<p style="margin-left:11%;"><b>&minus;quiet</b></p>

<p style="margin-left:17%;">inhibit printing of session and
certificate information.</p>

<p style="margin-left:11%;"><b>&minus;psk_hint hint</b></p>

<p style="margin-left:17%;">Use the <small>PSK</small>
identity hint <b>hint</b> when using a <small>PSK</small>
cipher suite.</p>

<p style="margin-left:11%;"><b>&minus;psk key</b></p>

<p style="margin-left:17%;">Use the <small>PSK</small> key
<b>key</b> when using a <small>PSK</small> cipher suite. The
key is given as a hexadecimal number without leading 0x, for
example &minus;psk 1a2b3c4d.</p>

<p style="margin-left:11%;"><b>&minus;ssl2</b>,
<b>&minus;ssl3</b>, <b>&minus;tls1</b>,
<b>&minus;tls1_1</b>, <b>&minus;tls1_2</b>,
<b>&minus;dtls1</b>, <b>&minus;no_ssl2</b>,
<b>&minus;no_ssl3</b>, <b><br>
&minus;no_tls1</b>, <b>&minus;no_tls1_1</b>,
<b>&minus;no_tls1_2</b></p>

<p style="margin-left:17%;">these options disable the use
of certain <small>SSL</small> or <small>TLS</small>
protocols. By default the initial handshake uses a method
which should be compatible with all servers and permit them
to use <small>SSL</small> v3, <small>SSL</small> v2 or
<small>TLS</small> as appropriate.</p>

<p style="margin-left:11%;"><b>&minus;bugs</b></p>

<p style="margin-left:17%;">there are several known bug in
<small>SSL</small> and <small>TLS</small> implementations.
Adding this option enables various workarounds.</p>

<p style="margin-left:11%;"><b>&minus;hack</b></p>

<p style="margin-left:17%;">this option enables a further
workaround for some some early Netscape <small>SSL</small>
code (?).</p>

<p style="margin-left:11%;"><b>&minus;cipher
cipherlist</b></p>

<p style="margin-left:17%;">this allows the cipher list
used by the server to be modified. When the client sends a
list of supported ciphers the first client cipher also
included in the server list is used. Because the client
specifies the preference order, the order of the server
cipherlist irrelevant. See the <b>ciphers</b> command for
more information.</p>

<p style="margin-left:11%;"><b>&minus;tlsextdebug</b></p>

<p style="margin-left:17%;">print out a hex dump of any
<small>TLS</small> extensions received from the server.</p>

<p style="margin-left:11%;"><b>&minus;no_ticket</b></p>

<p style="margin-left:17%;">disable RFC4507bis session
ticket support.</p>

<p style="margin-left:11%;"><b>&minus;www</b></p>

<p style="margin-left:17%;">sends a status message back to
the client when it connects. This includes lots of
information about the ciphers used and various session
parameters. The output is in <small>HTML</small> format so
this option will normally be used with a web browser.</p>

<p style="margin-left:11%;"><b>&minus;WWW</b></p>

<p style="margin-left:17%;">emulates a simple web server.
Pages will be resolved relative to the current directory,
for example if the <small>URL</small>
https://myhost/page.html is requested the file ./page.html
will be loaded.</p>

<p style="margin-left:11%;"><b>&minus;HTTP</b></p>

<p style="margin-left:17%;">emulates a simple web server.
Pages will be resolved relative to the current directory,
for example if the <small>URL</small>
https://myhost/page.html is requested the file ./page.html
will be loaded. The files loaded are assumed to contain a
complete and correct <small>HTTP</small> response (lines
that are part of the <small>HTTP</small> response line and
headers must end with <small>CRLF</small> ).</p>

<p style="margin-left:11%;"><b>&minus;engine id</b></p>

<p style="margin-left:17%;">specifying an engine (by its
unique <b>id</b> string) will cause <b>s_server</b> to
attempt to obtain a functional reference to the specified
engine, thus initialising it if needed. The engine will then
be set as the default for all available algorithms.</p>

<p style="margin-left:11%;"><b>&minus;id_prefix arg</b></p>

<p style="margin-left:17%;">generate <small>SSL/TLS</small>
session IDs prefixed by <b>arg</b>. This is mostly useful
for testing any <small>SSL/TLS</small> code (eg. proxies)
that wish to deal with multiple servers, when each of which
might be generating a unique range of session IDs (eg. with
a certain prefix).</p>

<p style="margin-left:11%;"><b>&minus;rand file(s)</b></p>

<p style="margin-left:17%;">a file or files containing
random data used to seed the random number generator, or an
<small>EGD</small> socket (see <i>RAND_egd</i>(3)). Multiple
files can be specified separated by a OS-dependent
character. The separator is <b>;</b> for MS-Windows,
<b>,</b> for OpenVMS, and <b>:</b> for all others.</p>

<p style="margin-left:11%;"><b>&minus;nextprotoneg
protocols</b></p>

<p style="margin-left:17%;">enable Next Protocol
Negotiation <small>TLS</small> extension and provide a
comma-separated list of supported protocol names. The list
should contain most wanted protocols first. Protocol names
are printable <small>ASCII</small> strings, for example
&quot;http/1.1&quot; or &quot;spdy/3&quot;.</p>

<h2>CONNECTED COMMANDS
<a name="CONNECTED COMMANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If a connection
request is established with an <small>SSL</small> client and
neither the <b>&minus;www</b> nor the <b>&minus;WWW</b>
option has been used then normally any data received from
the client is displayed and any key presses will be sent to
the client.</p>

<p style="margin-left:11%; margin-top: 1em">Certain single
letter commands are also recognized which perform special
operations: these are listed below.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>q</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>end the current <small>SSL</small> connection but still
accept new connections.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>Q</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>end the current <small>SSL</small> connection and
exit.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>r</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>renegotiate the <small>SSL</small> session.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>R</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>renegotiate the <small>SSL</small> session and request a
client certificate.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>P</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>send some plain text down the underlying
<small>TCP</small> connection: this should cause the client
to disconnect due to a protocol violation.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p><b>S</b></p></td>
<td width="5%"></td>
<td width="83%">


<p>print out some session cache status information.</p></td></tr>
</table>

<h2>NOTES
<a name="NOTES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>s_server</b>
can be used to debug <small>SSL</small> clients. To accept
connections from a web browser the command:</p>

<pre style="margin-left:11%; margin-top: 1em"> openssl s_server &minus;accept 443 &minus;www</pre>


<p style="margin-left:11%; margin-top: 1em">can be used for
example.</p>

<p style="margin-left:11%; margin-top: 1em">Most web
browsers (in particular Netscape and <small>MSIE</small> )
only support <small>RSA</small> cipher suites, so they
cannot connect to servers which don&rsquo;t use a
certificate carrying an <small>RSA</small> key or a version
of OpenSSL with <small>RSA</small> disabled.</p>

<p style="margin-left:11%; margin-top: 1em">Although
specifying an empty list of CAs when requesting a client
certificate is strictly speaking a protocol violation, some
<small>SSL</small> clients interpret this to mean any
<small>CA</small> is acceptable. This is useful for
debugging purposes.</p>

<p style="margin-left:11%; margin-top: 1em">The session
parameters can printed out using the <b>sess_id</b>
program.</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Because this
program has a lot of options and also because some of the
techniques used are rather old, the C source of s_server is
rather hard to read and not a model of how things should be
done. A typical <small>SSL</small> server program would be
much simpler.</p>

<p style="margin-left:11%; margin-top: 1em">The output of
common ciphers is wrong: it just gives the list of ciphers
that OpenSSL recognizes and the client supports.</p>

<p style="margin-left:11%; margin-top: 1em">There should be
a way for the <b>s_server</b> program to print out details
of any unknown cipher suites a client says it supports.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>sess_id</i>(1),
<i>s_client</i>(1), <i>ciphers</i>(1)</p>
<hr>
</body>
</html>
