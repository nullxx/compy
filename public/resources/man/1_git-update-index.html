<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:58:06 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GIT&minus;UPDATE&minus;INDEX</title>

</head>
<body>

<h1 align="center">GIT&minus;UPDATE&minus;INDEX</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#USING --REFRESH">USING --REFRESH</a><br>
<a href="#USING --CACHEINFO OR --INFO-ONLY">USING --CACHEINFO OR --INFO-ONLY</a><br>
<a href="#USING --INDEX-INFO">USING --INDEX-INFO</a><br>
<a href="#USING &ldquo;ASSUME UNCHANGED&rdquo; BIT">USING &ldquo;ASSUME UNCHANGED&rdquo; BIT</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#SKIP-WORKTREE BIT">SKIP-WORKTREE BIT</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#GIT">GIT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">git-update-index
&minus; Register file contents in the working tree to the
index</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>git
update&minus;index</i> <br>
[&minus;&minus;add] [&minus;&minus;remove |
&minus;&minus;force&minus;remove] [&minus;&minus;replace]
<br>
[&minus;&minus;refresh] [&minus;q] [&minus;&minus;unmerged]
[&minus;&minus;ignore&minus;missing] <br>
[(&minus;&minus;cacheinfo &lt;mode&gt; &lt;object&gt;
&lt;file&gt;)...] <br>
[&minus;&minus;chmod=(+|&minus;)x] <br>
[&minus;&minus;[no&minus;]assume&minus;unchanged] <br>
[&minus;&minus;[no&minus;]skip&minus;worktree] <br>
[&minus;&minus;ignore&minus;submodules] <br>
[&minus;&minus;really&minus;refresh]
[&minus;&minus;unresolve] [&minus;&minus;again | &minus;g]
<br>
[&minus;&minus;info&minus;only]
[&minus;&minus;index&minus;info] <br>
[&minus;z] [&minus;&minus;stdin]
[&minus;&minus;index&minus;version &lt;n&gt;] <br>
[&minus;&minus;verbose] <br>
[&minus;&minus;] [&lt;file&gt;...]</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Modifies the
index or directory cache. Each file mentioned is updated
into the index and any <i>unmerged</i> or <i>needs
updating</i> state is cleared.</p>

<p style="margin-left:11%; margin-top: 1em">See also
<b>git-add</b>(1) for a more user&minus;friendly way to do
some of the most common operations on the index.</p>

<p style="margin-left:11%; margin-top: 1em">The way <i>git
update&minus;index</i> handles files it is told about can be
modified using the various options:</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&minus;&minus;add</p>

<p style="margin-left:17%;">If a specified file isn&rsquo;t
in the index already then it&rsquo;s added. Default
behaviour is to ignore new files.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;remove</p>

<p style="margin-left:17%;">If a specified file is in the
index but is missing then it&rsquo;s removed. Default
behavior is to ignore removed file.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;refresh</p>

<p style="margin-left:17%;">Looks at the current index and
checks to see if merges or updates are needed by checking
stat() information.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;q</p>

<p style="margin-left:17%;">Quiet. If &minus;&minus;refresh
finds that the index needs an update, the default behavior
is to error out. This option makes <i>git
update&minus;index</i> continue anyway.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;ignore&minus;submodules</p>

<p style="margin-left:17%;">Do not try to update
submodules. This option is only respected when passed before
&minus;&minus;refresh.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;unmerged</p>

<p style="margin-left:17%;">If &minus;&minus;refresh finds
unmerged changes in the index, the default behavior is to
error out. This option makes <i>git update&minus;index</i>
continue anyway.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;ignore&minus;missing</p>

<p style="margin-left:17%;">Ignores missing files during a
&minus;&minus;refresh</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;cacheinfo
&lt;mode&gt; &lt;object&gt; &lt;path&gt;</p>

<p style="margin-left:17%;">Directly insert the specified
info into the index.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;index&minus;info</p>

<p style="margin-left:17%;">Read index information from
stdin.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;chmod=(+|&minus;)x</p>

<p style="margin-left:17%;">Set the execute permissions on
the updated files.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;[no&minus;]assume&minus;unchanged</p>

<p style="margin-left:17%;">When these flags are specified,
the object names recorded for the paths are not updated.
Instead, these options set and unset the &quot;assume
unchanged&quot; bit for the paths. When the &quot;assume
unchanged&quot; bit is on, Git stops checking the working
tree files for possible modifications, so you need to
manually unset the bit to tell Git when you change the
working tree file. This is sometimes helpful when working
with a big project on a filesystem that has very slow
lstat(2) system call (e.g. cifs).</p>

<p style="margin-left:17%; margin-top: 1em">This option can
be also used as a coarse file&minus;level mechanism to
ignore uncommitted changes in tracked files (akin to what
.gitignore does for untracked files). Git will fail
(gracefully) in case it needs to modify this file in the
index e.g. when merging in a commit; thus, in case the
assumed&minus;untracked file is changed upstream, you will
need to handle the situation manually.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;really&minus;refresh</p>

<p style="margin-left:17%;">Like
<i>&minus;&minus;refresh</i>, but checks stat information
unconditionally, without regard to the &quot;assume
unchanged&quot; setting.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;[no&minus;]skip&minus;worktree</p>

<p style="margin-left:17%;">When one of these flags is
specified, the object name recorded for the paths are not
updated. Instead, these options set and unset the
&quot;skip&minus;worktree&quot; bit for the paths. See
section &quot;Skip&minus;worktree bit&quot; below for more
information.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;g,
&minus;&minus;again</p>

<p style="margin-left:17%;">Runs <i>git
update&minus;index</i> itself on the paths whose index
entries are different from those from the HEAD commit.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;unresolve</p>

<p style="margin-left:17%;">Restores the <i>unmerged</i> or
<i>needs updating</i> state of a file during a merge if it
was cleared by accident.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;info&minus;only</p>

<p style="margin-left:17%;">Do not create objects in the
object database for all &lt;file&gt; arguments that follow
this flag; just insert their object IDs into the index.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;force&minus;remove</p>

<p style="margin-left:17%;">Remove the file from the index
even when the working directory still has such a file.
(Implies &minus;&minus;remove.)</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;replace</p>

<p style="margin-left:17%;">By default, when a file path
exists in the index, <i>git update&minus;index</i> refuses
an attempt to add path/file. Similarly if a file path/file
exists, a file path cannot be added. With
&minus;&minus;replace flag, existing entries that conflict
with the entry being added are automatically removed with
warning messages.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;stdin</p>

<p style="margin-left:17%;">Instead of taking list of paths
from the command line, read list of paths from the standard
input. Paths are separated by LF (i.e. one path per line) by
default.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;verbose</p>

<p style="margin-left:17%;">Report what is being added and
removed from index.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;index&minus;version
&lt;n&gt;</p>

<p style="margin-left:17%;">Write the resulting index out
in the named on&minus;disk format version. Supported
versions are 2, 3 and 4. The current default version is 2 or
3, depending on whether extra features are used, such as git
add &minus;N.</p>

<p style="margin-left:17%; margin-top: 1em">Version 4
performs a simple pathname compression that reduces index
size by 30%&minus;50% on large repositories, which results
in faster load time. Version 4 is relatively young (first
released in in 1.8.0 in October 2012). Other Git
implementations such as JGit and libgit2 may not support it
yet.</p>

<p style="margin-left:11%; margin-top: 1em">&minus;z</p>

<p style="margin-left:17%;">Only meaningful with
&minus;&minus;stdin or &minus;&minus;index&minus;info; paths
are separated with NUL character instead of LF.</p>


<p style="margin-left:11%; margin-top: 1em">&minus;&minus;</p>

<p style="margin-left:17%;">Do not interpret any more
arguments as options.</p>


<p style="margin-left:11%; margin-top: 1em">&lt;file&gt;</p>

<p style="margin-left:17%;">Files to act on. Note that
files beginning with <i>.</i> are discarded. This includes
./file and dir/./file. If you don&rsquo;t want this, then
use cleaner names. The same applies to directories ending
<i>/</i> and paths with <i>//</i></p>

<h2>USING --REFRESH
<a name="USING --REFRESH"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>&minus;&minus;refresh</i>
does not calculate a new sha1 file or bring the index
up&minus;to&minus;date for mode/content changes. But what it
<b>does</b> do is to &quot;re&minus;match&quot; the stat
information of a file with the index, so that you can
refresh the index for a file that hasn&rsquo;t been changed
but where the stat entry is out of date.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
you&rsquo;d want to do this after doing a <i>git
read&minus;tree</i>, to link up the stat index details with
the proper files.</p>

<h2>USING --CACHEINFO OR --INFO-ONLY
<a name="USING --CACHEINFO OR --INFO-ONLY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>&minus;&minus;cacheinfo</i>
is used to register a file that is not in the current
working directory. This is useful for minimum&minus;checkout
merging.</p>

<p style="margin-left:11%; margin-top: 1em">To pretend you
have a file with mode and sha1 at path, say:</p>

<p style="margin-left:17%; margin-top: 1em">$ git
update&minus;index &minus;&minus;cacheinfo mode sha1
path</p>


<p style="margin-left:11%; margin-top: 1em"><i>&minus;&minus;info&minus;only</i>
is used to register files without placing them in the object
database. This is useful for status&minus;only
repositories.</p>

<p style="margin-left:11%; margin-top: 1em">Both
<i>&minus;&minus;cacheinfo</i> and
<i>&minus;&minus;info&minus;only</i> behave similarly: the
index is updated but the object database isn&rsquo;t.
<i>&minus;&minus;cacheinfo</i> is useful when the object is
in the database but the file isn&rsquo;t available locally.
<i>&minus;&minus;info&minus;only</i> is useful when the file
is available, but you do not wish to update the object
database.</p>

<h2>USING --INDEX-INFO
<a name="USING --INDEX-INFO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">&minus;&minus;index&minus;info
is a more powerful mechanism that lets you feed multiple
entry definitions from the standard input, and designed
specifically for scripts. It can take inputs of three
formats:</p>

<p style="margin-left:17%; margin-top: 1em">1. mode SP sha1
TAB path</p>

<p style="margin-left:17%; margin-top: 1em">The first
format is what &quot;git&minus;apply
&minus;&minus;index&minus;info&quot; reports, and used to
reconstruct a partial tree that is used for phony merge base
tree when falling back on 3&minus;way merge.</p>

<p style="margin-left:17%; margin-top: 1em">2. mode SP type
SP sha1 TAB path</p>

<p style="margin-left:17%; margin-top: 1em">The second
format is to stuff <i>git ls&minus;tree</i> output into the
index file.</p>

<p style="margin-left:17%; margin-top: 1em">3. mode SP sha1
SP stage TAB path</p>

<p style="margin-left:17%; margin-top: 1em">This format is
to put higher order stages into the index file and matches
<i>git ls&minus;files &minus;&minus;stage</i> output.</p>

<p style="margin-left:11%; margin-top: 1em">To place a
higher stage entry to the index, the path should first be
removed by feeding a mode=0 entry for the path, and then
feeding necessary input lines in the third format.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
starting with this index:</p>

<p style="margin-left:17%; margin-top: 1em">$ git
ls&minus;files &minus;s <br>
100644 8a1218a1024a212bb3db30becd860315f9f3ac52 0 frotz</p>

<p style="margin-left:11%; margin-top: 1em">you can feed
the following input to &minus;&minus;index&minus;info:</p>

<p style="margin-left:17%; margin-top: 1em">$ git
update&minus;index &minus;&minus;index&minus;info <br>
0 0000000000000000000000000000000000000000 frotz <br>
100644 8a1218a1024a212bb3db30becd860315f9f3ac52 1 frotz <br>
100755 8a1218a1024a212bb3db30becd860315f9f3ac52 2 frotz</p>

<p style="margin-left:11%; margin-top: 1em">The first line
of the input feeds 0 as the mode to remove the path; the
SHA&minus;1 does not matter as long as it is well formatted.
Then the second and third line feeds stage 1 and stage 2
entries for that path. After the above, we would end up with
this:</p>

<p style="margin-left:17%; margin-top: 1em">$ git
ls&minus;files &minus;s <br>
100644 8a1218a1024a212bb3db30becd860315f9f3ac52 1 frotz <br>
100755 8a1218a1024a212bb3db30becd860315f9f3ac52 2 frotz</p>

<h2>USING &ldquo;ASSUME UNCHANGED&rdquo; BIT
<a name="USING &ldquo;ASSUME UNCHANGED&rdquo; BIT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Many operations
in Git depend on your filesystem to have an efficient
lstat(2) implementation, so that st_mtime information for
working tree files can be cheaply checked to see if the file
contents have changed from the version recorded in the index
file. Unfortunately, some filesystems have inefficient
lstat(2). If your filesystem is one of them, you can set
&quot;assume unchanged&quot; bit to paths you have not
changed to cause Git not to do this check. Note that setting
this bit on a path does not mean Git will check the contents
of the file to see if it has changed &mdash; it makes Git to
omit any checking and assume it has <b>not</b> changed. When
you make changes to working tree files, you have to
explicitly tell Git about it by dropping &quot;assume
unchanged&quot; bit, either before or after you modify
them.</p>

<p style="margin-left:11%; margin-top: 1em">In order to set
&quot;assume unchanged&quot; bit, use
&minus;&minus;assume&minus;unchanged option. To unset, use
&minus;&minus;no&minus;assume&minus;unchanged. To see which
files have the &quot;assume unchanged&quot; bit set, use git
ls&minus;files &minus;v (see <b>git-ls-files</b>(1)).</p>

<p style="margin-left:11%; margin-top: 1em">The command
looks at core.ignorestat configuration variable. When this
is true, paths updated with git update&minus;index paths...
and paths updated with other Git commands that update both
index and working tree (e.g. <i>git apply
&minus;&minus;index</i>, <i>git checkout&minus;index
&minus;u</i>, and <i>git read&minus;tree &minus;u</i>) are
automatically marked as &quot;assume unchanged&quot;. Note
that &quot;assume unchanged&quot; bit is <b>not</b> set if
git update&minus;index &minus;&minus;refresh finds the
working tree file matches the index (use git
update&minus;index &minus;&minus;really&minus;refresh if you
want to mark them as &quot;assume unchanged&quot;).</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To update and
refresh only the files already checked out:</p>

<p style="margin-left:17%; margin-top: 1em">$ git
checkout&minus;index &minus;n &minus;f &minus;a &amp;&amp;
git update&minus;index &minus;&minus;ignore&minus;missing
&minus;&minus;refresh</p>

<p style="margin-left:11%; margin-top: 1em">On an
inefficient filesystem with core.ignorestat set</p>

<p style="margin-left:23%; margin-top: 1em">$ git
update&minus;index &minus;&minus;really&minus;refresh
<b>(1)</b> <br>
$ git update&minus;index
&minus;&minus;no&minus;assume&minus;unchanged foo.c
<b>(2)</b> <br>
$ git diff &minus;&minus;name&minus;only <b>(3)</b> <br>
$ edit foo.c <br>
$ git diff &minus;&minus;name&minus;only <b>(4)</b> <br>
M foo.c <br>
$ git update&minus;index foo.c <b>(5)</b> <br>
$ git diff &minus;&minus;name&minus;only <b>(6)</b> <br>
$ edit foo.c <br>
$ git diff &minus;&minus;name&minus;only <b>(7)</b> <br>
$ git update&minus;index
&minus;&minus;no&minus;assume&minus;unchanged foo.c
<b>(8)</b> <br>
$ git diff &minus;&minus;name&minus;only <b>(9)</b> <br>
M foo.c</p>

<p style="margin-left:17%; margin-top: 1em"><b>1.</b>
forces lstat(2) to set &quot;assume unchanged&quot; bits for
paths that match index. <b><br>
2.</b> mark the path to be edited. <b><br>
3.</b> this does lstat(2) and finds index matches the path.
<b><br>
4.</b> this does lstat(2) and finds index does <b>not</b>
match the path. <b><br>
5.</b> registering the new version to index sets
&quot;assume unchanged&quot; bit. <b><br>
6.</b> and it is assumed unchanged. <b><br>
7.</b> even after you edit it. <b><br>
8.</b> you can tell about the change after the fact. <b><br>
9.</b> now it checks with lstat(2) and finds it has been
changed.</p>

<h2>SKIP-WORKTREE BIT
<a name="SKIP-WORKTREE BIT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Skip&minus;worktree
bit can be defined in one (long) sentence: When reading an
entry, if it is marked as skip&minus;worktree, then Git
pretends its working directory version is up to date and
read the index version instead.</p>

<p style="margin-left:11%; margin-top: 1em">To elaborate,
&quot;reading&quot; means checking for file existence,
reading file attributes or file content. The working
directory version may be present or absent. If present, its
content may match against the index version or not. Writing
is not affected by this bit, content safety is still first
priority. Note that Git <i>can</i> update working directory
file, that is marked skip&minus;worktree, if it is safe to
do so (i.e. working directory version matches index
version)</p>

<p style="margin-left:11%; margin-top: 1em">Although this
bit looks similar to assume&minus;unchanged bit, its goal is
different from assume&minus;unchanged bit&rsquo;s.
Skip&minus;worktree also takes precedence over
assume&minus;unchanged bit when both are set.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The command
honors core.filemode configuration variable. If your
repository is on a filesystem whose executable bits are
unreliable, this should be set to <i>false</i> (see
<b>git-config</b>(1)). This causes the command to ignore
differences in file modes recorded in the index and the file
mode on the filesystem if they differ only on executable
bit. On such an unfortunate filesystem, you may need to use
<i>git update&minus;index &minus;&minus;chmod=</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Quite
similarly, if core.symlinks configuration variable is set to
<i>false</i> (see <b>git-config</b>(1)), symbolic links are
checked out as plain files, and this command does not modify
a recorded file mode from symbolic link to regular file.</p>

<p style="margin-left:11%; margin-top: 1em">The command
looks at core.ignorestat configuration variable. See
<i>Using &quot;assume unchanged&quot; bit</i> section
above.</p>

<p style="margin-left:11%; margin-top: 1em">The command
also looks at core.trustctime configuration variable. It can
be useful when the inode change time is regularly modified
by something outside Git (file system crawlers and backup
systems use ctime for marking files processed) (see
<b>git-config</b>(1)).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>git-config</b>(1),
<b>git-add</b>(1), <b>git-ls-files</b>(1)</p>

<h2>GIT
<a name="GIT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Part of the
<b>git</b>(1) suite</p>
<hr>
</body>
</html>
