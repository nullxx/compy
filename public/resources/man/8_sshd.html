<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:25:21 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title></title>
</head>
<body>

<hr>


<p>SSHD(8) BSD System Manager&rsquo;s Manual SSHD(8)</p>

<p style="margin-top: 1em"><b>NAME</b></p>

<p style="margin-left:6%;"><b>sshd</b> &mdash; OpenSSH SSH
daemon</p>

<p style="margin-top: 1em"><b>SYNOPSIS</b></p>

<p style="margin-left:13%;"><b>sshd</b>
[<b>&minus;46DdeiqTt</b>] [<b>&minus;b&nbsp;</b><i>bits</i>]
[<b>&minus;C&nbsp;</b><i>connection_spec</i>]
[<b>&minus;c&nbsp;</b><i>host_certificate_file</i>]
[<b>&minus;E&nbsp;</b><i>log_file</i>]
[<b>&minus;f&nbsp;</b><i>config_file</i>]
[<b>&minus;g&nbsp;</b><i>login_grace_time</i>]
[<b>&minus;h&nbsp;</b><i>host_key_file</i>]
[<b>&minus;k&nbsp;</b><i>key_gen_time</i>]
[<b>&minus;o&nbsp;</b><i>option</i>]
[<b>&minus;p&nbsp;</b><i>port</i>]
[<b>&minus;u&nbsp;</b><i>len</i>]</p>

<p style="margin-top: 1em"><b>DESCRIPTION</b></p>

<p style="margin-left:6%;"><b>sshd</b> (OpenSSH Daemon) is
the daemon program for ssh(1). Together these programs
replace rlogin(1) and rsh(1), and provide secure encrypted
communications between two untrusted hosts over an insecure
network.</p>

<p style="margin-left:6%; margin-top: 1em"><b>sshd</b>
listens for connections from clients. It is normally started
at boot from <i>/etc/rc</i>. It forks a new daemon for each
incoming connection. The forked daemons handle key exchange,
encryption, authentication, command execution, and data
exchange.</p>

<p style="margin-left:6%; margin-top: 1em"><b>sshd</b> can
be configured using command-line options or a configuration
file (by default sshd_config(5)); command-line options
override values specified in the configuration file.
<b>sshd</b> rereads its configuration file when it receives
a hangup signal, SIGHUP, by executing itself with the name
and options it was started with, e.g.
<i>/usr/sbin/sshd</i>.</p>

<p style="margin-left:6%; margin-top: 1em">The options are
as follows:</p>

<p style="margin-top: 1em"><b>&minus;4</b></p>

<p style="margin-left:17%; margin-top: 1em">Forces
<b>sshd</b> to use IPv4 addresses only.</p>

<p style="margin-top: 1em"><b>&minus;6</b></p>

<p style="margin-left:17%; margin-top: 1em">Forces
<b>sshd</b> to use IPv6 addresses only.</p>

<p style="margin-top: 1em"><b>&minus;b</b> <i>bits</i></p>

<p style="margin-left:17%;">Specifies the number of bits in
the ephemeral protocol version 1 server key (default
1024).</p>

<p style="margin-top: 1em"><b>&minus;C</b>
<i>connection_spec</i></p>

<p style="margin-left:17%;">Specify the connection
parameters to use for the <b>&minus;T</b> extended test
mode. If provided, any <b>Match</b> directives in the
configuration file that would apply to the specified user,
host, and address will be set before the configuration is
written to standard output. The connection parameters are
supplied as keyword=value pairs. The keywords are
&lsquo;&lsquo;user&rsquo;&rsquo;,
&lsquo;&lsquo;host&rsquo;&rsquo;,
&lsquo;&lsquo;laddr&rsquo;&rsquo;,
&lsquo;&lsquo;lport&rsquo;&rsquo;, and
&lsquo;&lsquo;addr&rsquo;&rsquo;. All are required and may
be supplied in any order, either with multiple
<b>&minus;C</b> options or as a comma-separated list.</p>

<p style="margin-top: 1em"><b>&minus;c</b>
<i>host_certificate_file</i></p>

<p style="margin-left:17%;">Specifies a path to a
certificate file to identify <b>sshd</b> during key
exchange. The certificate file must match a host key file
specified using the <b>&minus;h</b> option or the
<b>HostKey</b> configuration directive.</p>

<p style="margin-top: 1em"><b>&minus;D</b></p>

<p style="margin-left:17%; margin-top: 1em">When this
option is specified, <b>sshd</b> will not detach and does
not become a daemon. This allows easy monitoring of
<b>sshd</b>.</p>

<p style="margin-top: 1em"><b>&minus;d</b></p>

<p style="margin-left:17%; margin-top: 1em">Debug mode. The
server sends verbose debug output to standard error, and
does not put itself in the background. The server also will
not fork and will only process one connection. This option
is only intended for debugging for the server. Multiple
<b>&minus;d</b> options increase the debugging level.
Maximum is 3.</p>

<p style="margin-top: 1em"><b>&minus;E</b>
<i>log_file</i></p>

<p style="margin-left:17%;">Append debug logs to
<i>log_file</i> instead of the system log.</p>

<p style="margin-top: 1em"><b>&minus;e</b></p>

<p style="margin-left:17%; margin-top: 1em">Write debug
logs to standard error instead of the system log.</p>

<p style="margin-top: 1em"><b>&minus;f</b>
<i>config_file</i></p>

<p style="margin-left:17%;">Specifies the name of the
configuration file. The default is
<i>/etc/ssh/sshd_config</i>. <b>sshd</b> refuses to start if
there is no configuration file.</p>

<p style="margin-top: 1em"><b>&minus;g</b>
<i>login_grace_time</i></p>

<p style="margin-left:17%;">Gives the grace time for
clients to authenticate themselves (default 120 seconds). If
the client fails to authenticate the user within this many
seconds, the server disconnects and exits. A value of zero
indicates no limit.</p>

<p style="margin-top: 1em"><b>&minus;h</b>
<i>host_key_file</i></p>

<p style="margin-left:17%;">Specifies a file from which a
host key is read. This option must be given if <b>sshd</b>
is not run as root (as the normal host key files are
normally not readable by anyone but root). The default is
<i>/etc/ssh/ssh_host_key</i> for protocol version 1, and
<i>/etc/ssh/ssh_host_dsa_key</i>,
<i>/etc/ssh/ssh_host_ecdsa_key</i>.
<i>/etc/ssh/ssh_host_ed25519_key</i> and
<i>/etc/ssh/ssh_host_rsa_key</i> for protocol version 2. It
is possible to have multiple host key files for the
different protocol versions and host key algorithms.</p>

<p style="margin-top: 1em"><b>&minus;i</b></p>

<p style="margin-left:17%; margin-top: 1em">Specifies that
<b>sshd</b> is being run from inetd(8). <b>sshd</b> is
normally not run from inetd because it needs to generate the
server key before it can respond to the client, and this may
take tens of seconds. Clients would have to wait too long if
the key was regenerated every time. However, with small key
sizes (e.g. 512) using <b>sshd</b> from inetd may be
feasible.</p>

<p style="margin-top: 1em"><b>&minus;k</b>
<i>key_gen_time</i></p>

<p style="margin-left:17%;">Specifies how often the
ephemeral protocol version 1 server key is regenerated
(default 3600 seconds, or one hour). The motivation for
regenerating the key fairly often is that the key is not
stored anywhere, and after about an hour it becomes
impossible to recover the key for decrypting intercepted
communications even if the machine is cracked into or
physically seized. A value of zero indicates that the key
will never be regenerated.</p>

<p style="margin-top: 1em"><b>&minus;o</b>
<i>option</i></p>

<p style="margin-left:17%;">Can be used to give options in
the format used in the configuration file. This is useful
for specifying options for which there is no separate
command-line flag. For full details of the options, and
their values, see sshd_config(5).</p>

<p style="margin-top: 1em"><b>&minus;p</b> <i>port</i></p>

<p style="margin-left:17%;">Specifies the port on which the
server listens for connections (default 22). Multiple port
options are permitted. Ports specified in the configuration
file with the <b>Port</b> option are ignored when a
command-line port is specified. Ports specified using the
<b>ListenAddress</b> option override command-line ports.</p>

<p style="margin-top: 1em"><b>&minus;q</b></p>

<p style="margin-left:17%; margin-top: 1em">Quiet mode.
Nothing is sent to the system log. Normally the beginning,
authentication, and termination of each connection is
logged.</p>

<p style="margin-top: 1em"><b>&minus;T</b></p>

<p style="margin-left:17%; margin-top: 1em">Extended test
mode. Check the validity of the configuration file, output
the effective configuration to stdout and then exit.
Optionally, <b>Match</b> rules may be applied by specifying
the connection parameters using one or more <b>&minus;C</b>
options.</p>

<p style="margin-top: 1em"><b>&minus;t</b></p>

<p style="margin-left:17%; margin-top: 1em">Test mode. Only
check the validity of the configuration file and sanity of
the keys. This is useful for updating <b>sshd</b> reliably
as configuration options may change.</p>

<p style="margin-top: 1em"><b>&minus;u</b> <i>len</i></p>

<p style="margin-left:17%; margin-top: 1em">This option is
used to specify the size of the field in the utmp structure
that holds the remote host name. If the resolved host name
is longer than <i>len</i>, the dotted decimal value will be
used instead. This allows hosts with very long host names
that overflow this field to still be uniquely identified.
Specifying <b>&minus;u0</b> indicates that only dotted
decimal addresses should be put into the <i>utmp</i> file.
<b>&minus;u0</b> may also be used to prevent <b>sshd</b>
from making DNS requests unless the authentication mechanism
or configuration requires it. Authentication mechanisms that
may require DNS include <b>RhostsRSAAuthentication</b>,
<b>HostbasedAuthentication</b>, and using a
<b>from=&quot;pattern-list&quot;</b> option in a key file.
Configuration options that require DNS include using a
USER@HOST pattern in <b>AllowUsers</b> or
<b>DenyUsers</b>.</p>

<p style="margin-top: 1em"><b>AUTHENTICATION</b></p>

<p style="margin-left:6%;">The OpenSSH SSH daemon supports
SSH protocols 1 and 2. The default is to use protocol 2
only, though this can be changed via the <b>Protocol</b>
option in sshd_config(5). Protocol 2 supports DSA, ECDSA,
ED25519 and RSA keys; protocol 1 only supports RSA keys. For
both protocols, each host has a host-specific key, normally
2048 bits, used to identify the host.</p>

<p style="margin-left:6%; margin-top: 1em">Forward security
for protocol 1 is provided through an additional server key,
normally 768 bits, generated when the server starts. This
key is normally regenerated every hour if it has been used,
and is never stored on disk. Whenever a client connects, the
daemon responds with its public host and server keys. The
client compares the RSA host key against its own database to
verify that it has not changed. The client then generates a
256-bit random number. It encrypts this random number using
both the host key and the server key, and sends the
encrypted number to the server. Both sides then use this
random number as a session key which is used to encrypt all
further communications in the session. The rest of the
session is encrypted using a conventional cipher, currently
Blowfish or 3DES, with 3DES being used by default. The
client selects the encryption algorithm to use from those
offered by the server.</p>

<p style="margin-left:6%; margin-top: 1em">For protocol 2,
forward security is provided through a Diffie-Hellman key
agreement. This key agreement results in a shared session
key. The rest of the session is encrypted using a symmetric
cipher, currently 128-bit AES, Blowfish, 3DES, CAST128,
Arcfour, 192-bit AES, or 256-bit AES. The client selects the
encryption algorithm to use from those offered by the
server. Additionally, session integrity is provided through
a cryptographic message authentication code (hmac-md5,
hmac-sha1, umac-64, umac-128, hmac-ripemd160, hmac-sha2-256
or hmac-sha2-512).</p>

<p style="margin-left:6%; margin-top: 1em">Finally, the
server and the client enter an authentication dialog. The
client tries to authenticate itself using host-based
authentication, public key authentication, GSSAPI
authentication, challenge-response authentication, or
password authentication.</p>

<p style="margin-left:6%; margin-top: 1em">Regardless of
the authentication type, the account is checked to ensure
that it is accessible. An account is not accessible if it is
locked, listed in <b>DenyUsers</b> or its group is listed in
<b>DenyGroups</b> . The definition of a locked account is
system dependant. Some platforms have their own account
database (eg AIX) and some modify the passwd field (
&lsquo;*LK*&rsquo; on Solaris and UnixWare, &lsquo;*&rsquo;
on HP-UX, containing &lsquo;Nologin&rsquo; on Tru64, a
leading &lsquo;*LOCKED*&rsquo; on FreeBSD and a leading
&lsquo;!&rsquo; on most Linuxes). If there is a requirement
to disable password authentication for the account while
allowing still public-key, then the passwd field should be
set to something other than these values (eg
&lsquo;NP&rsquo; or &lsquo;*NP*&rsquo; ).</p>

<p style="margin-left:6%; margin-top: 1em">If the client
successfully authenticates itself, a dialog for preparing
the session is entered. At this time the client may request
things like allocating a pseudo-tty, forwarding X11
connections, forwarding TCP connections, or forwarding the
authentication agent connection over the secure channel.</p>

<p style="margin-left:6%; margin-top: 1em">After this, the
client either requests a shell or execution of a command.
The sides then enter session mode. In this mode, either side
may send data at any time, and such data is forwarded
to/from the shell or command on the server side, and the
user terminal in the client side.</p>

<p style="margin-left:6%; margin-top: 1em">When the user
program terminates and all forwarded X11 and other
connections have been closed, the server sends command exit
status to the client, and both sides exit.</p>

<p style="margin-top: 1em"><b>LOGIN PROCESS</b></p>

<p style="margin-left:6%;">When a user successfully logs
in, <b>sshd</b> does the following:</p>

<p style="margin-top: 1em">1.</p>

<p style="margin-left:21%;">If the login is on a tty, and
no command has been specified, prints last login time and
<i>/etc/motd</i> (unless prevented in the configuration file
or by <i>~/.hushlogin</i>; see the <i>FILES</i>
section).</p>

<p style="margin-top: 1em">2.</p>

<p style="margin-left:21%;">If the login is on a tty,
records login time.</p>

<p style="margin-top: 1em">3.</p>

<p style="margin-left:21%;">Checks <i>/etc/nologin</i>; if
it exists, prints contents and quits (unless root).</p>

<p style="margin-top: 1em">4.</p>

<p style="margin-left:21%;">Changes to run with normal user
privileges.</p>

<p style="margin-top: 1em">5.</p>

<p style="margin-left:21%;">Sets up basic environment.</p>

<p style="margin-top: 1em">6.</p>

<p style="margin-left:21%;">Reads the file
<i>~/.ssh/environment</i>, if it exists, and users are
allowed to change their environment. See the
<b>PermitUserEnvironment</b> option in sshd_config(5).</p>

<p style="margin-top: 1em">7.</p>

<p style="margin-left:21%;">Changes to user&rsquo;s home
directory.</p>

<p style="margin-top: 1em">8.</p>

<p style="margin-left:21%;">If <i>~/.ssh/rc</i> exists,
runs it; else if <i>/etc/ssh/sshrc</i> exists, runs it;
otherwise runs xauth. The &lsquo;&lsquo;rc&rsquo;&rsquo;
files are given the X11 authentication protocol and cookie
in standard input. See <i>SSHRC</i>, below.</p>

<p style="margin-top: 1em">9.</p>

<p style="margin-left:21%;">Runs user&rsquo;s shell or
command.</p>

<p style="margin-top: 1em"><b>SSHRC</b></p>

<p style="margin-left:6%;">If the file <i>~/.ssh/rc</i>
exists, sh(1) runs it after reading the environment files
but before starting the user&rsquo;s shell or command. It
must not produce any output on stdout; stderr must be used
instead. If X11 forwarding is in use, it will receive the
&quot;proto cookie&quot; pair in its standard input (and
DISPLAY in its environment). The script must call xauth(1)
because <b>sshd</b> will not run xauth automatically to add
X11 cookies.</p>

<p style="margin-left:6%; margin-top: 1em">The primary
purpose of this file is to run any initialization routines
which may be needed before the user&rsquo;s home directory
becomes accessible; AFS is a particular example of such an
environment.</p>

<p style="margin-left:6%; margin-top: 1em">This file will
probably contain some initialization code followed by
something similar to:</p>

<p style="margin-left:10%; margin-top: 1em">if read proto
cookie &amp;&amp; [ -n &quot;$DISPLAY&quot; ]; then</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">


<p>if [ &lsquo;echo $DISPLAY | cut -c1-10&lsquo; =
&rsquo;localhost:&rsquo; ]; then</p></td>
<td width="10%"></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">
</td>
<td width="10%">


<p># X11UseLocalhost=yes</p></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">
</td>
<td width="10%">


<p>echo add unix:&lsquo;echo $DISPLAY |</p></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">
</td>
<td width="10%">


<p>cut -c11-&lsquo; $proto $cookie</p></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">


<p>else</p></td>
<td width="10%"></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">
</td>
<td width="10%">


<p># X11UseLocalhost=no</p></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">
</td>
<td width="10%">


<p>echo add $DISPLAY $proto $cookie</p></td>
<td width="59%">
</td></tr>
<tr valign="top" align="left">
<td width="21%"></td>
<td width="10%">


<p>fi | xauth -q -</p></td>
<td width="10%"></td>
<td width="59%">
</td></tr>
</table>

<p style="margin-left:10%;">fi</p>

<p style="margin-left:6%; margin-top: 1em">If this file
does not exist, <i>/etc/ssh/sshrc</i> is run, and if that
does not exist either, xauth is used to add the cookie.</p>

<p style="margin-top: 1em"><b>AUTHORIZED_KEYS FILE
FORMAT</b></p>

<p style="margin-left:6%;"><b>AuthorizedKeysFile</b>
specifies the files containing public keys for public key
authentication; if none is specified, the default is
<i>~/.ssh/authorized_keys</i> and
<i>~/.ssh/authorized_keys2</i>. Each line of the file
contains one key (empty lines and lines starting with a
&lsquo;#&rsquo; are ignored as comments). Protocol 1 public
keys consist of the following space-separated fields:
options, bits, exponent, modulus, comment. Protocol 2 public
key consist of: options, keytype, base64-encoded key,
comment. The options field is optional; its presence is
determined by whether the line starts with a number or not
(the options field never starts with a number). The bits,
exponent, modulus, and comment fields give the RSA key for
protocol version 1; the comment field is not used for
anything (but may be convenient for the user to identify the
key). For protocol version 2 the keytype is
&lsquo;&lsquo;ecdsa-sha2-nistp256&rsquo;&rsquo;,
&lsquo;&lsquo;ecdsa-sha2-nistp384&rsquo;&rsquo;,
&lsquo;&lsquo;ecdsa-sha2-nistp521&rsquo;&rsquo;,
&lsquo;&lsquo;ssh-ed25519&rsquo;&rsquo;,
&lsquo;&lsquo;ssh-dss&rsquo;&rsquo; or
&lsquo;&lsquo;ssh-rsa&rsquo;&rsquo;.</p>

<p style="margin-left:6%; margin-top: 1em">Note that lines
in this file are usually several hundred bytes long (because
of the size of the public key encoding) up to a limit of 8
kilobytes, which permits DSA keys up to 8 kilobits and RSA
keys up to 16 kilobits. You don&rsquo;t want to type them
in; instead, copy the <i>identity.pub</i>,
<i>id_dsa.pub</i>, <i>id_ecdsa.pub</i>,
<i>id_ed25519.pub</i>, or the <i>id_rsa.pub</i> file and
edit it.</p>

<p style="margin-left:6%; margin-top: 1em"><b>sshd</b>
enforces a minimum RSA key modulus size for protocol 1 and
protocol 2 keys of 768 bits.</p>

<p style="margin-left:6%; margin-top: 1em">The options (if
present) consist of comma-separated option specifications.
No spaces are permitted, except within double quotes. The
following option specifications are supported (note that
option keywords are case-insensitive):</p>

<p style="margin-top: 1em"><b>cert-authority</b></p>

<p style="margin-left:17%;">Specifies that the listed key
is a certification authority (CA) that is trusted to
validate signed certificates for user authentication.</p>

<p style="margin-left:17%; margin-top: 1em">Certificates
may encode access restrictions similar to these key options.
If both certificate restrictions and key options are
present, the most restrictive union of the two is
applied.</p>


<p style="margin-top: 1em"><b>command=&quot;command&quot;</b></p>

<p style="margin-left:17%;">Specifies that the command is
executed whenever this key is used for authentication. The
command supplied by the user (if any) is ignored. The
command is run on a pty if the client requests a pty;
otherwise it is run without a tty. If an 8-bit clean channel
is required, one must not request a pty or should specify
<b>no-pty</b>. A quote may be included in the command by
quoting it with a backslash. This option might be useful to
restrict certain public keys to perform just a specific
operation. An example might be a key that permits remote
backups but nothing else. Note that the client may specify
TCP and/or X11 forwarding unless they are explicitly
prohibited. The command originally supplied by the client is
available in the SSH_ORIGINAL_COMMAND environment variable.
Note that this option applies to shell, command or subsystem
execution. Also note that this command may be superseded by
either a sshd_config(5) <b>ForceCommand</b> directive or a
command embedded in a certificate.</p>


<p style="margin-top: 1em"><b>environment=&quot;NAME=value&quot;</b></p>

<p style="margin-left:17%;">Specifies that the string is to
be added to the environment when logging in using this key.
Environment variables set this way override other default
environment values. Multiple options of this type are
permitted. Environment processing is disabled by default and
is controlled via the <b>PermitUserEnvironment</b> option.
This option is automatically disabled if <b>UseLogin</b> is
enabled.</p>


<p style="margin-top: 1em"><b>from=&quot;pattern-list&quot;</b></p>

<p style="margin-left:17%;">Specifies that in addition to
public key authentication, either the canonical name of the
remote host or its IP address must be present in the
comma-separated list of patterns. See PATTERNS in
ssh_config(5) for more information on patterns.</p>

<p style="margin-left:17%; margin-top: 1em">In addition to
the wildcard matching that may be applied to hostnames or
addresses, a <b>from</b> stanza may match IP addresses using
CIDR address/masklen notation.</p>

<p style="margin-left:17%; margin-top: 1em">The purpose of
this option is to optionally increase security: public key
authentication by itself does not trust the network or name
servers or anything (but the key); however, if somebody
somehow steals the key, the key permits an intruder to log
in from anywhere in the world. This additional option makes
using a stolen key more difficult (name servers and/or
routers would have to be compromised in addition to just the
key).</p>

<p style="margin-top: 1em"><b>no-agent-forwarding</b></p>

<p style="margin-left:17%;">Forbids authentication agent
forwarding when this key is used for authentication.</p>

<p style="margin-top: 1em"><b>no-port-forwarding</b></p>

<p style="margin-left:17%;">Forbids TCP forwarding when
this key is used for authentication. Any port forward
requests by the client will return an error. This might be
used, e.g. in connection with the <b>command</b> option.</p>

<p style="margin-top: 1em"><b>no-pty</b></p>

<p style="margin-left:17%; margin-top: 1em">Prevents tty
allocation (a request to allocate a pty will fail).</p>

<p style="margin-top: 1em"><b>no-user-rc</b></p>

<p style="margin-left:17%;">Disables execution of
<i>~/.ssh/rc</i>.</p>

<p style="margin-top: 1em"><b>no-X11-forwarding</b></p>

<p style="margin-left:17%;">Forbids X11 forwarding when
this key is used for authentication. Any X11 forward
requests by the client will return an error.</p>


<p style="margin-top: 1em"><b>permitopen=&quot;host:port&quot;</b></p>

<p style="margin-left:17%;">Limit local &lsquo;&lsquo;ssh
-L&rsquo;&rsquo; port forwarding such that it may only
connect to the specified host and port. IPv6 addresses can
be specified by enclosing the address in square brackets.
Multiple <b>permitopen</b> options may be applied separated
by commas. No pattern matching is performed on the specified
hostnames, they must be literal domains or addresses. A port
specification of <b>*</b> matches any port.</p>


<p style="margin-top: 1em"><b>principals=&quot;principals&quot;</b></p>

<p style="margin-left:17%;">On a <b>cert-authority</b>
line, specifies allowed principals for certificate
authentication as a comma-separated list. At least one name
from the list must appear in the certificate&rsquo;s list of
principals for the certificate to be accepted. This option
is ignored for keys that are not marked as trusted
certificate signers using the <b>cert-authority</b>
option.</p>

<p style="margin-top: 1em"><b>tunnel=&quot;n&quot;</b></p>

<p style="margin-left:17%;">Force a tun(4) device on the
server. Without this option, the next available device will
be used if the client requests a tunnel.</p>

<p style="margin-left:6%; margin-top: 1em">An example
authorized_keys file:</p>

<p style="margin-left:10%; margin-top: 1em"># Comments
allowed at start of line <br>
ssh-rsa AAAAB3Nza...LiPk== user@example.net <br>
from=&quot;*.sales.example.net,!pc.sales.example.net&quot;
ssh-rsa <br>
AAAAB2...19Q== john@example.net <br>
command=&quot;dump /home&quot;,no-pty,no-port-forwarding
ssh-dss <br>
AAAAC3...51R== example.net <br>

permitopen=&quot;192.0.2.1:80&quot;,permitopen=&quot;192.0.2.2:25&quot;
ssh-dss <br>
AAAAB5...21S== <br>
tunnel=&quot;0&quot;,command=&quot;sh /etc/netstart
tun0&quot; ssh-rsa AAAA...== <br>
jane@example.net</p>

<p style="margin-top: 1em"><b>SSH_KNOWN_HOSTS FILE
FORMAT</b></p>

<p style="margin-left:6%;">The
<i>/etc/ssh/ssh_known_hosts</i> and
<i>~/.ssh/known_hosts</i> files contain host public keys for
all known hosts. The global file should be prepared by the
administrator (optional), and the per-user file is
maintained automatically: whenever the user connects from an
unknown host, its key is added to the per-user file.</p>

<p style="margin-left:6%; margin-top: 1em">Each line in
these files contains the following fields: markers
(optional), hostnames, bits, exponent, modulus, comment. The
fields are separated by spaces.</p>

<p style="margin-left:6%; margin-top: 1em">The marker is
optional, but if it is present then it must be one of
&lsquo;&lsquo;@cert-authority&rsquo;&rsquo;, to indicate
that the line contains a certification authority (CA) key,
or &lsquo;&lsquo;@revoked&rsquo;&rsquo;, to indicate that
the key contained on the line is revoked and must not ever
be accepted. Only one marker should be used on a key
line.</p>

<p style="margin-left:6%; margin-top: 1em">Hostnames is a
comma-separated list of patterns (&lsquo;*&rsquo; and
&lsquo;?&rsquo; act as wildcards); each pattern in turn is
matched against the canonical host name (when authenticating
a client) or against the user-supplied name (when
authenticating a server). A pattern may also be preceded by
&lsquo;!&rsquo; to indicate negation: if the host name
matches a negated pattern, it is not accepted (by that line)
even if it matched another pattern on the line. A hostname
or address may optionally be enclosed within &lsquo;[&rsquo;
and &lsquo;]&rsquo; brackets then followed by
&lsquo;:&rsquo; and a non-standard port number.</p>

<p style="margin-left:6%; margin-top: 1em">Alternately,
hostnames may be stored in a hashed form which hides host
names and addresses should the file&rsquo;s contents be
disclosed. Hashed hostnames start with a &lsquo;|&rsquo;
character. Only one hashed hostname may appear on a single
line and none of the above negation or wildcard operators
may be applied.</p>

<p style="margin-left:6%; margin-top: 1em">Bits, exponent,
and modulus are taken directly from the RSA host key; they
can be obtained, for example, from
<i>/etc/ssh/ssh_host_key.pub</i>. The optional comment field
continues to the end of the line, and is not used.</p>

<p style="margin-left:6%; margin-top: 1em">Lines starting
with &lsquo;#&rsquo; and empty lines are ignored as
comments.</p>

<p style="margin-left:6%; margin-top: 1em">When performing
host authentication, authentication is accepted if any
matching line has the proper key; either one that matches
exactly or, if the server has presented a certificate for
authentication, the key of the certification authority that
signed the certificate. For a key to be trusted as a
certification authority, it must use the
&lsquo;&lsquo;@cert-authority&rsquo;&rsquo; marker described
above.</p>

<p style="margin-left:6%; margin-top: 1em">The known hosts
file also provides a facility to mark keys as revoked, for
example when it is known that the associated private key has
been stolen. Revoked keys are specified by including the
&lsquo;&lsquo;@revoked&rsquo;&rsquo; marker at the beginning
of the key line, and are never accepted for authentication
or as certification authorities, but instead will produce a
warning from ssh(1) when they are encountered.</p>

<p style="margin-left:6%; margin-top: 1em">It is
permissible (but not recommended) to have several lines or
different host keys for the same names. This will inevitably
happen when short forms of host names from different domains
are put in the file. It is possible that the files contain
conflicting information; authentication is accepted if valid
information can be found from either file.</p>

<p style="margin-left:6%; margin-top: 1em">Note that the
lines in these files are typically hundreds of characters
long, and you definitely don&rsquo;t want to type in the
host keys by hand. Rather, generate them by a script,
ssh-keyscan(1) or by taking <i>/etc/ssh/ssh_host_key.pub</i>
and adding the host names at the front. ssh-keygen(1) also
offers some basic automated editing for
<i>~/.ssh/known_hosts</i> including removing hosts matching
a host name and converting all host names to their hashed
representations.</p>

<p style="margin-left:6%; margin-top: 1em">An example
ssh_known_hosts file:</p>

<p style="margin-left:10%; margin-top: 1em"># Comments
allowed at start of line <br>
closenet,...,192.0.2.53 1024 37 159...93
closenet.example.net <br>
cvs.example.net,192.0.2.10 ssh-rsa AAAA1234.....= <br>
# A hashed hostname <br>

|1|JfKTdBh7rNbXkVAQCRp4OQoPfmI=|USECr3SWf1JUPsms5AqfD5QfxkM=
ssh-rsa <br>
AAAA1234.....= <br>
# A revoked key <br>
@revoked * ssh-rsa AAAAB5W... <br>
# A CA key, accepted for any host in *.mydomain.com or
*.mydomain.org <br>
@cert-authority *.mydomain.org,*.mydomain.com ssh-rsa
AAAAB5W...</p>

<p style="margin-top: 1em"><b>FILES</b> <br>
~/.hushlogin</p>

<p style="margin-left:17%;">This file is used to suppress
printing the last login time and <i>/etc/motd</i>, if
<b>PrintLastLog</b> and <b>PrintMotd</b>, respectively, are
enabled. It does not suppress printing of the banner
specified by <b>Banner</b>.</p>

<p style="margin-top: 1em">~/.rhosts</p>

<p style="margin-left:17%;">This file is used for
host-based authentication (see ssh(1) for more information).
On some machines this file may need to be world-readable if
the user&rsquo;s home directory is on an NFS partition,
because <b>sshd</b> reads it as root. Additionally, this
file must be owned by the user, and must not have write
permissions for anyone else. The recommended permission for
most machines is read/write for the user, and not accessible
by others.</p>

<p style="margin-top: 1em">~/.shosts</p>

<p style="margin-left:17%;">This file is used in exactly
the same way as <i>.rhosts</i>, but allows host-based
authentication without permitting login with rlogin/rsh.</p>

<p style="margin-top: 1em">~/.k5login <br>
~/.k5users</p>

<p style="margin-left:17%;">These files enforce
GSSAPI/Kerberos authentication access control. Further
details are described in ksu(1).</p>

<p style="margin-top: 1em">~/.ssh/</p>

<p style="margin-left:17%;">This directory is the default
location for all user-specific configuration and
authentication information. There is no general requirement
to keep the entire contents of this directory secret, but
the recommended permissions are read/write/execute for the
user, and not accessible by others.</p>

<p style="margin-top: 1em">~/.ssh/authorized_keys</p>

<p style="margin-left:17%;">Lists the public keys (DSA,
ECDSA, ED25519, RSA) that can be used for logging in as this
user. The format of this file is described above. The
content of the file is not highly sensitive, but the
recommended permissions are read/write for the user, and not
accessible by others.</p>

<p style="margin-left:17%; margin-top: 1em">If this file,
the <i>~/.ssh</i> directory, or the user&rsquo;s home
directory are writable by other users, then the file could
be modified or replaced by unauthorized users. In this case,
<b>sshd</b> will not allow it to be used unless the
<b>StrictModes</b> option has been set to
&lsquo;&lsquo;no&rsquo;&rsquo;.</p>

<p style="margin-top: 1em">~/.ssh/environment</p>

<p style="margin-left:17%;">This file is read into the
environment at login (if it exists). It can only contain
empty lines, comment lines (that start with
&lsquo;#&rsquo;), and assignment lines of the form
name=value. The file should be writable only by the user; it
need not be readable by anyone else. Environment processing
is disabled by default and is controlled via the
<b>PermitUserEnvironment</b> option.</p>

<p style="margin-top: 1em">~/.ssh/known_hosts</p>

<p style="margin-left:17%;">Contains a list of host keys
for all hosts the user has logged into that are not already
in the systemwide list of known host keys. The format of
this file is described above. This file should be writable
only by root/the owner and can, but need not be,
world-readable.</p>

<p style="margin-top: 1em">~/.ssh/rc</p>

<p style="margin-left:17%;">Contains initialization
routines to be run before the user&rsquo;s home directory
becomes accessible. This file should be writable only by the
user, and need not be readable by anyone else.</p>

<p style="margin-top: 1em">/etc/hosts.allow <br>
/etc/hosts.deny</p>

<p style="margin-left:17%;">Access controls that should be
enforced by tcp-wrappers are defined here. Further details
are described in hosts_access(5).</p>

<p style="margin-top: 1em">/etc/hosts.equiv</p>

<p style="margin-left:17%;">This file is for host-based
authentication (see ssh(1)). It should only be writable by
root.</p>

<p style="margin-top: 1em">/etc/ssh/moduli</p>

<p style="margin-left:17%;">Contains Diffie-Hellman groups
used for the &quot;Diffie-Hellman Group Exchange&quot;. The
file format is described in moduli(5).</p>

<p style="margin-top: 1em">/etc/motd</p>

<p style="margin-left:17%;">See motd(5).</p>

<p style="margin-top: 1em">/etc/nologin</p>

<p style="margin-left:17%;">If this file exists,
<b>sshd</b> refuses to let anyone except root log in. The
contents of the file are displayed to anyone trying to log
in, and non-root connections are refused. The file should be
world-readable.</p>

<p style="margin-top: 1em">/etc/ssh/shosts.equiv</p>

<p style="margin-left:17%;">This file is used in exactly
the same way as <i>hosts.equiv</i>, but allows host-based
authentication without permitting login with rlogin/rsh.</p>

<p style="margin-top: 1em">/etc/ssh/ssh_host_key <br>
/etc/ssh/ssh_host_dsa_key <br>
/etc/ssh/ssh_host_ecdsa_key <br>
/etc/ssh/ssh_host_ed25519_key <br>
/etc/ssh/ssh_host_rsa_key</p>

<p style="margin-left:17%;">These files contain the private
parts of the host keys. These files should only be owned by
root, readable only by root, and not accessible to others.
Note that <b>sshd</b> does not start if these files are
group/world-accessible.</p>

<p style="margin-top: 1em">/etc/ssh/ssh_host_key.pub <br>
/etc/ssh/ssh_host_dsa_key.pub <br>
/etc/ssh/ssh_host_ecdsa_key.pub <br>
/etc/ssh/ssh_host_ed25519_key.pub <br>
/etc/ssh/ssh_host_rsa_key.pub</p>

<p style="margin-left:17%;">These files contain the public
parts of the host keys. These files should be world-readable
but writable only by root. Their contents should match the
respective private parts. These files are not really used
for anything; they are provided for the convenience of the
user so their contents can be copied to known hosts files.
These files are created using ssh-keygen(1).</p>

<p style="margin-top: 1em">/etc/ssh/ssh_known_hosts</p>

<p style="margin-left:17%;">Systemwide list of known host
keys. This file should be prepared by the system
administrator to contain the public host keys of all
machines in the organization. The format of this file is
described above. This file should be writable only by
root/the owner and should be world-readable.</p>

<p style="margin-top: 1em">/etc/ssh/sshd_config</p>

<p style="margin-left:17%;">Contains configuration data for
<b>sshd</b>. The file format and configuration options are
described in sshd_config(5).</p>

<p style="margin-top: 1em">/etc/ssh/sshrc</p>

<p style="margin-left:17%;">Similar to <i>~/.ssh/rc</i>, it
can be used to specify machine-specific login-time
initializations globally. This file should be writable only
by root, and should be world-readable.</p>

<p style="margin-top: 1em">/var/empty/sshd</p>

<p style="margin-left:17%;">chroot(2) directory used by
<b>sshd</b> during privilege separation in the
pre-authentication phase. The directory should not contain
any files and must be owned by root and not group or
world-writable.</p>

<p style="margin-top: 1em">/var/run/sshd.pid</p>

<p style="margin-left:17%;">Contains the process ID of the
<b>sshd</b> listening for connections (if there are several
daemons running concurrently for different ports, this
contains the process ID of the one started last). The
content of this file is not sensitive; it can be
world-readable.</p>

<p style="margin-top: 1em"><b>ENVIRONMENT</b> <i><br>
SSH_USE_STRONG_RNG</i></p>

<p style="margin-left:17%;">The reseeding of the OpenSSL
random generator is usually done from <b>/dev/urandom</b>.
If the <b>SSH_USE_STRONG_RNG</b> environment variable is set
to value other than <b>0</b> the OpenSSL random generator is
reseeded from <b>/dev/random</b>. The number of bytes read
is defined by the SSH_USE_STRONG_RNG value. Minimum is 14
bytes. This setting is not recommended on the computers
without the hardware random generator because insufficient
entropy causes the connection to be blocked until enough
entropy is available.</p>

<p style="margin-top: 1em"><b>IPV6</b></p>

<p style="margin-left:6%;">IPv6 address can be used
everywhere where IPv4 address. In all entries must be the
IPv6 address enclosed in square brackets. Note: The square
brackets are metacharacters for the shell and must be
escaped in shell.</p>

<p style="margin-top: 1em"><b>SEE ALSO</b></p>

<p style="margin-left:6%;">scp(1), sftp(1), ssh(1),
ssh-add(1), ssh-agent(1), ssh-keygen(1), ssh-keyscan(1),
chroot(2), hosts_access(5), login.conf(5), moduli(5),
sshd_config(5), inetd(8), sftp-server(8)</p>

<p style="margin-top: 1em"><b>AUTHORS</b></p>

<p style="margin-left:6%;">OpenSSH is a derivative of the
original and free ssh 1.2.12 release by Tatu Ylonen. Aaron
Campbell, Bob Beck, Markus Friedl, Niels Provos, Theo de
Raadt and Dug Song removed many bugs, re-added newer
features and created OpenSSH. Markus Friedl contributed the
support for SSH protocol versions 1.5 and 2.0. Niels Provos
and Markus Friedl contributed support for privilege
separation.</p>

<p style="margin-top: 1em"><b>CAVEATS</b></p>

<p style="margin-left:6%;">System security is not improved
unless <b>rshd</b>, <b>rlogind</b>, and <b>rexecd</b> are
disabled (thus completely disabling rlogin and rsh into the
machine).</p>

<p style="margin-left:6%; margin-top: 1em">BSD
August&nbsp;18, 2016 BSD</p>
<hr>
</body>
</html>
