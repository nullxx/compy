<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:06:35 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>XkbKeyTypesForCoreSymbols</title>

</head>
<body>

<h1 align="center">XkbKeyTypesForCoreSymbols</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">XkbKeyTypesForCoreSymbols
&minus; Determine the Xkb key types appropriate for the
symbols bound to a key in a core keyboard mapping</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="44%">


<p style="margin-top: 1em"><b>int
XkbKeyTypesForCoreSymbols</b></p> </td>
<td width="2%"></td>
<td width="43%">


<p style="margin-top: 1em"><b>(XkbDescPtr</b>
<i>xkb</i><b>, int</b> <i>map_width</i><b>, KeySym</b></p></td></tr>
</table>

<p style="margin-left:11%;"><b>*</b><i>core_syms</i><b>,
unsigned int</b> <i>protected</i><b>, int
*</b><i>types_inout</i><b>, KeySym
*</b><i>xkb_syms_rtrn</i><b>);</b></p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p style="margin-top: 1em"><b><i>&minus; xkb</i></b></p></td>
<td width="4%"></td>
<td width="70%">


<p style="margin-top: 1em">keyboard description in which to
place symbols</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:11%;"><i>&minus; map_width</i></p>

<p style="margin-left:22%;">width of core protocol keymap
in xkb_syms_rtrn</p>

<p style="margin-left:11%;"><i>&minus; core_syms</i></p>

<p style="margin-left:22%;">core protocol format array of
KeySyms</p>

<p style="margin-left:11%;"><i>&minus; protected</i></p>

<p style="margin-left:22%;">explicit key types</p>

<p style="margin-left:11%;"><i>&minus; types_inout</i></p>

<p style="margin-left:22%;">backfilled with the canonical
types bound to groups one and two for the key</p>

<p style="margin-left:11%;"><i>&minus;
xkb_syms_rtrn</i></p>

<p style="margin-left:22%;">backfilled with symbols bound
to the key in the Xkb mapping</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>XkbKeyTypesForCoreSymbols</i>
expands the symbols in <i>core_syms</i> and types in
<i>types_inout,</i> then chooses canonical key types
(canonical key types are defined The Canonical Key Types)
for groups 1 and 2 using the rules specified by the Xkb
protocol and places them in xkb_syms_rtrn, which will be
non-NULL.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
Canonical Key Types</b></p>

<p style="margin-left:11%; margin-top: 1em">Xkb allows up
to XkbMaxKeyTypes (255) key types to be defined, but
requires at least XkbNumRequiredTypes (4) predefined types
to be in a key map. These predefined key types are referred
to as the canonical key types and describe the types of keys
available on most keyboards. The definitions for the
canonical key types are held in the first
XkbNumRequiredTypes entries of the <i>types</i> field of the
client map and are indexed using the following
constants:</p>


<p style="margin-left:11%; margin-top: 1em">XkbOneLevelIndex
<br>
XkbTwoLevelIndex <br>
XkbAlphabeticIndex <br>
XkbKeypadIndex</p>

<p style="margin-left:11%; margin-top: 1em">ONE_LEVEL</p>

<p style="margin-left:11%; margin-top: 1em">The ONE_LEVEL
key type describes groups that have only one symbol. The
default ONE_LEVEL key type has no map entries and does not
pay attention to any modifiers. A symbolic representation of
this key type could look like the following:</p>

<p style="margin-left:11%; margin-top: 1em">type
&quot;ONE_LEVEL&quot; { <br>
modifiers = None; <br>
map[None]= Level1; <br>
level_name[Level1]= &quot;Any&quot;; <br>
};</p>

<p style="margin-left:11%; margin-top: 1em">The description
of the ONE_LEVEL key type is stored in the
types[XkbOneLevelIndex] entry of the client key map.</p>

<p style="margin-left:11%; margin-top: 1em">TWO_LEVEL</p>

<p style="margin-left:11%; margin-top: 1em">The TWO_LEVEL
key type describes groups that consist of two symbols but
are neither alphabetic nor numeric keypad keys. The default
TWO_LEVEL type uses only the Shift modifier. It returns
shift level two if Shift is set, and level one if it is not.
A symbolic representation of this key type could look like
the following:</p>

<p style="margin-left:11%; margin-top: 1em">type
&quot;TWO_LEVEL&quot; { <br>
modifiers = Shift; <br>
map[Shift]= Level2; <br>
level_name[Level1]= &quot;Base&quot;; <br>
level_name[Level2]= &quot;Shift&quot;; <br>
};</p>

<p style="margin-left:11%; margin-top: 1em">The description
of the TWO_LEVEL key type is stored in the
types[XkbTwoLevelIndex] entry of the client key map.</p>

<p style="margin-left:11%; margin-top: 1em">ALPHABETIC</p>

<p style="margin-left:11%; margin-top: 1em">The ALPHABETIC
key type describes groups consisting of two symbols: the
lowercase form of a symbol followed by the uppercase form of
the same symbol. The default ALPHABETIC type implements
locale-sensitive &quot;Shift cancels CapsLock&quot; behavior
using both the Shift and Lock modifiers as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If Shift and Lock are both set, the default ALPHABETIC
type yields level one.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If Shift alone is set, it yields level two.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If Lock alone is set, it yields level one, but preserves
the Lock modifier so Xlib notices and applies the
appropriate capitalization rules. The Xlib functions are
locale-sensitive and apply different capitalization rules
for different locales.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If neither Shift nor Lock is set, it yields level
one.</p> </td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">A symbolic
representation of this key type could look like the
following:</p>

<p style="margin-left:18%; margin-top: 1em">type
&quot;ALPHABETIC&quot; { <br>
modifiers = Shift+Lock; <br>
map[Shift]= Level2; <br>
preserve[Lock]= Lock; <br>
level_name[Level1]= &quot;Base&quot;; <br>
level_name[Level2]= &quot;Caps&quot;; <br>
};</p>

<p style="margin-left:18%; margin-top: 1em">The description
of the ALPHABETIC key type is stored in the
types[XkbAlphabeticIndex] entry of the client key map.</p>

<p style="margin-left:18%; margin-top: 1em">KEYPAD</p>

<p style="margin-left:18%; margin-top: 1em">The KEYPAD key
type describes groups that consist of two symbols, at least
one of which is a numeric keypad symbol. The numeric keypad
symbol is assumed to reside at level two. The default KEYPAD
key type implements &quot;Shift cancels NumLock&quot;
behavior using the Shift modifier and the real modifier
bound to the virtual modifier named &quot;NumLock,&quot;
known as the NumLock modifier, as follows:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p style="margin-top: 1em">If Shift and NumLock are both
set, the default KEYPAD type yields level one.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If Shift alone is set, it yields level two.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If NumLock alone is set, it yields level two.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="6%"></td>
<td width="82%">


<p>If neither Shift nor NumLock is set, it yields level
one.</p> </td></tr>
</table>

<p style="margin-left:18%; margin-top: 1em">A symbolic
representation of this key type could look like the
following:</p>

<p style="margin-left:18%; margin-top: 1em">type
&quot;KEYPAD&quot; { <br>
modifiers = Shift+NumLock; <br>
map[None]= Level1; <br>
map[Shift]= Level2; <br>
map[NumLock]= Level2; <br>
map[Shift+NumLock]= Level1; <br>
level_name[Level1]= &quot;Base&quot;; <br>
level_name[Level2]= &quot;Caps&quot;; <br>
};</p>

<p style="margin-left:18%; margin-top: 1em">The description
of the KEYPAD key type is stored in the
types[XkbKeypadIndex] entry of the client key map.</p>

<p style="margin-left:18%; margin-top: 1em">A core keymap
is a two-dimensional array of keysyms. It has
<i>map_width</i> columns and <i>max_key_code</i> rows.
<i>XkbKeyTypesForCoreSymbols</i> takes a single row from a
core keymap, determines the number of groups associated with
it, the type of each group, and the symbols bound to each
group. The return value is the number of groups,
<i>types_inout</i> has the types for each group, and
<i>xkb_syms_rtrn</i> has the symbols in Xkb order (that is,
groups are contiguous, regardless of size).</p>


<p style="margin-left:18%; margin-top: 1em"><i>protected</i>
contains the explicitly protected key types. There is one
explicit override control associated with each of the four
possible groups for each Xkb key, ExplicitKeyType1 through
ExplicitKeyType4; <i>protected</i> is an inclusive OR of
these controls. <i>map_width</i> is the width of the core
keymap and is not dependent on any Xkb definitions.
<i>types_inout</i> is an array of four type indices. On
input, <i>types_inout</i> contains the indices of any types
already assigned to the key, in case they are explicitly
protected from change.</p>

<p style="margin-left:18%; margin-top: 1em">Upon return,
<i>types_inout</i> contains any automatically selected (that
is, canonical) types plus any protected types. Canonical
types are assigned to all four groups if there are enough
symbols to do so. The four entries in <i>types_inout</i>
correspond to the four groups for the key in question.</p>
<hr>
</body>
</html>
