<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:24:59 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>MII-DIAG</title>

</head>
<body>

<h1 align="center">MII-DIAG</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#KNOWN BUGS">KNOWN BUGS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">mii-diag
&minus; Network adapter control and monitoring</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>mii-diag</b>
[<i>options</i>]<i>&lt;interface&gt;</i></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page documents briefly the <b>mii-diag</b> network adapter
control and monitoring command. Addition documentation is
available from http://scyld.com/diag/index.html.</p>

<p style="margin-left:11%; margin-top: 1em">This
<b>mii-diag</b> command configures, controls and monitors
the transceiver management registers for network interfaces,
and configures driver operational parameters. For
transceiver control <b>mii-diag</b> uses the Media
Independent Interface (MII) standard (thus the command
name). It also has additional Linux-specific controls to
communicate parameters such as message enable settings and
buffer sizes to the underlying device driver.</p>

<p style="margin-left:11%; margin-top: 1em">The MII
standard defines registers that control and report network
transceiver capabilities, link settings and errors. Examples
are link speed, duplex, capabilities advertised to the link
partner, status LED indications and link error counters.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>mii-diag</b> command supports both single character and
long option names. Short options use a single dash
(&acute;-&acute;) in front of the option character. For
options without parameters, multiple options may be
concatenated after a single dash. Long options are prefixed
by two dashes (&acute;--&acute;), and may be abbreviated
with a unique prefix. A long option may take a parameter of
the form --arg=param or --arg param.</p>

<p style="margin-left:11%; margin-top: 1em">A summary of
options is as follows. <b><br>
&minus;A, --advertise &lt;speed|setting&gt;</b></p>

<p style="margin-left:22%;"><b>&minus;F, --fixed-speed
&lt;speed|setting&gt;</b></p>

<p style="margin-left:22%; margin-top: 1em">Speed is one
of: 100baseT4, 100baseTx, 100baseTx-FD, 100baseTx-HD,
10baseT, 10baseT-FD, 10baseT-HD. For more precise control an
explicit numeric register setting is also allowed.</p>

<p style="margin-left:11%;"><b>&minus;a,
&minus;-all-interfaces</b></p>

<p style="margin-left:22%;">Show the status of all
interfaces. This option is not recommended with any other
option, especially ones that change settings.</p>


<p style="margin-left:11%;"><b>&minus;s,&minus;-status</b></p>

<p style="margin-left:22%;">Return exit status 2 if there
is no link beat.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;D</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Increase the debugging level. This may be used to
understand the actions the command is taking.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;g,
&minus;-read-parameters</b></p>

<p style="margin-left:22%;">Show driver-specific
parameters.</p>

<p style="margin-left:11%;"><b>&minus;G,
&minus;-set-parameters value[,value...]</b></p>

<p style="margin-left:22%;">Set driver-specific parameters.
Set a adapter-specific parameters. Parameters are comma
separated, with missing elements retaining the existing
value.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;v</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Increase the verbosity level. Additional &quot;-v&quot;
options increase the level further.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;V</b></p></td>
<td width="8%"></td>
<td width="78%">


<p>Show the program version information.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>&minus;w,
&minus;-watch</b></p>

<p style="margin-left:22%;">Continuously monitor the
transceiver and report changes.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p><b>&minus;?</b></p></td>
<td width="8%"></td>
<td width="35%">


<p>Emit usage information.</p></td>
<td width="43%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Calling the
command with just the interface name produces extensive
output describing the transceiver capabilities,
configuration and current status.</p>

<p style="margin-left:11%; margin-top: 1em">The
&rsquo;--monitor&rsquo; option allows scripting link beat
changes.</p>

<p style="margin-left:11%; margin-top: 1em">This option is
similar to --watch, but with lower overhead and simplified
output. It polls the interface only once a second and the
output format is a single line per link change with three
fixed words <br>
&lt;unknown|down||negotiating|up&gt; &lt;STATUS&gt;
&lt;PARTNER-CAP&gt;</p>

<p style="margin-left:11%; margin-top: 1em">Example output:
mii-diag --monitor eth0 <br>
down 0x7809 0x0000 <br>
negotiating 0x7829 0x45e1 <br>
up 0x782d 0x45e1 <br>
down 0x7809 0x0000</p>

<p style="margin-left:11%; margin-top: 1em">This may be
used as <br>
mii-diag --monitor eth0 | <br>
while read linkstatus bmsr linkpar; do <br>
case $linkstatus in <br>
up) ifup eth0 ;; <br>
down) ifdown eth0 ;; <br>
esac <br>
done</p>

<p style="margin-left:11%; margin-top: 1em">It may be
useful to shorten the DHCP client daemon timeout if it does
not receive an address by adding the following setting to
/etc/sysconfig/network: DHCPCDARGS=&quot;-t 3&quot;</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>ether-wake</b>(8),<b>net-diag</b>(8),<b>mii-tool</b>(8).
<br>
Addition documentation is available from
http://scyld.com/diag/index.html.</p>

<h2>KNOWN BUGS
<a name="KNOWN BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
--all-interfaces option is quirky. There are very few
settings that are usefully applied to all interfaces.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The manual
pages, diagnostic commands, and many of the underlying Linux
network drivers were written by Donald Becker for the Scyld
Beowulf(&trade;) cluster system.</p>
<hr>
</body>
</html>
