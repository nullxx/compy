<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:24:17 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>NETDEVICE</title>

</head>
<body>

<h1 align="center">NETDEVICE</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COLOPHON">COLOPHON</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">netdevice
&minus; low-level access to Linux network devices</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;sys/ioctl.h&gt; <br>
#include &lt;net/if.h&gt;</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This man page
describes the sockets interface which is used to configure
network devices.</p>

<p style="margin-left:11%; margin-top: 1em">Linux supports
some standard ioctls to configure network devices. They can
be used on any socket&rsquo;s file descriptor regardless of
the family or type. They pass an <i>ifreq</i> structure:</p>

<p style="margin-left:17%; margin-top: 1em">struct ifreq {
<br>
char ifr_name[IFNAMSIZ]; /* Interface name */ <br>
union { <br>
struct sockaddr ifr_addr; <br>
struct sockaddr ifr_dstaddr; <br>
struct sockaddr ifr_broadaddr; <br>
struct sockaddr ifr_netmask; <br>
struct sockaddr ifr_hwaddr; <br>
short ifr_flags; <br>
int ifr_ifindex; <br>
int ifr_metric; <br>
int ifr_mtu; <br>
struct ifmap ifr_map; <br>
char ifr_slave[IFNAMSIZ]; <br>
char ifr_newname[IFNAMSIZ]; <br>
char *ifr_data; <br>
}; <br>
};</p>

<p style="margin-left:17%; margin-top: 1em">struct ifconf {
<br>
int ifc_len; /* size of buffer */ <br>
union { <br>
char *ifc_buf; /* buffer address */ <br>
struct ifreq *ifc_req; /* array of structures */ <br>
}; <br>
};</p>

<p style="margin-left:11%; margin-top: 1em">Normally, the
user specifies which device to affect by setting
<i>ifr_name</i> to the name of the interface. All other
members of the structure may share memory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Ioctls</b>
<br>
If an ioctl is marked as privileged then using it requires
an effective user ID of 0 or the <b>CAP_NET_ADMIN</b>
capability. If this is not the case <b>EPERM</b> will be
returned. <b><br>
SIOCGIFNAME</b></p>

<p style="margin-left:22%;">Given the <i>ifr_ifindex</i>,
return the name of the interface in <i>ifr_name</i>. This is
the only ioctl which returns its result in
<i>ifr_name</i>.</p>

<p style="margin-left:11%;"><b>SIOCGIFINDEX</b></p>

<p style="margin-left:22%;">Retrieve the interface index of
the interface into <i>ifr_ifindex</i>.</p>

<p style="margin-left:11%;"><b>SIOCGIFFLAGS</b>,
<b>SIOCSIFFLAGS</b></p>

<p style="margin-left:22%;">Get or set the active flag word
of the device. <i>ifr_flags</i> contains a bit mask of the
following values:</p>

<p style="margin-left:22%; margin-top: 1em">Setting the
active flag word is a privileged operation, but any process
may read it.</p>

<p style="margin-left:11%;"><b>SIOCGIFPFLAGS</b>,
<b>SIOCSIFPFLAGS</b></p>

<p style="margin-left:22%;">Get or set extended (private)
flags for the device. <i>ifr_flags</i> contains a bit mask
of the following values:</p>

<p style="margin-left:22%; margin-top: 1em">Setting the
extended (private) interface flags is a privileged
operation.</p>

<p style="margin-left:11%;"><b>SIOCGIFADDR</b>,
<b>SIOCSIFADDR</b></p>

<p style="margin-left:22%;">Get or set the address of the
device using <i>ifr_addr</i>. Setting the interface address
is a privileged operation. For compatibility, only
<b>AF_INET</b> addresses are accepted or returned.</p>

<p style="margin-left:11%;"><b>SIOCGIFDSTADDR</b>,
<b>SIOCSIFDSTADDR</b></p>

<p style="margin-left:22%;">Get or set the destination
address of a point-to-point device using <i>ifr_dstaddr</i>.
For compatibility, only <b>AF_INET</b> addresses are
accepted or returned. Setting the destination address is a
privileged operation.</p>

<p style="margin-left:11%;"><b>SIOCGIFBRDADDR</b>,
<b>SIOCSIFBRDADDR</b></p>

<p style="margin-left:22%;">Get or set the broadcast
address for a device using <i>ifr_brdaddr</i>. For
compatibility, only <b>AF_INET</b> addresses are accepted or
returned. Setting the broadcast address is a privileged
operation.</p>

<p style="margin-left:11%;"><b>SIOCGIFNETMASK</b>,
<b>SIOCSIFNETMASK</b></p>

<p style="margin-left:22%;">Get or set the network mask for
a device using <i>ifr_netmask</i>. For compatibility, only
<b>AF_INET</b> addresses are accepted or returned. Setting
the network mask is a privileged operation.</p>

<p style="margin-left:11%;"><b>SIOCGIFMETRIC</b>,
<b>SIOCSIFMETRIC</b></p>

<p style="margin-left:22%;">Get or set the metric of the
device using <i>ifr_metric</i>. This is currently not
implemented; it sets <i>ifr_metric</i> to 0 if you attempt
to read it and returns <b>EOPNOTSUPP</b> if you attempt to
set it.</p>

<p style="margin-left:11%;"><b>SIOCGIFMTU</b>,
<b>SIOCSIFMTU</b></p>

<p style="margin-left:22%;">Get or set the MTU (Maximum
Transfer Unit) of a device using <i>ifr_mtu</i>. Setting the
MTU is a privileged operation. Setting the MTU to too small
values may cause kernel crashes.</p>

<p style="margin-left:11%;"><b>SIOCGIFHWADDR</b>,
<b>SIOCSIFHWADDR</b></p>

<p style="margin-left:22%;">Get or set the hardware address
of a device using <i>ifr_hwaddr</i>. The hardware address is
specified in a struct <i>sockaddr</i>. <i>sa_family</i>
contains the ARPHRD_* device type, <i>sa_data</i> the L2
hardware address starting from byte 0. Setting the hardware
address is a privileged operation.</p>

<p style="margin-left:11%;"><b>SIOCSIFHWBROADCAST</b></p>

<p style="margin-left:22%;">Set the hardware broadcast
address of a device from <i>ifr_hwaddr</i>. This is a
privileged operation.</p>

<p style="margin-left:11%;"><b>SIOCGIFMAP</b>,
<b>SIOCSIFMAP</b></p>

<p style="margin-left:22%;">Get or set the
interface&rsquo;s hardware parameters using <i>ifr_map</i>.
Setting the parameters is a privileged operation.</p>

<p style="margin-left:28%; margin-top: 1em">struct ifmap {
<br>
unsigned long mem_start; <br>
unsigned long mem_end; <br>
unsigned short base_addr; <br>
unsigned char irq; <br>
unsigned char dma; <br>
unsigned char port; <br>
};</p>

<p style="margin-left:22%; margin-top: 1em">The
interpretation of the ifmap structure depends on the device
driver and the architecture.</p>

<p style="margin-left:11%;"><b>SIOCADDMULTI</b>,
<b>SIOCDELMULTI</b></p>

<p style="margin-left:22%;">Add an address to or delete an
address from the device&rsquo;s link layer multicast filters
using <i>ifr_hwaddr</i>. These are privileged operations.
See also <b>packet</b>(7) for an alternative.</p>

<p style="margin-left:11%;"><b>SIOCGIFTXQLEN</b>,
<b>SIOCSIFTXQLEN</b></p>

<p style="margin-left:22%;">Get or set the transmit queue
length of a device using <i>ifr_qlen</i>. Setting the
transmit queue length is a privileged operation.</p>

<p style="margin-left:11%;"><b>SIOCSIFNAME</b></p>

<p style="margin-left:22%;">Changes the name of the
interface specified in <i>ifr_name</i> to
<i>ifr_newname</i>. This is a privileged operation. It is
allowed only when the interface is not up.</p>

<p style="margin-left:11%;"><b>SIOCGIFCONF</b></p>

<p style="margin-left:22%;">Return a list of interface
(transport layer) addresses. This currently means only
addresses of the <b>AF_INET</b> (IPv4) family for
compatibility. The user passes a <i>ifconf</i> structure as
argument to the ioctl. It contains a pointer to an array of
<i>ifreq</i> structures in <i>ifc_req</i> and its length in
bytes in <i>ifc_len</i>. The kernel fills the ifreqs with
all current L3 interface addresses that are running:
<i>ifr_name</i> contains the interface name (eth0:1 etc.),
<i>ifr_addr</i> the address. The kernel returns with the
actual length in <i>ifc_len</i>. If <i>ifc_len</i> is equal
to the original length the buffer probably has overflowed
and you should retry with a bigger buffer to get all
addresses. When no error occurs the ioctl returns 0;
otherwise &minus;1. Overflow is not an error.</p>

<p style="margin-left:11%; margin-top: 1em">Most protocols
support their own ioctls to configure protocol-specific
interface options. See the protocol man pages for a
description. For configuring IP addresses see
<b>ip</b>(7).</p>

<p style="margin-left:11%; margin-top: 1em">In addition
some devices support private ioctls. These are not described
here.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Strictly
speaking, <b>SIOCGIFCONF</b> and the other ioctls that
accept or return only <b>AF_INET</b> socket addresses, are
IP specific and belong in <b>ip</b>(7).</p>

<p style="margin-left:11%; margin-top: 1em">The names of
interfaces with no addresses or that don&rsquo;t have the
<b>IFF_RUNNING</b> flag set can be found via
<i>/proc/net/dev</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Local IPv6 IP
addresses can be found via <i>/proc/net</i> or via
<b>rtnetlink</b>(7).</p>

<h2>BUGS
<a name="BUGS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">glibc 2.1 is
missing the <i>ifr_newname</i> macro in
<i>&lt;net/if.h&gt;</i>. Add the following to your program
as a workaround:</p>

<p style="margin-left:17%; margin-top: 1em">#ifndef
ifr_newname <br>
#define ifr_newname ifr_ifru.ifru_slave <br>
#endif</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>proc</b>(5),
<b>capabilities</b>(7), <b>ip</b>(7),
<b>rtnetlink</b>(7)</p>

<h2>COLOPHON
<a name="COLOPHON"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This page is
part of release 3.53 of the Linux <i>man-pages</i> project.
A description of the project, and information about
reporting bugs, can be found at
http://www.kernel.org/doc/man&minus;pages/.</p>
<hr>
</body>
</html>
