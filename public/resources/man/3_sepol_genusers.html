<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:09:46 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>sepol_genusers</title>

</head>
<body>

<h1 align="center">sepol_genusers</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">sepol_genusers
&minus; Generate a new binary policy image with a customized
user configuration</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;sepol/sepol.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
sepol_genusers(void *</b><i>data</i><b>, size_t</b>
<i>len</i><b>, const char *</b><i>usersdir</i><b>, void
*</b><i>newdata</i><b>, size_t *</b><i>newlen);</i></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
sepol_set_delusers(int</b> <i>on</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>sepol_genusers</b>
generates a new binary policy image from an existing binary
policy image stored in the memory region described by the
starting address <i>data</i> and the length <i>len</i> and a
pair of user configuration files named <b>system.users</b>
and <b>local.users</b> from the directory specified by
<i>usersdir.</i> The resulting binary policy is placed into
dynamically allocated memory and the variables
<i>newdata</i> and <i>newlen</i> are set to refer to the new
binary image&rsquo;s starting address and length. The
original binary policy image is not modified.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
<b>sepol_genusers</b> will preserve user entries that are
defined in the original binary policy image but not defined
in the user configuration files. If such user entries should
instead by omitted entirely from the new binary policy
image, then the <b>sepol_set_delusers</b> function may be
called with <i>on</i> set to 1 prior to calling
<b>sepol_genusers</b> in order to enable deletion of such
users.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Returns 0 on
success or -1 otherwise, with errno set appropriately. An
errno of ENOENT indicates that one or both of the user
configuration files did not exist. An errno of EINVAL
indicates that either the original binary policy image or
the generated one were invalid. An errno of ENOMEM indicates
that insufficient memory was available to process the
original binary policy image or to generate the new policy
image. Invalid entries in the user configuration files are
skipped with a warning.</p>
<hr>
</body>
</html>
