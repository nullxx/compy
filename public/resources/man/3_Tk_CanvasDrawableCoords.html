<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:04:27 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Tk_CanvasTkwin</title>

</head>
<body>

<h1 align="center">Tk_CanvasTkwin</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Tk_CanvasTkwin,
Tk_CanvasGetCoord, Tk_CanvasDrawableCoords,
Tk_CanvasSetStippleOrigin, Tk_CanvasWindowCoords,
Tk_CanvasEventuallyRedraw, Tk_CanvasTagsOption &minus;
utility procedures for canvas type managers</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;tk.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">Tk_Window
<b><br>
Tk_CanvasTkwin</b>(<i>canvas</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tk_CanvasGetCoord</b>(<i>interp, canvas, string,
doublePtr</i>)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasDrawableCoords</b>(<i>canvas,
x, y, drawableXPtr, drawableYPtr</i>)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasSetStippleOrigin</b>(<i>canvas,
gc</i>)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasWindowCoords</b>(<i>canvas,
x, y, screenXPtr, screenYPtr</i>)</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasEventuallyRedraw</b>(<i>canvas,
x1, y1, x2, y2</i>)</p>


<p style="margin-left:11%; margin-top: 1em">Tk_OptionParseProc
*<b>Tk_CanvasTagsParseProc</b>;</p>


<p style="margin-left:11%; margin-top: 1em">Tk_OptionPrintProc
*<b>Tk_CanvasTagsPrintProc</b>;</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p style="margin-top: 1em">Tk_Canvas <i>canvas</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p style="margin-top: 1em">A token that identifies a canvas
widget.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>Tcl_Interp <i>*interp</i> (in/out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Interpreter to use for error reporting.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>const char <i>*string</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Textual description of a canvas coordinate.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>double <i>*doublePtr</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Points to place to store a converted coordinate.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>double <i>x</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>An x coordinate in the space of the canvas.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>double <i>y</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>A y coordinate in the space of the canvas.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>short <i>*drawableXPtr</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Pointer to a location in which to store an x coordinate
in the space of the drawable currently being used to
redisplay the canvas.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>short <i>*drawableYPtr</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Pointer to a location in which to store a y coordinate
in the space of the drawable currently being used to
redisplay the canvas.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>GC <i>gc</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Graphics context to modify.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>short <i>*screenXPtr</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Points to a location in which to store the screen
coordinate in the canvas window that corresponds to
<i>x</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>short <i>*screenYPtr</i> (out)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Points to a location in which to store the screen
coordinate in the canvas window that corresponds to
<i>y</i>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>int <i>x1</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Left edge of the region that needs redisplay. Only
pixels at or to the right of this coordinate need to be
redisplayed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>int <i>y1</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Top edge of the region that needs redisplay. Only pixels
at or below this coordinate need to be redisplayed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>int <i>x2</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Right edge of the region that needs redisplay. Only
pixels to the left of this coordinate need to be
redisplayed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="41%">


<p>int <i>y2</i> (in)</p></td>
<td width="20%"></td>
<td width="28%">


<p>Bottom edge of the region that needs redisplay. Only
pixels above this coordinate need to be redisplayed.</p></td></tr>
</table>


<p style="margin-left:72%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
procedures are called by canvas type managers to perform
various utility functions.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasTkwin</b>
returns the Tk_Window associated with a particular
canvas.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasGetCoord</b>
translates a string specification of a coordinate (such as
<b>2p</b> or <b>1.6c</b>) into a double-precision canvas
coordinate. If <i>string</i> is a valid coordinate
description then <b>Tk_CanvasGetCoord</b> stores the
corresponding canvas coordinate at *<i>doublePtr</i> and
returns <b>TCL_OK</b>. Otherwise it stores an error message
in <i>interp-&gt;result</i> and returns
<b>TCL_ERROR</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasDrawableCoords</b>
is called by type managers during redisplay to compute where
to draw things. Given <i>x</i> and <i>y</i> coordinates in
the space of the canvas, <b>Tk_CanvasDrawableCoords</b>
computes the corresponding pixel in the drawable that is
currently being used for redisplay; it returns those
coordinates in *<i>drawableXPtr</i> and
*<i>drawableYPtr</i>. This procedure should not be invoked
except during redisplay.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasSetStippleOrigin</b>
is also used during redisplay. It sets the stipple origin in
<i>gc</i> so that stipples drawn with <i>gc</i> in the
current offscreen pixmap will line up with stipples drawn
with origin (0,0) in the canvas&rsquo;s actual window.
<b>Tk_CanvasSetStippleOrigin</b> is needed in order to
guarantee that stipple patterns line up properly when the
canvas is redisplayed in small pieces. Redisplays are
carried out in double-buffered fashion where a piece of the
canvas is redrawn in an offscreen pixmap and then copied
back onto the screen. In this approach the stipple origins
in graphics contexts need to be adjusted during each
redisplay to compensate for the position of the off-screen
pixmap relative to the window. If an item is being drawn
with stipples, its type manager typically calls
<b>Tk_CanvasSetStippleOrigin</b> just before using <i>gc</i>
to draw something; after it is finished drawing, the type
manager calls <b>XSetTSOrigin</b> to restore the origin in
<i>gc</i> back to (0,0) (the restore is needed because
graphics contexts are shared, so they cannot be modified
permanently).</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasWindowCoords</b>
is similar to <b>Tk_CanvasDrawableCoords</b> except that it
returns coordinates in the canvas&rsquo;s window on the
screen, instead of coordinates in an off-screen pixmap.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasEventuallyRedraw</b>
may be invoked by a type manager to inform Tk that a portion
of a canvas needs to be redrawn. The <i>x1</i>, <i>y1</i>,
<i>x2</i>, and <i>y2</i> arguments specify the region that
needs to be redrawn, in canvas coordinates. Type managers
rarely need to invoke <b>Tk_CanvasEventuallyRedraw</b>,
since Tk can normally figure out when an item has changed
and make the redisplay request on its behalf (this happens,
for example whenever Tk calls a <i>configureProc</i> or
<i>scaleProc</i>). The only time that a type manager needs
to call <b>Tk_CanvasEventuallyRedraw</b> is if an item has
changed on its own without being invoked through one of the
procedures in its Tk_ItemType; this could happen, for
example, in an image item if the image is modified using
image commands.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tk_CanvasTagsParseProc</b>
and <b>Tk_CanvasTagsPrintProc</b> are procedures that handle
the <b>&minus;tags</b> option for canvas items. The code of
a canvas type manager will not call these procedures
directly, but will use their addresses to create a
<b>Tk_CustomOption</b> structure for the <b>&minus;tags</b>
option. The code typically looks like this:</p>

<p style="margin-left:22%;">static Tk_CustomOption
tagsOption = {Tk_CanvasTagsParseProc, <br>
Tk_CanvasTagsPrintProc, (ClientData) NULL <br>
};</p>

<p style="margin-left:22%; margin-top: 1em">static
Tk_ConfigSpec configSpecs[] = { <br>
... <br>
{TK_CONFIG_CUSTOM, &quot;&minus;tags&quot;, (char *) NULL,
(char *) NULL, <br>
(char *) NULL, 0, TK_CONFIG_NULL_OK, &amp;tagsOption}, <br>
... <br>
};</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">canvas, focus,
item type, redisplay, selection, type manager</p>
<hr>
</body>
</html>
