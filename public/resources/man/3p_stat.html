<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:16:44 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>STAT</title>

</head>
<body>

<h1 align="center">STAT</h1>

<a href="#PROLOG">PROLOG</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#RETURN VALUE">RETURN VALUE</a><br>
<a href="#ERRORS">ERRORS</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>PROLOG
<a name="PROLOG"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page is part of the POSIX Programmer&rsquo;s Manual. The
Linux implementation of this interface may differ (consult
the corresponding Linux manual page for details of Linux
behavior), or the interface may not be implemented on
Linux.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">stat &minus;
get file status</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;sys/stat.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
stat(const char *restrict</b> <i>path</i><b>, struct stat
*restrict</b> <i>buf</i><b>);</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>stat</i>() function shall obtain information about the
named file and write it to the area pointed to by the
<i>buf</i> argument. The <i>path</i> argument points to a
pathname naming a file. Read, write, or execute permission
of the named file is not required. An implementation that
provides additional or alternate file access control
mechanisms may, under implementation-defined conditions,
cause <i>stat</i>() to fail. In particular, the system may
deny the existence of the file specified by <i>path</i>.</p>

<p style="margin-left:11%; margin-top: 1em">If the named
file is a symbolic link, the <i>stat</i>() function shall
continue pathname resolution using the contents of the
symbolic link, and shall return information pertaining to
the resulting file if the file exists.</p>

<p style="margin-left:11%; margin-top: 1em">The <i>buf</i>
argument is a pointer to a <b>stat</b> structure, as defined
in the <i>&lt;sys/stat.h&gt;</i> header, into which
information is placed concerning the file.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>stat</i>() function shall update any time-related fields
(as described in the Base Definitions volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, Section 4.7, File Times
Update), before writing into the <b>stat</b> structure.</p>

<p style="margin-left:11%; margin-top: 1em">Unless
otherwise specified, the structure members <i>st_mode</i>,
<i>st_ino</i>, <i>st_dev</i>, <i>st_uid</i>, <i>st_gid</i>,
<i>st_atime</i>, <i>st_ctime</i>, and <i>st_mtime</i> shall
have meaningful values for all file types defined in this
volume of IEEE&nbsp;Std&nbsp;1003.1-2001. The value of the
member <i>st_nlink</i> shall be set to the number of links
to the file.</p>

<h2>RETURN VALUE
<a name="RETURN VALUE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Upon successful
completion, 0 shall be returned. Otherwise, -1 shall be
returned and <i>errno</i> set to indicate the error.</p>

<h2>ERRORS
<a name="ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>stat</i>() function shall fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EACCES</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Search permission is denied for a component of the path
prefix.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>EIO</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>An error occurred while reading from the file
system.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ELOOP</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A loop exists in symbolic links encountered during
resolution of the <i>path</i> argument.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">The length of the <i>path</i>
argument exceeds {PATH_MAX} or a pathname component is
longer than {NAME_MAX}.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>ENOENT</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>A component of <i>path</i> does not name an existing
file or <i>path</i> is an empty string.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENOTDIR</b></p>

<p style="margin-left:22%;">A component of the path prefix
is not a directory.</p>

<p style="margin-left:11%;"><b>EOVERFLOW</b></p>

<p style="margin-left:22%;">The file size in bytes or the
number of blocks allocated to the file or the file serial
number cannot be represented correctly in the structure
pointed to by <i>buf</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>stat</i>() function may fail if:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>ELOOP</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>More than {SYMLOOP_MAX} symbolic links were encountered
during resolution of the <i>path</i> argument.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>ENAMETOOLONG</b></p>

<p style="margin-left:22%;">As a result of encountering a
symbolic link in resolution of the <i>path</i> argument, the
length of the substituted pathname string exceeded
{PATH_MAX}.</p>

<p style="margin-left:11%;"><b>EOVERFLOW</b></p>

<p style="margin-left:22%;">A value to be stored would
overflow one of the members of the <b>stat</b>
structure.</p>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i><b>Obtaining
File Status Information</b></i> <br>
The following example shows how to obtain file status
information for a file named <b>/home/cnd/mod1</b>. The
structure variable <i>buffer</i> is defined for the
<b>stat</b> structure.</p>

<p style="margin-left:22%; margin-top: 1em"><b>#include
&lt;sys/types.h&gt; <br>
#include &lt;sys/stat.h&gt; <br>
#include &lt;fcntl.h&gt;</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>struct stat
buffer; <br>
int status; <br>
... <br>
status = stat(&quot;/home/cnd/mod1&quot;,
&amp;buffer);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>Getting
Directory Information</b> <br>
The following example fragment gets status information for
each entry in a directory. The call to the <i>stat</i>()
function stores file information in the <b>stat</b>
structure pointed to by <i>statbuf</i>. The lines that
follow the <i>stat</i>() call format the fields in the
<b>stat</b> structure for presentation to the user of the
program.</p>

<p style="margin-left:22%; margin-top: 1em"><b>#include
&lt;sys/types.h&gt; <br>
#include &lt;sys/stat.h&gt; <br>
#include &lt;dirent.h&gt; <br>
#include &lt;pwd.h&gt; <br>
#include &lt;grp.h&gt; <br>
#include &lt;time.h&gt; <br>
#include &lt;locale.h&gt; <br>
#include &lt;langinfo.h&gt; <br>
#include &lt;stdio.h&gt; <br>
#include &lt;stdint.h&gt;</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>struct
dirent *dp; <br>
struct stat statbuf; <br>
struct passwd *pwd; <br>
struct group *grp; <br>
struct tm *tm; <br>
char datestring[256]; <br>
... <br>
/* Loop through directory entries. */ <br>
while ((dp = readdir(dir)) != NULL) {</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Get
entry&rsquo;s information. */ <br>
if (stat(dp-&gt;d_name, &amp;statbuf) == -1) <br>
continue;</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Print out
type, permissions, and number of links. */ <br>
printf(&quot;%10.10s&quot;, sperm (statbuf.st_mode)); <br>
printf(&quot;%4d&quot;, statbuf.st_nlink);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Print out
owner&rsquo;s name if it is found using getpwuid(). */ <br>
if ((pwd = getpwuid(statbuf.st_uid)) != NULL) <br>
printf(&quot; %-8.8s&quot;, pwd-&gt;pw_name); <br>
else <br>
printf(&quot; %-8d&quot;, statbuf.st_uid);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Print out
group name if it is found using getgrgid(). */ <br>
if ((grp = getgrgid(statbuf.st_gid)) != NULL) <br>
printf(&quot; %-8.8s&quot;, grp-&gt;gr_name); <br>
else <br>
printf(&quot; %-8d&quot;, statbuf.st_gid);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Print
size of file. */ <br>
printf(&quot; %9jd&quot;,
(intmax_t)statbuf.st_size);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>tm =
localtime(&amp;statbuf.st_mtime);</b></p>

<p style="margin-left:22%; margin-top: 1em"><b>/* Get
localized date string. */ <br>
strftime(datestring, sizeof(datestring),
nl_langinfo(D_T_FMT), tm);</b></p>


<p style="margin-left:22%; margin-top: 1em"><b>printf(&quot;
%s %s\n&quot;, datestring, dp-&gt;d_name); <br>
}</b></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The intent of
the paragraph describing &quot;additional or alternate file
access control mechanisms&quot; is to allow a secure
implementation where a process with a label that does not
dominate the file&rsquo;s label cannot perform a
<i>stat</i>() function. This is not related to read
permission; a process with a label that dominates the
file&rsquo;s label does not need read permission. An
implementation that supports write-up operations could fail
<i>fstat</i>() function calls even though it has a valid
file descriptor open for writing.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>fstat</i>(),
<i>lstat</i>(), <i>readlink</i>(), <i>symlink</i>(), the
Base Definitions volume of IEEE&nbsp;Std&nbsp;1003.1-2001,
<i>&lt;sys/stat.h&gt;</i>, <i>&lt;sys/types.h&gt;</i></p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
