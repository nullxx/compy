<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:25:13 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PWCK</title>

</head>
<body>

<h1 align="center">PWCK</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#FILES">FILES</a><br>
<a href="#EXIT VALUES">EXIT VALUES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">pwck &minus;
verify integrity of password files</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="52%">


<p style="margin-top: 1em"><b>pwck</b> [options]
[<i>passwd&nbsp;</i>[&nbsp;<i>shadow&nbsp;</i>]]</p> </td>
<td width="37%">
</td></tr>
</table>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>pwck</b>
command verifies the integrity of the users and
authentication information. It checks that all entries in
/etc/passwd and /etc/shadow have the proper format and
contain valid data. The user is prompted to delete entries
that are improperly formatted or which have other
uncorrectable errors.</p>

<p style="margin-left:11%; margin-top: 1em">Checks are made
to verify that each entry has:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; the
correct number of fields</p>

<p style="margin-left:17%; margin-top: 1em">&bull; a unique
and valid user name</p>

<p style="margin-left:17%; margin-top: 1em">&bull; a valid
user and group identifier</p>

<p style="margin-left:17%; margin-top: 1em">&bull; a valid
primary group</p>

<p style="margin-left:17%; margin-top: 1em">&bull; a valid
home directory</p>

<p style="margin-left:17%; margin-top: 1em">&bull; a valid
login shell</p>

<p style="margin-left:11%; margin-top: 1em">shadow checks
are enabled when a second file parameter is specified or
when /etc/shadow exists on the system.</p>

<p style="margin-left:11%; margin-top: 1em">These checks
are the following:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; every
passwd entry has a matching shadow entry, and every shadow
entry has a matching passwd entry</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
passwords are specified in the shadowed file</p>

<p style="margin-left:17%; margin-top: 1em">&bull; shadow
entries have the correct number of fields</p>

<p style="margin-left:17%; margin-top: 1em">&bull; shadow
entries are unique in shadow</p>

<p style="margin-left:17%; margin-top: 1em">&bull; the last
password changes are not in the future</p>

<p style="margin-left:11%; margin-top: 1em">The checks for
correct number of fields and unique user name are fatal. If
the entry has the wrong number of fields, the user will be
prompted to delete the entire line. If the user does not
answer affirmatively, all further checks are bypassed. An
entry with a duplicated user name is prompted for deletion,
but the remaining checks will still be made. All other
errors are warning and the user is encouraged to run the
<b>usermod</b> command to correct the error.</p>

<p style="margin-left:11%; margin-top: 1em">The commands
which operate on the /etc/passwd file are not able to alter
corrupted or duplicated entries. <b>pwck</b> should be used
in those circumstances to remove the offending entry.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>&minus;r</b> and <b>&minus;s</b> options cannot be
combined.</p>

<p style="margin-left:11%; margin-top: 1em">The options
which apply to the <b>pwck</b> command are:</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;h</b>,
<b>&minus;&minus;help</b></p>

<p style="margin-left:17%;">Display help message and
exit.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;q</b>,
<b>&minus;&minus;quiet</b></p>

<p style="margin-left:17%;">Report errors only. The
warnings which do not require any action from the user won't
be displayed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;r</b>,
<b>&minus;&minus;read&minus;only</b></p>

<p style="margin-left:17%;">Execute the <b>pwck</b> command
in read&minus;only mode.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;R</b>,
<b>&minus;&minus;root</b> <i>CHROOT_DIR</i></p>

<p style="margin-left:17%;">Apply changes in the
<i>CHROOT_DIR</i> directory and use the configuration files
from the <i>CHROOT_DIR</i> directory.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;s</b>,
<b>&minus;&minus;sort</b></p>

<p style="margin-left:17%;">Sort entries in /etc/passwd and
/etc/shadow by UID.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
<b>pwck</b> operates on the files /etc/passwd and
/etc/shadow. The user may select alternate files with the
<i>passwd</i> and <i>shadow</i> parameters.</p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
configuration variables in /etc/login.defs change the
behavior of this tool:</p>


<p style="margin-left:11%; margin-top: 1em"><b>PASS_MAX_DAYS</b>
(number)</p>

<p style="margin-left:17%;">The maximum number of days a
password may be used. If the password is older than this, a
password change will be forced. If not specified, &minus;1
will be assumed (which disables the restriction).</p>


<p style="margin-left:11%; margin-top: 1em"><b>PASS_MIN_DAYS</b>
(number)</p>

<p style="margin-left:17%;">The minimum number of days
allowed between password changes. Any password changes
attempted sooner than this will be rejected. If not
specified, &minus;1 will be assumed (which disables the
restriction).</p>


<p style="margin-left:11%; margin-top: 1em"><b>PASS_WARN_AGE</b>
(number)</p>

<p style="margin-left:17%;">The number of days warning
given before a password expires. A zero means warning is
given only upon the day of expiration, a negative value
means no warning is given. If not specified, no warning will
be provided.</p>

<h2>FILES
<a name="FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">/etc/group</p>

<p style="margin-left:17%;">Group account information.</p>


<p style="margin-left:11%; margin-top: 1em">/etc/passwd</p>

<p style="margin-left:17%;">User account information.</p>


<p style="margin-left:11%; margin-top: 1em">/etc/shadow</p>

<p style="margin-left:17%;">Secure user account
information.</p>

<h2>EXIT VALUES
<a name="EXIT VALUES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The <b>pwck</b>
command exits with the following values:</p>

<p style="margin-left:11%; margin-top: 1em"><i>0</i></p>

<p style="margin-left:17%;">success</p>

<p style="margin-left:11%; margin-top: 1em"><i>1</i></p>

<p style="margin-left:17%;">invalid command syntax</p>

<p style="margin-left:11%; margin-top: 1em"><i>2</i></p>

<p style="margin-left:17%;">one or more bad password
entries</p>

<p style="margin-left:11%; margin-top: 1em"><i>3</i></p>

<p style="margin-left:17%;">can't open password files</p>

<p style="margin-left:11%; margin-top: 1em"><i>4</i></p>

<p style="margin-left:17%;">can't lock password files</p>

<p style="margin-left:11%; margin-top: 1em"><i>5</i></p>

<p style="margin-left:17%;">can't update password files</p>

<p style="margin-left:11%; margin-top: 1em"><i>6</i></p>

<p style="margin-left:17%;">can't sort password files</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>group</b>(5),
<b>grpck</b>(8), <b>passwd</b>(5), <b>shadow</b>(5),
<b>usermod</b>(8).</p>
<hr>
</body>
</html>
