<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:59:14 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERLHPUX</title>

</head>
<body>

<h1 align="center">PERLHPUX</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#nss_delete core dump from op/pwent or op/grent">nss_delete core dump from op/pwent or op/grent</a><br>
<a href="#error: pasting &quot;)&quot; and &quot;l&quot; does not give a valid preprocessing token">error: pasting &quot;)&quot; and &quot;l&quot; does not give a valid preprocessing token</a><br>
<a href="#Miscellaneous">Miscellaneous</a><br>
<a href="#AUTHOR">AUTHOR</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perlhpux
&minus; Perl version 5 on Hewlett&minus;Packard Unix
(HP&minus;UX) systems</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes various features of <small>HP</small> &rsquo;s
Unix operating system (HP-UX) that will affect how Perl
version 5 (hereafter just Perl) is compiled and/or runs.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Using perl
as shipped with HP-UX</b> <br>
Application release September 2001, HP-UX 11.00 is the first
to ship with Perl. By the time it was perl&minus;5.6.1 in
/opt/perl. The first occurrence is on <small>CD</small>
5012&minus;7954 and can be installed using</p>

<pre style="margin-left:11%; margin-top: 1em">  swinstall &minus;s /cdrom perl</pre>


<p style="margin-left:11%; margin-top: 1em">assuming you
have mounted that <small>CD</small> on /cdrom. In this
version the following modules were installed:</p>

<pre style="margin-left:11%; margin-top: 1em">  ActivePerl::DocTools&minus;0.04   HTML::Parser&minus;3.19   XML::DOM&minus;1.25
  Archive::Tar&minus;0.072          HTML::Tagset&minus;3.03   XML::Parser&minus;2.27
  Compress::Zlib&minus;1.08         MIME::Base64&minus;2.11   XML::Simple&minus;1.05
  Convert::ASN1&minus;0.10          Net&minus;1.07            XML::XPath&minus;1.09
  Digest::MD5&minus;2.11            PPM&minus;2.1.5           XML::XSLT&minus;0.32
  File::CounterFile&minus;0.12      SOAP::Lite&minus;0.46     libwww&minus;perl&minus;5.51
  Font::AFM&minus;1.18              Storable&minus;1.011      libxml&minus;perl&minus;0.07
  HTML&minus;Tree&minus;3.11              URI&minus;1.11            perl&minus;ldap&minus;0.23</pre>


<p style="margin-left:11%; margin-top: 1em">That build was
a portable hppa&minus;1.1 multithread build that supports
large files compiled with
gcc&minus;2.9&minus;hppa&minus;991112.</p>

<p style="margin-left:11%; margin-top: 1em">If you perform
a new installation, then (a newer) Perl will be installed
automatically. Preinstalled HP-UX systems now slao have more
recent versions of Perl and the updated modules.</p>

<p style="margin-left:11%; margin-top: 1em">The official
(threaded) builds from <small>HP</small> , as they are
shipped on the Application <small>DVD/CD</small> &rsquo;s
are available on
&lt;http://www.software.hp.com/portal/swdepot/displayProductInfo.do?productNumber=PERL&gt;
for both PA-RISC and <small>IPF</small> (Itanium Processor
Family). They are built with the <small>HP</small> ANSI-C
compiler. Up till 5.8.8 that was done by ActiveState.</p>

<p style="margin-left:11%; margin-top: 1em">To see what
version is included on the <small>DVD</small> (assumed here
to be mounted on /cdrom), issue this command:</p>

<pre style="margin-left:11%; margin-top: 1em">  # swlist &minus;s /cdrom perl
  # perl           D.5.8.8.B  5.8.8 Perl Programming Language
    perl.Perl5&minus;32  D.5.8.8.B  32&minus;bit 5.8.8 Perl Programming Language with Extensions
    perl.Perl5&minus;64  D.5.8.8.B  64&minus;bit 5.8.8 Perl Programming Language with Extensions</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Using perl
from <small>HP</small> &rsquo;s porting centre</b>
<small><br>
HP</small> porting centre tries very hard to keep up with
customer demand and release updates from the Open Source
community. Having precompiled Perl binaries available is
obvious.</p>

<p style="margin-left:11%; margin-top: 1em">The
<small>HP</small> porting centres are limited in what
systems they are allowed to port to and they usually choose
the two most recent <small>OS</small> versions available.
This means that at the moment of writing, there are only
HP-UX 11.11 (pa-risc 2.0) and HP-UX 11.23 (Itanium 2) ports
available on the porting centres.</p>


<p style="margin-left:11%; margin-top: 1em"><small>HP</small>
has asked the porting centre to move Open Source binaries
from /opt to /usr/local, so binaries produced since the
start of July 2002 are located in /usr/local.</p>

<p style="margin-left:11%; margin-top: 1em">One of
<small>HP</small> porting centres <small>URL</small>
&rsquo;s is &lt;http://hpux.connect.org.uk/&gt; The port
currently available is built with <small>GNU</small>
gcc.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Compiling
Perl 5 on HP-UX</b> <br>
When compiling Perl, you must use an <small>ANSI</small> C
compiler. The C compiler that ships with all HP-UX systems
is a K&amp;R compiler that should only be used to build new
kernels.</p>

<p style="margin-left:11%; margin-top: 1em">Perl can be
compiled with either <small>HP</small> &rsquo;s
<small>ANSI</small> C compiler or with gcc. The former is
recommended, as not only can it compile Perl with no
difficulty, but also can take advantage of features listed
later that require the use of <small>HP</small>
compiler-specific command-line flags.</p>

<p style="margin-left:11%; margin-top: 1em">If you decide
to use gcc, make sure your installation is recent and
complete, and be sure to read the Perl
<small>INSTALL</small> file for more gcc-specific
details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>PA-RISC</b>
<small><br>
HP</small> &rsquo;s <small>HP9000</small> Unix systems run
on <small>HP</small> &rsquo;s own Precision Architecture
(PA-RISC) chip. HP-UX used to run on the Motorola
<small>MC68000</small> family of chips, but any machine with
this chip in it is quite obsolete and this document will not
attempt to address issues for compiling Perl on the Motorola
chipset.</p>

<p style="margin-left:11%; margin-top: 1em">The version of
PA-RISC at the time of this document&rsquo;s last update is
2.0, which is also the last there will be. <small>HP</small>
PA-RISC systems are usually refered to with model
description &quot; <small>HP</small> 9000&quot;. The last
<small>CPU</small> in this series is the
<small>PA&minus;8900</small> . Support for PA-RISC
architectured machines officially ends as shown in the
following table:</p>

<pre style="margin-left:11%; margin-top: 1em">   PA&minus;RISC End&minus;of&minus;Life Roadmap
 +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
 | HP9000 | Superdome      | PA&minus;8700        | Spring 2011     |
 | 4&minus;128  |                | PA&minus;8800/sx1000 | Summer 2012     |
 | cores  |                | PA&minus;8900/sx1000 | 2014            |
 |        |                | PA&minus;8900/sx2000 | 2015            |
 +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
 | HP9000 | rp7410, rp8400 | PA&minus;8700        | Spring 2011     |
 | 2&minus;32   | rp7420, rp8420 | PA&minus;8800/sx1000 | 2012            |
 | cores  | rp7440, rp8440 | PA&minus;8900/sx1000 | Autumn 2013     |
 |        |                | PA&minus;8900/sx2000 | 2015            |
 +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
 | HP9000 | rp44x0         | PA&minus;8700        | Spring 2011     |
 | 1&minus;8    |                | PA&minus;8800/rp44x0 | 2012            |
 | cores  |                | PA&minus;8900/rp44x0 | 2014            |
 +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+
 | HP9000 | rp34x0         | PA&minus;8700        | Spring 2011     |
 | 1&minus;4    |                | PA&minus;8800/rp34x0 | 2012            |
 | cores  |                | PA&minus;8900/rp34x0 | 2014            |
 +&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;+</pre>


<p style="margin-left:11%; margin-top: 1em">From
&lt;http://www.hp.com/products1/evolution/9000/faqs.html&gt;</p>


<pre style="margin-left:11%; margin-top: 1em"> The last order date for HP 9000 systems was December 31, 2008.</pre>


<p style="margin-left:11%; margin-top: 1em">A complete list
of models at the time the <small>OS</small> was built is in
the file /usr/sam/lib/mo/sched.models. The first column
corresponds to the last part of the output of the
&quot;model&quot; command. The second column is the PA-RISC
version and the third column is the exact chip type used.
(Start browsing at the bottom to prevent confusion
;&minus;)</p>

<pre style="margin-left:11%; margin-top: 1em">  # model
  9000/800/L1000&minus;44
  # grep L1000&minus;44 /usr/sam/lib/mo/sched.models
  L1000&minus;44        2.0     PA8500</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Portability
Between PA-RISC Versions</b> <br>
An executable compiled on a PA-RISC 2.0 platform will not
execute on a PA-RISC 1.1 platform, even if they are running
the same version of HP-UX. If you are building Perl on a
PA-RISC 2.0 platform and want that Perl to also run on a
PA-RISC 1.1, the compiler flags +DAportable and +DS32 should
be used.</p>

<p style="margin-left:11%; margin-top: 1em">It is no longer
possible to compile PA-RISC 1.0 executables on either the
PA-RISC 1.1 or 2.0 platforms. The command-line flags are
accepted, but the resulting executable will not run when
transferred to a PA-RISC 1.0 system.</p>

<p style="margin-left:11%; margin-top: 1em"><b>PA-RISC
1.0</b> <br>
The original version of PA-RISC, <small>HP</small> no longer
sells any system with this chip.</p>

<p style="margin-left:11%; margin-top: 1em">The following
systems contained PA-RISC 1.0 chips:</p>

<pre style="margin-left:11%; margin-top: 1em">  600, 635, 645, 808, 815, 822, 825, 832, 834, 835, 840, 842, 845, 850,
  852, 855, 860, 865, 870, 890</pre>


<p style="margin-left:11%; margin-top: 1em"><b>PA-RISC
1.1</b> <br>
An upgrade to the PA-RISC design, it shipped for many years
in many different system.</p>

<p style="margin-left:11%; margin-top: 1em">The following
systems contain with PA-RISC 1.1 chips:</p>

<pre style="margin-left:11%; margin-top: 1em">  705, 710, 712, 715, 720, 722, 725, 728, 730, 735, 742, 743, 744, 745,
  747, 750, 755, 770, 777, 778, 779, 800, 801, 803, 806, 807, 809, 811,
  813, 816, 817, 819, 821, 826, 827, 829, 831, 837, 839, 841, 847, 849,
  851, 856, 857, 859, 867, 869, 877, 887, 891, 892, 897, A180, A180C,
  B115, B120, B132L, B132L+, B160L, B180L, C100, C110, C115, C120,
  C160L, D200, D210, D220, D230, D250, D260, D310, D320, D330, D350,
  D360, D410, DX0, DX5, DXO, E25, E35, E45, E55, F10, F20, F30, G30,
  G40, G50, G60, G70, H20, H30, H40, H50, H60, H70, I30, I40, I50, I60,
  I70, J200, J210, J210XC, K100, K200, K210, K220, K230, K400, K410,
  K420, S700i, S715, S744, S760, T500, T520</pre>


<p style="margin-left:11%; margin-top: 1em"><b>PA-RISC
2.0</b> <br>
The most recent upgrade to the PA-RISC design, it added
support for 64&minus;bit integer data.</p>

<p style="margin-left:11%; margin-top: 1em">As of the date
of this document&rsquo;s last update, the following systems
contain PA-RISC 2.0 chips:</p>

<pre style="margin-left:11%; margin-top: 1em">  700, 780, 781, 782, 783, 785, 802, 804, 810, 820, 861, 871, 879, 889,
  893, 895, 896, 898, 899, A400, A500, B1000, B2000, C130, C140, C160,
  C180, C180+, C180&minus;XP, C200+, C400+, C3000, C360, C3600, CB260, D270,
  D280, D370, D380, D390, D650, J220, J2240, J280, J282, J400, J410,
  J5000, J5500XM, J5600, J7000, J7600, K250, K260, K260&minus;EG, K270, K360,
  K370, K380, K450, K460, K460&minus;EG, K460&minus;XP, K470, K570, K580, L1000,
  L2000, L3000, N4000, R380, R390, SD16000, SD32000, SD64000, T540,
  T600, V2000, V2200, V2250, V2500, V2600</pre>


<p style="margin-left:11%; margin-top: 1em">Just before
<small>HP</small> took over Compaq, some systems were
renamed. the link that contained the explanation is dead, so
here&rsquo;s a short summary:</p>

<pre style="margin-left:11%; margin-top: 1em">  HP 9000 A&minus;Class servers, now renamed HP Server rp2400 series.
  HP 9000 L&minus;Class servers, now renamed HP Server rp5400 series.
  HP 9000 N&minus;Class servers, now renamed HP Server rp7400.
  rp2400, rp2405, rp2430, rp2450, rp2470, rp3410, rp3440, rp4410,
  rp4440, rp5400, rp5405, rp5430, rp5450, rp5470, rp7400, rp7405,
  rp7410, rp7420, rp7440, rp8400, rp8420, rp8440, Superdome</pre>


<p style="margin-left:11%; margin-top: 1em">The current
naming convention is:</p>

<pre style="margin-left:11%; margin-top: 1em">  aadddd
  ||||`+&minus; 00 &minus; 99 relative capacity &amp; newness (upgrades, etc.)
  |||`&minus;&minus;&minus; unique number for each architecture to ensure different
  |||     systems do not have the same numbering across
  |||     architectures
  ||`&minus;&minus;&minus;&minus; 1 &minus; 9 identifies family and/or relative positioning
  ||
  |`&minus;&minus;&minus;&minus;&minus; c = ia32 (cisc)
  |       p = pa&minus;risc
  |       x = ia&minus;64 (Itanium &amp; Itanium 2)
  |       h = housing
  `&minus;&minus;&minus;&minus;&minus;&minus; t = tower
          r = rack optimized
          s = super scalable
          b = blade
          sa = appliance</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Itanium
Processor Family ( <small>IPF</small> ) and HP-UX</b> <br>
HP-UX also runs on the new Itanium processor. This requires
the use of a different version of HP-UX (currently 11.23 or
11i v2), and with the exception of a few differences
detailed below and in later sections, Perl should compile
with no problems.</p>

<p style="margin-left:11%; margin-top: 1em">Although
PA-RISC binaries can run on Itanium systems, you should not
attempt to use a PA-RISC version of Perl on an Itanium
system. This is because shared libraries created on an
Itanium system cannot be loaded while running a PA-RISC
executable.</p>


<p style="margin-left:11%; margin-top: 1em"><small>HP</small>
Itanium 2 systems are usually refered to with model
description &quot; <small>HP</small> Integrity&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Itanium,
Itanium 2 &amp; Madison 6</b> <small><br>
HP</small> also ships servers with the 128&minus;bit Itanium
processor(s). The cx26x0 is told to have Madison 6. As of
the date of this document&rsquo;s last update, the following
systems contain Itanium or Itanium 2 chips (this is likely
to be out of date):</p>

<pre style="margin-left:11%; margin-top: 1em">  BL60p, BL860c, BL870c, cx2600, cx2620, rx1600, rx1620, rx2600,
  rx2600hptc, rx2620, rx2660, rx3600, rx4610, rx4640, rx5670,
  rx6600, rx7420, rx7620, rx7640, rx8420, rx8620, rx8640, rx9610,
  sx1000, sx2000</pre>


<p style="margin-left:11%; margin-top: 1em">To see all
about your machine, type</p>

<pre style="margin-left:11%; margin-top: 1em">  # model
  ia64 hp server rx2600
  # /usr/contrib/bin/machinfo</pre>


<p style="margin-left:11%; margin-top: 1em"><b>HP-UX
versions</b> <br>
Not all architectures ( <small>PA</small> = PA-RISC,
<small>IPF</small> = Itanium Processor Family) support all
versions of HP-UX, here is a short list</p>

<pre style="margin-left:11%; margin-top: 1em">  HP&minus;UX version  Kernel  Architecture
  &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;  &minus;&minus;&minus;&minus;&minus;&minus;  &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
  10.20          32 bit  PA
  11.00          32/64   PA
  11.11  11i v1  32/64   PA
  11.22  11i v2     64        IPF
  11.23  11i v2     64   PA &amp; IPF
  11.31  11i v3     64   PA &amp; IPF</pre>


<p style="margin-left:11%; margin-top: 1em">See for the
full list of hardware/OS support and expected end-of-life
&lt;http://www.hp.com/go/hpuxservermatrix&gt;</p>

<p style="margin-left:11%; margin-top: 1em"><b>Building
Dynamic Extensions on HP-UX</b> <br>
HP-UX supports dynamically loadable libraries (shared
libraries). Shared libraries end with the suffix .sl. On
Itanium systems, they end with the suffix .so.</p>

<p style="margin-left:11%; margin-top: 1em">Shared
libraries created on a platform using a particular PA-RISC
version are not usable on platforms using an earlier PA-RISC
version by default. However, this backwards compatibility
may be enabled using the same +DAportable compiler flag
(with the same PA-RISC 1.0 caveat mentioned above).</p>

<p style="margin-left:11%; margin-top: 1em">Shared
libraries created on an Itanium platform cannot be loaded on
a PA-RISC platform. Shared libraries created on a PA-RISC
platform can only be loaded on an Itanium platform if it is
a PA-RISC executable that is attempting to load the PA-RISC
library. A PA-RISC shared library cannot be loaded into an
Itanium executable nor vice-versa.</p>

<p style="margin-left:11%; margin-top: 1em">To create a
shared library, the following steps must be performed:</p>

<pre style="margin-left:11%; margin-top: 1em">  1. Compile source modules with +z or +Z flag to create a .o module
     which contains Position&minus;Independent Code (PIC).  The linker will
     tell you in the next step if +Z was needed.
     (For gcc, the appropriate flag is &minus;fpic or &minus;fPIC.)
  2. Link the shared library using the &minus;b flag.  If the code calls
     any functions in other system libraries (e.g., libm), it must
     be included on this line.</pre>


<p style="margin-left:11%; margin-top: 1em">(Note that
these steps are usually handled automatically by the
extension&rsquo;s Makefile).</p>

<p style="margin-left:11%; margin-top: 1em">If these
dependent libraries are not listed at shared library
creation time, you will get fatal &quot;Unresolved
symbol&quot; errors at run time when the library is
loaded.</p>

<p style="margin-left:11%; margin-top: 1em">You may create
a shared library that refers to another library, which may
be either an archive library or a shared library. If this
second library is a shared library, this is called a
&quot;dependent library&quot;. The dependent library&rsquo;s
name is recorded in the main shared library, but it is not
linked into the shared library. Instead, it is loaded when
the main shared library is loaded. This can cause problems
if you build an extension on one system and move it to
another system where the libraries may not be located in the
same place as on the first system.</p>

<p style="margin-left:11%; margin-top: 1em">If the referred
library is an archive library, then it is treated as a
simple collection of .o modules (all of which must contain
<small>PIC</small> ). These modules are then linked into the
shared library.</p>

<p style="margin-left:11%; margin-top: 1em">Note that it is
okay to create a library which contains a dependent library
that is already linked into perl.</p>

<p style="margin-left:11%; margin-top: 1em">Some
extensions, like DB_File and Compress::Zlib use/require
prebuilt libraries for the perl extensions/modules to work.
If these libraries are built using the default
configuration, it might happen that you run into an error
like &quot;invalid loader fixup&quot; during load phase.
<small>HP</small> is aware of this problem. Search the HP-UX
cxx-dev forums for discussions about the subject. The short
answer is that <b>everything</b> (all libraries, everything)
must be compiled with <tt>&quot;+z&quot;</tt> or
<tt>&quot;+Z&quot;</tt> to be <small>PIC</small> (position
independent code). (For gcc, that would be
<tt>&quot;&minus;fpic&quot;</tt> or
<tt>&quot;&minus;fPIC&quot;</tt>). In HP-UX 11.00 or newer
the linker error message should tell the name of the
offending object file.</p>

<p style="margin-left:11%; margin-top: 1em">A more general
approach is to intervene manually, as with an example for
the DB_File module, which requires SleepyCat&rsquo;s
libdb.sl:</p>

<pre style="margin-left:11%; margin-top: 1em">  # cd .../db&minus;3.2.9/build_unix
  # vi Makefile
  ... add +Z to all cflags to create shared objects
  CFLAGS=         &minus;c $(CPPFLAGS) +Z &minus;Ae +O2 +Onolimit \
                  &minus;I/usr/local/include &minus;I/usr/include/X11R6
  CXXFLAGS=       &minus;c $(CPPFLAGS) +Z &minus;Ae +O2 +Onolimit \
                  &minus;I/usr/local/include &minus;I/usr/include/X11R6
  # make clean
  # make
  # mkdir tmp
  # cd tmp
  # ar x ../libdb.a
  # ld &minus;b &minus;o libdb&minus;3.2.sl *.o
  # mv libdb&minus;3.2.sl /usr/local/lib
  # rm *.o
  # cd /usr/local/lib
  # rm &minus;f libdb.sl
  # ln &minus;s libdb&minus;3.2.sl libdb.sl
  # cd .../DB_File&minus;1.76
  # make distclean
  # perl Makefile.PL
  # make
  # make test
  # make install</pre>


<p style="margin-left:11%; margin-top: 1em">As of
db&minus;4.2.x it is no longer needed to do this by hand.
Sleepycat has changed the configuration process to add +z on
HP-UX automatically.</p>

<pre style="margin-left:11%; margin-top: 1em">  # cd .../db&minus;4.2.25/build_unix
  # env CFLAGS=+DD64 LDFLAGS=+DD64 ../dist/configure</pre>


<p style="margin-left:11%; margin-top: 1em">should work to
generate 64bit shared libraries for HP-UX 11.00 and 11i.</p>

<p style="margin-left:11%; margin-top: 1em">It is no longer
possible to link PA-RISC 1.0 shared libraries (even though
the command-line flags are still present).</p>

<p style="margin-left:11%; margin-top: 1em">PA-RISC and
Itanium object files are not interchangeable. Although you
may be able to use ar to create an archive library of
PA-RISC object files on an Itanium system, you cannot link
against it using an Itanium link editor.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
<small>HP ANSI</small> C Compiler</b> <br>
When using this compiler to build Perl, you should make sure
that the flag &minus;Aa is added to the cpprun and cppstdin
variables in the config.sh file (though see the section on
64&minus;bit perl below). If you are using a recent version
of the Perl distribution, these flags are set
automatically.</p>

<p style="margin-left:11%; margin-top: 1em">Even though
HP-UX 10.20 and 11.00 are not actively maintained by
<small>HP</small> anymore, updates for the <small>HP
ANSI</small> C compiler are still available from time to
time, and it might be advisable to see if updates are
applicable. At the moment of writing, the latests available
patches for 11.00 that should be applied are
<small>PHSS_35098</small> , <small>PHSS_35175</small> ,
<small>PHSS_35100</small> , <small>PHSS_33036</small> , and
<small>PHSS_33902</small> ). If you have a
<small>SUM</small> account, you can use it to search for
updates/patches. Enter &quot; <small>ANSI</small> &quot; as
keyword.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
<small>GNU</small> C Compiler</b> <br>
When you are going to use the <small>GNU</small> C compiler
(gcc), and you don&rsquo;t have gcc yet, you can either
build it yourself from the sources (available from e.g.
&lt;http://gcc.gnu.org/mirrors.html&gt;) or fetch a prebuilt
binary from the <small>HP</small> porting center. gcc
prebuilds can be fetched from
&lt;http://h21007.www2.hp.com/dspp/tech/tech_TechSoftwareDetailPage_IDX/1,1703,547,00.html&gt;
(Browse through the list, because there are often multiple
versions of the same package available).</p>

<p style="margin-left:11%; margin-top: 1em">Above mentioned
distributions are depots. H.Merijn Brand has made prebuilt
gcc binaries available on
&lt;http://mirrors.develooper.com/hpux/&gt; and/or
&lt;http://www.cmve.net/~merijn/&gt; for HP-UX 10.20, HP-UX
11.00, HP-UX 11.11 (HP-UX 11i v1), and HP-UX 11.23 (HP-UX
11i v2) in both 32&minus; and 64&minus;bit versions. These
are bzipped tar archives that also include recent
<small>GNU</small> binutils and <small>GNU</small> gdb. Read
the instructions on that page to rebuild gcc using
itself.</p>

<p style="margin-left:11%; margin-top: 1em">On PA-RISC you
need a different compiler for 32&minus;bit applications and
for 64&minus;bit applications. On PA-RISC, 32&minus;bit
objects and 64&minus;bit objects do not mix. Period. There
is no different behaviour for <small>HP</small>
C&minus;ANSI-C or <small>GNU</small> gcc. So if you require
your perl binary to use 64&minus;bit libraries, like
Oracle&minus;64bit, you <small>MUST</small> build a
64&minus;bit perl.</p>

<p style="margin-left:11%; margin-top: 1em">Building a
64&minus;bit capable gcc on PA-RISC from source is possible
only when you have the <small>HP</small> C&minus;ANSI C
compiler or an already working 64&minus;bit binary of gcc
available. Best performance for perl is achieved with
<small>HP</small> &rsquo;s native compiler.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Using Large
Files with Perl on HP-UX</b> <br>
Beginning with HP-UX version 10.20, files larger than 2GB
(2^31 bytes) may be created and manipulated. Three separate
methods of doing this are available. Of these methods, the
best method for Perl is to compile using the
&minus;Duselargefiles flag to Configure. This causes Perl to
be compiled using structures and functions in which these
are 64 bits wide, rather than 32 bits wide. (Note that this
will only work with <small>HP</small> &rsquo;s
<small>ANSI</small> C compiler. If you want to compile Perl
using gcc, you will have to get a version of the compiler
that supports 64&minus;bit operations. See above for where
to find it.)</p>

<p style="margin-left:11%; margin-top: 1em">There are some
drawbacks to this approach. One is that any extension which
calls any file-manipulating C function will need to be
recompiled (just follow the usual &quot;perl Makefile.PL;
make; make test; make install&quot; procedure).</p>

<p style="margin-left:11%; margin-top: 1em">The list of
functions that will need to recompiled is: <br>
creat, fgetpos, fopen, <br>
freopen, fsetpos, fstat, <br>
fstatvfs, fstatvfsdev, ftruncate, <br>
ftw, lockf, lseek, <br>
lstat, mmap, nftw, <br>
open, prealloc, stat, <br>
statvfs, statvfsdev, tmpfile, <br>
truncate, getrlimit, setrlimit</p>

<p style="margin-left:11%; margin-top: 1em">Another
drawback is only valid for Perl versions before 5.6.0. This
drawback is that the seek and tell functions (both the
builtin version and <small>POSIX</small> module version)
will not perform correctly.</p>

<p style="margin-left:11%; margin-top: 1em">It is strongly
recommended that you use this flag when you run Configure.
If you do not do this, but later answer the question about
large files when Configure asks you, you may get a
configuration that cannot be compiled, or that does not
function as expected.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Threaded
Perl on HP-UX</b> <br>
It is possible to compile a version of threaded Perl on any
version of HP-UX before 10.30, but it is strongly suggested
that you be running on HP-UX 11.00 at least.</p>

<p style="margin-left:11%; margin-top: 1em">To compile Perl
with threads, add &minus;Dusethreads to the arguments of
Configure. Verify that the &minus;D_POSIX_C_SOURCE=199506L
compiler flag is automatically added to the list of flags.
Also make sure that &minus;lpthread is listed before
&minus;lc in the list of libraries to link Perl with. The
hints provided for HP-UX during Configure will try very hard
to get this right for you.</p>

<p style="margin-left:11%; margin-top: 1em">HP-UX versions
before 10.30 require a separate installation of a
<small>POSIX</small> threads library package. Two examples
are the <small>HP DCE</small> package, available on
&quot;HP-UX Hardware Extensions 3.0, Install and Core
<small>OS</small> , Release 10.20, April 1999
(B3920&minus;13941)&quot; or the Freely available
<small>PTH</small> package, available on H.Merijn&rsquo;s
site (&lt;http://mirrors.develooper.com/hpux/&gt;). The use
of <small>PTH</small> will be unsupported in perl&minus;5.12
and up and is rather buggy in 5.11.x.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
going to use the <small>HP DCE</small> package, the library
used for threading is /usr/lib/libcma.sl, but there have
been multiple updates of that library over time. Perl will
build with the first version, but it will not pass the test
suite. Older Oracle versions might be a compelling reason
not to update that library, otherwise please find a newer
version in one of the following patches:
<small>PHSS_19739</small> , <small>PHSS_20608</small> , or
<small>PHSS_23672</small></p>

<p style="margin-left:11%; margin-top: 1em">reformatted
output:</p>

<pre style="margin-left:11%; margin-top: 1em">  d3:/usr/lib 106 &gt; what libcma&minus;*.1
  libcma&minus;00000.1:
     HP DCE/9000 1.5               Module: libcma.sl (Export)
                                   Date: Apr 29 1996 22:11:24
  libcma&minus;19739.1:
     HP DCE/9000 1.5 PHSS_19739&minus;40 Module: libcma.sl (Export)
                                   Date: Sep  4 1999 01:59:07
  libcma&minus;20608.1:
     HP DCE/9000 1.5 PHSS_20608    Module: libcma.1 (Export)
                                   Date: Dec  8 1999 18:41:23
  libcma&minus;23672.1:
     HP DCE/9000 1.5 PHSS_23672    Module: libcma.1 (Export)
                                   Date: Apr  9 2001 10:01:06
  d3:/usr/lib 107 &gt;</pre>


<p style="margin-left:11%; margin-top: 1em">If you choose
for the <small>PTH</small> package, use swinstall to install
pth in the default location (/opt/pth), and then make
symbolic links to the libraries from /usr/lib</p>

<pre style="margin-left:11%; margin-top: 1em">  # cd /usr/lib
  # ln &minus;s /opt/pth/lib/libpth* .</pre>


<p style="margin-left:11%; margin-top: 1em">For building
perl to support Oracle, it needs to be linked with libcl and
libpthread. So even if your perl is an unthreaded build,
these libraries might be required. See &quot;Oracle on
HP-UX&quot; below.</p>


<p style="margin-left:11%; margin-top: 1em"><b>64&minus;bit
Perl on HP-UX</b> <br>
Beginning with HP-UX 11.00, programs compiled under HP-UX
can take advantage of the <small>LP64</small> programming
environment ( <small>LP64</small> means Longs and Pointers
are 64 bits wide), in which scalar variables will be able to
hold numbers larger than 2^32 with complete precision. Perl
has proven to be consistent and reliable in 64bit mode since
5.8.1 on all HP-UX 11.xx.</p>

<p style="margin-left:11%; margin-top: 1em">As of the date
of this document, Perl is fully 64&minus;bit compliant on
HP-UX 11.00 and up for both cc&minus; and gcc builds. If you
are about to build a 64&minus;bit perl with
<small>GNU</small> gcc, please read the gcc section
carefully.</p>

<p style="margin-left:11%; margin-top: 1em">Should a user
have the need for compiling Perl in the <small>LP64</small>
environment, use the &minus;Duse64bitall flag to Configure.
This will force Perl to be compiled in a pure
<small>LP64</small> environment (with the +DD64 flag for
<small>HP</small> C&minus;ANSI-C, with no additional options
for <small>GNU</small> gcc 64&minus;bit on PA-RISC, and with
&minus;mlp64 for <small>GNU</small> gcc on Itanium). If you
want to compile Perl using gcc, you will have to get a
version of the compiler that supports 64&minus;bit
operations.)</p>

<p style="margin-left:11%; margin-top: 1em">You can also
use the &minus;Duse64bitint flag to Configure. Although
there are some minor differences between compiling Perl with
this flag versus the &minus;Duse64bitall flag, they should
not be noticeable from a Perl user&rsquo;s perspective. When
configuring &minus;Duse64bitint using a 64bit gcc on a
pa-risc architecture, &minus;Duse64bitint is silently
promoted to &minus;Duse64bitall.</p>

<p style="margin-left:11%; margin-top: 1em">In both cases,
it is strongly recommended that you use these flags when you
run Configure. If you do not use do this, but later answer
the questions about 64&minus;bit numbers when Configure asks
you, you may get a configuration that cannot be compiled, or
that does not function as expected.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Oracle on
HP-UX</b> <br>
Using perl to connect to Oracle databases through
<small>DBI</small> and DBD::Oracle has caused a lot of
people many headaches. Read <small>README</small> .hpux in
the DBD::Oracle for much more information. The reason to
mention it here is that Oracle requires a perl built with
libcl and libpthread, the latter even when perl is build
without threads. Building perl using all defaults, but still
enabling to build DBD::Oracle later on can be achieved
using</p>

<pre style="margin-left:11%; margin-top: 1em">  Configure &minus;A prepend:libswanted='cl pthread ' ...</pre>


<p style="margin-left:11%; margin-top: 1em">Do not forget
the space before the trailing quote.</p>

<p style="margin-left:11%; margin-top: 1em">Also note that
this does not (yet) work with all configurations, it is
known to fail with 64&minus;bit versions of
<small>GCC</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>GDBM</small>
and Threads on HP-UX</b> <br>
If you attempt to compile Perl with ( <small>POSIX</small> )
threads on an 11.X system and also link in the
<small>GDBM</small> library, then Perl will immediately core
dump when it starts up. The only workaround at this point is
to relink the <small>GDBM</small> library under 11.X, then
relink it into Perl.</p>

<p style="margin-left:11%; margin-top: 1em">the error might
show something like:</p>

<p style="margin-left:11%; margin-top: 1em">Pthread
internal error: message: _<i>_libc_reinit()</i> failed,
file: ../pthreads/pthread.c, line: 1096 Return Pointer is
0xc082bf33 sh: 5345 Quit(coredump)</p>

<p style="margin-left:11%; margin-top: 1em">and Configure
will give up.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>NFS</small>
filesystems and</b> <i>utime</i><b>(2) on HP-UX</b> <br>
If you are compiling Perl on a remotely-mounted
<small>NFS</small> filesystem, the test io/fs.t may fail on
test #18. This appears to be a bug in HP-UX and no fix is
currently available.</p>

<p style="margin-left:11%; margin-top: 1em"><b>HP-UX Kernel
Parameters (maxdsiz) for Compiling Perl</b> <br>
By default, HP-UX comes configured with a maximum data
segment size of 64MB. This is too small to correctly compile
Perl with the maximum optimization levels. You can increase
the size of the maxdsiz kernel parameter through the use of
<small>SAM</small> .</p>

<p style="margin-left:11%; margin-top: 1em">When using the
<small>GUI</small> version of <small>SAM</small> , click on
the Kernel Configuration icon, then the Configurable
Parameters icon. Scroll down and select the maxdsiz line.
From the Actions menu, select the Modify Configurable
Parameter item. Insert the new formula into the
Formula/Value box. Then follow the instructions to rebuild
your kernel and reboot your system.</p>

<p style="margin-left:11%; margin-top: 1em">In general, a
value of 256MB (or &quot;256*1024*1024&quot;) is sufficient
for Perl to compile at maximum optimization.</p>

<h2>nss_delete core dump from op/pwent or op/grent
<a name="nss_delete core dump from op/pwent or op/grent"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">You may get a
bus error core dump from the op/pwent or op/grent tests. If
compiled with &minus;g you will see a stack trace much like
the following:</p>

<pre style="margin-left:11%; margin-top: 1em">  #0  0xc004216c in  () from /usr/lib/libc.2
  #1  0xc00d7550 in __nss_src_state_destr () from /usr/lib/libc.2
  #2  0xc00d7768 in __nss_src_state_destr () from /usr/lib/libc.2
  #3  0xc00d78a8 in nss_delete () from /usr/lib/libc.2
  #4  0xc01126d8 in endpwent () from /usr/lib/libc.2
  #5  0xd1950 in Perl_pp_epwent () from ./perl
  #6  0x94d3c in Perl_runops_standard () from ./perl
  #7  0x23728 in S_run_body () from ./perl
  #8  0x23428 in perl_run () from ./perl
  #9  0x2005c in main () from ./perl</pre>


<p style="margin-left:11%; margin-top: 1em">The key here is
the <tt>&quot;nss_delete&quot;</tt> call. One workaround for
this bug seems to be to create add to the file
<i>/etc/nsswitch.conf</i> (at least) the following lines</p>

<pre style="margin-left:11%; margin-top: 1em">  group: files
  passwd: files</pre>


<p style="margin-left:11%; margin-top: 1em">Whether you are
using <small>NIS</small> does not matter. Amazingly enough,
the same bug also affects Solaris.</p>

<h2>error: pasting &quot;)&quot; and &quot;l&quot; does not give a valid preprocessing token
<a name="error: pasting &quot;)&quot; and &quot;l&quot; does not give a valid preprocessing token"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There seems to
be a broken system header file in HP-UX 11.00 that breaks
perl building in 32bit mode with <small>GNU</small>
gcc&minus;4.x causing this error. The same file for HP-UX
11.11 (even though the file is older) does not show this
failure, and has the correct definition, so the best fix is
to patch the header to match:</p>

<pre style="margin-left:11%; margin-top: 1em"> &minus;&minus;&minus; /usr/include/inttypes.h  2001&minus;04&minus;20 18:42:14 +0200
 +++ /usr/include/inttypes.h  2000&minus;11&minus;14 09:00:00 +0200
 @@ &minus;72,7 +72,7 @@
  #define UINT32_C(__c)                   __CONCAT_U__(__c)
  #else /* __LP64 */
  #define INT32_C(__c)                    __CONCAT__(__c,l)
 &minus;#define UINT32_C(__c)                   __CONCAT__(__CONCAT_U__(__c),l)
 +#define UINT32_C(__c)                   __CONCAT__(__c,ul)
  #endif /* __LP64 */
  #define INT64_C(__c)                    __CONCAT_L__(__c,l)</pre>


<h2>Miscellaneous
<a name="Miscellaneous"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">HP-UX 11 Y2K
patch &quot;Y2K&minus;1100 B.11.00.B0125 HP-UX Core
<small>OS</small> Year 2000 Patch Bundle&quot; has been
reported to break the io/fs test #18 which tests whether
<i>utime()</i> can change timestamps. The Y2K patch seems to
break <i>utime()</i> so that over <small>NFS</small> the
timestamps do not get changed (on local filesystems
<i>utime()</i> still works). This has probably been fixed on
your system by now.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">H.Merijn Brand
&lt;h.m.brand@xs4all.nl&gt; Jeff Okamoto
&lt;okamoto@corp.hp.com&gt;</p>

<p style="margin-left:11%; margin-top: 1em">With much
assistance regarding shared libraries from Marc
Sabatella.</p>
<hr>
</body>
</html>
