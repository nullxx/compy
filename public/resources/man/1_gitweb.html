<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:58:07 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>GITWEB</title>

</head>
<body>

<h1 align="center">GITWEB</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#CONFIGURATION">CONFIGURATION</a><br>
<a href="#ACTIONS, AND URLS">ACTIONS, AND URLS</a><br>
<a href="#WEBSERVER CONFIGURATION">WEBSERVER CONFIGURATION</a><br>
<a href="#ADVANCED WEB SERVER SETUP">ADVANCED WEB SERVER SETUP</a><br>
<a href="#BUGS">BUGS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#GIT">GIT</a><br>
<a href="#NOTES">NOTES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">gitweb &minus;
Git web interface (web frontend to Git repositories)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">To get started
with gitweb, run <b>git-instaweb</b>(1) from a Git
repository. This would configure and start your web server,
and run web browser pointing to gitweb.</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Gitweb provides
a web interface to Git repositories. Its features
include:</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Viewing
multiple Git repositories with common root.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Browsing
every revision of the repository.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Viewing
the contents of files in the repository at any revision.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Viewing
the revision log of branches, history of files and
directories, see what was changed when, by who.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Viewing
the blame/annotation details of any file (if enabled).</p>

<p style="margin-left:17%; margin-top: 1em">&bull;
Generating RSS and Atom feeds of commits, for any branch.
The feeds are auto&minus;discoverable in modern web
browsers.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Viewing
everything that was changed in a revision, and step through
revisions one at a time, viewing the history of the
repository.</p>

<p style="margin-left:17%; margin-top: 1em">&bull; Finding
commits which commit messages matches given search term.</p>

<p style="margin-left:11%; margin-top: 1em">See
<b><font color="#0000FF">http://git.kernel.org/?p=git/git.git;a=tree;f=gitweb</font></b>
<font color="#000000">or</font>
<b><font color="#0000FF">http://repo.or.cz/w/git.git/tree/HEAD:/gitweb/</font></b>
<font color="#000000">for gitweb source code, browsed using
gitweb itself.</font></p>

<h2>CONFIGURATION
<a name="CONFIGURATION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Various
aspects of gitweb&rsquo;s behavior can be controlled through
the configuration file <i>gitweb_config.perl</i> or
<i>/etc/gitweb.conf</i>. See the <b>gitweb.conf</b>(5) for
details.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Repositories</b>
<br>
Gitweb can show information from one or more Git
repositories. These repositories have to be all on local
filesystem, and have to share common repository root, i.e.
be all under a single parent repository (but see also
&quot;Advanced web server setup&quot; section,
&quot;Webserver configuration with multiple projects'
root&quot; subsection).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">our
$projectroot = '/path/to/parent/directory';</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
default value for $projectroot is <i>/pub/git</i>. You can
change it during building gitweb via GITWEB_PROJECTROOT
build configuration variable.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">By
default all Git repositories under $projectroot are visible
and available to gitweb. The list of projects is generated
by default by scanning the $projectroot directory for Git
repositories (for object databases to be more exact; gitweb
is not interested in a working area, and is best suited to
showing &quot;bare&quot; repositories).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
name of the repository in gitweb is the path to its $GIT_DIR
(its object database) relative to $projectroot. Therefore
the repository $repo can be found at
&quot;$projectroot/$repo&quot;.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Projects
list file format</b> <br>
Instead of having gitweb find repositories by scanning
filesystem starting from $projectroot, you can provide a
pre&minus;generated list of visible projects by setting
$projects_list to point to a plain text file with a list of
projects (with some additional info).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
file uses the following format:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
One record (for project / repository) per line; does not
support line continuation (newline escaping).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Leading and trailing whitespace are ignored.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Whitespace separated fields; any run of whitespace can be
used as field separator (rules for Perl&rsquo;s
&quot;split(&quot; &quot;, $line)&quot;).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Fields use modified URI encoding, defined in RFC 3986,
section 2.1 (Percent&minus;Encoding), or rather &quot;Query
string encoding&quot; (see</font>
<b><font color="#0000FF">http://en.wikipedia.org/wiki/Query_string#URL_encoding</font></b><font color="#000000">),
the difference being that SP (&quot; &quot;) can be encoded
as &quot;+&quot; (and therefore &quot;+&quot; has to be also
percent&minus;encoded).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Reserved
characters are: &quot;%&quot; (used for encoding),
&quot;+&quot; (can be used to encode SPACE), all whitespace
characters as defined in Perl, including SP, TAB and LF,
(used to separate fields in a record).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Currently recognized fields are:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;repository
path&gt;</font></p>

<p style="margin-left:23%;"><font color="#000000">path to
repository GIT_DIR, relative to $projectroot</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;repository
owner&gt;</font></p>


<p style="margin-left:23%;"><font color="#000000">displayed
as repository owner, preferably full name, or email, or
both</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">You
can generate the projects list index file using the
project_index action (the <i>TXT</i> link on projects list
page) directly from gitweb; see also &quot;Generating
projects list using gitweb&quot; section below.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Example
contents:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">foo.git
Joe+R+Hacker+&lt;joe@example.com&gt; <br>
foo/bar.git O+W+Ner+&lt;owner@example.org&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">By
default this file controls only which projects are
<b>visible</b> on projects list page (note that entries that
do not point to correctly recognized Git repositories
won&rsquo;t be displayed by gitweb). Even if a project is
not visible on projects list page, you can view it
nevertheless by hand&minus;crafting a gitweb URL. By setting
$strict_export configuration variable (see
<b>gitweb.conf</b>(5)) to true value you can allow viewing
only of repositories also shown on the overview page (i.e.
only projects explicitly listed in projects list file will
be accessible).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Generating
projects list using gitweb</b> <br>
We assume that GITWEB_CONFIG has its default Makefile value,
namely <i>gitweb_config.perl</i>. Put the following in
<i>gitweb_make_index.perl</i> file:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">read_config_file(&quot;gitweb_config.perl&quot;);
<br>
$projects_list = $projectroot;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Then
create the following script to get list of project in the
format suitable for GITWEB_LIST build configuration variable
(or $projects_list variable in gitweb config):</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#!/bin/sh</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">export
GITWEB_CONFIG=&quot;gitweb_make_index.perl&quot; <br>
export GATEWAY_INTERFACE=&quot;CGI/1.1&quot; <br>
export HTTP_ACCEPT=&quot;*/*&quot; <br>
export REQUEST_METHOD=&quot;GET&quot; <br>
export QUERY_STRING=&quot;a=project_index&quot;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">perl
&minus;&minus; /var/www/cgi&minus;bin/gitweb.cgi</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Run
this script and save its output to a file. This file could
then be used as projects list file, which means that you can
set $projects_list to its filename.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Controlling
access to Git repositories</b> <br>
By default all Git repositories under $projectroot are
visible and available to gitweb. You can however configure
how gitweb controls access to repositories.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
As described in &quot;Projects list file format&quot;
section, you can control which projects are <b>visible</b>
by selectively including repositories in projects list file,
and setting $projects_list gitweb configuration variable to
point to it. With $strict_export set, projects list file can
be used to control which repositories are <b>available</b>
as well.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
You can configure gitweb to only list and allow viewing of
the explicitly exported repositories, via $export_ok
variable in gitweb config file; see <b>gitweb.conf</b>(5)
manpage. If it evaluates to true, gitweb shows repositories
only if this file named by $export_ok exists in its object
database (if directory has the magic file named
$export_ok).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
example <b>git-daemon</b>(1) by default (unless
&minus;&minus;export&minus;all option is used) allows
pulling only for those repositories that have
<i>git&minus;daemon&minus;export&minus;ok</i> file.
Adding</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">our
$export_ok =
&quot;git&minus;daemon&minus;export&minus;ok&quot;;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">makes
gitweb show and allow access only to those repositories that
can be fetched from via git:// protocol.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&bull;
Finally, it is possible to specify an arbitrary perl
subroutine that will be called for each repository to
determine if it can be exported. The subroutine receives an
absolute path to the project (repository) as its only
parameter (i.e.
&quot;$projectroot/$project&quot;).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">For
example, if you use mod_perl to run the script, and have
dumb HTTP protocol authentication configured for your
repositories, you can use the following hook to allow access
only if the user is authorized to read the files:</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">$export_auth_hook
= sub { <br>
use Apache2::SubRequest (); <br>
use Apache2::Const &minus;compile =&gt; qw(HTTP_OK); <br>
my $path = &quot;$_[0]/HEAD&quot;; <br>
my $r = Apache2::RequestUtil&minus;&gt;request; <br>
my $sub = $r&minus;&gt;lookup_file($path); <br>
return $sub&minus;&gt;filename eq $path <br>
&amp;&amp; $sub&minus;&gt;status == Apache2::Const::HTTP_OK;
<br>
};</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Per&minus;repository
gitweb configuration</b> <br>
You can configure individual repositories shown in gitweb by
creating file in the <i>GIT_DIR</i> of Git repository, or by
setting some repo configuration variable (in
<i>GIT_DIR/config</i>, see <b>git-config</b>(1)).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">You
can use the following files in repository:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">README.html</font></p>

<p style="margin-left:17%;"><font color="#000000">A html
file (HTML fragment) which is included on the gitweb project
&quot;summary&quot; page inside &lt;div&gt; block element.
You can use it for longer description of a project, to
provide links (for example to project&rsquo;s homepage),
etc. This is recognized only if XSS prevention is off
($prevent_xss is false, see <b>gitweb.conf</b>(5)); a way to
include a README safely when XSS prevention is on may be
worked out in the future.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">description
(or gitweb.description)</font></p>

<p style="margin-left:17%;"><font color="#000000">Short
(shortened to $projects_list_description_width in the
projects list page, which is 25 characters by default; see
<b>gitweb.conf</b>(5)) single line description of a project
(of a repository). Plain text file; HTML will be escaped. By
default set to</font></p>


<p style="margin-left:23%; margin-top: 1em"><font color="#000000">Unnamed
repository; edit this file to name it for gitweb.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">from
the template during repository creation, usually installed
in <i>/usr/share/git&minus;core/templates/</i>. You can use
the gitweb.description repo configuration variable, but the
file takes precedence.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">category
(or gitweb.category)</font></p>

<p style="margin-left:17%;"><font color="#000000">Singe
line category of a project, used to group projects if
$projects_list_group_categories is enabled. By default (file
and configuration variable absent), uncategorized projects
are put in the $project_list_default_category category. You
can use the gitweb.category repo configuration variable, but
the file takes precedence.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
configuration variables $projects_list_group_categories and
$project_list_default_category are described in
<b>gitweb.conf</b>(5)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">cloneurl
(or multiple&minus;valued gitweb.url)</font></p>

<p style="margin-left:17%;"><font color="#000000">File with
repository URL (used for clone and fetch), one per line.
Displayed in the project summary page. You can use
multiple&minus;valued gitweb.url repository configuration
variable for that, but the file takes precedence.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
is per&minus;repository enhancement / version of global
prefix&minus;based @git_base_url_list gitweb configuration
variable (see <b>gitweb.conf</b>(5)).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">gitweb.owner</font></p>

<p style="margin-left:17%;"><font color="#000000">You can
use the gitweb.owner repository configuration variable to
set repository&rsquo;s owner. It is displayed in the project
list and summary page.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">If
it&rsquo;s not set, filesystem directory&rsquo;s owner is
used (via GECOS field, i.e. real name field from
<b>getpwuid</b>(3)) if $projects_list is unset (gitweb scans
$projectroot for repositories); if $projects_list points to
file with list of repositories, then project owner defaults
to value from this file for given repository.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">various
gitweb.* config variables (in config)</font></p>

<p style="margin-left:17%;"><font color="#000000">Read
description of %feature hash for detailed list, and
descriptions. See also &quot;Configuring gitweb
features&quot; section in <b>gitweb.conf</b>(5)</font></p>

<h2>ACTIONS, AND URLS
<a name="ACTIONS, AND URLS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Gitweb
can use path_info (component) based URLs, or it can pass all
necessary information via query parameters. The typical
gitweb URLs are broken down in to five
components:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision&gt;:/&lt;path&gt;?&lt;arguments&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">repo</font></p>

<p style="margin-left:17%;"><font color="#000000">The
repository the action will be performed on.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">All
actions except for those that list all available projects,
in whatever form, require this parameter.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">action</font></p>

<p style="margin-left:17%;"><font color="#000000">The
action that will be run. Defaults to <i>projects_list</i> if
repo is not set, and to <i>summary</i> otherwise.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">revision</font></p>

<p style="margin-left:17%;"><font color="#000000">Revision
shown. Defaults to HEAD.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">path</font></p>

<p style="margin-left:17%;"><font color="#000000">The path
within the &lt;repository&gt; that the action is performed
on, for those actions that require it.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">arguments</font></p>

<p style="margin-left:17%;"><font color="#000000">Any
arguments that control the behaviour of the
action.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Some
actions require or allow to specify two revisions, and
sometimes even two pathnames. In most general form such
path_info (component) based gitweb URL looks like
this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">.../gitweb.cgi/&lt;repo&gt;/&lt;action&gt;/&lt;revision_from&gt;:/&lt;path_from&gt;..&lt;revision_to&gt;:/&lt;path_to&gt;?&lt;arguments&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Each
action is implemented as a subroutine, and must be present
in %actions hash. Some actions are disabled by default, and
must be turned on via feature mechanism. For example to
enable <i>blame</i> view add the following to gitweb
configuration file:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">$feature{'blame'}{'default'}
= [1];</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Actions:</b>
<br>
The standard actions are:</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">project_list</font></p>

<p style="margin-left:17%;"><font color="#000000">Lists the
available Git repositories. This is the default command if
no repository is specified in the URL.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">summary</font></p>

<p style="margin-left:17%;"><font color="#000000">Displays
summary about given repository. This is the default command
if no action is specified in URL, and only repository is
specified.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">heads,
remotes</font></p>

<p style="margin-left:17%;"><font color="#000000">Lists all
local or all remote&minus;tracking branches in given
repository.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
latter is not available by default, unless
configured.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">tags</font></p>

<p style="margin-left:17%;"><font color="#000000">List all
tags (lightweight and annotated) in given
repository.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">blob,
tree</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows the
files and directories in a given repository path, at given
revision. This is default command if no action is specified
in the URL, and path is given.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">blob_plain</font></p>

<p style="margin-left:17%;"><font color="#000000">Returns
the raw data for the file in given repository, at given path
and revision. Links to this action are marked
<i>raw</i>.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">blobdiff</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows the
difference between two revisions of the same
file.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">blame,
blame_incremental</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows the
blame (also called annotation) information for a file. On a
per line basis it shows the revision in which that line was
last changed and the user that committed the change. The
incremental version (which if configured is used
automatically when JavaScript is enabled) uses Ajax to
incrementally add blame info to the contents of given
file.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
action is disabled by default for performance
reasons.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">commit,
commitdiff</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows
information about a specific commit in a repository. The
<i>commit</i> view shows information about commit in more
detail, the <i>commitdiff</i> action shows changeset for
given commit.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">patch</font></p>

<p style="margin-left:17%;"><font color="#000000">Returns
the commit in plain text mail format, suitable for applying
with <b>git-am</b>(1).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">tag</font></p>

<p style="margin-left:17%;"><font color="#000000">Display
specific annotated tag (tag object).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">log,
shortlog</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows log
information (commit message or just commit subject) for a
given branch (starting from given revision).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">The
<i>shortlog</i> view is more compact; it shows one commit
per line.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">history</font></p>

<p style="margin-left:17%;"><font color="#000000">Shows
history of the file or directory in a given repository path,
starting from given revision (defaults to HEAD, i.e. default
branch).</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">This
view is similar to <i>shortlog</i> view.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">rss,
atom</font></p>


<p style="margin-left:17%;"><font color="#000000">Generates
an RSS (or Atom) feed of changes to repository.</font></p>

<h2>WEBSERVER CONFIGURATION
<a name="WEBSERVER CONFIGURATION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
section explains how to configure some common webservers to
run gitweb. In all cases, /path/to/gitweb in the examples is
the directory you ran installed gitweb in, and contains
gitweb_config.perl.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
you&rsquo;ve configured a web server that isn&rsquo;t listed
here for gitweb, please send in the instructions so they can
be included in a future release.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Apache
as CGI</b> <br>
Apache must be configured to support CGI scripts in the
directory in which gitweb is installed. Let&rsquo;s assume
that it is <i>/var/www/cgi&minus;bin</i>
directory.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">ScriptAlias
/cgi&minus;bin/
&quot;/var/www/cgi&minus;bin/&quot;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;Directory
&quot;/var/www/cgi&minus;bin&quot;&gt; <br>
Options Indexes FollowSymlinks ExecCGI <br>
AllowOverride None <br>
Order allow,deny <br>
Allow from all <br>
&lt;/Directory&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">With
that configuration the full path to browse repositories
would be:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://server/cgi&minus;bin/gitweb.cgi</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Apache
with mod_perl, via ModPerl::Registry</b> <br>
You can use mod_perl with gitweb. You must install
Apache::Registry (for mod_perl 1.x) or ModPerl::Registry
(for mod_perl 2.x) to enable this support.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Assuming
that gitweb is installed to <i>/var/www/perl</i>, the
following Apache configuration (for mod_perl 2.x) is
suitable.</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Alias
/perl &quot;/var/www/perl&quot;</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;Directory
&quot;/var/www/perl&quot;&gt; <br>
SetHandler perl&minus;script <br>
PerlResponseHandler ModPerl::Registry <br>
PerlOptions +ParseHeaders <br>
Options Indexes FollowSymlinks +ExecCGI <br>
AllowOverride None <br>
Order allow,deny <br>
Allow from all <br>
&lt;/Directory&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">With
that configuration the full path to browse repositories
would be:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://server/perl/gitweb.cgi</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Apache
with FastCGI</b> <br>
Gitweb works with Apache and FastCGI. First you need to
rename, copy or symlink gitweb.cgi to gitweb.fcgi.
Let&rsquo;s assume that gitweb is installed in
<i>/usr/share/gitweb</i> directory. The following Apache
configuration is suitable (UNTESTED!)</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">FastCgiServer
/usr/share/gitweb/gitweb.cgi <br>
ScriptAlias /gitweb /usr/share/gitweb/gitweb.cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">Alias
/gitweb/static /usr/share/gitweb/static <br>
&lt;Directory /usr/share/gitweb/static&gt; <br>
SetHandler default&minus;handler <br>
&lt;/Directory&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">With
that configuration the full path to browse repositories
would be:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://server/gitweb</font></p>

<h2>ADVANCED WEB SERVER SETUP
<a name="ADVANCED WEB SERVER SETUP"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">All
of those examples use request rewriting, and need
mod_rewrite (or equivalent; examples below are written for
Apache).</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Single
URL for gitweb and for fetching</b> <br>
If you want to have one URL for both gitweb and your http://
repositories, you can configure Apache like this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;VirtualHost
*:80&gt; <br>
ServerName git.example.org <br>
DocumentRoot /pub/git <br>
SetEnv GITWEB_CONFIG /etc/gitweb.conf</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
turning on mod rewrite <br>
RewriteEngine on</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
make the front page an internal rewrite to the gitweb script
<br>
RewriteRule ^/$ /cgi&minus;bin/gitweb.cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
make access for &quot;dumb clients&quot; work <br>
RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
<br>
/cgi&minus;bin/gitweb.cgi%{REQUEST_URI} [L,PT] <br>
&lt;/VirtualHost&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
above configuration expects your public repositories to live
under <i>/pub/git</i> and will serve them as
http://git.domain.org/dir&minus;under&minus;pub&minus;git,
both as cloneable Git URL and as browseable gitweb
interface. If you then start your <b>git-daemon</b>(1) with
&minus;&minus;base&minus;path=/pub/git
&minus;&minus;export&minus;all then you can even use the
git:// URL with exactly the same path.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Setting
the environment variable GITWEB_CONFIG will tell gitweb to
use the named file (i.e. in this example
<i>/etc/gitweb.conf</i>) as a configuration for gitweb. You
don&rsquo;t really need it in above example; it is required
only if your configuration file is in different place than
built&minus;in (during compiling gitweb)
<i>gitweb_config.perl</i> or <i>/etc/gitweb.conf</i>. See
<b>gitweb.conf</b>(5) for details, especially information
about precedence rules.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
you use the rewrite rules from the example you <b>might</b>
also need something like the following in your gitweb
configuration file (<i>/etc/gitweb.conf</i> following
example):</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">@stylesheets
= (&quot;/some/absolute/path/gitweb.css&quot;); <br>
$my_uri = &quot;/&quot;; <br>
$home_link = &quot;/&quot;; <br>
$per_request_config = 1;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Nowadays
though gitweb should create HTML base tag when needed (to
set base URI for relative links), so it should work
automatically.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Webserver
configuration with multiple projects' root</b> <br>
If you want to use gitweb with several project roots you can
edit your Apache virtual host and gitweb configuration files
in the following way.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
virtual host configuration (in Apache configuration file)
should look like this:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;VirtualHost
*:80&gt; <br>
ServerName git.example.org <br>
DocumentRoot /pub/git <br>
SetEnv GITWEB_CONFIG /etc/gitweb.conf</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
turning on mod rewrite <br>
RewriteEngine on</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
make the front page an internal rewrite to the gitweb script
<br>
RewriteRule ^/$ /cgi&minus;bin/gitweb.cgi
[QSA,L,PT]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
look for a public_git folder in unix users' home <br>
# http://git.example.org/~&lt;user&gt;/ <br>
RewriteRule ^/\~([^\/]+)(/|/gitweb.cgi)?$
/cgi&minus;bin/gitweb.cgi \ <br>

[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
http://git.example.org/+&lt;user&gt;/ <br>
#RewriteRule ^/\+([^\/]+)(/|/gitweb.cgi)?$
/cgi&minus;bin/gitweb.cgi \ <br>

[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
http://git.example.org/user/&lt;user&gt;/ <br>
#RewriteRule ^/user/([^\/]+)/(gitweb.cgi)?$
/cgi&minus;bin/gitweb.cgi \ <br>

[QSA,E=GITWEB_PROJECTROOT:/home/$1/public_git/,L,PT]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
defined list of project roots <br>
RewriteRule ^/scm(/|/gitweb.cgi)?$ /cgi&minus;bin/gitweb.cgi
\ <br>
[QSA,E=GITWEB_PROJECTROOT:/pub/scm/,L,PT] <br>
RewriteRule ^/var(/|/gitweb.cgi)?$ /cgi&minus;bin/gitweb.cgi
\ <br>
[QSA,E=GITWEB_PROJECTROOT:/var/git/,L,PT]</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">#
make access for &quot;dumb clients&quot; work <br>
RewriteRule ^/(.*\.git/(?!/?(HEAD|info|objects|refs)).*)?$ \
<br>
/cgi&minus;bin/gitweb.cgi%{REQUEST_URI} [L,PT] <br>
&lt;/VirtualHost&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Here
actual project root is passed to gitweb via
GITWEB_PROJECT_ROOT environment variable from a web server,
so you need to put the following line in gitweb
configuration file (<i>/etc/gitweb.conf</i> in above
example):</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">$projectroot
= $ENV{'GITWEB_PROJECTROOT'} ||
&quot;/pub/git&quot;;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Note</b>
that this requires to be set for each request, so either
$per_request_config must be false, or the above must be put
in code referenced by $per_request_config;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">These
configurations enable two things. First, each unix user
(&lt;user&gt;) of the server will be able to browse through
gitweb Git repositories found in <i>~/public_git/</i> with
the following url:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://git.example.org/~&lt;user&gt;/</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
you do not want this feature on your server just remove the
second rewrite rule.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">If
you already use &lsquo;mod_userdir&lsquo; in your virtual
host or you don&rsquo;t want to use the '~&rsquo; as first
character, just comment or remove the second rewrite rule,
and uncomment one of the following according to what you
want.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Second,
repositories found in <i>/pub/scm/</i> and <i>/var/git/</i>
will be accessible through http://git.example.org/scm/ and
http://git.example.org/var/. You can add as many project
roots as you want by adding rewrite rules like the third and
the fourth.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>PATH_INFO
usage</b> <br>
If you enable PATH_INFO usage in gitweb by
putting</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">$feature{'pathinfo'}{'default'}
= [1];</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">in
your gitweb configuration file, it is possible to set up
your server so that it consumes and produces URLs in the
form</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://git.example.com/project.git/shortlog/sometag</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">i.e.
without <i>gitweb.cgi</i> part, by using a configuration
such as the following. This configuration assumes that
<i>/var/www/gitweb</i> is the DocumentRoot of your
webserver, contains the gitweb.cgi script and complementary
static files (stylesheet, favicon, JavaScript):</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;VirtualHost
*:80&gt; <br>
ServerAlias git.example.com</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DocumentRoot
/var/www/gitweb</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;Directory
/var/www/gitweb&gt; <br>
Options ExecCGI <br>
AddHandler cgi&minus;script cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DirectoryIndex
gitweb.cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">RewriteEngine
On <br>
RewriteCond %{REQUEST_FILENAME} !&minus;f <br>
RewriteCond %{REQUEST_FILENAME} !&minus;d <br>
RewriteRule ^.* /gitweb.cgi/$0 [L,PT] <br>
&lt;/Directory&gt; <br>
&lt;/VirtualHost&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
rewrite rule guarantees that existing static files will be
properly served, whereas any other URL will be passed to
gitweb as PATH_INFO parameter.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>Notice</b>
that in this case you don&rsquo;t need special settings for
@stylesheets, $my_uri and $home_link, but you lose
&quot;dumb client&quot; access to your project .git dirs
(described in &quot;Single URL for gitweb and for
fetching&quot; section). A possible workaround for the
latter is the following: in your project root dir (e.g.
<i>/pub/git</i>) have the projects named <b>without</b> a
.git extension (e.g. <i>/pub/git/project</i> instead of
<i>/pub/git/project.git</i>) and configure Apache as
follows:</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">&lt;VirtualHost
*:80&gt; <br>
ServerAlias git.example.com</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DocumentRoot
/var/www/gitweb</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">AliasMatch
^(/.*?)(\.git)(/.*)?$ /pub/git$1$3 <br>
&lt;Directory /var/www/gitweb&gt; <br>
Options ExecCGI <br>
AddHandler cgi&minus;script cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">DirectoryIndex
gitweb.cgi</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">RewriteEngine
On <br>
RewriteCond %{REQUEST_FILENAME} !&minus;f <br>
RewriteCond %{REQUEST_FILENAME} !&minus;d <br>
RewriteRule ^.* /gitweb.cgi/$0 [L,PT] <br>
&lt;/Directory&gt; <br>
&lt;/VirtualHost&gt;</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">The
additional AliasMatch makes it so that</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://git.example.com/project.git</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">will
give raw access to the project&rsquo;s Git dir (so that the
project can be cloned), while</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://git.example.com/project</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">will
provide human&minus;friendly gitweb access.</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">This
solution is not 100% bulletproof, in the sense that if some
project has a named ref (branch, tag) starting with
<i>git/</i>, then paths such as</font></p>


<p style="margin-left:17%; margin-top: 1em"><font color="#000000">http://git.example.com/project/command/abranch..git/abranch</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000">will
fail with a 404 error.</font></p>

<h2>BUGS
<a name="BUGS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Please
report any bugs or feature requests to</font>
<b><font color="#0000FF">git@vger.kernel.org</font></b>
<small><font color="#000000">[1]</font></small>
<font color="#000000">, putting &quot;gitweb&quot; in the
subject of email.</font></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><b>gitweb.conf</b>(5),
<b>git-instaweb</b>(1)</font></p>


<p style="margin-left:11%; margin-top: 1em"><font color="#000000"><i>gitweb/README</i>,
<i>gitweb/INSTALL</i></font></p>

<h2>GIT
<a name="GIT"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><font color="#000000">Part
of the <b>git</b>(1) suite</font></p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="12%"></td>
<td width="3%">



<p style="margin-top: 1em"><font color="#000000">1.</font></p> </td>
<td width="2%"></td>
<td width="29%">



<p style="margin-top: 1em"><font color="#000000">git@vger.kernel.org</font></p> </td>
<td width="54%">
</td></tr>
</table>


<p style="margin-left:17%;"><font color="#000000">mailto:git@vger.kernel.org</font></p>
<hr>
</body>
</html>
