<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:01:13 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>WAIT</title>

</head>
<body>

<h1 align="center">WAIT</h1>

<a href="#PROLOG">PROLOG</a><br>
<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#OPERANDS">OPERANDS</a><br>
<a href="#STDIN">STDIN</a><br>
<a href="#INPUT FILES">INPUT FILES</a><br>
<a href="#ENVIRONMENT VARIABLES">ENVIRONMENT VARIABLES</a><br>
<a href="#ASYNCHRONOUS EVENTS">ASYNCHRONOUS EVENTS</a><br>
<a href="#STDOUT">STDOUT</a><br>
<a href="#STDERR">STDERR</a><br>
<a href="#OUTPUT FILES">OUTPUT FILES</a><br>
<a href="#EXTENDED DESCRIPTION">EXTENDED DESCRIPTION</a><br>
<a href="#EXIT STATUS">EXIT STATUS</a><br>
<a href="#CONSEQUENCES OF ERRORS">CONSEQUENCES OF ERRORS</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#EXAMPLES">EXAMPLES</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>PROLOG
<a name="PROLOG"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This manual
page is part of the POSIX Programmer&rsquo;s Manual. The
Linux implementation of this interface may differ (consult
the corresponding Linux manual page for details of Linux
behavior), or the interface may not be implemented on
Linux.</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">wait &minus;
await process completion</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>wait
[</b><i>pid</i><b>...]</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">When an
asynchronous list (see <i>Asynchronous Lists</i> ) is
started by the shell, the process ID of the last command in
each element of the asynchronous list shall become known in
the current shell execution environment; see <i>Shell
Execution Environment</i> .</p>

<p style="margin-left:11%; margin-top: 1em">If the
<i>wait</i> utility is invoked with no operands, it shall
wait until all process IDs known to the invoking shell have
terminated and exit with a zero exit status.</p>

<p style="margin-left:11%; margin-top: 1em">If one or more
<i>pid</i> operands are specified that represent known
process IDs, the <i>wait</i> utility shall wait until all of
them have terminated. If one or more <i>pid</i> operands are
specified that represent unknown process IDs, <i>wait</i>
shall treat them as if they were known process IDs that
exited with exit status 127. The exit status returned by the
<i>wait</i> utility shall be the exit status of the process
requested by the last <i>pid</i> operand.</p>

<p style="margin-left:11%; margin-top: 1em">The known
process IDs are applicable only for invocations of
<i>wait</i> in the current shell execution environment.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>OPERANDS
<a name="OPERANDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
operand shall be supported:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><i>pid</i></p></td>
<td width="7%"></td>
<td width="32%">


<p>One of the following:</p></td>
<td width="46%">
</td></tr>
</table>

<p style="margin-left:22%;">1.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="23%"></td>
<td width="3%"></td>
<td width="2%"></td>
<td width="72%">


<p style="margin-top: 1em">The unsigned decimal integer
process ID of a command, for which the utility is to wait
for the termination.</p></td></tr>
<tr valign="top" align="left">
<td width="23%"></td>
<td width="3%">


<p>2.</p></td>
<td width="2%"></td>
<td width="72%">


<p>A job control job ID (see the Base Definitions volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, Section 3.203, Job Control
Job ID) that identifies a background process group to be
waited for. The job control job ID notation is applicable
only for invocations of <i>wait</i> in the current shell
execution environment; see <i>Shell Execution
Environment</i> . The exit status of <i>wait</i> shall be
determined by the last command in the pipeline.</p></td></tr>
</table>


<p style="margin-left:22%; margin-top: 1em"><b>Note:</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="68%">


<p style="margin-top: 1em">The job control job ID type of
<i>pid</i> is only available on systems supporting the User
Portability Utilities option.</p></td></tr>
</table>

<h2>STDIN
<a name="STDIN"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Not used.</p>

<h2>INPUT FILES
<a name="INPUT FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>ENVIRONMENT VARIABLES
<a name="ENVIRONMENT VARIABLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
environment variables shall affect the execution of
<i>wait</i>:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><i>LANG</i></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Provide a default value for the
internationalization variables that are unset or null. (See
the Base Definitions volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, Section 8.2,
Internationalization Variables for the precedence of
internationalization variables used to determine the values
of locale categories.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><i>LC_ALL</i></p></td>
<td width="2%"></td>
<td width="78%">


<p>If set to a non-empty string value, override the values
of all the other internationalization variables.</p></td></tr>
</table>

<p style="margin-left:11%;"><i>LC_CTYPE</i></p>

<p style="margin-left:22%;">Determine the locale for the
interpretation of sequences of bytes of text data as
characters (for example, single-byte as opposed to
multi-byte characters in arguments).</p>

<p style="margin-left:11%;"><i>LC_MESSAGES</i></p>

<p style="margin-left:22%;">Determine the locale that
should be used to affect the format and contents of
diagnostic messages written to standard error.</p>

<p style="margin-left:11%;"><i>NLSPATH</i></p>

<p style="margin-left:22%;">Determine the location of
message catalogs for the processing of <i>LC_MESSAGES
.</i></p>

<h2>ASYNCHRONOUS EVENTS
<a name="ASYNCHRONOUS EVENTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Default.</p>

<h2>STDOUT
<a name="STDOUT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Not used.</p>

<h2>STDERR
<a name="STDERR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The standard
error shall be used only for diagnostic messages.</p>

<h2>OUTPUT FILES
<a name="OUTPUT FILES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>EXTENDED DESCRIPTION
<a name="EXTENDED DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>EXIT STATUS
<a name="EXIT STATUS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If one or more
operands were specified, all of them have terminated or were
not known by the invoking shell, and the status of the last
operand specified is known, then the exit status of
<i>wait</i> shall be the exit status information of the
command indicated by the last operand specified. If the
process terminated abnormally due to the receipt of a
signal, the exit status shall be greater than 128 and shall
be distinct from the exit status generated by other signals,
but the exact value is unspecified. (See the <i>kill</i>
<b>-l</b> option.) Otherwise, the <i>wait</i> utility shall
exit with one of the following values:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&nbsp;&nbsp;&nbsp;&nbsp; 0</p></td>
<td width="4%"></td>
<td width="78%">


<p>The <i>wait</i> utility was invoked with no operands and
all process IDs known by the invoking shell have
terminated.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>1-126</p></td>
<td width="4%"></td>
<td width="78%">


<p>The <i>wait</i> utility detected an error.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&nbsp;&nbsp; 127</p></td>
<td width="4%"></td>
<td width="78%">


<p>The command identified by the last <i>pid</i> operand
specified is unknown.</p></td></tr>
</table>

<h2>CONSEQUENCES OF ERRORS
<a name="CONSEQUENCES OF ERRORS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Default.</p>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">On most
implementations, <i>wait</i> is a shell built-in. If it is
called in a subshell or separate utility execution
environment, such as one of the following:</p>

<p style="margin-left:22%; margin-top: 1em"><b>(wait) <br>
nohup wait ... <br>
find . -exec wait ... \;</b></p>

<p style="margin-left:11%; margin-top: 1em">it returns
immediately because there are no known process IDs to wait
for in those environments.</p>

<p style="margin-left:11%; margin-top: 1em">Historical
implementations of interactive shells have discarded the
exit status of terminated background processes before each
shell prompt. Therefore, the status of background processes
was usually lost unless it terminated while <i>wait</i> was
waiting for it. This could be a serious problem when a job
that was expected to run for a long time actually terminated
quickly with a syntax or initialization error because the
exit status returned was usually zero if the requested
process ID was not found. This volume of
IEEE&nbsp;Std&nbsp;1003.1-2001 requires the implementation
to keep the status of terminated jobs available until the
status is requested, so that scripts like:</p>

<p style="margin-left:22%; margin-top: 1em"><b>j1&amp; <br>
p1=$! <br>
j2&amp; <br>
wait $p1 <br>
echo Job 1 exited with status $? <br>
wait $! <br>
echo Job 2 exited with status $?</b></p>

<p style="margin-left:11%; margin-top: 1em">work without
losing status on any of the jobs. The shell is allowed to
discard the status of any process if it determines that the
application cannot get the process ID for that process from
the shell. It is also required to remember only {CHILD_MAX}
number of processes in this way. Since the only way to get
the process ID from the shell is by using the
<b>&rsquo;!&rsquo;</b> shell parameter, the shell is allowed
to discard the status of an asynchronous list if
<b>&quot;$!&quot;</b> was not referenced before another
asynchronous list was started. (This means that the shell
only has to keep the status of the last asynchronous list
started if the application did not reference
<b>&quot;$!&quot;</b> . If the implementation of the shell
is smart enough to determine that a reference to
<b>&quot;$!&quot;</b> was not saved anywhere that the
application can retrieve it later, it can use this
information to trim the list of saved information. Note also
that a successful call to <i>wait</i> with no operands
discards the exit status of all asynchronous lists.)</p>

<p style="margin-left:11%; margin-top: 1em">If the exit
status of <i>wait</i> is greater than 128, there is no way
for the application to know if the waited-for process exited
with that value or was killed by a signal. Since most
utilities exit with small values, there is seldom any
ambiguity. Even in the ambiguous cases, most applications
just need to know that the asynchronous job failed; it does
not matter whether it detected an error and failed or was
killed and did not complete its job normally.</p>

<h2>EXAMPLES
<a name="EXAMPLES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Although the
exact value used when a process is terminated by a signal is
unspecified, if it is known that a signal terminated a
process, a script can still reliably determine which signal
by using <i>kill</i> as shown by the following script:</p>

<p style="margin-left:22%; margin-top: 1em"><b>sleep
1000&amp; <br>
pid=$! <br>
kill -kill $pid <br>
wait $pid <br>
echo $pid was terminated by a SIG$(kill -l $?)
signal.</b></p>

<p style="margin-left:11%; margin-top: 1em">If the
following sequence of commands is run in less than 31
seconds:</p>

<p style="margin-left:22%; margin-top: 1em"><b>sleep 257 |
sleep 31 &amp; <br>
jobs -l %%</b></p>

<p style="margin-left:11%; margin-top: 1em">either of the
following commands returns the exit status of the second
<i>sleep</i> in the pipeline:</p>

<p style="margin-left:22%; margin-top: 1em"><b>wait</b>
<i>&lt;pid of sleep 31&gt;</i><b>wait %%</b></p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The description
of <i>wait</i> does not refer to the <i>waitpid</i>()
function from the System Interfaces volume of
IEEE&nbsp;Std&nbsp;1003.1-2001 because that would needlessly
overspecify this interface. However, the wording means that
<i>wait</i> is required to wait for an explicit process when
it is given an argument so that the status information of
other processes is not consumed. Historical implementations
use the <i>wait</i>() function defined in the System
Interfaces volume of IEEE&nbsp;Std&nbsp;1003.1-2001 until
<i>wait</i>() returns the requested process ID or finds that
the requested process does not exist. Because this means
that a shell script could not reliably get the status of all
background children if a second background job was ever
started before the first job finished, it is recommended
that the <i>wait</i> utility use a method such as the
functionality provided by the <i>waitpid</i>() function.</p>

<p style="margin-left:11%; margin-top: 1em">The ability to
wait for multiple <i>pid</i> operands was adopted from the
KornShell.</p>

<p style="margin-left:11%; margin-top: 1em">This new
functionality was added because it is needed to determine
the exit status of any asynchronous list accurately. The
only compatibility problem that this change creates is for a
script like</p>

<p style="margin-left:22%; margin-top: 1em"><b>while sleep
60 do <br>
job&amp; echo Job started $(date) as $! done</b></p>

<p style="margin-left:11%; margin-top: 1em">which causes
the shell to monitor all of the jobs started until the
script terminates or runs out of memory. This would not be a
problem if the loop did not reference <b>&quot;$!&quot;</b>
or if the script would occasionally <i>wait</i> for jobs it
started.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><i>Shell
Command Language</i>, <i>kill</i>(), <i>sh</i>, the System
Interfaces volume of IEEE&nbsp;Std&nbsp;1003.1-2001,
<i>wait</i>(), <i>waitpid</i>()</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
