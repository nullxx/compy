<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:56:52 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>&lt;stropts.h&gt;</title>

</head>
<body>

<h1 align="center">&lt;stropts.h&gt;</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#APPLICATION USAGE">APPLICATION USAGE</a><br>
<a href="#RATIONALE">RATIONALE</a><br>
<a href="#FUTURE DIRECTIONS">FUTURE DIRECTIONS</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">stropts.h
&minus; STREAMS interface (<b>STREAMS</b>)</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;stropts.h&gt;</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>bandinfo</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>unsigned
char bi_pri</b> Priority band. <b><br>
int bi_flag</b> Flushing type.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>strpeek</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>struct
strbuf ctlbuf</b> The control portion of the message.
<b><br>
struct strbuf databuf</b> The data portion of the message.
<b><br>
t_uscalar_t flags</b> RS_HIPRI or 0.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>strbuf</b> structure that includes at least the following
members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>int
maxlen</b> Maximum buffer length. <b><br>
int len</b> Length of data. <b><br>
char *buf</b> Pointer to buffer.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>strfdinsert</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>struct
strbuf ctlbuf</b> The control portion of the message.
<b><br>
struct strbuf databuf</b> The data portion of the message.
<b><br>
t_uscalar_t flags</b> RS_HIPRI or 0. <b><br>
int fildes</b> File descriptor of the other STREAM. <b><br>
int offset</b> Relative location of the stored value.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>strioctl</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>int
ic_cmd</b> <i>ioctl</i>() command. <b><br>
int ic_timout</b> Timeout for response. <b><br>
int ic_len</b> Length of data. <b><br>
char *ic_dp</b> Pointer to buffer.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>strrecvfd</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>int fda</b>
Received file descriptor. <b><br>
uid_t uid</b> UID of sender. <b><br>
gid_t gid</b> GID of sender.</p>

<p style="margin-left:11%; margin-top: 1em">The
<b>uid_t</b> and <b>gid_t</b> types shall be defined through
<b>typedef</b> as described in <i>&lt;sys/types.h&gt;</i>
.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>t_scalar_t</b> and <b>t_uscalar_t</b> types,
respectively, as signed and unsigned opaque types of equal
length of at least 32 bits.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>str_list</b> structure that includes at least the
following members:</p>

<p style="margin-left:22%; margin-top: 1em"><b>int
sl_nmods</b> Number of STREAMS module names. <b><br>
struct str_mlist *sl_modlist</b> STREAMS module names.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header shall define the
<b>str_mlist</b> structure that includes at least the
following member:</p>

<p style="margin-left:22%; margin-top: 1em"><b>char
l_name[FMNAMESZ+1]</b> A STREAMS module name.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use as the
<i>request</i> argument to <i>ioctl</i>():</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_PUSH</p></td>
<td width="2%"></td>
<td width="36%">


<p>Push a STREAMS module.</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_POP</p></td>
<td width="2%"></td>
<td width="36%">


<p>Pop a STREAMS module.</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_LOOK</p></td>
<td width="2%"></td>
<td width="36%">


<p>Get the top module name.</p></td>
<td width="42%">
</td></tr>
</table>

<p style="margin-left:11%;">I_FLUSH</p>

<p style="margin-left:22%;">Flush a STREAM.</p>

<p style="margin-left:11%;">I_FLUSHBAND</p>

<p style="margin-left:22%;">Flush one band of a STREAM.</p>

<p style="margin-left:11%;">I_SETSIG</p>

<p style="margin-left:22%;">Ask for notification
signals.</p>

<p style="margin-left:11%;">I_GETSIG</p>

<p style="margin-left:22%;">Retrieve current notification
signals.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_FIND</p></td>
<td width="2%"></td>
<td width="55%">


<p>Look for a STREAMS module.</p></td>
<td width="23%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_PEEK</p></td>
<td width="2%"></td>
<td width="55%">


<p>Peek at the top message on a STREAM.</p></td>
<td width="23%">
</td></tr>
</table>

<p style="margin-left:11%;">I_SRDOPT</p>

<p style="margin-left:22%;">Set the read mode.</p>

<p style="margin-left:11%;">I_GRDOPT</p>

<p style="margin-left:22%;">Get the read mode.</p>

<p style="margin-left:11%;">I_NREAD</p>

<p style="margin-left:22%;">Size the top message.</p>

<p style="margin-left:11%;">I_FDINSERT</p>

<p style="margin-left:22%;">Send implementation-defined
information about another STREAM.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>I_STR</p></td>
<td width="4%"></td>
<td width="35%">


<p>Send a STREAMS <i>ioctl</i>().</p></td>
<td width="43%">
</td></tr>
</table>

<p style="margin-left:11%;">I_SWROPT</p>

<p style="margin-left:22%;">Set the write mode.</p>

<p style="margin-left:11%;">I_GWROPT</p>

<p style="margin-left:22%;">Get the write mode.</p>

<p style="margin-left:11%;">I_SENDFD</p>

<p style="margin-left:22%;">Pass a file descriptor through
a STREAMS pipe.</p>

<p style="margin-left:11%;">I_RECVFD</p>

<p style="margin-left:22%;">Get a file descriptor sent via
I_SENDFD.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_LIST</p></td>
<td width="2%"></td>
<td width="56%">


<p>Get all the module names on a STREAM.</p></td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:11%;">I_ATMARK</p>

<p style="margin-left:22%;">Is the top message
&quot;marked&rsquo;&rsquo;?</p>

<p style="margin-left:11%;">I_CKBAND</p>

<p style="margin-left:22%;">See if any messages exist in a
band.</p>

<p style="margin-left:11%;">I_GETBAND</p>

<p style="margin-left:22%;">Get the band of the top message
on a STREAM.</p>

<p style="margin-left:11%;">I_CANPUT</p>

<p style="margin-left:22%;">Is a band writable?</p>

<p style="margin-left:11%;">I_SETCLTIME</p>

<p style="margin-left:22%;">Set close time delay.</p>

<p style="margin-left:11%;">I_GETCLTIME</p>

<p style="margin-left:22%;">Get close time delay.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>I_LINK</p></td>
<td width="2%"></td>
<td width="30%">


<p>Connect two STREAMs.</p></td>
<td width="48%">
</td></tr>
</table>

<p style="margin-left:11%;">I_UNLINK</p>

<p style="margin-left:22%;">Disconnect two STREAMs.</p>

<p style="margin-left:11%;">I_PLINK</p>

<p style="margin-left:22%;">Persistently connect two
STREAMs.</p>

<p style="margin-left:11%;">I_PUNLINK</p>

<p style="margin-left:22%;">Dismantle a persistent STREAMS
link.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_LOOK: <br>
FMNAMESZ</p>

<p style="margin-left:22%;">The minimum size in bytes of
the buffer referred to by the <i>arg</i> argument.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_FLUSH:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FLUSHR</p></td>
<td width="2%"></td>
<td width="29%">


<p>Flush read queues.</p></td>
<td width="49%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p>FLUSHW</p></td>
<td width="2%"></td>
<td width="29%">


<p>Flush write queues.</p></td>
<td width="49%">
</td></tr>
</table>

<p style="margin-left:11%;">FLUSHRW</p>

<p style="margin-left:22%;">Flush read and write
queues.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_SETSIG:
<br>
S_RDNORM</p>

<p style="margin-left:22%;">A normal (priority band set to
0) message has arrived at the head of a STREAM head read
queue.</p>

<p style="margin-left:11%;">S_RDBAND</p>

<p style="margin-left:22%;">A message with a non-zero
priority band has arrived at the head of a STREAM head read
queue.</p>

<p style="margin-left:11%;">S_INPUT</p>

<p style="margin-left:22%;">A message, other than a
high-priority message, has arrived at the head of a STREAM
head read queue.</p>

<p style="margin-left:11%;">S_HIPRI</p>

<p style="margin-left:22%;">A high-priority message is
present on a STREAM head read queue.</p>

<p style="margin-left:11%;">S_OUTPUT</p>

<p style="margin-left:22%;">The write queue for normal data
(priority band 0) just below the STREAM head is no longer
full. This notifies the process that there is room on the
queue for sending (or writing) normal data downstream.</p>

<p style="margin-left:11%;">S_WRNORM</p>

<p style="margin-left:22%;">Equivalent to S_OUTPUT.</p>

<p style="margin-left:11%;">S_WRBAND</p>

<p style="margin-left:22%;">The write queue for a non-zero
priority band just below the STREAM head is no longer
full.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>S_MSG</p></td>
<td width="4%"></td>
<td width="78%">


<p>A STREAMS signal message that contains the SIGPOLL
signal reaches the front of the STREAM head read queue.</p></td></tr>
</table>

<p style="margin-left:11%;">S_ERROR</p>

<p style="margin-left:22%;">Notification of an error
condition reaches the STREAM head.</p>

<p style="margin-left:11%;">S_HANGUP</p>

<p style="margin-left:22%;">Notification of a hangup
reaches the STREAM head.</p>

<p style="margin-left:11%;">S_BANDURG</p>

<p style="margin-left:22%;">When used in conjunction with
S_RDBAND, SIGURG is generated instead of SIGPOLL when a
priority message reaches the front of the STREAM head read
queue.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_PEEK: <br>
RS_HIPRI</p>

<p style="margin-left:22%;">Only look for high-priority
messages.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_SRDOPT:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>RNORM</p></td>
<td width="4%"></td>
<td width="46%">


<p>Byte-STREAM mode, the default.</p></td>
<td width="32%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>RMSGD</p></td>
<td width="4%"></td>
<td width="46%">


<p>Message-discard mode.</p></td>
<td width="32%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>RMSGN</p></td>
<td width="4%"></td>
<td width="46%">


<p>Message-non-discard mode.</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:11%;">RPROTNORM</p>

<p style="margin-left:22%;">Fail <i>read</i>() with
[EBADMSG] if a message containing a control part is at the
front of the STREAM head read queue.</p>

<p style="margin-left:11%;">RPROTDAT</p>

<p style="margin-left:22%;">Deliver the control part of a
message as data when a process issues a <i>read</i>().</p>

<p style="margin-left:11%;">RPROTDIS</p>

<p style="margin-left:22%;">Discard the control part of a
message, delivering any data part, when a process issues a
<i>read</i>().</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_SWOPT: <br>
SNDZERO</p>

<p style="margin-left:22%;">Send a zero-length message
downstream when a <i>write</i>() of 0 bytes occurs.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_ATMARK:
<br>
ANYMARK</p>

<p style="margin-left:22%;">Check if the message is
marked.</p>

<p style="margin-left:11%;">LASTMARK</p>

<p style="margin-left:22%;">Check if the message is the
last one marked on the queue.</p>

<p style="margin-left:11%; margin-top: 1em">At least the
following macros shall be defined for use with I_UNLINK:
<br>
MUXID_ALL</p>

<p style="margin-left:22%;">Unlink all STREAMs linked to
the STREAM associated with <i>fildes</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
macros shall be defined for <i>getmsg</i>(),
<i>getpmsg</i>(), <i>putmsg</i>(), and <i>putpmsg</i>():
<br>
MSG_ANY</p>

<p style="margin-left:22%;">Receive any message.</p>

<p style="margin-left:11%;">MSG_BAND</p>

<p style="margin-left:22%;">Receive message from specified
band.</p>

<p style="margin-left:11%;">MSG_HIPRI</p>

<p style="margin-left:22%;">Send/receive high-priority
message.</p>

<p style="margin-left:11%;">MORECTL</p>

<p style="margin-left:22%;">More control information is
left in message.</p>

<p style="margin-left:11%;">MOREDATA</p>

<p style="margin-left:22%;">More data is left in
message.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>&lt;stropts.h&gt;</i> header may make visible all of the
symbols from <i>&lt;unistd.h&gt;</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The following
shall be declared as functions and may also be defined as
macros. Function prototypes shall be provided.</p>

<p style="margin-left:22%; margin-top: 1em"><b>int
isastream(int); <br>
int getmsg(int, struct strbuf *restrict, struct strbuf
*restrict, <br>
int *restrict); <br>
int getpmsg(int, struct strbuf *restrict, struct strbuf
*restrict, <br>
int *restrict, int *restrict); <br>
int ioctl(int, int, ... ); <br>
int putmsg(int, const struct strbuf *, const struct strbuf
*, int); <br>
int putpmsg(int, const struct strbuf *, const struct strbuf
*, int, <br>
int); <br>
int fattach(int, const char *); <br>
int fdetach(const char *);</b></p>

<p style="margin-left:11%; margin-top: 1em"><i>The
following sections are informative.</i></p>

<h2>APPLICATION USAGE
<a name="APPLICATION USAGE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>RATIONALE
<a name="RATIONALE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>FUTURE DIRECTIONS
<a name="FUTURE DIRECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">None.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>&lt;sys/types.h&gt;</i>,
<i>&lt;unistd.h&gt;</i>, the System Interfaces volume of
IEEE&nbsp;Std&nbsp;1003.1-2001, <i>close</i>(),
<i>fcntl</i>(), <i>getmsg</i>(), <i>ioctl</i>(),
<i>open</i>(), <i>pipe</i>(), <i>read</i>(), <i>poll</i>(),
<i>putmsg</i>(), <i>signal</i>(), <i>write</i>()</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Portions of
this text are reprinted and reproduced in electronic form
from IEEE Std 1003.1, 2003 Edition, Standard for Information
Technology -- Portable Operating System Interface (POSIX),
The Open Group Base Specifications Issue 6, Copyright (C)
2001-2003 by the Institute of Electrical and Electronics
Engineers, Inc and The Open Group. In the event of any
discrepancy between this version and the original IEEE and
The Open Group Standard, the original IEEE and The Open
Group Standard is the referee document. The original
Standard can be obtained online at
http://www.opengroup.org/unix/online.html .</p>
<hr>
</body>
</html>
