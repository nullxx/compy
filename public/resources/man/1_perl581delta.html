<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:58:52 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERL581DELTA</title>

</head>
<body>

<h1 align="center">PERL581DELTA</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#Incompatible Changes">Incompatible Changes</a><br>
<a href="#Core Enhancements">Core Enhancements</a><br>
<a href="#Modules and Pragmata">Modules and Pragmata</a><br>
<a href="#Utility Changes">Utility Changes</a><br>
<a href="#New Documentation">New Documentation</a><br>
<a href="#Installation and Configuration Improvements">Installation and Configuration Improvements</a><br>
<a href="#Selected Bug Fixes">Selected Bug Fixes</a><br>
<a href="#New or Changed Diagnostics">New or Changed Diagnostics</a><br>
<a href="#Changed Internals">Changed Internals</a><br>
<a href="#New Tests">New Tests</a><br>
<a href="#Known Problems">Known Problems</a><br>
<a href="#Platform Specific Problems">Platform Specific Problems</a><br>
<a href="#Future Directions">Future Directions</a><br>
<a href="#Reporting Bugs">Reporting Bugs</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perl581delta
&minus; what is new for perl v5.8.1</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes differences between the 5.8.0 release and the
5.8.1 release.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
upgrading from an earlier release such as 5.6.1, first read
the perl58delta, which describes differences between 5.6.0
and 5.8.0.</p>

<p style="margin-left:11%; margin-top: 1em">In case you are
wondering about 5.6.1, it was bug-fix-wise rather identical
to the development release 5.7.1. Confused? This timeline
hopefully helps a bit: it lists the new major releases,
their maintenance releases, and the development
releases.</p>

<pre style="margin-left:11%; margin-top: 1em">          New     Maintenance  Development
          5.6.0                             2000&minus;Mar&minus;22
                               5.7.0        2000&minus;Sep&minus;02
                  5.6.1                     2001&minus;Apr&minus;08
                               5.7.1        2001&minus;Apr&minus;09
                               5.7.2        2001&minus;Jul&minus;13
                               5.7.3        2002&minus;Mar&minus;05
          5.8.0                             2002&minus;Jul&minus;18
                  5.8.1                     2003&minus;Sep&minus;25</pre>


<h2>Incompatible Changes
<a name="Incompatible Changes"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Hash
Randomisation</b> <br>
Mainly due to security reasons, the &quot;random
ordering&quot; of hashes has been made even more random.
Previously while the order of hash elements from
<i>keys()</i>, <i>values()</i>, and <i>each()</i> was
essentially random, it was still repeatable. Now, however,
the order varies between different runs of Perl.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Perl has
never guaranteed any ordering of the hash keys</b>, and the
ordering has already changed several times during the
lifetime of Perl 5. Also, the ordering of hash keys has
always been, and continues to be, affected by the insertion
order.</p>

<p style="margin-left:11%; margin-top: 1em">The added
randomness may affect applications.</p>

<p style="margin-left:11%; margin-top: 1em">One possible
scenario is when output of an application has included hash
data. For example, if you have used the Data::Dumper module
to dump data into different files, and then compared the
files to see whether the data has changed, now you will have
false positives since the order in which hashes are dumped
will vary. In general the cure is to sort the keys (or the
values); in particular for Data::Dumper to use the
<tt>&quot;Sortkeys&quot;</tt> option. If some particular
order is really important, use tied hashes: for example the
Tie::IxHash module which by default preserves the order in
which the hash elements were added.</p>

<p style="margin-left:11%; margin-top: 1em">More subtle
problem is reliance on the order of &quot;global
destruction&quot;. That is what happens at the end of
execution: Perl destroys all data structures, including user
data. If your destructors (the <small>DESTROY</small>
subroutines) have assumed any particular ordering to the
global destruction, there might be problems ahead. For
example, in a destructor of one object you cannot assume
that objects of any other class are still available, unless
you hold a reference to them. If the environment variable
<small>PERL_DESTRUCT_LEVEL</small> is set to a non-zero
value, or if Perl is exiting a spawned thread, it will also
destruct the ordinary references and the symbol tables that
are no longer in use. You can&rsquo;t call a class method or
an ordinary function on a class that has been collected that
way.</p>

<p style="margin-left:11%; margin-top: 1em">The hash
randomisation is certain to reveal hidden assumptions about
some particular ordering of hash elements, and outright
bugs: it revealed a few bugs in the Perl core and core
modules.</p>

<p style="margin-left:11%; margin-top: 1em">To disable the
hash randomisation in runtime, set the environment variable
<small>PERL_HASH_SEED</small> to 0 (zero) before running
Perl (for more information see &quot;
<small>PERL_HASH_SEED</small> &quot; in perlrun), or to
disable the feature completely in compile time, compile with
<tt>&quot;&minus;DNO_HASH_SEED&quot;</tt> (see
<i><small>INSTALL</small></i> ).</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;Algorithmic Complexity Attacks&quot; in perlsec for
the original rationale behind this change.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>UTF&minus;8</small>
On Filehandles No Longer Activated By Locale</b> <br>
In Perl 5.8.0 all filehandles, including the standard
filehandles, were implicitly set to be in Unicode
<small>UTF&minus;8</small> if the locale settings indicated
the use of <small>UTF&minus;8</small> . This feature caused
too many problems, so the feature was turned off and
redesigned: see &quot;Core Enhancements&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Single-number
v&minus;strings are no longer v&minus;strings before
&quot;=&gt;&quot;</b> <br>
The version strings or v&minus;strings (see &quot;Version
Strings&quot; in perldata) feature introduced in Perl 5.6.0
has been a source of some confusion-- especially when the
user did not want to use it, but Perl thought it knew
better. Especially troublesome has been the feature that
before a &quot;=&gt;&quot; a version string (a &quot;v&quot;
followed by digits) has been interpreted as a v&minus;string
instead of a string literal. In other words:</p>

<pre style="margin-left:11%; margin-top: 1em">        %h = ( v65 =&gt; 42 );</pre>


<p style="margin-left:11%; margin-top: 1em">has meant since
Perl 5.6.0</p>

<pre style="margin-left:11%; margin-top: 1em">        %h = ( 'A' =&gt; 42 );</pre>


<p style="margin-left:11%; margin-top: 1em">(at least in
platforms of <small>ASCII</small> progeny) Perl 5.8.1
restores the more natural interpretation</p>

<pre style="margin-left:11%; margin-top: 1em">        %h = ( 'v65' =&gt; 42 );</pre>


<p style="margin-left:11%; margin-top: 1em">The
multi-number v&minus;strings like v65.66 and 65.66.67 still
continue to be v&minus;strings in Perl 5.8.</p>

<p style="margin-left:11%; margin-top: 1em"><b>(Win32) The
&minus;C Switch Has Been Repurposed</b> <br>
The &minus;C switch has changed in an incompatible way. The
old semantics of this switch only made sense in Win32 and
only in the &quot;use utf8&quot; universe in 5.6.x releases,
and do not make sense for the Unicode implementation in
5.8.0. Since this switch could not have been used by anyone,
it has been repurposed. The behavior that this switch
enabled in 5.6.x releases may be supported in a transparent,
data-dependent fashion in a future release.</p>

<p style="margin-left:11%; margin-top: 1em">For the new
life of this switch, see &quot; <small>UTF&minus;8</small>
no longer default under <small>UTF&minus;8</small>
locales&quot;, and &quot;&minus;C&quot; in perlrun.</p>

<p style="margin-left:11%; margin-top: 1em"><b>(Win32) The
/d Switch Of cmd.exe</b> <br>
Perl 5.8.1 uses the /d switch when running the cmd.exe shell
internally for <i>system()</i>, backticks, and when opening
pipes to external programs. The extra switch disables the
execution of AutoRun commands from the registry, which is
generally considered undesirable when running external
programs. If you wish to retain compatibility with the older
behavior, set <small>PERL5SHELL</small> in your environment
to <tt>&quot;cmd /x/c&quot;</tt>.</p>

<h2>Core Enhancements
<a name="Core Enhancements"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><small>UTF&minus;8</small>
no longer default under <small>UTF&minus;8</small>
locales</b> <br>
In Perl 5.8.0 many Unicode features were introduced. One of
them was found to be of more nuisance than benefit: the
automagic (and silent)
&quot;UTF&minus;8&minus;ification&quot; of filehandles,
including the standard filehandles, if the user&rsquo;s
locale settings indicated use of <small>UTF&minus;8</small>
.</p>

<p style="margin-left:11%; margin-top: 1em">For example, if
you had <tt>&quot;en_US.UTF&minus;8&quot;</tt> as your
locale, your <small>STDIN</small> and <small>STDOUT</small>
were automatically &quot; <small>UTF&minus;8</small> &quot;,
in other words an implicit binmode(..., &quot;:utf8&quot;)
was made. This meant that trying to print, say,
<i>chr</i>(0xff), ended up printing the bytes 0xc3 0xbf.
Hardly what you had in mind unless you were aware of this
feature of Perl 5.8.0. The problem is that the vast majority
of people weren&rsquo;t: for example in RedHat releases 8
and 9 the <b>default</b> locale setting is
<small>UTF&minus;8</small> , so all RedHat users got
<small>UTF&minus;8</small> filehandles, whether they wanted
it or not. The pain was intensified by the Unicode
implementation of Perl 5.8.0 (still) having nasty bugs,
especially related to the use of s/// and tr///. (Bugs that
have been fixed in 5.8.1)</p>

<p style="margin-left:11%; margin-top: 1em">Therefore a
decision was made to backtrack the feature and change it
from implicit silent default to explicit conscious option.
The new Perl command line option
<tt>&quot;&minus;C&quot;</tt> and its counterpart
environment variable <small>PERL_UNICODE</small> can now be
used to control how Perl and Unicode interact at interfaces
like I/O and for example the command line arguments. See
&quot;&minus;C&quot; in perlrun and &quot;
<small>PERL_UNICODE</small> &quot; in perlrun for more
information.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unsafe
signals again available</b> <br>
In Perl 5.8.0 the so-called &quot;safe signals&quot; were
introduced. This means that Perl no longer handles signals
immediately but instead &quot;between opcodes&quot;, when it
is safe to do so. The earlier immediate handling easily
could corrupt the internal state of Perl, resulting in
mysterious crashes.</p>

<p style="margin-left:11%; margin-top: 1em">However, the
new safer model has its problems too. Because now an opcode,
a basic unit of Perl execution, is never interrupted but
instead let to run to completion, certain operations that
can take a long time now really do take a long time. For
example, certain network operations have their own blocking
and timeout mechanisms, and being able to interrupt them
immediately would be nice.</p>

<p style="margin-left:11%; margin-top: 1em">Therefore perl
5.8.1 introduces a &quot;backdoor&quot; to restore the
pre&minus;5.8.0 (pre&minus;5.7.3, really) signal behaviour.
Just set the environment variable
<small>PERL_SIGNALS</small> to <tt>&quot;unsafe&quot;</tt>,
and the old immediate (and unsafe) signal handling behaviour
returns. See &quot; <small>PERL_SIGNALS</small> &quot; in
perlrun and &quot;Deferred Signals (Safe Signals)&quot; in
perlipc.</p>

<p style="margin-left:11%; margin-top: 1em">In completely
unrelated news, you can now use safe signals with
POSIX::SigAction. See &quot;POSIX::SigAction&quot; in
<small>POSIX</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tied Arrays
with Negative Array Indices</b> <br>
Formerly, the indices passed to <tt>&quot;FETCH&quot;</tt>,
<tt>&quot;STORE&quot;</tt>, <tt>&quot;EXISTS&quot;</tt>, and
<tt>&quot;DELETE&quot;</tt> methods in tied array class were
always non-negative. If the actual argument was negative,
Perl would call <small>FETCHSIZE</small> implicitly and add
the result to the index before passing the result to the
tied array method. This behaviour is now optional. If the
tied array class contains a package variable named
<tt>$NEGATIVE_INDICES</tt> which is set to a true value,
negative values will be passed to
<tt>&quot;FETCH&quot;</tt>, <tt>&quot;STORE&quot;</tt>,
<tt>&quot;EXISTS&quot;</tt>, and <tt>&quot;DELETE&quot;</tt>
unchanged.</p>

<p style="margin-left:11%; margin-top: 1em"><b>local
${$x}</b> <br>
The syntaxes</p>

<pre style="margin-left:11%; margin-top: 1em">        local ${$x}
        local @{$x}
        local %{$x}</pre>


<p style="margin-left:11%; margin-top: 1em">now do localise
variables, given that the <tt>$x</tt> is a valid variable
name.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unicode
Character Database 4.0.0</b> <br>
The copy of the Unicode Character Database included in Perl
5.8 has been updated to 4.0.0 from 3.2.0. This means for
example that the Unicode character properties are as in
Unicode 4.0.0.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Deprecation
Warnings</b> <br>
There is one new feature deprecation. Perl 5.8.0 forgot to
add some deprecation warnings, these warnings have now been
added. Finally, a reminder of an impending feature
removal.</p>

<p style="margin-left:11%; margin-top: 1em"><i>(Reminder)
Pseudo-hashes are deprecated (really)</i></p>

<p style="margin-left:11%; margin-top: 1em">Pseudo-hashes
were deprecated in Perl 5.8.0 and will be removed in Perl
5.10.0, see perl58delta for details. Each attempt to access
pseudo-hashes will trigger the warning
<tt>&quot;Pseudo&minus;hashes are deprecated&quot;</tt>. If
you really want to continue using pseudo-hashes but not to
see the deprecation warnings, use:</p>

<pre style="margin-left:11%; margin-top: 1em">    no warnings 'deprecated';</pre>


<p style="margin-left:11%; margin-top: 1em">Or you can
continue to use the fields pragma, but please don&rsquo;t
expect the data structures to be pseudohashes any more.</p>

<p style="margin-left:11%; margin-top: 1em"><i>(Reminder)
5.005&minus;style threads are deprecated (really)</i></p>


<p style="margin-left:11%; margin-top: 1em">5.005&minus;style
threads (activated by <tt>&quot;use Thread;&quot;</tt>) were
deprecated in Perl 5.8.0 and will be removed after Perl 5.8,
see perl58delta for details. Each 5.005&minus;style thread
creation will trigger the warning <tt>&quot;5.005 threads
are deprecated&quot;</tt>. If you really want to continue
using the 5.005 threads but not to see the deprecation
warnings, use:</p>

<pre style="margin-left:11%; margin-top: 1em">    no warnings 'deprecated';</pre>


<p style="margin-left:11%; margin-top: 1em"><i>(Reminder)
The $* variable is deprecated (really)</i></p>

<p style="margin-left:11%; margin-top: 1em">The <tt>$*</tt>
variable controlling multi-line matching has been deprecated
and will be removed after 5.8. The variable has been
deprecated for a long time, and a deprecation warning
<tt>&quot;Use of $* is deprecated&quot;</tt> is given, now
the variable will just finally be removed. The functionality
has been supplanted by the <tt>&quot;/s&quot;</tt> and
<tt>&quot;/m&quot;</tt> modifiers on pattern matching. If
you really want to continue using the
<tt>$*</tt>&minus;variable but not to see the deprecation
warnings, use:</p>

<pre style="margin-left:11%; margin-top: 1em">    no warnings 'deprecated';</pre>



<p style="margin-left:11%; margin-top: 1em"><b>Miscellaneous
Enhancements</b> <tt><br>
&quot;map&quot;</tt> in void context is no longer expensive.
<tt>&quot;map&quot;</tt> is now context aware, and will not
construct a list if called in void context.</p>

<p style="margin-left:11%; margin-top: 1em">If a socket
gets closed by the server while printing to it, the client
now gets a <small>SIGPIPE</small> . While this new feature
was not planned, it fell naturally out of PerlIO changes,
and is to be considered an accidental feature.</p>


<p style="margin-left:11%; margin-top: 1em">PerlIO::get_layers(
<small>FH</small> ) returns the names of the PerlIO layers
active on a filehandle.</p>

<p style="margin-left:11%; margin-top: 1em">PerlIO::via
layers can now have an optional <small>UTF8</small> method
to indicate whether the layer wants to
&quot;auto&minus;:utf8&quot; the stream.</p>


<p style="margin-left:11%; margin-top: 1em"><i>utf8::is_utf8()</i>
has been added as a quick way to test whether a scalar is
encoded internally in <small>UTF&minus;8</small>
(Unicode).</p>

<h2>Modules and Pragmata
<a name="Modules and Pragmata"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Updated
Modules And Pragmata</b> <br>
The following modules and pragmata have been updated since
Perl 5.8.0: <br>
base <br>
B::Bytecode</p>

<p style="margin-left:17%;">In much better shape than it
used to be. Still far from perfect, but maybe worth a
try.</p>

<p style="margin-left:11%;">B::Concise <br>
B::Deparse <br>
Benchmark</p>

<p style="margin-left:17%;">An optional feature,
<tt>&quot;:hireswallclock&quot;</tt>, now allows for high
resolution wall clock times (uses Time::HiRes).</p>

<p style="margin-left:11%;">ByteLoader</p>

<p style="margin-left:17%;">See B::Bytecode.</p>

<p style="margin-left:11%;">bytes</p>

<p style="margin-left:17%;">Now has bytes::substr.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><small>CGI</small></p></td>
<td width="85%">
</td></tr>
</table>

<p style="margin-left:11%;">charnames</p>

<p style="margin-left:17%;">One can now have custom
character name aliases.</p>

<p style="margin-left:11%;"><small>CPAN</small></p>

<p style="margin-left:17%;">There is now a simple command
line frontend to the <small>CPAN</small> .pm module called
<i>cpan</i>.</p>

<p style="margin-left:11%;">Data::Dumper</p>

<p style="margin-left:17%;">A new option, Pair, allows
choosing the separator between hash keys and values.</p>

<p style="margin-left:11%;">DB_File <br>
Devel::PPPort <br>
Digest::MD5 <br>
Encode</p>

<p style="margin-left:17%;">Significant updates on the
encoding pragma functionality (tr/// and the
<small>DATA</small> filehandle, formats).</p>

<p style="margin-left:17%; margin-top: 1em">If a filehandle
has been marked as to have an encoding, unmappable
characters are detected already during input, not later
(when the corrupted data is being used).</p>

<p style="margin-left:17%; margin-top: 1em">The
<small>ISO</small> 8859&minus;6 conversion table has been
corrected (the 0x30..0x39 erroneously mapped to
U+0660..U+0669, instead of U+0030..U+0039). The
<small>GSM</small> 03.38 conversion did not handle escape
sequences correctly. The <small>UTF&minus;7</small> encoding
has been added (making Encode feature-complete with
Unicode::String).</p>

<p style="margin-left:11%;">fields <br>
libnet <br>
Math::BigInt</p>

<p style="margin-left:17%;">A lot of bugs have been fixed
since v1.60, the version included in Perl v5.8.0. Especially
noteworthy are the bug in Calc that caused div and mod to
fail for some large values, and the fixes to the handling of
bad inputs.</p>

<p style="margin-left:17%; margin-top: 1em">Some new
features were added, e.g. the <i>broot()</i> method, you can
now pass parameters to <i>config()</i> to change some
settings at runtime, and it is now possible to trap the
creation of NaN and infinity.</p>

<p style="margin-left:17%; margin-top: 1em">As usual, some
optimizations took place and made the math overall a tad
faster. In some cases, quite a lot faster, actually.
Especially alternative libraries like Math::BigInt::GMP
benefit from this. In addition, a lot of the quite clunky
routines like <i>fsqrt()</i> and <i>flog()</i> are now much
much faster.</p>

<p style="margin-left:11%;">MIME::Base64 <small><br>
NEXT</small></p>

<p style="margin-left:17%;">Diamond inheritance now
works.</p>

<p style="margin-left:11%;">Net::Ping <br>
PerlIO::scalar</p>

<p style="margin-left:17%;">Reading from non-string scalars
(like the special variables, see perlvar) now works.</p>

<p style="margin-left:11%;">podlators <br>
Pod::LaTeX <br>
PodParsers <br>
Pod::Perldoc</p>

<p style="margin-left:17%;">Complete rewrite. As a
side-effect, no longer refuses to startup when run by
root.</p>

<p style="margin-left:11%;">Scalar::Util</p>

<p style="margin-left:17%;">New utilities: refaddr,
isvstring, looks_like_number, set_prototype.</p>

<p style="margin-left:11%;">Storable</p>

<p style="margin-left:17%;">Can now store code references
(via B::Deparse, so not foolproof).</p>

<p style="margin-left:11%;">strict</p>

<p style="margin-left:17%;">Earlier versions of the strict
pragma did not check the parameters implicitly passed to its
&quot;import&quot; (use) and &quot;unimport&quot; (no)
routine. This caused the false idiom such as:</p>

<pre style="margin-left:17%; margin-top: 1em">        use strict qw(@ISA);
        @ISA = qw(Foo);</pre>


<p style="margin-left:17%; margin-top: 1em">This however
(probably) raised the false expectation that the strict
refs, vars and subs were being enforced (and that
<tt>@ISA</tt> was somehow &quot;declared&quot;). But the
strict refs, vars, and subs are <b>not</b> enforced when
using this false idiom.</p>

<p style="margin-left:17%; margin-top: 1em">Starting from
Perl 5.8.1, the above <b>will</b> cause an error to be
raised. This may cause programs which used to execute
seemingly correctly without warnings and errors to fail when
run under 5.8.1. This happens because</p>

<pre style="margin-left:17%; margin-top: 1em">        use strict qw(@ISA);</pre>


<p style="margin-left:17%; margin-top: 1em">will now fail
with the error:</p>

<pre style="margin-left:17%; margin-top: 1em">        Unknown 'strict' tag(s) '@ISA'</pre>


<p style="margin-left:17%; margin-top: 1em">The remedy to
this problem is to replace this code with the correct
idiom:</p>

<pre style="margin-left:17%; margin-top: 1em">        use strict;
        use vars qw(@ISA);
        @ISA = qw(Foo);</pre>


<p style="margin-left:11%;">Term::ANSIcolor <br>
Test::Harness</p>

<p style="margin-left:17%;">Now much more picky about extra
or missing output from test scripts.</p>

<p style="margin-left:11%;">Test::More <br>
Test::Simple <br>
Text::Balanced <br>
Time::HiRes</p>

<p style="margin-left:17%;">Use of <i>nanosleep()</i>, if
available, allows mixing subsecond sleeps with alarms.</p>

<p style="margin-left:11%;">threads</p>

<p style="margin-left:17%;">Several fixes, for example for
<i>join()</i> problems and memory leaks. In some platforms
(like Linux) that use glibc the minimum memory footprint of
one ithread has been reduced by several hundred
kilobytes.</p>

<p style="margin-left:11%;">threads::shared</p>

<p style="margin-left:17%;">Many memory leaks have been
fixed.</p>

<p style="margin-left:11%;">Unicode::Collate <br>
Unicode::Normalize <br>
Win32::GetFolderPath <br>
Win32::GetOSVersion</p>

<p style="margin-left:17%;">Now returns extra
information.</p>

<h2>Utility Changes
<a name="Utility Changes"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;h2xs&quot;</tt> utility now produces a more modern
layout: <i>Foo&minus;Bar/lib/Foo/Bar.pm</i> instead of
<i>Foo/Bar/Bar.pm</i>. Also, the boilerplate test is now
called <i>t/Foo&minus;Bar.t</i> instead of <i>t/1.t</i>.</p>

<p style="margin-left:11%; margin-top: 1em">The Perl
debugger (<i>lib/perl5db.pl</i>) has now been extensively
documented and bugs found while documenting have been
fixed.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;perldoc&quot;</tt>
has been rewritten from scratch to be more robust and
feature rich.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;perlcc
&minus;B&quot;</tt> works now at least somewhat better,
while <tt>&quot;perlcc &minus;c&quot;</tt> is rather more
broken. (The Perl compiler suite as a whole continues to be
experimental.)</p>

<h2>New Documentation
<a name="New Documentation"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perl573delta
has been added to list the differences between the (now
quite obsolete) development releases 5.7.2 and 5.7.3.</p>

<p style="margin-left:11%; margin-top: 1em">perl58delta has
been added: it is the perldelta of 5.8.0, detailing the
differences between 5.6.0 and 5.8.0.</p>

<p style="margin-left:11%; margin-top: 1em">perlartistic
has been added: it is the Artistic License in pod format,
making it easier for modules to refer to it.</p>

<p style="margin-left:11%; margin-top: 1em">perlcheat has
been added: it is a Perl cheat sheet.</p>

<p style="margin-left:11%; margin-top: 1em">perlgpl has
been added: it is the <small>GNU</small> General Public
License in pod format, making it easier for modules to refer
to it.</p>

<p style="margin-left:11%; margin-top: 1em">perlmacosx has
been added to tell about the installation and use of Perl in
Mac <small>OS</small> X.</p>

<p style="margin-left:11%; margin-top: 1em">perlos400 has
been added to tell about the installation and use of Perl in
<small>OS/400 PASE</small> .</p>

<p style="margin-left:11%; margin-top: 1em">perlreref has
been added: it is a regular expressions quick reference.</p>

<h2>Installation and Configuration Improvements
<a name="Installation and Configuration Improvements"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The Unix
standard Perl location, <i>/usr/bin/perl</i>, is no longer
overwritten by default if it exists. This change was very
prudent because so many Unix vendors already provide a
<i>/usr/bin/perl</i>, but simultaneously many system
utilities may depend on that exact version of Perl, so
better not to overwrite it.</p>

<p style="margin-left:11%; margin-top: 1em">One can now
specify installation directories for site and vendor man and
<small>HTML</small> pages, and site and vendor scripts. See
<i><small>INSTALL</small></i> .</p>

<p style="margin-left:11%; margin-top: 1em">One can now
specify a destination directory for Perl installation by
specifying the <small>DESTDIR</small> variable for
<tt>&quot;make install&quot;</tt>. (This feature is slightly
different from the previous <tt>&quot;Configure
&minus;Dinstallprefix=...&quot;</tt>.) See
<i><small>INSTALL</small></i> .</p>

<p style="margin-left:11%; margin-top: 1em">gcc versions
3.x introduced a new warning that caused a lot of noise
during Perl compilation: <tt>&quot;gcc
&minus;Ialreadyknowndirectory (warning: changing search
order)&quot;</tt>. This warning has now been avoided by
Configure weeding out such directories before the
compilation.</p>

<p style="margin-left:11%; margin-top: 1em">One can now
build subsets of Perl core modules by using the Configure
flags <tt>&quot;&minus;Dnoextensions=...&quot;</tt> and
<tt>&quot;&minus;Donlyextensions=...&quot;</tt>, see
<i><small>INSTALL</small></i> .</p>


<p style="margin-left:11%; margin-top: 1em"><b>Platform-specific
enhancements</b> <br>
In Cygwin Perl can now be built with threads
(<tt>&quot;Configure &minus;Duseithreads&quot;</tt>). This
works with both Cygwin 1.3.22 and Cygwin 1.5.3.</p>

<p style="margin-left:11%; margin-top: 1em">In newer
FreeBSD releases Perl 5.8.0 compilation failed because of
trying to use <i>malloc.h</i>, which in FreeBSD is just a
dummy file, and a fatal error to even try to use. Now
<i>malloc.h</i> is not used.</p>

<p style="margin-left:11%; margin-top: 1em">Perl is now
known to build also in Hitachi HI-UXMPP.</p>

<p style="margin-left:11%; margin-top: 1em">Perl is now
known to build again in LynxOS.</p>

<p style="margin-left:11%; margin-top: 1em">Mac
<small>OS</small> X now installs with Perl version number
embedded in installation directory names for easier
upgrading of user-compiled Perl, and the installation
directories in general are more standard. In other words,
the default installation no longer breaks the Apple-provided
Perl. On the other hand, with <tt>&quot;Configure
&minus;Dprefix=/usr&quot;</tt> you can now really replace
the Apple-supplied Perl (<b>please be careful</b>).</p>

<p style="margin-left:11%; margin-top: 1em">Mac
<small>OS</small> X now builds Perl statically by default.
This change was done mainly for faster startup times. The
Apple-provided Perl is still dynamically linked and shared,
and you can enable the sharedness for your own Perl builds
by <tt>&quot;Configure &minus;Duseshrplib&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Perl has been
ported to <small>IBM</small> &rsquo;s <small>OS/400
PASE</small> environment. The best way to build a Perl for
<small>PASE</small> is to use an <small>AIX</small> host as
a cross-compilation environment. See <small>README</small>
.os400.</p>

<p style="margin-left:11%; margin-top: 1em">Yet another
cross-compilation option has been added: now Perl builds on
OpenZaurus, an Linux distribution based on Mandrake +
Embedix for the Sharp Zaurus <small>PDA</small> . See the
Cross/README file.</p>

<p style="margin-left:11%; margin-top: 1em">Tru64 when
using gcc 3 drops the optimisation for <i>toke.c</i> to
<tt>&quot;&minus;O2&quot;</tt> because of gigantic memory
use with the default <tt>&quot;&minus;O3&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em">Tru64 can now
build Perl with the newer Berkeley DBs.</p>

<p style="margin-left:11%; margin-top: 1em">Building Perl
on WinCE has been much enhanced, see
<i><small>README</small> .ce</i> and
<i><small>README</small> .perlce</i>.</p>

<h2>Selected Bug Fixes
<a name="Selected Bug Fixes"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Closures,
eval and lexicals</b> <br>
There have been many fixes in the area of anonymous subs,
lexicals and closures. Although this means that Perl is now
more &quot;correct&quot;, it is possible that some existing
code will break that happens to rely on the faulty
behaviour. In practice this is unlikely unless your code
contains a very complex nesting of anonymous subs, evals and
lexicals.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Generic
fixes</b> <br>
If an input filehandle is marked <tt>&quot;:utf8&quot;</tt>
and Perl sees illegal <small>UTF&minus;8</small> coming in
when doing <tt>&quot;&lt;FH&gt;&quot;</tt>, if warnings are
enabled a warning is immediately given &minus; instead of
being silent about it and Perl being unhappy about the
broken data later. (The <tt>&quot;:encoding(utf8)&quot;</tt>
layer also works the same way.)</p>

<p style="margin-left:11%; margin-top: 1em">binmode(
<small>SOCKET</small> , &quot;:utf8&quot;) only worked on
the input side, not on the output side of the socket. Now it
works both ways.</p>

<p style="margin-left:11%; margin-top: 1em">For threaded
Perls certain system database functions like
<i>getpwent()</i> and <i>getgrent()</i> now grow their
result buffer dynamically, instead of failing. This means
that at sites with lots of users and groups the functions no
longer fail by returning only partial results.</p>

<p style="margin-left:11%; margin-top: 1em">Perl 5.8.0 had
accidentally broken the capability for users to define their
own uppercase&lt;&minus;&gt;lowercase Unicode mappings (as
advertised by the Camel). This feature has been fixed and is
also documented better.</p>

<p style="margin-left:11%; margin-top: 1em">In 5.8.0
this</p>

<pre style="margin-left:11%; margin-top: 1em">        $some_unicode .= &lt;FH&gt;;</pre>


<p style="margin-left:11%; margin-top: 1em">didn&rsquo;t
work correctly but instead corrupted the data. This has now
been fixed.</p>

<p style="margin-left:11%; margin-top: 1em">Tied methods
like <small>FETCH</small> etc. may now safely access tied
values, i.e. resulting in a recursive call to
<small>FETCH</small> etc. Remember to break the recursion,
though.</p>

<p style="margin-left:11%; margin-top: 1em">At startup Perl
blocks the <small>SIGFPE</small> signal away since there
isn&rsquo;t much Perl can do about it. Previously this
blocking was in effect also for programs executed from
within Perl. Now Perl restores the original
<small>SIGFPE</small> handling routine, whatever it was,
before running external programs.</p>

<p style="margin-left:11%; margin-top: 1em">Linenumbers in
Perl scripts may now be greater than 65536, or 2**16. (Perl
scripts have always been able to be larger than that,
it&rsquo;s just that the linenumber for reported errors and
warnings have &quot;wrapped around&quot;.) While scripts
that large usually indicate a need to rethink your code a
bit, such Perl scripts do exist, for example as results from
generated code. Now linenumbers can go all the way to
4294967296, or 2**32.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Platform-specific
fixes</b> <br>
Linux</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Setting <tt>$0</tt> works again (with certain
limitations that Perl cannot do much about: see
&quot;$0&quot; in perlvar)</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">HP-UX</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="32%">


<p style="margin-top: 1em">Setting <tt>$0</tt> now
works.</p> </td>
<td width="51%">
</td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><small>VMS</small></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Configuration now tests for the
presence of <tt>&quot;poll()&quot;</tt>, and IO::Poll now
uses the vendor-supplied function if detected.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A rare access violation at Perl start-up could occur if
the Perl image was installed with privileges or if there was
an identifier with the subsystem attribute set in the
process&rsquo;s rightslist. Either of these circumstances
triggered tainting code that contained a pointer bug. The
faulty pointer arithmetic has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The length limit on values (not keys) in the
<tt>%ENV</tt> hash has been raised from 255 bytes to 32640
bytes (except when the <small>PERL_ENV_TABLES</small>
setting overrides the default use of logical names for
<tt>%ENV</tt>). If it is necessary to access these long
values from outside Perl, be aware that they are implemented
using search list logical names that store the value in
pieces, each 255&minus;byte piece (up to 128 of them) being
an element in the search list. When doing a lookup in
<tt>%ENV</tt> from within Perl, the elements are combined
into a single value. The existing VMS-specific ability to
access individual elements of a search list logical name via
the <tt>$ENV</tt>{&rsquo;foo;N&rsquo;} syntax (where N is
the search list index) is unimpaired.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The piping implementation now uses local rather than
global <small>DCL</small> symbols for inter-process
communication.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>File::Find could become confused when navigating to a
relative directory whose name collided with a logical name.
This problem has been corrected by adding directory syntax
to relative path names, thus preventing logical name
translation.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Win32</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A memory leak in the
<i>fork()</i> emulation has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The return value of the <i>ioctl()</i> built-in function
was accidentally broken in 5.8.0. This has been
corrected.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The internal message loop executed by perl during
blocking operations sometimes interfered with messages that
were external to Perl. This often resulted in blocking
operations terminating prematurely or returning incorrect
results, when Perl was executing under environments that
could generate Windows messages. This has been
corrected.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Pipes and sockets are now automatically in binary
mode.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The four-argument form of <i>select()</i> did not
preserve $! (errno) properly when there were errors in the
underlying call. This is now fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &quot; <small>CR CR LF</small> &quot; problem of has
been fixed, binmode( <small>FH</small> , &quot;:crlf&quot;)
is now effectively a no-op.</p></td></tr>
</table>

<h2>New or Changed Diagnostics
<a name="New or Changed Diagnostics"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">All the
warnings related to <i>pack()</i> and <i>unpack()</i> were
made more informative and consistent.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changed
&quot;A thread exited while %d threads were
running&quot;</b> <br>
The old version</p>

<pre style="margin-left:11%; margin-top: 1em">    A thread exited while %d other threads were still running</pre>


<p style="margin-left:11%; margin-top: 1em">was misleading
because the &quot;other&quot; included also the thread
giving the warning.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Removed
&quot;Attempt to clear a restricted hash&quot;</b> <br>
It is not illegal to clear a restricted hash, so the warning
was removed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Illegal declaration of anonymous subroutine&quot;</b>
<br>
You must specify the block of code for
<tt>&quot;sub&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changed
&quot;Invalid range &quot;%s&quot; in transliteration
operator&quot;</b> <br>
The old version</p>

<pre style="margin-left:11%; margin-top: 1em">    Invalid [] range &quot;%s&quot; in transliteration operator</pre>


<p style="margin-left:11%; margin-top: 1em">was simply
wrong because there are no &quot;[] ranges&quot; in
tr///.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Missing control char name in \c&quot;</b> <br>
Self-explanatory.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Newline in left-justified string for %s&quot;</b> <br>
The padding spaces would appear after the newline, which is
probably not what you had in mind.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Possible precedence problem on bitwise %c
operator&quot;</b> <br>
If you think this</p>

<pre style="margin-left:11%; margin-top: 1em">    $x &amp; $y == 0</pre>


<p style="margin-left:11%; margin-top: 1em">tests whether
the bitwise <small>AND</small> of <tt>$x</tt> and
<tt>$y</tt> is zero, you will like this warning.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Pseudo-hashes are deprecated&quot;</b> <br>
This warning should have been already in 5.8.0, since they
are.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;</b><i>read()</i> <b>on %s filehandle %s&quot;</b>
<br>
You cannot <i>read()</i> (or <i>sysread()</i>) from a closed
or unopened filehandle.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;5.005 threads are deprecated&quot;</b> <br>
This warning should have been already in 5.8.0, since they
are.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Tied variable freed while still in use&quot;</b> <br>
Something pulled the plug on a live tied variable, Perl
plays safe by bailing out.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;To%s: illegal mapping &rsquo;%s&rsquo;&quot;</b> <br>
An illegal user-defined Unicode casemapping was
specified.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
&quot;Use of freed value in iteration&quot;</b> <br>
Something modified the values being iterated over. This is
not good.</p>

<h2>Changed Internals
<a name="Changed Internals"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These news
matter to you only if you either write <small>XS</small>
code or like to know about or hack Perl internals (using
Devel::Peek or any of the <tt>&quot;B::&quot;</tt> modules
counts), or like to run Perl with the
<tt>&quot;&minus;D&quot;</tt> option.</p>

<p style="margin-left:11%; margin-top: 1em">The embedding
examples of perlembed have been reviewed to be up to date
and consistent: for example, the correct use of
<i><small>PERL_SYS_INIT3</small> ()</i> and
<i><small>PERL_SYS_TERM</small> ()</i>.</p>

<p style="margin-left:11%; margin-top: 1em">Extensive
reworking of the pad code (the code responsible for lexical
variables) has been conducted by Dave Mitchell.</p>

<p style="margin-left:11%; margin-top: 1em">Extensive work
on the v&minus;strings by John Peacock.</p>


<p style="margin-left:11%; margin-top: 1em"><small>UTF&minus;8</small>
length and position cache: to speed up the handling of
Unicode ( <small>UTF&minus;8</small> ) scalars, a cache was
introduced. Potential problems exist if an extension
bypasses the official APIs and directly modifies the
<small>PV</small> of an <small>SV:</small> the
<small>UTF&minus;8</small> cache does not get cleared as it
should.</p>

<p style="margin-left:11%; margin-top: 1em">APIs obsoleted
in Perl 5.8.0, like sv_2pv, sv_catpvn, sv_catsv, sv_setsv,
are again available.</p>

<p style="margin-left:11%; margin-top: 1em">Certain Perl
core C APIs like cxinc and regatom are no longer available
at all to code outside the Perl core of the Perl core
extensions. This is intentional. They never should have been
available with the shorter names, and if you application
depends on them, you should (be ashamed and) contact
perl5&minus;porters to discuss what are the proper APIs.</p>

<p style="margin-left:11%; margin-top: 1em">Certain Perl
core C APIs like <tt>&quot;Perl_list&quot;</tt> are no
longer available without their <tt>&quot;Perl_&quot;</tt>
prefix. If your <small>XS</small> module stops working
because some functions cannot be found, in many cases a
simple fix is to add the <tt>&quot;Perl_&quot;</tt> prefix
to the function and the thread context
<tt>&quot;aTHX_&quot;</tt> as the first argument of the
function call. This is also how it should always have been
done: letting the Perl_&minus;less forms to leak from the
core was an accident. For cleaner embedding you can also
force this for all APIs by defining at compile time the cpp
define <small>PERL_NO_SHORT_NAMES</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><i>Perl_save_bool()</i>
has been added.</p>

<p style="margin-left:11%; margin-top: 1em">Regexp objects
(those created with <tt>&quot;qr&quot;</tt>) now have
S&minus;magic rather than R&minus;magic. This fixed regexps
of the form /...(??{...;$x})/ to no longer ignore changes
made to <tt>$x</tt>. The S&minus;magic avoids dropping the
caching optimization and making (??{...}) constructs
obscenely slow (and consequently useless). See also
&quot;Magic Variables&quot; in perlguts. Regexp::Copy was
affected by this change.</p>

<p style="margin-left:11%; margin-top: 1em">The Perl
internal debugging macros <i><small>DEBUG</small> ()</i> and
<i><small>DEB</small> ()</i> have been renamed to
<i><small>PERL_DEBUG</small> ()</i> and
<i><small>PERL_DEB</small> ()</i> to avoid namespace
conflicts.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;&minus;DL&quot;</tt>
removed (the leaktest had been broken and unsupported for
years, use alternative debugging mallocs or tools like
valgrind and Purify).</p>

<p style="margin-left:11%; margin-top: 1em">Verbose
modifier <tt>&quot;v&quot;</tt> added for
<tt>&quot;&minus;DXv&quot;</tt> and
<tt>&quot;&minus;Dsv&quot;</tt>, see perlrun.</p>

<h2>New Tests
<a name="New Tests"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In Perl 5.8.0
there were about 69000 separate tests in about 700 test
files, in Perl 5.8.1 there are about 77000 separate tests in
about 780 test files. The exact numbers depend on the Perl
configuration and on the operating system platform.</p>

<h2>Known Problems
<a name="Known Problems"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The hash
randomisation mentioned in &quot;Incompatible Changes&quot;
is definitely problematic: it will wake dormant bugs and
shake out bad assumptions.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
use mod_perl 2.x with Perl 5.8.1, you will need
mod_perl&minus;1.99_10 or higher. Earlier versions of
mod_perl 2.x do not work with the randomised hashes.
(mod_perl 1.x works fine.) You will also need Apache::Test
1.04 or higher.</p>

<p style="margin-left:11%; margin-top: 1em">Many of the
rarer platforms that worked 100% or pretty close to it with
perl 5.8.0 have been left a little bit untended since their
maintainers have been otherwise busy lately, and therefore
there will be more failures on those platforms. Such
platforms include Mac <small>OS</small> Classic,
<small>IBM</small> z/OS (and other <small>EBCDIC</small>
platforms), and NetWare. The most common Perl platforms
(Unix and Unix-like, Microsoft platforms, and
<small>VMS</small> ) have large enough testing and expert
population that they are doing well.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tied hashes
in scalar context</b> <br>
Tied hashes do not currently return anything useful in
scalar context, for example when used as boolean tests:</p>

<pre style="margin-left:11%; margin-top: 1em">        if (%tied_hash) { ... }</pre>


<p style="margin-left:11%; margin-top: 1em">The current
nonsensical behaviour is always to return false, regardless
of whether the hash is empty or has elements.</p>

<p style="margin-left:11%; margin-top: 1em">The root cause
is that there is no interface for the implementors of tied
hashes to implement the behaviour of a hash in scalar
context.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Net::Ping
450_service and 510_ping_udp failures</b> <br>
The subtests 9 and 18 of lib/Net/Ping/t/450_service.t, and
the subtest 2 of lib/Net/Ping/t/510_ping_udp.t might fail if
you have an unusual networking setup. For example in the
latter case the test is trying to send a <small>UDP</small>
ping to the <small>IP</small> address 127.0.0.1.</p>

<p style="margin-left:11%; margin-top: 1em"><b>B::C</b>
<br>
The C&minus;generating compiler backend B::C (the frontend
being <tt>&quot;perlcc &minus;c&quot;</tt>) is even more
broken than it used to be because of the extensive lexical
variable changes. (The good news is that B::Bytecode and
ByteLoader are better than they used to be.)</p>

<h2>Platform Specific Problems
<a name="Platform Specific Problems"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><small>EBCDIC</small>
Platforms</b> <small><br>
IBM</small> z/OS and other <small>EBCDIC</small> platforms
continue to be problematic regarding Unicode support. Many
Unicode tests are skipped when they really should be
fixed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Cygwin 1.5
problems</b> <br>
In Cygwin 1.5 the <i>io/tell</i> and <i>op/sysio</i> tests
have failures for some yet unknown reason. In 1.5.5 the
threads tests stress_cv, stress_re, and stress_string are
failing unless the environment variable
<small>PERLIO</small> is set to &quot;perlio&quot; (which
makes also the io/tell failure go away).</p>

<p style="margin-left:11%; margin-top: 1em">Perl 5.8.1 does
build and work well with Cygwin 1.3: with (uname &minus;a)
<tt>&quot;CYGWIN_NT&minus;5.0 ... 1.3.22(0.78/3/2)
2003&minus;03&minus;18 09:20 i686 ...&quot;</tt> a 100%
&quot;make test&quot; was achieved with <tt>&quot;Configure
&minus;des &minus;Duseithreads&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>HP-UX:
<small>HP</small> cc warnings about sendfile and
sendpath</b> <br>
With certain <small>HP</small> C compiler releases (e.g.
B.11.11.02) you will get many warnings like this (lines
wrapped for easier reading):</p>

<pre style="margin-left:11%; margin-top: 1em">  cc: &quot;/usr/include/sys/socket.h&quot;, line 504: warning 562:
    Redeclaration of &quot;sendfile&quot; with a different storage class specifier:
      &quot;sendfile&quot; will have internal linkage.
  cc: &quot;/usr/include/sys/socket.h&quot;, line 505: warning 562:
    Redeclaration of &quot;sendpath&quot; with a different storage class specifier:
      &quot;sendpath&quot; will have internal linkage.</pre>


<p style="margin-left:11%; margin-top: 1em">The warnings
show up both during the build of Perl and during certain
lib/ExtUtils tests that invoke the C compiler. The warning,
however, is not serious and can be ignored.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>IRIX:</small>
t/uni/tr_7jis.t falsely failing</b> <br>
The test t/uni/tr_7jis.t is known to report failure under
&rsquo;make test&rsquo; or the test harness with certain
releases of <small>IRIX</small> (at least
<small>IRIX</small> 6.5 and MIPSpro Compilers Version
7.3.1.1m), but if run manually the test fully passes.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Mac
<small>OS</small> X: no usemymalloc</b> <br>
The Perl malloc (<tt>&quot;&minus;Dusemymalloc&quot;</tt>)
does not work at all in Mac <small>OS</small> X. This is not
that serious, though, since the native malloc works just
fine.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tru64: No
threaded builds with <small>GNU</small> cc (gcc)</b> <br>
In the latest Tru64 releases (e.g. v5.1B or later) gcc
cannot be used to compile a threaded Perl
(&minus;Duseithreads) because the system
<tt>&quot;&lt;pthread.h&gt;&quot;</tt> file doesn&rsquo;t
know about gcc.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Win32:
sysopen, sysread, syswrite</b> <br>
As of the 5.8.0 release,
<i>sysopen()</i>/<i>sysread()</i>/<i>syswrite()</i> do not
behave like they used to in 5.6.1 and earlier with respect
to &quot;text&quot; mode. These built-ins now always operate
in &quot;binary&quot; mode (even if <i>sysopen()</i> was
passed the O_TEXT flag, or if <i>binmode()</i> was used on
the file handle). Note that this issue should only make a
difference for disk files, as sockets and pipes have always
been in &quot;binary&quot; mode in the Windows port. As this
behavior is currently considered a bug, compatible behavior
may be re-introduced in a future release. Until then, the
use of <i>sysopen()</i>, <i>sysread()</i> and
<i>syswrite()</i> is not supported for &quot;text&quot; mode
operations.</p>

<h2>Future Directions
<a name="Future Directions"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
things <b>might</b> happen in future. The first publicly
available releases having these characteristics will be the
developer releases Perl 5.9.x, culminating in the Perl
5.10.0 release. These are our best guesses at the moment: we
reserve the right to rethink.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">PerlIO will become The Default.
Currently (in Perl 5.8.x) the stdio library is still used if
Perl thinks it can use certain tricks to make stdio go
<b>really</b> fast. For future releases our goal is to make
PerlIO go even faster.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A new feature called <i>assertions</i> will be
available. This means that one can have code called
assertions sprinkled in the code: usually they are optimised
away, but they can be enabled with the
<tt>&quot;&minus;A&quot;</tt> option.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A new operator <tt>&quot;//&quot;</tt> (defined-or) will
be available. This means that one will be able to say</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    $a // $b</pre>


<p style="margin-left:17%; margin-top: 1em">instead of</p>

<pre style="margin-left:17%; margin-top: 1em">   defined $a ? $a : $b</pre>


<p style="margin-left:17%; margin-top: 1em">and</p>

<pre style="margin-left:17%; margin-top: 1em">   $c //= $d;</pre>


<p style="margin-left:17%; margin-top: 1em">instead of</p>

<pre style="margin-left:17%; margin-top: 1em">   $c = $d unless defined $c;</pre>


<p style="margin-left:17%; margin-top: 1em">The operator
will have the same precedence and associativity as
<tt>&quot;||&quot;</tt>. A source code patch against the
Perl 5.8.1 sources will be available in <small>CPAN</small>
as <i>authors/id/H/HM/HMBRAND/dor&minus;5.8.1.diff</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;unpack()&quot;</tt>
will default to unpacking the <tt>$_</tt>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Various Copy-On-Write techniques will be investigated in
hopes of speeding up Perl.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><small>CPANPLUS</small> , Inline, and Module::Build will
become core modules.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The ability to write true lexically scoped pragmas will
be introduced.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Work will continue on the bytecompiler and
byteloader.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>v&minus;strings as they currently exist are scheduled to
be deprecated. The v&minus;less form (1.2.3) will become a
&quot;version object&quot; when used with
<tt>&quot;use&quot;</tt>, <tt>&quot;require&quot;</tt>, and
<tt>$VERSION</tt>. $^V will also be a &quot;version
object&quot; so the printf(&quot;%vd&quot;,...) construct
will no longer be needed. The v&minus;ful version (v1.2.3)
will become obsolete. The equivalence of strings and
v&minus;strings (e.g. that currently 5.8.0 is equal to
&quot;\5\8\0&quot;) will go away. <b>There may be no
deprecation warning for v&minus;strings</b>, though: it is
quite hard to detect when v&minus;strings are being used
safely, and when they are not.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>5.005 Threads Will Be Removed</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>$*</tt> Variable Will Be Removed (it was
deprecated a long time ago)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Pseudohashes Will Be Removed</p></td></tr>
</table>

<h2>Reporting Bugs
<a name="Reporting Bugs"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you find
what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the
perl bug database at http://bugs.perl.org/ . There may also
be information at http://www.perl.com/ , the Perl Home
Page.</p>

<p style="margin-left:11%; margin-top: 1em">If you believe
you have an unreported bug, please run the <b>perlbug</b>
program included with your release. Be sure to trim your bug
down to a tiny but sufficient test case. Your bug report,
along with the output of <tt>&quot;perl &minus;V&quot;</tt>,
will be sent off to perlbug@perl.org to be analysed by the
Perl porting team. You can browse and search the Perl 5 bugs
at http://bugs.perl.org/</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>Changes</i> file for exhaustive details on what
changed.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i><small>INSTALL</small></i> file for how to build
Perl.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i><small>README</small></i> file for general stuff.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>Artistic</i> and <i>Copying</i> files for copyright
information.</p>
<hr>
</body>
</html>
