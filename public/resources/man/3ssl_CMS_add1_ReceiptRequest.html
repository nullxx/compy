<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:18:25 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>CMS_get1_ReceiptRequest</title>

</head>
<body>

<h1 align="center">CMS_get1_ReceiptRequest</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#NOTES">NOTES</a><br>
<a href="#RETURN VALUES">RETURN VALUES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#HISTORY">HISTORY</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em"> CMS_ReceiptRequest_create0, CMS_add1_ReceiptRequest, CMS_get1_ReceiptRequest, CMS_ReceiptRequest_get0_values &minus; CMS signed receipt request functions.</pre>


<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<pre style="margin-left:11%; margin-top: 1em"> #include &lt;openssl/cms.h&gt;
 CMS_ReceiptRequest *CMS_ReceiptRequest_create0(unsigned char *id, int idlen, int allorfirst, STACK_OF(GENERAL_NAMES) *receiptList, STACK_OF(GENERAL_NAMES) *receiptsTo);
 int CMS_add1_ReceiptRequest(CMS_SignerInfo *si, CMS_ReceiptRequest *rr);
 int CMS_get1_ReceiptRequest(CMS_SignerInfo *si, CMS_ReceiptRequest **prr);
 void CMS_ReceiptRequest_get0_values(CMS_ReceiptRequest *rr, ASN1_STRING **pcid, int *pallorfirst, STACK_OF(GENERAL_NAMES) **plist, STACK_OF(GENERAL_NAMES) **prto);</pre>


<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>CMS_ReceiptRequest_create0()</i>
creates a signed receipt request structure. The
<b>signedContentIdentifier</b> field is set using <b>id</b>
and <b>idlen</b>, or it is set to 32 bytes of pseudo random
data if <b>id</b> is <small>NULL.</small> If
<b>receiptList</b> is <small>NULL</small> the allOrFirstTier
option in <b>receiptsFrom</b> is used and set to the value
of the <b>allorfirst</b> parameter. If <b>receiptList</b> is
not <small>NULL</small> the <b>receiptList</b> option in
<b>receiptsFrom</b> is used. The <b>receiptsTo</b> parameter
specifies the <b>receiptsTo</b> field value.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>CMS_add1_ReceiptRequest()</i> function adds a signed
receipt request <b>rr</b> to SignerInfo structure
<b>si</b>.</p>

<p style="margin-left:11%; margin-top: 1em">int
<i>CMS_get1_ReceiptRequest()</i> looks for a signed receipt
request in <b>si</b>, if any is found it is decoded and
written to <b>prr</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><i>CMS_ReceiptRequest_get0_values()</i>
retrieves the values of a receipt request. The
signedContentIdentifier is copied to <b>pcid</b>. If the
<b>allOrFirstTier</b> option of <b>receiptsFrom</b> is used
its value is copied to <b>pallorfirst</b> otherwise the
<b>receiptList</b> field is copied to <b>plist</b>. The
<b>receiptsTo</b> parameter is copied to <b>prto</b>.</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For more
details of the meaning of the fields see
<small>RFC2634.</small></p>

<p style="margin-left:11%; margin-top: 1em">The contents of
a signed receipt should only be considered meaningful if the
corresponding CMS_ContentInfo structure can be successfully
verified using <i>CMS_verify()</i>.</p>

<h2>RETURN VALUES
<a name="RETURN VALUES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>CMS_ReceiptRequest_create0()</i>
returns a signed receipt request structure or
<small>NULL</small> if an error occurred.</p>


<p style="margin-left:11%; margin-top: 1em"><i>CMS_add1_ReceiptRequest()</i>
returns 1 for success or 0 is an error occurred.</p>


<p style="margin-left:11%; margin-top: 1em"><i>CMS_get1_ReceiptRequest()</i>
returns 1 is a signed receipt request is found and decoded.
It returns 0 if a signed receipt request is not present and
&minus;1 if it is present but malformed.</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>ERR_get_error</i>(3),
<i>CMS_sign</i>(3), <i>CMS_sign_receipt</i>(3),
<i>CMS_verify</i>(3) <i>CMS_verify_receipt</i>(3)</p>

<h2>HISTORY
<a name="HISTORY"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>CMS_ReceiptRequest_create0()</i>,
<i>CMS_add1_ReceiptRequest()</i>,
<i>CMS_get1_ReceiptRequest()</i> and
<i>CMS_ReceiptRequest_get0_values()</i> were added to
OpenSSL 0.9.8</p>
<hr>
</body>
</html>
