<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:09:00 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PCRE</title>

</head>
<body>

<h1 align="center">PCRE</h1>

<a href="#NAME">NAME</a><br>
<a href="#PCRE 16-BIT API BASIC FUNCTIONS">PCRE 16-BIT API BASIC FUNCTIONS</a><br>
<a href="#PCRE 16-BIT API STRING EXTRACTION FUNCTIONS">PCRE 16-BIT API STRING EXTRACTION FUNCTIONS</a><br>
<a href="#PCRE 16-BIT API AUXILIARY FUNCTIONS">PCRE 16-BIT API AUXILIARY FUNCTIONS</a><br>
<a href="#PCRE 16-BIT API INDIRECTED FUNCTIONS">PCRE 16-BIT API INDIRECTED FUNCTIONS</a><br>
<a href="#PCRE 16-BIT API 16-BIT-ONLY FUNCTION">PCRE 16-BIT API 16-BIT-ONLY FUNCTION</a><br>
<a href="#THE PCRE 16-BIT LIBRARY">THE PCRE 16-BIT LIBRARY</a><br>
<a href="#THE HEADER FILE">THE HEADER FILE</a><br>
<a href="#THE LIBRARY NAME">THE LIBRARY NAME</a><br>
<a href="#STRING TYPES">STRING TYPES</a><br>
<a href="#STRUCTURE TYPES">STRUCTURE TYPES</a><br>
<a href="#16-BIT FUNCTIONS">16-BIT FUNCTIONS</a><br>
<a href="#SUBJECT STRING OFFSETS">SUBJECT STRING OFFSETS</a><br>
<a href="#NAMED SUBPATTERNS">NAMED SUBPATTERNS</a><br>
<a href="#OPTION NAMES">OPTION NAMES</a><br>
<a href="#CHARACTER CODES">CHARACTER CODES</a><br>
<a href="#ERROR NAMES">ERROR NAMES</a><br>
<a href="#ERROR TEXTS">ERROR TEXTS</a><br>
<a href="#CALLOUTS">CALLOUTS</a><br>
<a href="#TESTING">TESTING</a><br>
<a href="#NOT SUPPORTED IN 16-BIT MODE">NOT SUPPORTED IN 16-BIT MODE</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#REVISION">REVISION</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">PCRE -
Perl-compatible regular expressions</p>

<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;pcre.h&gt;</b></p>

<h2>PCRE 16-BIT API BASIC FUNCTIONS
<a name="PCRE 16-BIT API BASIC FUNCTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b><small>pcre16
*pcre16_compile(PCRE_SPTR16</small></b>
<small><i>pattern</i><b>, int</b>
<i>options</i><b>,</b></small> <b><br>
const char **</b><i>errptr</i><b>, int
*</b><i>erroffset</i><b>, <br>
const unsigned char *</b><i>tableptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>pcre16
*pcre16_compile2(PCRE_SPTR16</b> <i>pattern</i><b>, int</b>
<i>options</i><b>, <br>
int *</b><i>errorcodeptr</i><b>, <br>
const char **</b><i>errptr</i><b>, int
*</b><i>erroffset</i><b>, <br>
const unsigned char *</b><i>tableptr</i><b>);</b></p>


<p style="margin-left:11%; margin-top: 1em"><b>pcre16_extra
*pcre16_study(const pcre16 *</b><i>code</i><b>, int</b>
<i>options</i><b>, <br>
const char **</b><i>errptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
pcre16_free_study(pcre16_extra
*</b><i>extra</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_exec(const pcre16 *</b><i>code</i><b>, const
pcre16_extra *</b><i>extra</i><b>, <br>
PCRE_SPTR16</b> <i>subject</i><b>, int</b> <i>length</i><b>,
int</b> <i>startoffset</i><b>, <br>
int</b> <i>options</i><b>, int *</b><i>ovector</i><b>,
int</b> <i>ovecsize</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_dfa_exec(const pcre16 *</b><i>code</i><b>, const
pcre16_extra *</b><i>extra</i><b>, <br>
PCRE_SPTR16</b> <i>subject</i><b>, int</b> <i>length</i><b>,
int</b> <i>startoffset</i><b>, <br>
int</b> <i>options</i><b>, int *</b><i>ovector</i><b>,
int</b> <i>ovecsize</i><b>, <br>
int *</b><i>workspace</i><b>, int</b>
<i>wscount</i><b>);</b></p>

<h2>PCRE 16-BIT API STRING EXTRACTION FUNCTIONS
<a name="PCRE 16-BIT API STRING EXTRACTION FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_copy_named_substring(const pcre16
*</b><i>code</i><b>, <br>
PCRE_SPTR16</b> <i>subject</i><b>, int
*</b><i>ovector</i><b>, <br>
int</b> <i>stringcount</i><b>, PCRE_SPTR16</b>
<i>stringname</i><b>, <br>
PCRE_UCHAR16 *</b><i>buffer</i><b>, int</b>
<i>buffersize</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_copy_substring(PCRE_SPTR16</b> <i>subject</i><b>, int
*</b><i>ovector</i><b>, <br>
int</b> <i>stringcount</i><b>, int</b>
<i>stringnumber</i><b>, PCRE_UCHAR16 *</b><i>buffer</i><b>,
<br>
int</b> <i>buffersize</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_get_named_substring(const pcre16 *</b><i>code</i><b>,
<br>
PCRE_SPTR16</b> <i>subject</i><b>, int
*</b><i>ovector</i><b>, <br>
int</b> <i>stringcount</i><b>, PCRE_SPTR16</b>
<i>stringname</i><b>, <br>
PCRE_SPTR16 *</b><i>stringptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_get_stringnumber(const pcre16 *</b><i>code</i><b>,
<br>
PCRE_SPTR16</b> <i>name</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_get_stringtable_entries(const pcre16
*</b><i>code</i><b>, <br>
PCRE_SPTR16</b> <i>name</i><b>, PCRE_UCHAR16
**</b><i>first</i><b>, PCRE_UCHAR16
**</b><i>last</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_get_substring(PCRE_SPTR16</b> <i>subject</i><b>, int
*</b><i>ovector</i><b>, <br>
int</b> <i>stringcount</i><b>, int</b>
<i>stringnumber</i><b>, <br>
PCRE_SPTR16 *</b><i>stringptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_get_substring_list(PCRE_SPTR16</b> <i>subject</i><b>,
<br>
int *</b><i>ovector</i><b>, int</b> <i>stringcount</i><b>,
PCRE_SPTR16 **</b><i>listptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
pcre16_free_substring(PCRE_SPTR16</b>
<i>stringptr</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
pcre16_free_substring_list(PCRE_SPTR16
*</b><i>stringptr</i><b>);</b></p>

<h2>PCRE 16-BIT API AUXILIARY FUNCTIONS
<a name="PCRE 16-BIT API AUXILIARY FUNCTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>pcre16_jit_stack
*pcre16_jit_stack_alloc(int</b> <i>startsize</i><b>, int</b>
<i>maxsize</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
pcre16_jit_stack_free(pcre16_jit_stack
*</b><i>stack</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
pcre16_assign_jit_stack(pcre16_extra *</b><i>extra</i><b>,
<br>
pcre16_jit_callback</b> <i>callback</i><b>, void
*</b><i>data</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>const
unsigned char *pcre16_maketables(void);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_fullinfo(const pcre16 *</b><i>code</i><b>, const
pcre16_extra *</b><i>extra</i><b>, <br>
int</b> <i>what</i><b>, void *</b><i>where</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_refcount(pcre16 *</b><i>code</i><b>, int</b>
<i>adjust</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_config(int</b> <i>what</i><b>, void
*</b><i>where</i><b>);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>const char
*pcre16_version(void);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_pattern_to_host_byte_order(pcre16
*</b><i>code</i><b>, <br>
pcre16_extra *</b><i>extra</i><b>, const unsigned char
*</b><i>tables</i><b>);</b></p>

<h2>PCRE 16-BIT API INDIRECTED FUNCTIONS
<a name="PCRE 16-BIT API INDIRECTED FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>void
*(*pcre16_malloc)(size_t);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
(*pcre16_free)(void *);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
*(*pcre16_stack_malloc)(size_t);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>void
(*pcre16_stack_free)(void *);</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>int
(*pcre16_callout)(pcre16_callout_block *);</b></p>

<h2>PCRE 16-BIT API 16-BIT-ONLY FUNCTION
<a name="PCRE 16-BIT API 16-BIT-ONLY FUNCTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>int
pcre16_utf16_to_host_byte_order(PCRE_UCHAR16
*</b><i>output</i><b>, <br>
PCRE_SPTR16</b> <i>input</i><b>, int</b> <i>length</i><b>,
int *</b><i>byte_order</i><b>, <br>
int</b> <i>keep_boms</i><b>);</b></p>

<h2>THE PCRE 16-BIT LIBRARY
<a name="THE PCRE 16-BIT LIBRARY"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Starting with
release 8.30, it is possible to compile a PCRE library that
supports 16-bit character strings, including UTF-16 strings,
as well as or instead of the original 8-bit library. The
majority of the work to make this possible was done by
Zoltan Herczeg. The two libraries contain identical sets of
functions, used in exactly the same way. Only the names of
the functions and the data types of their arguments and
results are different. To avoid over-complication and reduce
the documentation maintenance load, most of the PCRE
documentation describes the 8-bit library, with only
occasional references to the 16-bit library. This page
describes what is different when you use the 16-bit
library.</p>

<p style="margin-left:11%; margin-top: 1em">WARNING: A
single application can be linked with both libraries, but
you must take care when processing any particular pattern to
use functions from just one library. For example, if you
want to study a pattern that was compiled with
<b>pcre16_compile()</b>, you must do so with
<b>pcre16_study()</b>, not <b>pcre_study()</b>, and you must
free the study data with <b>pcre16_free_study()</b>.</p>

<h2>THE HEADER FILE
<a name="THE HEADER FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There is only
one header file, <b>pcre.h</b>. It contains prototypes for
all the functions in all libraries, as well as definitions
of flags, structures, error codes, etc.</p>

<h2>THE LIBRARY NAME
<a name="THE LIBRARY NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In Unix-like
systems, the 16-bit library is called <b>libpcre16</b>, and
can normally be accesss by adding <b>-lpcre16</b> to the
command for linking an application that uses PCRE.</p>

<h2>STRING TYPES
<a name="STRING TYPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In the 8-bit
library, strings are passed to PCRE library functions as
vectors of bytes with the C type &quot;char *&quot;. In the
16-bit library, strings are passed as vectors of unsigned
16-bit quantities. The macro PCRE_UCHAR16 specifies an
appropriate data type, and PCRE_SPTR16 is defined as
&quot;const PCRE_UCHAR16 *&quot;. In very many environments,
&quot;short int&quot; is a 16-bit data type. When PCRE is
built, it defines PCRE_UCHAR16 as &quot;unsigned short
int&quot;, but checks that it really is a 16-bit data type.
If it is not, the build fails with an error message telling
the maintainer to modify the definition appropriately.</p>

<h2>STRUCTURE TYPES
<a name="STRUCTURE TYPES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The types of
the opaque structures that are used for compiled 16-bit
patterns and JIT stacks are <b>pcre16</b> and
<b>pcre16_jit_stack</b> respectively. The type of the
user-accessible structure that is returned by
<b>pcre16_study()</b> is <b>pcre16_extra</b>, and the type
of the structure that is used for passing data to a callout
function is <b>pcre16_callout_block</b>. These structures
contain the same fields, with the same names, as their 8-bit
counterparts. The only difference is that pointers to
character strings are 16-bit instead of 8-bit types.</p>

<h2>16-BIT FUNCTIONS
<a name="16-BIT FUNCTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">For every
function in the 8-bit library there is a corresponding
function in the 16-bit library with a name that starts with
<b>pcre16_</b> instead of <b>pcre_</b>. The prototypes are
listed above. In addition, there is one extra function,
<b>pcre16_utf16_to_host_byte_order()</b>. This is a utility
function that converts a UTF-16 character string to host
byte order if necessary. The other 16-bit functions expect
the strings they are passed to be in host byte order.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>input</i> and <i>output</i> arguments of
<b>pcre16_utf16_to_host_byte_order()</b> may point to the
same address, that is, conversion in place is supported. The
output buffer must be at least as long as the input.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>length</i> argument specifies the number of 16-bit data
units in the input string; a negative value specifies a
zero-terminated string.</p>

<p style="margin-left:11%; margin-top: 1em">If
<i>byte_order</i> is NULL, it is assumed that the string
starts off in host byte order. This may be changed by
byte-order marks (BOMs) anywhere in the string (commonly as
the first character).</p>

<p style="margin-left:11%; margin-top: 1em">If
<i>byte_order</i> is not NULL, a non-zero value of the
integer to which it points means that the input starts off
in host byte order, otherwise the opposite order is assumed.
Again, BOMs in the string can change this. The final byte
order is passed back at the end of processing.</p>

<p style="margin-left:11%; margin-top: 1em">If
<i>keep_boms</i> is not zero, byte-order mark characters
(0xfeff) are copied into the output string. Otherwise they
are discarded.</p>

<p style="margin-left:11%; margin-top: 1em">The result of
the function is the number of 16-bit units placed into the
output buffer, including the zero terminator if the string
was zero-terminated.</p>

<h2>SUBJECT STRING OFFSETS
<a name="SUBJECT STRING OFFSETS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The offsets
within subject strings that are returned by the matching
functions are in 16-bit units rather than bytes.</p>

<h2>NAMED SUBPATTERNS
<a name="NAMED SUBPATTERNS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
name-to-number translation table that is maintained for
named subpatterns uses 16-bit characters. The
<b>pcre16_get_stringtable_entries()</b> function returns the
length of each entry in the table as the number of 16-bit
data units.</p>

<h2>OPTION NAMES
<a name="OPTION NAMES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">There are two
new general option names, PCRE_UTF16 and
PCRE_NO_UTF16_CHECK, which correspond to PCRE_UTF8 and
PCRE_NO_UTF8_CHECK in the 8-bit library. In fact, these new
options define the same bits in the options word. There is a
discussion about the validity of UTF-16 strings in the
<b>pcreunicode</b> page.</p>

<p style="margin-left:11%; margin-top: 1em">For the
<b>pcre16_config()</b> function there is an option
PCRE_CONFIG_UTF16 that returns 1 if UTF-16 support is
configured, otherwise 0. If this option is given to
<b>pcre_config()</b> or <b>pcre32_config()</b>, or if the
PCRE_CONFIG_UTF8 or PCRE_CONFIG_UTF32 option is given to
<b>pcre16_config()</b>, the result is the
PCRE_ERROR_BADOPTION error.</p>

<h2>CHARACTER CODES
<a name="CHARACTER CODES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">In 16-bit mode,
when PCRE_UTF16 is not set, character values are treated in
the same way as in 8-bit, non UTF-8 mode, except, of course,
that they can range from 0 to 0xffff instead of 0 to 0xff.
Character types for characters less than 0xff can therefore
be influenced by the locale in the same way as before.
Characters greater than 0xff have only one case, and no
&quot;type&quot; (such as letter or digit).</p>

<p style="margin-left:11%; margin-top: 1em">In UTF-16 mode,
the character code is Unicode, in the range 0 to 0x10ffff,
with the exception of values in the range 0xd800 to 0xdfff
because those are &quot;surrogate&quot; values that are used
in pairs to encode values greater than 0xffff.</p>

<p style="margin-left:11%; margin-top: 1em">A UTF-16 string
can indicate its endianness by special code knows as a
byte-order mark (BOM). The PCRE functions do not handle
this, expecting strings to be in host byte order. A utility
function called <b>pcre16_utf16_to_host_byte_order()</b> is
provided to help with this (see above).</p>

<h2>ERROR NAMES
<a name="ERROR NAMES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The errors
PCRE_ERROR_BADUTF16_OFFSET and PCRE_ERROR_SHORTUTF16
correspond to their 8-bit counterparts. The error
PCRE_ERROR_BADMODE is given when a compiled pattern is
passed to a function that processes patterns in the other
mode, for example, if a pattern compiled with
<b>pcre_compile()</b> is passed to <b>pcre16_exec()</b>.</p>

<p style="margin-left:11%; margin-top: 1em">There are new
error codes whose names begin with PCRE_UTF16_ERR for
invalid UTF-16 strings, corresponding to the PCRE_UTF8_ERR
codes for UTF-8 strings that are described in the section
entitled &quot;Reason codes for invalid UTF-8 strings&quot;
in the main <b>pcreapi</b> page. The UTF-16 errors are:</p>


<p style="margin-left:11%; margin-top: 1em">PCRE_UTF16_ERR1
Missing low surrogate at end of string <br>
PCRE_UTF16_ERR2 Invalid low surrogate follows high surrogate
<br>
PCRE_UTF16_ERR3 Isolated low surrogate <br>
PCRE_UTF16_ERR4 Non-character</p>

<h2>ERROR TEXTS
<a name="ERROR TEXTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If there is an
error while compiling a pattern, the error text that is
passed back by <b>pcre16_compile()</b> or
<b>pcre16_compile2()</b> is still an 8-bit character string,
zero-terminated.</p>

<h2>CALLOUTS
<a name="CALLOUTS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>subject</i> and <i>mark</i> fields in the callout block
that is passed to a callout function point to 16-bit
vectors.</p>

<h2>TESTING
<a name="TESTING"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<b>pcretest</b> program continues to operate with 8-bit
input and output files, but it can be used for testing the
16-bit library. If it is run with the command line option
<b>-16</b>, patterns and subject strings are converted from
8-bit to 16-bit before being passed to PCRE, and the 16-bit
library functions are used instead of the 8-bit ones.
Returned 16-bit strings are converted to 8-bit for output.
If both the 8-bit and the 32-bit libraries were not
compiled, <b>pcretest</b> defaults to 16-bit and the
<b>-16</b> option is ignored.</p>

<p style="margin-left:11%; margin-top: 1em">When PCRE is
being built, the <b>RunTest</b> script that is called by
&quot;make check&quot; uses the <b>pcretest -C</b> option to
discover which of the 8-bit, 16-bit and 32-bit libraries has
been built, and runs the tests appropriately.</p>

<h2>NOT SUPPORTED IN 16-BIT MODE
<a name="NOT SUPPORTED IN 16-BIT MODE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Not all the
features of the 8-bit library are available with the 16-bit
library. The C++ and POSIX wrapper functions support only
the 8-bit library, and the <b>pcregrep</b> program is at
present 8-bit only.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Philip Hazel
<br>
University Computing Service <br>
Cambridge CB2 3QH, England.</p>

<h2>REVISION
<a name="REVISION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Last updated:
08 November 2012 <br>
Copyright (c) 1997-2012 University of Cambridge.</p>
<hr>
</body>
</html>
