<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:23:07 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>KRB5.CONF</title>

</head>
<body>

<h1 align="center">KRB5.CONF</h1>

<a href="#NAME">NAME</a><br>
<a href="#STRUCTURE">STRUCTURE</a><br>
<a href="#SECTIONS">SECTIONS</a><br>
<a href="#PKINIT OPTIONS">PKINIT OPTIONS</a><br>
<a href="#PARAMETER EXPANSION">PARAMETER EXPANSION</a><br>
<a href="#SAMPLE KRB5.CONF FILE">SAMPLE KRB5.CONF FILE</a><br>
<a href="#FILES">FILES</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#COPYRIGHT">COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">krb5.conf
&minus; Kerberos configuration file</p>

<p style="margin-left:11%; margin-top: 1em">The krb5.conf
file contains Kerberos configuration information, including
the locations of KDCs and admin servers for the Kerberos
realms of interest, defaults for the current realm and for
Kerberos applications, and mappings of hostnames onto
Kerberos realms. Normally, you should install your krb5.conf
file in the directory <b>/etc</b>. You can override the
default location by setting the environment variable
<b>KRB5_CONFIG</b>.</p>

<h2>STRUCTURE
<a name="STRUCTURE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The krb5.conf
file is set up in the style of a Windows INI file. Sections
are headed by the section name, in square brackets. Each
section may contain zero or more relations, of the form:</p>

<pre style="margin-left:15%; margin-top: 1em">foo = bar</pre>


<p style="margin-left:11%; margin-top: 1em">or:</p>

<pre style="margin-left:15%; margin-top: 1em">fubar = {
    foo = bar
    baz = quux
}</pre>


<p style="margin-left:11%; margin-top: 1em">Placing a '*'
at the end of a line indicates that this is the <i>final</i>
value for the tag. This means that neither the remainder of
this configuration file nor any other configuration file
will be checked for any other values for this tag.</p>

<p style="margin-left:11%; margin-top: 1em">For example, if
you have the following lines:</p>

<pre style="margin-left:15%; margin-top: 1em">foo = bar*
foo = baz</pre>


<p style="margin-left:11%; margin-top: 1em">then the second
value of <b>foo</b> (<b>baz</b>) would never be read.</p>

<p style="margin-left:11%; margin-top: 1em">The krb5.conf
file can include other files using either of the following
directives at the beginning of a line:</p>

<pre style="margin-left:15%; margin-top: 1em">include FILENAME
includedir DIRNAME</pre>



<p style="margin-left:11%; margin-top: 1em"><i>FILENAME</i>
or <i>DIRNAME</i> should be an absolute path. The named file
or directory must exist and be readable. Including a
directory includes all files within the directory whose
names consist solely of alphanumeric characters, dashes, or
underscores. Included profile files are syntactically
independent of their parents, so each included file must
begin with a section header.</p>

<p style="margin-left:11%; margin-top: 1em">The krb5.conf
file can specify that configuration should be obtained from
a loadable module, rather than the file itself, using the
following directive at the beginning of a line before any
section headers:</p>

<pre style="margin-left:15%; margin-top: 1em">module MODULEPATH:RESIDUAL</pre>



<p style="margin-left:11%; margin-top: 1em"><i>MODULEPATH</i>
may be relative to the library path of the krb5
installation, or it may be an absolute path. <i>RESIDUAL</i>
is provided to the module at initialization time. If
krb5.conf uses a module directive, <i>kdc.conf(5)</i> should
also use one if it exists.</p>

<h2>SECTIONS
<a name="SECTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The krb5.conf
file may contain the following sections:</p>

<p style="margin-left:11%; margin-top: 1em">Additionally,
krb5.conf may include any of the relations described in
<i>kdc.conf(5)</i>, but it is not a recommended
practice.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[libdefaults]</b>
<br>
The libdefaults section may contain any of the following
relations: <b><br>
allow_weak_crypto</b></p>

<p style="margin-left:22%;">If this flag is set to false,
then weak encryption types (as noted in
<i>Encryption_types</i> in <i>kdc.conf(5)</i>) will be
filtered out of the lists <b>default_tgs_enctypes</b>,
<b>default_tkt_enctypes</b>, and <b>permitted_enctypes</b>.
The default value for this tag is false, which may cause
authentication failures in existing Kerberos infrastructures
that do not support strong crypto. Users in affected
environments should set this tag to true until their
infrastructure adopts stronger ciphers.</p>


<p style="margin-left:11%;"><b>ap_req_checksum_type</b></p>

<p style="margin-left:22%;">An integer which specifies the
type of AP&minus;REQ checksum to use in authenticators. This
variable should be unset so the appropriate checksum for the
encryption key in use will be used. This can be set if
backward compatibility requires a specific checksum type.
See the <b>kdc_req_checksum_type</b> configuration option
for the possible values and their meanings.</p>

<p style="margin-left:11%;"><b>canonicalize</b></p>

<p style="margin-left:22%;">If this flag is set to true,
initial ticket requests to the KDC will request
canonicalization of the client principal name, and answers
with different client principals than the requested
principal will be accepted. The default value is false.</p>

<p style="margin-left:11%;"><b>ccache_type</b></p>

<p style="margin-left:22%;">This parameter determines the
format of credential cache types created by <i>kinit(1)</i>
or other programs. The default value is 4, which represents
the most current format. Smaller values can be used for
compatibility with very old implementations of Kerberos
which interact with credential caches on the same host.</p>

<p style="margin-left:11%;"><b>clockskew</b></p>

<p style="margin-left:22%;">Sets the maximum allowable
amount of clockskew in seconds that the library will
tolerate before assuming that a Kerberos message is invalid.
The default value is 300 seconds, or five minutes.</p>

<p style="margin-left:22%; margin-top: 1em">The clockskew
setting is also used when evaluating ticket start and
expiration times. For example, tickets that have reached
their expiration time can still be used (and renewed if they
are renewable tickets) if they have been expired for a
shorter duration than the <b>clockskew</b> setting.</p>

<p style="margin-left:11%;"><b>default_ccache_name</b></p>

<p style="margin-left:22%;">This relation specifies the
name of the default credential cache. The default is
<b>FILE:/tmp/krb5cc_%{uid}</b>. This relation is subject to
parameter expansion (see below). New in release 1.11.</p>


<p style="margin-left:11%;"><b>default_client_keytab_name</b></p>

<p style="margin-left:22%;">This relation specifies the
name of the default keytab for obtaining client credentials.
The default is
<b>FILE:/var/kerberos/krb5/user/%{euid}/client.keytab</b>.
This relation is subject to parameter expansion (see below).
New in release 1.11.</p>

<p style="margin-left:11%;"><b>default_keytab_name</b></p>

<p style="margin-left:22%;">This relation specifies the
default keytab name to be used by application servers such
as sshd. The default is <b>FILE:/etc/krb5.keytab</b>. This
relation is subject to parameter expansion (see below).</p>

<p style="margin-left:11%;"><b>default_realm</b></p>

<p style="margin-left:22%;">Identifies the default Kerberos
realm for the client. Set its value to your Kerberos realm.
If this value is not set, then a realm must be specified
with every Kerberos principal when invoking programs such as
<i>kinit(1)</i>.</p>


<p style="margin-left:11%;"><b>default_tgs_enctypes</b></p>

<p style="margin-left:22%;">Identifies the supported list
of session key encryption types that the client should
request when making a TGS&minus;REQ, in order of preference
from highest to lowest. The list may be delimited with
commas or whitespace. See <i>Encryption_types</i> in
<i>kdc.conf(5)</i> for a list of the accepted values for
this tag. The default value is
<b>aes256&minus;cts&minus;hmac&minus;sha1&minus;96
aes128&minus;cts&minus;hmac&minus;sha1&minus;96
des3&minus;cbc&minus;sha1 arcfour&minus;hmac&minus;md5
camellia256&minus;cts&minus;cmac
camellia128&minus;cts&minus;cmac des&minus;cbc&minus;crc
des&minus;cbc&minus;md5 des&minus;cbc&minus;md4</b>, but
single&minus;DES encryption types will be implicitly removed
from this list if the value of <b>allow_weak_crypto</b> is
false.</p>

<p style="margin-left:22%; margin-top: 1em">Do not set this
unless required for specific backward compatibility
purposes; stale values of this setting can prevent clients
from taking advantage of new stronger enctypes when the
libraries are upgraded.</p>


<p style="margin-left:11%;"><b>default_tkt_enctypes</b></p>

<p style="margin-left:22%;">Identifies the supported list
of session key encryption types that the client should
request when making an AS&minus;REQ, in order of preference
from highest to lowest. The format is the same as for
default_tgs_enctypes. The default value for this tag is
<b>aes256&minus;cts&minus;hmac&minus;sha1&minus;96
aes128&minus;cts&minus;hmac&minus;sha1&minus;96
des3&minus;cbc&minus;sha1 arcfour&minus;hmac&minus;md5
camellia256&minus;cts&minus;cmac
camellia128&minus;cts&minus;cmac des&minus;cbc&minus;crc
des&minus;cbc&minus;md5 des&minus;cbc&minus;md4</b>, but
single&minus;DES encryption types will be implicitly removed
from this list if the value of <b>allow_weak_crypto</b> is
false.</p>

<p style="margin-left:22%; margin-top: 1em">Do not set this
unless required for specific backward compatibility
purposes; stale values of this setting can prevent clients
from taking advantage of new stronger enctypes when the
libraries are upgraded.</p>


<p style="margin-left:11%;"><b>dns_canonicalize_hostname</b></p>

<p style="margin-left:22%;">Indicate whether name lookups
will be used to canonicalize hostnames for use in service
principal names. Setting this flag to false can improve
security by reducing reliance on DNS, but means that short
hostnames will not be canonicalized to fully&minus;qualified
hostnames. The default value is true.</p>

<p style="margin-left:11%;"><b>dns_lookup_kdc</b></p>

<p style="margin-left:22%;">Indicate whether DNS SRV
records should be used to locate the KDCs and other servers
for a realm, if they are not listed in the krb5.conf
information for the realm. (Note that the admin_server entry
must be in the krb5.conf realm information in order to
contact kadmind, because the DNS implementation for kadmin
is incomplete.)</p>

<p style="margin-left:22%; margin-top: 1em">Enabling this
option does open up a type of denial&minus;of&minus;service
attack, if someone spoofs the DNS records and redirects you
to another server. However, it's no worse than a denial of
service, because that fake KDC will be unable to decode
anything you send it (besides the initial ticket request,
which has no encrypted data), and anything the fake KDC
sends will not be trusted without verification using some
secret that it won't know.</p>

<p style="margin-left:11%;"><b>extra_addresses</b></p>

<p style="margin-left:22%;">This allows a computer to use
multiple local addresses, in order to allow Kerberos to work
in a network that uses NATs while still using
address&minus;restricted tickets. The addresses should be in
a comma&minus;separated list. This option has no effect if
<b>noaddresses</b> is true.</p>

<p style="margin-left:11%;"><b>forwardable</b></p>

<p style="margin-left:22%;">If this flag is true, initial
tickets will be forwardable by default, if allowed by the
KDC. The default value is false.</p>


<p style="margin-left:11%;"><b>ignore_acceptor_hostname</b></p>

<p style="margin-left:22%;">When accepting GSSAPI or krb5
security contexts for host&minus;based service principals,
ignore any hostname passed by the calling application, and
allow clients to authenticate to any service principal in
the keytab matching the service name and realm name (if
given). This option can improve the administrative
flexibility of server applications on multihomed hosts, but
could compromise the security of virtual hosting
environments. The default value is false. New in release
1.10.</p>


<p style="margin-left:11%;"><b>k5login_authoritative</b></p>

<p style="margin-left:22%;">If this flag is true,
principals must be listed in a local user's k5login file to
be granted login access, if a <i>.k5login(5)</i> file
exists. If this flag is false, a principal may still be
granted login access through other mechanisms even if a
k5login file exists but does not list the principal. The
default value is true.</p>

<p style="margin-left:11%;"><b>k5login_directory</b></p>

<p style="margin-left:22%;">If set, the library will look
for a local user's k5login file within the named directory,
with a filename corresponding to the local username. If not
set, the library will look for k5login files in the user's
home directory, with the filename .k5login. For security
reasons, .k5login files must be owned by the local user or
by root.</p>

<p style="margin-left:11%;"><b>kcm_mach_service</b></p>

<p style="margin-left:22%;">On OS X only, determines the
name of the bootstrap service used to contact the KCM daemon
for the KCM credential cache type. If the value is
<b>&minus;</b>, Mach RPC will not be used to contact the KCM
daemon. The default value is <b>org.h5l.kcm</b>.</p>

<p style="margin-left:11%;"><b>kcm_socket</b></p>

<p style="margin-left:22%;">Determines the path to the Unix
domain socket used to access the KCM daemon for the KCM
credential cache type. If the value is <b>&minus;</b>, Unix
domain sockets will not be used to contact the KCM daemon.
The default value is
<b>/var/run/.heim_org.h5l.kcm&minus;socket</b>.</p>

<p style="margin-left:11%;"><b>kdc_default_options</b></p>

<p style="margin-left:22%;">Default KDC options (Xored for
multiple values) when requesting initial tickets. By default
it is set to 0x00000010 (KDC_OPT_RENEWABLE_OK).</p>

<p style="margin-left:11%;"><b>kdc_timesync</b></p>

<p style="margin-left:22%;">Accepted values for this
relation are 1 or 0. If it is nonzero, client machines will
compute the difference between their time and the time
returned by the KDC in the timestamps in the tickets and use
this value to correct for an inaccurate system clock when
requesting service tickets or authenticating to services.
This corrective factor is only used by the Kerberos library;
it is not used to change the system clock. The default value
is 1.</p>


<p style="margin-left:11%;"><b>kdc_req_checksum_type</b></p>

<p style="margin-left:22%;">An integer which specifies the
type of checksum to use for the KDC requests, for
compatibility with very old KDC implementations. This value
is only used for DES keys; other keys use the preferred
checksum type for those keys.</p>

<p style="margin-left:22%; margin-top: 1em">The possible
values and their meanings are as follows.</p>


<p style="margin-left:11%; margin-top: 1em"><b>noaddresses</b></p>

<p style="margin-left:22%;">If this flag is true, requests
for initial tickets will not be made with address
restrictions set, allowing the tickets to be used across
NATs. The default value is true.</p>

<p style="margin-left:11%;"><b>permitted_enctypes</b></p>

<p style="margin-left:22%;">Identifies all encryption types
that are permitted for use in session key encryption. The
default value for this tag is
<b>aes256&minus;cts&minus;hmac&minus;sha1&minus;96
aes128&minus;cts&minus;hmac&minus;sha1&minus;96
des3&minus;cbc&minus;sha1 arcfour&minus;hmac&minus;md5
camellia256&minus;cts&minus;cmac
camellia128&minus;cts&minus;cmac des&minus;cbc&minus;crc
des&minus;cbc&minus;md5 des&minus;cbc&minus;md4</b>, but
single&minus;DES encryption types will be implicitly removed
from this list if the value of <b>allow_weak_crypto</b> is
false.</p>

<p style="margin-left:11%;"><b>plugin_base_dir</b></p>

<p style="margin-left:22%;">If set, determines the base
directory where krb5 plugins are located. The default value
is the <b>krb5/plugins</b> subdirectory of the krb5 library
directory.</p>


<p style="margin-left:11%;"><b>preferred_preauth_types</b></p>

<p style="margin-left:22%;">This allows you to set the
preferred preauthentication types which the client will
attempt before others which may be advertised by a KDC. The
default value for this setting is &quot;17, 16, 15,
14&quot;, which forces libkrb5 to attempt to use PKINIT if
it is supported.</p>

<p style="margin-left:11%;"><b>proxiable</b></p>

<p style="margin-left:22%;">If this flag is true, initial
tickets will be proxiable by default, if allowed by the KDC.
The default value is false.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="6%">


<p><b>rdns</b></p></td>
<td width="5%"></td>
<td width="78%">


<p>If this flag is true, reverse name lookup will be used
in addition to forward name lookup to canonicalizing
hostnames for use in service principal names. If
<b>dns_canonicalize_hostname</b> is set to false, this flag
has no effect. The default value is true.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>realm_try_domains</b></p>

<p style="margin-left:22%;">Indicate whether a host's
domain components should be used to determine the Kerberos
realm of the host. The value of this variable is an integer:
&minus;1 means not to search, 0 means to try the host's
domain itself, 1 means to also try the domain's immediate
parent, and so forth. The library's usual mechanism for
locating Kerberos realms is used to determine whether a
domain is a valid realm, which may involve consulting DNS if
<b>dns_lookup_kdc</b> is set. The default is not to search
domain components.</p>

<p style="margin-left:11%;"><b>renew_lifetime</b></p>

<p style="margin-left:22%;">(<i>duration</i> string.) Sets
the default renewable lifetime for initial ticket requests.
The default value is 0.</p>

<p style="margin-left:11%;"><b>safe_checksum_type</b></p>

<p style="margin-left:22%;">An integer which specifies the
type of checksum to use for the KRB&minus;SAFE requests. By
default it is set to 8 (RSA MD5 DES). For compatibility with
applications linked against DCE version 1.1 or earlier
Kerberos libraries, use a value of 3 to use the RSA MD4 DES
instead. This field is ignored when its value is
incompatible with the session key type. See the
<b>kdc_req_checksum_type</b> configuration option for the
possible values and their meanings.</p>

<p style="margin-left:11%;"><b>ticket_lifetime</b></p>

<p style="margin-left:22%;">(<i>duration</i> string.) Sets
the default lifetime for initial ticket requests. The
default value is 1 day.</p>


<p style="margin-left:11%;"><b>udp_preference_limit</b></p>

<p style="margin-left:22%;">When sending a message to the
KDC, the library will try using TCP before UDP if the size
of the message is above <b>udp_preference_limit</b>. If the
message is smaller than <b>udp_preference_limit</b>, then
UDP will be tried before TCP. Regardless of the size, both
protocols will be tried if the first attempt fails.</p>


<p style="margin-left:11%;"><b>verify_ap_req_nofail</b></p>

<p style="margin-left:22%;">If this flag is true, then an
attempt to verify initial credentials will fail if the
client machine does not have a keytab. The default value is
false.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[realms]</b>
<br>
Each tag in the [realms] section of the file is the name of
a Kerberos realm. The value of the tag is a subsection with
relations that define the properties of that particular
realm. For each realm, the following tags may be specified
in the realm's subsection: <b><br>
admin_server</b></p>

<p style="margin-left:22%;">Identifies the host where the
administration server is running. Typically, this is the
master Kerberos server. This tag must be given a value in
order to communicate with the <i>kadmind(8)</i> server for
the realm.</p>

<p style="margin-left:11%;"><b>auth_to_local</b></p>

<p style="margin-left:22%;">This tag allows you to set a
general rule for mapping principal names to local user
names. It will be used if there is not an explicit mapping
for the principal name that is being translated. The
possible values are: <b><br>
RULE:</b><i>exp</i></p>

<p style="margin-left:32%;">The local name will be
formulated from <i>exp</i>.</p>

<p style="margin-left:32%; margin-top: 1em">The format for
<i>exp</i> is
<b>[</b><i>n</i><b>:</b><i>string</i><b>](</b><i>regexp</i><b>)s/</b><i>pattern</i><b>/</b><i>replacement</i><b>/g</b>.
The integer <i>n</i> indicates how many components the
target principal should have. If this matches, then a string
will be formed from <i>string</i>, substituting the realm of
the principal for <b>$0</b> and the <i>n</i>'th component of
the principal for <b>$n</b> (e.g., if the principal was
<b>johndoe/admin</b> then <b>[2:$2$1foo]</b> would result in
the string <b>adminjohndoefoo</b>). If this string matches
<i>regexp</i>, then the <b>s//[g]</b> substitution command
will be run over the string. The optional <b>g</b> will
cause the substitution to be global over the <i>string</i>,
instead of replacing only the first match in the
<i>string</i>.</p>

<p style="margin-left:22%;"><b>DEFAULT</b></p>

<p style="margin-left:32%;">The principal name will be used
as the local user name. If the principal has more than one
component or is not in the default realm, this rule is not
applicable and the conversion will fail.</p>

<p style="margin-left:22%; margin-top: 1em">For
example:</p>

<pre style="margin-left:26%; margin-top: 1em">[realms]
    ATHENA.MIT.EDU = {
        auth_to_local = RULE:[2:$1](johndoe)s/^.*$/guest/
        auth_to_local = RULE:[2:$1;$2](^.*;admin$)s/;admin$//
        auth_to_local = RULE:[2:$2](^.*;root)s/^.*$/root/
        auto_to_local = DEFAULT
    }</pre>


<p style="margin-left:22%; margin-top: 1em">would result in
any principal without <b>root</b> or <b>admin</b> as the
second component to be translated with the default rule. A
principal with a second component of <b>admin</b> will
become its first component. <b>root</b> will be used as the
local name for any principal with a second component of
<b>root</b>. The exception to these two rules are any
principals <b>johndoe/*</b>, which will always get the local
name <b>guest</b>.</p>

<p style="margin-left:11%;"><b>auth_to_local_names</b></p>

<p style="margin-left:22%;">This subsection allows you to
set explicit mappings from principal names to local user
names. The tag is the mapping name, and the value is the
corresponding local user name.</p>

<p style="margin-left:11%;"><b>default_domain</b></p>

<p style="margin-left:22%;">This tag specifies the domain
used to expand hostnames when translating Kerberos 4 service
principals to Kerberos 5 principals (for example, when
converting <b>rcmd.hostname</b> to
<b>host/hostname.domain</b>).</p>

<p style="margin-left:11%;"><b>http_anchors</b></p>

<p style="margin-left:22%;">When KDCs and kpasswd servers
are accessed through HTTPS proxies, this tag can be used to
specify the location of the CA certificate which should be
trusted to issue the certificate for a proxy server. If left
unspecified, the system&minus;wide default set of CA
certificates is used.</p>

<p style="margin-left:22%; margin-top: 1em">The syntax for
values is similar to that of values for the
<b>pkinit_anchors</b> tag:</p>

<p style="margin-left:22%; margin-top: 1em"><b>FILE:</b>
<i>filename</i></p>


<p style="margin-left:22%; margin-top: 1em"><i>filename</i>
is assumed to be the name of an OpenSSL&minus;style
ca&minus;bundle file.</p>

<p style="margin-left:22%; margin-top: 1em"><b>DIR:</b>
<i>dirname</i></p>

<p style="margin-left:22%; margin-top: 1em"><i>dirname</i>
is assumed to be an directory which contains CA
certificates. All files in the directory will be examined;
if they contain certificates (in PEM format), they will be
used.</p>

<p style="margin-left:22%; margin-top: 1em"><b>ENV:</b>
<i>envvar</i></p>

<p style="margin-left:22%; margin-top: 1em"><i>envvar</i>
specifies the name of an environment variable which has been
set to a value conforming to one of the previous values. For
example, <b>ENV:X509_PROXY_CA</b>, where environment
variable <b>X509_PROXY_CA</b> has been set to
<b>FILE:/tmp/my_proxy.pem</b>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="4%">


<p><b>kdc</b></p></td>
<td width="7%"></td>
<td width="78%">


<p>The name or address of a host running a KDC for that
realm. An optional port number, separated from the hostname
by a colon, may be included. If the name or address contains
colons (for example, if it is an IPv6 address), enclose it
in square brackets to distinguish the colon from a port
separator. For your computer to be able to communicate with
the KDC for each realm, this tag must be given a value in
each realm subsection in the configuration file, or there
must be DNS SRV records specifying the KDCs.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>kpasswd_server</b></p>

<p style="margin-left:22%;">Points to the server where all
the password changes are performed. If there is no such
entry, the port 464 on the <b>admin_server</b> host will be
tried.</p>

<p style="margin-left:11%;"><b>master_kdc</b></p>

<p style="margin-left:22%;">Identifies the master KDC(s).
Currently, this tag is used in only one case: If an attempt
to get credentials fails because of an invalid password, the
client software will attempt to contact the master KDC, in
case the user's password has just been changed, and the
updated database has not been propagated to the slave
servers yet.</p>

<p style="margin-left:11%;"><b>v4_instance_convert</b></p>

<p style="margin-left:22%;">This subsection allows the
administrator to configure exceptions to the
<b>default_domain</b> mapping rule. It contains V4 instances
(the tag name) which should be translated to some specific
hostname (the tag value) as the second component in a
Kerberos V5 principal name.</p>

<p style="margin-left:11%;"><b>v4_realm</b></p>

<p style="margin-left:22%;">This relation is used by the
krb524 library routines when converting a V5 principal name
to a V4 principal name. It is used when the V4 realm name
and the V5 realm name are not the same, but still share the
same principal names and passwords. The tag value is the
Kerberos V4 realm name.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[domain_realm]</b>
<br>
The [domain_realm] section provides a translation from a
domain name or hostname to a Kerberos realm name. The tag
name can be a host name or domain name, where domain names
are indicated by a prefix of a period (<b>.</b>). The value
of the relation is the Kerberos realm name for that
particular host or domain. A host name relation implicitly
provides the corresponding domain name relation, unless an
explicit domain name relation is provided. The Kerberos
realm may be identified either in the <i>realms</i> section
or using DNS SRV records. Host names and domain names should
be in lower case. For example:</p>

<pre style="margin-left:15%; margin-top: 1em">[domain_realm]
    crash.mit.edu = TEST.ATHENA.MIT.EDU
    .dev.mit.edu = TEST.ATHENA.MIT.EDU
    mit.edu = ATHENA.MIT.EDU</pre>


<p style="margin-left:11%; margin-top: 1em">maps the host
with the name <b>crash.mit.edu</b> into the
<b>TEST.ATHENA.MIT.EDU</b> realm. The second entry maps all
hosts under the domain <b>dev.mit.edu</b> into the
<b>TEST.ATHENA.MIT.EDU</b> realm, but not the host with the
name <b>dev.mit.edu</b>. That host is matched by the third
entry, which maps the host <b>mit.edu</b> and all hosts
under the domain <b>mit.edu</b> that do not match a
preceding rule into the realm <b>ATHENA.MIT.EDU</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If no
translation entry applies to a hostname used for a service
principal for a service ticket request, the library will try
to get a referral to the appropriate realm from the client
realm's KDC. If that does not succeed, the host's realm is
considered to be the hostname's domain portion converted to
uppercase, unless the <b>realm_try_domains</b> setting in
[libdefaults] causes a different parent domain to be
used.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[capaths]</b>
<br>
In order to perform direct (non&minus;hierarchical)
cross&minus;realm authentication, configuration is needed to
determine the authentication paths between realms.</p>

<p style="margin-left:11%; margin-top: 1em">A client will
use this section to find the authentication path between its
realm and the realm of the server. The server will use this
section to verify the authentication path used by the
client, by checking the transited field of the received
ticket.</p>

<p style="margin-left:11%; margin-top: 1em">There is a tag
for each participating client realm, and each tag has
subtags for each of the server realms. The value of the
subtags is an intermediate realm which may participate in
the cross&minus;realm authentication. The subtags may be
repeated if there is more then one intermediate realm. A
value of &quot;.&quot; means that the two realms share keys
directly, and no intermediate realms should be allowed to
participate.</p>

<p style="margin-left:11%; margin-top: 1em">Only those
entries which will be needed on the client or the server
need to be present. A client needs a tag for its local realm
with subtags for all the realms of servers it will need to
authenticate to. A server needs a tag for each realm of the
clients it will serve, with a subtag of the server
realm.</p>

<p style="margin-left:11%; margin-top: 1em">For example,
<b>ANL.GOV</b>, <b>PNL.GOV</b>, and <b>NERSC.GOV</b> all
wish to use the <b>ES.NET</b> realm as an intermediate
realm. ANL has a sub realm of <b>TEST.ANL.GOV</b> which will
authenticate with <b>NERSC.GOV</b> but not <b>PNL.GOV</b>.
The [capaths] section for <b>ANL.GOV</b> systems would look
like this:</p>

<pre style="margin-left:15%; margin-top: 1em">[capaths]
    ANL.GOV = {
        TEST.ANL.GOV = .
        PNL.GOV = ES.NET
        NERSC.GOV = ES.NET
        ES.NET = .
    }
    TEST.ANL.GOV = {
        ANL.GOV = .
    }
    PNL.GOV = {
        ANL.GOV = ES.NET
    }
    NERSC.GOV = {
        ANL.GOV = ES.NET
    }
    ES.NET = {
        ANL.GOV = .
    }</pre>


<p style="margin-left:11%; margin-top: 1em">The [capaths]
section of the configuration file used on <b>NERSC.GOV</b>
systems would look like this:</p>

<pre style="margin-left:15%; margin-top: 1em">[capaths]
    NERSC.GOV = {
        ANL.GOV = ES.NET
        TEST.ANL.GOV = ES.NET
        TEST.ANL.GOV = ANL.GOV
        PNL.GOV = ES.NET
        ES.NET = .
    }
    ANL.GOV = {
        NERSC.GOV = ES.NET
    }
    PNL.GOV = {
        NERSC.GOV = ES.NET
    }
    ES.NET = {
        NERSC.GOV = .
    }
    TEST.ANL.GOV = {
        NERSC.GOV = ANL.GOV
        NERSC.GOV = ES.NET
    }</pre>


<p style="margin-left:11%; margin-top: 1em">When a subtag
is used more than once within a tag, clients will use the
order of values to determine the path. The order of values
is not important to servers.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[appdefaults]</b>
<br>
Each tag in the [appdefaults] section names a Kerberos V5
application or an option that is used by some Kerberos V5
application[s]. The value of the tag defines the default
behaviors for that application.</p>

<p style="margin-left:11%; margin-top: 1em">For
example:</p>

<pre style="margin-left:15%; margin-top: 1em">[appdefaults]
    telnet = {
        ATHENA.MIT.EDU = {
            option1 = false
        }
    }
    telnet = {
        option1 = true
        option2 = true
    }
    ATHENA.MIT.EDU = {
        option2 = false
    }
    option2 = true</pre>


<p style="margin-left:11%; margin-top: 1em">The above four
ways of specifying the value of an option are shown in order
of decreasing precedence. In this example, if telnet is
running in the realm EXAMPLE.COM, it should, by default,
have option1 and option2 set to true. However, a telnet
program in the realm <b>ATHENA.MIT.EDU</b> should have
<b>option1</b> set to false and <b>option2</b> set to true.
Any other programs in ATHENA.MIT.EDU should have
<b>option2</b> set to false by default. Any programs running
in other realms should have <b>option2</b> set to true.</p>

<p style="margin-left:11%; margin-top: 1em">The list of
specifiable options for each application may be found in
that application's man pages. The application defaults
specified here are overridden by those specified in the
<i>realms</i> section.</p>


<p style="margin-left:11%; margin-top: 1em"><b>[plugins]</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="15%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="54%">


<p><i>pwqual</i> interface</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="15%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="54%">


<p><i>kadm5_hook</i> interface</p></td>
<td width="28%">
</td></tr>
<tr valign="top" align="left">
<td width="15%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="54%">


<p><i>clpreauth</i> and <i>kdcpreauth</i> interfaces</p></td>
<td width="28%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">Tags in the
[plugins] section can be used to register dynamic plugin
modules and to turn modules on and off. Not every krb5
pluggable interface uses the [plugins] section; the ones
that do are documented here.</p>

<p style="margin-left:11%; margin-top: 1em">New in release
1.9.</p>

<p style="margin-left:11%; margin-top: 1em">Each pluggable
interface corresponds to a subsection of [plugins]. All
subsections support the same tags: <b><br>
disable</b></p>

<p style="margin-left:22%;">This tag may have multiple
values. If there are values for this tag, then the named
modules will be disabled for the pluggable interface.</p>

<p style="margin-left:11%;"><b>enable_only</b></p>

<p style="margin-left:22%;">This tag may have multiple
values. If there are values for this tag, then only the
named modules will be enabled for the pluggable
interface.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>module</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This tag may have multiple values. Each value is a
string of the form <b>modulename:pathname</b>, which causes
the shared object located at <i>pathname</i> to be
registered as a dynamic module named <i>modulename</i> for
the pluggable interface. If <i>pathname</i> is not an
absolute path, it will be treated as relative to the
<b>plugin_base_dir</b> value from <i>[libdefaults]</i>.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">For pluggable
interfaces where module order matters, modules registered
with a <b>module</b> tag normally come first, in the order
they are registered, followed by built&minus;in modules in
the order they are documented below. If <b>enable_only</b>
tags are used, then the order of those tags overrides the
normal module order.</p>

<p style="margin-left:11%; margin-top: 1em">The following
subsections are currently supported within the [plugins]
section:</p>

<p style="margin-left:11%; margin-top: 1em"><b>ccselect
interface</b> <br>
The ccselect subsection controls modules for credential
cache selection within a cache collection. In addition to
any registered dynamic modules, the following built&minus;in
modules exist (and may be disabled with the disable tag):
<b><br>
k5identity</b></p>

<p style="margin-left:22%;">Uses a .k5identity file in the
user's home directory to select a client principal</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>realm</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>Uses the service realm to guess an appropriate cache
from the collection</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>pwqual
interface</b> <br>
The pwqual subsection controls modules for the password
quality interface, which is used to reject weak passwords
when passwords are changed. The following built&minus;in
modules exist for this interface:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>dict</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">Checks against the realm
dictionary file</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>empty</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Rejects empty passwords</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>hesiod</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Checks against user information stored in Hesiod (only
if Kerberos was built with Hesiod support)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>princ</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>Checks against components of the principal name</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>kadm5_hook
interface</b> <br>
The kadm5_hook interface provides plugins with information
on principal creation, modification, password changes and
deletion. This interface can be used to write a plugin to
synchronize MIT Kerberos with another database such as
Active Directory. No plugins are built in for this
interface.</p>

<p style="margin-left:11%; margin-top: 1em"><b>clpreauth
and kdcpreauth interfaces</b> <br>
The clpreauth and kdcpreauth interfaces allow plugin modules
to provide client and KDC preauthentication mechanisms. The
following built&minus;in modules exist for these
interfaces:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p style="margin-top: 1em"><b>pkinit</b></p></td>
<td width="2%"></td>
<td width="78%">


<p style="margin-top: 1em">This module implements the
PKINIT preauthentication mechanism.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>encrypted_challenge</b></p>

<p style="margin-left:22%;">This module implements the
encrypted challenge FAST factor.</p>

<p style="margin-left:11%;"><b>encrypted_timestamp</b></p>

<p style="margin-left:22%;">This module implements the
encrypted timestamp mechanism.</p>

<p style="margin-left:11%; margin-top: 1em"><b>hostrealm
interface</b> <br>
The hostrealm section (introduced in release 1.12) controls
modules for the host&minus;to&minus;realm interface, which
affects the local mapping of hostnames to realm names and
the choice of default realm. The following built&minus;in
modules exist for this interface: <b><br>
profile</b></p>

<p style="margin-left:22%;">This module consults the
[domain_realm] section of the profile for authoritative
host&minus;to&minus;realm mappings, and the
<b>default_realm</b> variable for the default realm.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>dns</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This module looks for DNS records for fallback
host&minus;to&minus;realm mappings and the default realm. It
only operates if the <b>dns_lookup_realm</b> variable is set
to true.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="9%">


<p><b>domain</b></p></td>
<td width="2%"></td>
<td width="78%">


<p>This module applies heuristics for fallback
host&minus;to&minus;realm mappings. It implements the
<b>realm_try_domains</b> variable, and uses the uppercased
parent domain of the hostname if that does not produce a
result.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>localauth
interface</b> <br>
The localauth section (introduced in release 1.12) controls
modules for the local authorization interface, which affects
the relationship between Kerberos principals and local
system accounts. The following built&minus;in modules exist
for this interface: <b><br>
default</b></p>

<p style="margin-left:22%;">This module implements the
<b>DEFAULT</b> type for <b>auth_to_local</b> values.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>rule</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This module implements the <b>RULE</b> type for
<b>auth_to_local</b> values.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>names</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This module looks for an <b>auth_to_local_names</b>
mapping for the principal name.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>auth_to_local</b></p>

<p style="margin-left:22%;">This module processes
<b>auth_to_local</b> values in the default realm's section,
and applies the default method if no <b>auth_to_local</b>
values exist.</p>

<p style="margin-left:11%;"><b>k5login</b></p>

<p style="margin-left:22%;">This module authorizes a
principal to a local account according to the account's
<i>.k5login(5)</i> file.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p><b>an2ln</b></p></td>
<td width="4%"></td>
<td width="78%">


<p>This module authorizes a principal to a local account if
the principal name maps to the local account name.</p></td></tr>
</table>

<h2>PKINIT OPTIONS
<a name="PKINIT OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>NOTE:</b></p>

<p style="margin-left:15%;">The following are
PKINIT&minus;specific options. These values may be specified
in [libdefaults] as global defaults, or within a
realm&minus;specific subsection of [libdefaults], or may be
specified as realm&minus;specific values in the [realms]
section. A realm&minus;specific value overrides, not adds
to, a generic [libdefaults] specification. The search order
is:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">1.</p></td>
<td width="1%"></td>
<td width="67%">


<p style="margin-top: 1em">realm&minus;specific subsection
of [libdefaults]:</p></td>
<td width="18%">
</td></tr>
</table>

<pre style="margin-left:20%; margin-top: 1em">[libdefaults]
    EXAMPLE.COM = {
        pkinit_anchors = FILE:/usr/local/example.com.crt
    }</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">2.</p></td>
<td width="1%"></td>
<td width="70%">


<p style="margin-top: 1em">realm&minus;specific value in
the [realms] section:</p></td>
<td width="15%">
</td></tr>
</table>

<pre style="margin-left:20%; margin-top: 1em">[realms]
    OTHERREALM.ORG = {
        pkinit_anchors = FILE:/usr/local/otherrealm.org.crt
    }</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="3%">


<p style="margin-top: 1em">3.</p></td>
<td width="1%"></td>
<td width="67%">


<p style="margin-top: 1em">generic value in the
[libdefaults] section:</p></td>
<td width="18%">
</td></tr>
</table>

<pre style="margin-left:20%; margin-top: 1em">[libdefaults]
    pkinit_anchors = DIR:/usr/local/generic_trusted_cas/</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Specifying
PKINIT identity information</b> <br>
The syntax for specifying Public Key identity, trust, and
revocation information for PKINIT is as follows: <b><br>

FILE:</b><i>filename</i><b>[,</b><i>keyfilename</i><b>]</b></p>

<p style="margin-left:22%;">This option has
context&minus;specific behavior.</p>

<p style="margin-left:22%; margin-top: 1em">In
<b>pkinit_identity</b> or <b>pkinit_identities</b>,
<i>filename</i> specifies the name of a PEM&minus;format
file containing the user's certificate. If
<i>keyfilename</i> is not specified, the user's private key
is expected to be in <i>filename</i> as well. Otherwise,
<i>keyfilename</i> is the name of the file containing the
private key.</p>

<p style="margin-left:22%; margin-top: 1em">In
<b>pkinit_anchors</b> or <b>pkinit_pool</b>, <i>filename</i>
is assumed to be the name of an OpenSSL&minus;style
ca&minus;bundle file.</p>

<p style="margin-left:11%;"><b>DIR:</b><i>dirname</i></p>

<p style="margin-left:22%;">This option has
context&minus;specific behavior.</p>

<p style="margin-left:22%; margin-top: 1em">In
<b>pkinit_identity</b> or <b>pkinit_identities</b>,
<i>dirname</i> specifies a directory with files named
<b>*.crt</b> and <b>*.key</b> where the first part of the
file name is the same for matching pairs of certificate and
private key files. When a file with a name ending with
<b>.crt</b> is found, a matching file ending with
<b>.key</b> is assumed to contain the private key. If no
such file is found, then the certificate in the <b>.crt</b>
is not used.</p>

<p style="margin-left:22%; margin-top: 1em">In
<b>pkinit_anchors</b> or <b>pkinit_pool</b>, <i>dirname</i>
is assumed to be an OpenSSL&minus;style hashed CA directory
where each CA cert is stored in a file named
<b>hash&minus;of&minus;ca&minus;cert.#</b>. This
infrastructure is encouraged, but all files in the directory
will be examined and if they contain certificates (in PEM
format), they will be used.</p>

<p style="margin-left:22%; margin-top: 1em">In
<b>pkinit_revoke</b>, <i>dirname</i> is assumed to be an
OpenSSL&minus;style hashed CA directory where each
revocation list is stored in a file named
<b>hash&minus;of&minus;ca&minus;cert.r#</b>. This
infrastructure is encouraged, but all files in the directory
will be examined and if they contain a revocation list (in
PEM format), they will be used.</p>


<p style="margin-left:11%;"><b>PKCS12:</b><i>filename</i></p>

<p style="margin-left:22%;"><i>filename</i> is the name of
a PKCS #12 format file, containing the user's certificate
and private key.</p>


<p style="margin-left:11%;"><b>PKCS11:[module_name=]</b><i>modname</i><b>[:slotid=</b><i>slot&minus;id</i><b>][:token=</b><i>token&minus;label</i><b>][:certid=</b><i>cert&minus;id</i><b>][:certlabel=</b><i>cert&minus;label</i><b>]</b></p>

<p style="margin-left:22%;">All keyword/values are
optional. <i>modname</i> specifies the location of a library
implementing PKCS #11. If a value is encountered with no
keyword, it is assumed to be the <i>modname</i>. If no
module&minus;name is specified, the default is
<b>opensc&minus;pkcs11.so</b>. <b>slotid=</b> and/or
<b>token=</b> may be specified to force the use of a
particular smard card reader or token if there is more than
one available. <b>certid=</b> and/or <b>certlabel=</b> may
be specified to force the selection of a particular
certificate on the device. See the <b>pkinit_cert_match</b>
configuration option for more ways to select a particular
certificate to use for PKINIT.</p>

<p style="margin-left:11%;"><b>ENV:</b><i>envvar</i></p>

<p style="margin-left:22%;"><i>envvar</i> specifies the
name of an environment variable which has been set to a
value conforming to one of the previous values. For example,
<b>ENV:X509_PROXY</b>, where environment variable
<b>X509_PROXY</b> has been set to
<b>FILE:/tmp/my_proxy.pem</b>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>PKINIT
krb5.conf options <br>
pkinit_anchors</b></p>

<p style="margin-left:22%;">Specifies the location of
trusted anchor (root) certificates which the client trusts
to sign KDC certificates. This option may be specified
multiple times. These values from the config file are not
used if the user specifies X509_anchors on the command
line.</p>

<p style="margin-left:11%;"><b>pkinit_cert_match</b></p>

<p style="margin-left:22%;">Specifies matching rules that
the client certificate must match before it is used to
attempt PKINIT authentication. If a user has multiple
certificates available (on a smart card, or via other
media), there must be exactly one certificate chosen before
attempting PKINIT authentication. This option may be
specified multiple times. All the available certificates are
checked against each rule in order until there is a match of
exactly one certificate.</p>

<p style="margin-left:22%; margin-top: 1em">The Subject and
Issuer comparison strings are the <i>RFC 2253</i> string
representations from the certificate Subject DN and Issuer
DN values.</p>

<p style="margin-left:22%; margin-top: 1em">The syntax of
the matching rules is:</p>


<p style="margin-left:26%;">[<i>relation&minus;operator</i>]<i>component&minus;rule</i>
...</p>

<p style="margin-left:22%; margin-top: 1em">where: <i><br>
relation&minus;operator</i></p>

<p style="margin-left:32%;">can be either
<b>&amp;&amp;</b>, meaning all component rules must match,
or <b>||</b>, meaning only one component rule must match.
The default is <b>&amp;&amp;</b>.</p>


<p style="margin-left:22%;"><i>component&minus;rule</i></p>

<p style="margin-left:32%;">can be one of the following.
Note that there is no punctuation or whitespace between
component rules.</p>


<p style="margin-left:37%;"><b>&lt;SUBJECT&gt;</b><i>regular&minus;expression</i>
<b><br>
&lt;ISSUER&gt;</b><i>regular&minus;expression</i> <b><br>
&lt;SAN&gt;</b><i>regular&minus;expression</i> <b><br>

&lt;EKU&gt;</b><i>extended&minus;key&minus;usage&minus;list</i>
<b><br>
&lt;KU&gt;</b><i>key&minus;usage&minus;list</i></p>


<p style="margin-left:32%; margin-top: 1em"><i>extended&minus;key&minus;usage&minus;list</i>
is a comma&minus;separated list of required Extended Key
Usage values. All values in the list must be present in the
certificate. Extended Key Usage values can be:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="23%">


<p>pkinit</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="23%">


<p>msScLogin</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="23%">


<p>clientAuth</p></td>
<td width="42%">
</td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="23%">


<p>emailProtection</p></td>
<td width="42%">
</td></tr>
</table>


<p style="margin-left:32%; margin-top: 1em"><i>key&minus;usage&minus;list</i>
is a comma&minus;separated list of required Key Usage
values. All values in the list must be present in the
certificate. Key Usage values can be:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="1%"></td>
<td width="25%">


<p style="margin-top: 1em">digitalSignature</p></td>
<td width="40%">
</td></tr>
<tr valign="top" align="left">
<td width="32%"></td>
<td width="2%">


<p>&bull;</p></td>
<td width="1%"></td>
<td width="25%">


<p>keyEncipherment</p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:22%; margin-top: 1em">Examples:</p>

<pre style="margin-left:26%; margin-top: 1em">pkinit_cert_match = ||&lt;SUBJECT&gt;.*DoE.*&lt;SAN&gt;.*@EXAMPLE.COM
pkinit_cert_match = &amp;&amp;&lt;EKU&gt;msScLogin,clientAuth&lt;ISSUER&gt;.*DoE.*
pkinit_cert_match = &lt;EKU&gt;msScLogin,clientAuth&lt;KU&gt;digitalSignature</pre>


<p style="margin-left:11%;"><b>pkinit_eku_checking</b></p>

<p style="margin-left:22%;">This option specifies what
Extended Key Usage value the KDC certificate presented to
the client must contain. (Note that if the KDC certificate
has the pkinit SubjectAlternativeName encoded as the
Kerberos TGS name, EKU checking is not necessary since the
issuing CA has certified this as a KDC certificate.) The
values recognized in the krb5.conf file are:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="7%">


<p><b>kpKDC</b></p></td>
<td width="3%"></td>
<td width="68%">


<p>This is the default value and specifies that the KDC
must have the id&minus;pkinit&minus;KPKdc EKU as defined in
<i>RFC 4556</i>.</p></td></tr>
</table>

<p style="margin-left:22%;"><b>kpServerAuth</b></p>

<p style="margin-left:32%;">If <b>kpServerAuth</b> is
specified, a KDC certificate with the
id&minus;kp&minus;serverAuth EKU will be accepted. This key
usage value is used in most commercially issued server
certificates.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>none</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>If <b>none</b> is specified, then the KDC certificate
will not be checked to verify it has an acceptable EKU. The
use of this option is not recommended.</p></td></tr>
</table>

<p style="margin-left:11%;"><b>pkinit_dh_min_bits</b></p>

<p style="margin-left:22%;">Specifies the size of the
Diffie&minus;Hellman key the client will attempt to use. The
acceptable values are 1024, 2048, and 4096. The default is
2048.</p>

<p style="margin-left:11%;"><b>pkinit_identities</b></p>

<p style="margin-left:22%;">Specifies the location(s) to be
used to find the user's X.509 identity information. This
option may be specified multiple times. Each value is
attempted in order until identity information is found and
authentication is attempted. Note that these values are not
used if the user specifies <b>X509_user_identity</b> on the
command line.</p>

<p style="margin-left:11%;"><b>pkinit_kdc_hostname</b></p>

<p style="margin-left:22%;">The presense of this option
indicates that the client is willing to accept a KDC
certificate with a dNSName SAN (Subject Alternative Name)
rather than requiring the id&minus;pkinit&minus;san as
defined in <i>RFC 4556</i>. This option may be specified
multiple times. Its value should contain the acceptable
hostname for the KDC (as contained in its certificate).</p>

<p style="margin-left:11%;"><b>pkinit_pool</b></p>

<p style="margin-left:22%;">Specifies the location of
intermediate certificates which may be used by the client to
complete the trust chain between a KDC certificate and a
trusted anchor. This option may be specified multiple
times.</p>


<p style="margin-left:11%;"><b>pkinit_require_crl_checking</b></p>

<p style="margin-left:22%;">The default certificate
verification process will always check the available
revocation information to see if a certificate has been
revoked. If a match is found for the certificate in a CRL,
verification fails. If the certificate being verified is not
listed in a CRL, or there is no CRL present for its issuing
CA, and <b>pkinit_require_crl_checking</b> is false, then
verification succeeds.</p>

<p style="margin-left:22%; margin-top: 1em">However, if
<b>pkinit_require_crl_checking</b> is true and there is no
CRL information available for the issuing CA, then
verification fails.</p>


<p style="margin-left:22%; margin-top: 1em"><b>pkinit_require_crl_checking</b>
should be set to true if the policy is such that
up&minus;to&minus;date CRLs must be present for every
CA.</p>

<p style="margin-left:11%;"><b>pkinit_revoke</b></p>

<p style="margin-left:22%;">Specifies the location of
Certificate Revocation List (CRL) information to be used by
the client when verifying the validity of the KDC
certificate presented. This option may be specified multiple
times.</p>

<h2>PARAMETER EXPANSION
<a name="PARAMETER EXPANSION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Starting with
release 1.11, several variables, such as
<b>default_keytab_name</b>, allow parameters to be expanded.
Valid parameters are:</p>

<h2>SAMPLE KRB5.CONF FILE
<a name="SAMPLE KRB5.CONF FILE"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Here is an
example of a generic krb5.conf file:</p>
<pre style="margin-left:15%; margin-top: 1em">[libdefaults]
    default_realm = ATHENA.MIT.EDU
    dns_lookup_kdc = true
    dns_lookup_realm = false

[realms]
    ATHENA.MIT.EDU = {
        kdc = kerberos.mit.edu
        kdc = kerberos&minus;1.mit.edu
        kdc = kerberos&minus;2.mit.edu:750
        admin_server = kerberos.mit.edu
        master_kdc = kerberos.mit.edu
    }
    EXAMPLE.COM = {
        kdc = kerberos.example.com
        kdc = kerberos&minus;1.example.com
        admin_server = kerberos.example.com
    }

[domain_realm]
    mit.edu = ATHENA.MIT.EDU


[capaths]
    ATHENA.MIT.EDU = {
           EXAMPLE.COM = .
    }
    EXAMPLE.COM = {
           ATHENA.MIT.EDU = .
    }</pre>


<h2>FILES
<a name="FILES"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>/etc/krb5.conf</b></p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">syslog(3)</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">MIT</p>

<h2>COPYRIGHT
<a name="COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">1985-2015,
MIT</p>
<hr>
</body>
</html>
