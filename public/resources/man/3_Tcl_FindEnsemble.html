<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:03:34 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Tcl_Ensemble</title>

</head>
<body>

<h1 align="center">Tcl_Ensemble</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">Tcl_CreateEnsemble,
Tcl_FindEnsemble, Tcl_GetEnsembleFlags,
Tcl_GetEnsembleMappingDict, Tcl_GetEnsembleNamespace,
Tcl_GetEnsembleUnknownHandler,
Tcl_GetEnsembleSubcommandList, Tcl_IsEnsemble,
Tcl_SetEnsembleFlags, Tcl_SetEnsembleMappingDict,
Tcl_SetEnsembleSubcommandList, Tcl_SetEnsembleUnknownHandler
&minus; manipulate ensemble commands</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;tcl.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">Tcl_Command
<b><br>
Tcl_CreateEnsemble</b>(<i>interp, name, namespacePtr,
ensFlags</i>)</p>

<p style="margin-left:11%; margin-top: 1em">Tcl_Command
<b><br>
Tcl_FindEnsemble</b>(<i>interp, cmdNameObj, flags</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_IsEnsemble</b>(<i>token</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_GetEnsembleFlags</b>(<i>interp, token,
ensFlagsPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_SetEnsembleFlags</b>(<i>interp, token, ensFlags</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_GetEnsembleMappingDict</b>(<i>interp, token,
dictObjPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_SetEnsembleMappingDict</b>(<i>interp, token,
dictObj</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_GetEnsembleSubcommandList</b>(<i>interp, token,
listObjPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_SetEnsembleSubcommandList</b>(<i>interp, token,
listObj</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_GetEnsembleUnknownHandler</b>(<i>interp, token,
listObjPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_SetEnsembleUnknownHandler</b>(<i>interp, token,
listObj</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_GetEnsembleNamespace</b>(<i>interp, token,
namespacePtrPtr</i>)</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p style="margin-top: 1em">Tcl_Interp <i>*interp</i>
(in/out)</p> </td>
<td width="14%"></td>
<td width="18%">


<p style="margin-top: 1em">The interpreter in which the
ensemble is to be created or found. Also where error result
messages are written. The functions whose names start with
<b>Tcl_GetEnsemble</b> may have a NULL for the
<i>interp</i>, but all other functions must not.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>const char <i>*name</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>The name of the ensemble command to be created.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Namespace <i>*namespacePtr</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>The namespace to which the ensemble command is to be
bound, or NULL for the current namespace.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>int <i>ensFlags</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>An ORed set of flag bits describing the basic
configuration of the ensemble. Currently only one bit has
meaning, TCL_ENSEMBLE_PREFIX, which is present when the
ensemble command should also match unambiguous prefixes of
subcommands.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Obj <i>*cmdNameObj</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>A value holding the name of the ensemble command to look
up.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>int <i>flags</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>An ORed set of flag bits controlling the behavior of
<b>Tcl_FindEnsemble</b>. Currently only TCL_LEAVE_ERR_MSG is
supported.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Command <i>token</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>A normal command token that refers to an ensemble
command, or which you wish to use for testing as an ensemble
command in <b>Tcl_IsEnsemble</b>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>int <i>*ensFlagsPtr</i> (out)</p></td>
<td width="14%"></td>
<td width="18%">


<p>Pointer to a variable into which to write the current
ensemble flag bits; currently only the bit
TCL_ENSEMBLE_PREFIX is defined.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Obj <i>*dictObj</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>A dictionary value to use for the subcommand to
implementation command prefix mapping dictionary in the
ensemble. May be NULL if the mapping dictionary is to be
removed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Obj <i>**dictObjPtr</i> (out)</p></td>
<td width="14%"></td>
<td width="18%">


<p>Pointer to a variable into which to write the current
ensemble mapping dictionary.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Obj <i>*listObj</i> (in)</p></td>
<td width="14%"></td>
<td width="18%">


<p>A list value to use for the defined list of subcommands
in the dictionary or the unknown subcommmand handler command
prefix. May be NULL if the subcommand list or unknown
handler are to be removed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Obj <i>**listObjPtr</i> (out)</p></td>
<td width="14%"></td>
<td width="18%">


<p>Pointer to a variable into which to write the current
defiend list of subcommands or the current unknown handler
prefix.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="57%">


<p>Tcl_Namespace <i>**namespacePtrPtr</i> (out)</p></td>
<td width="14%"></td>
<td width="18%">


<p>Pointer to a variable into which to write the handle of
the namespace to which the ensemble is bound.</p></td></tr>
</table>


<p style="margin-left:82%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">An ensemble is
a command, bound to some namespace, which consists of a
collection of subcommands implemented by other Tcl commands.
The first argument to the ensemble command is always
interpreted as a selector that states what subcommand to
execute.</p>

<p style="margin-left:11%; margin-top: 1em">Ensembles are
created using <b>Tcl_CreateEnsemble</b>, which takes four
arguments: the interpreter to work within, the name of the
ensemble to create, the namespace within the interpreter to
bind the ensemble to, and the default set of ensemble flags.
The result of the function is the command token for the
ensemble, which may be used to further configure the
ensemble using the API described below in <b>ENSEMBLE
PROPERTIES</b>.</p>

<p style="margin-left:11%; margin-top: 1em">Given the name
of an ensemble command, the token for that command may be
retrieved using <b>Tcl_FindEnsemble</b>. If the given
command name (in <i>cmdNameObj</i>) does not refer to an
ensemble command, the result of the function is NULL and (if
the TCL_LEAVE_ERR_MSG bit is set in <i>flags</i>) an error
message is left in the interpreter result.</p>

<p style="margin-left:11%; margin-top: 1em">A command token
may be checked to see if it refers to an ensemble using
<b>Tcl_IsEnsemble</b>. This returns 1 if the token refers to
an ensemble, or 0 otherwise.</p>

<p style="margin-left:11%; margin-top: 1em"><b>ENSEMBLE
PROPERTIES</b> <br>
Every ensemble has four read-write properties and a
read-only property. The properties are: <b><br>
flags</b> (read-write)</p>

<p style="margin-left:22%;">The set of flags for the
ensemble, expressed as a bit-field. Currently, the only
public flag is TCL_ENSEMBLE_PREFIX which is set when
unambiguous prefixes of subcommands are permitted to be
resolved to implementations as well as exact matches. The
flags may be read and written using
<b>Tcl_GetEnsembleFlags</b> and <b>Tcl_SetEnsembleFlags</b>
respectively. The result of both of those functions is a Tcl
result code (TCL_OK, or TCL_ERROR if the token does not
refer to an ensemble).</p>

<p style="margin-left:11%;"><b>mapping dictionary</b>
(read-write)</p>

<p style="margin-left:22%;">A dictionary containing a
mapping from subcommand names to lists of words to use as a
command prefix (replacing the first two words of the command
which are the ensemble command itself and the subcommand
name), or NULL if every subcommand is to be mapped to the
command with the same unqualified name in the
ensemble&rsquo;s bound namespace. Defaults to NULL. May be
read and written using <b>Tcl_GetEnsembleMappingDict</b> and
<b>Tcl_SetEnsembleMappingDict</b> respectively. The result
of both of those functions is a Tcl result code (TCL_OK, or
TCL_ERROR if the token does not refer to an ensemble) and
the dictionary obtained from
<b>Tcl_GetEnsembleMappingDict</b> should always be treated
as immutable even if it is unshared. All command names in
prefixes set via <b>Tcl_SetEnsembleMappingDict</b> must be
fully qualified.</p>

<p style="margin-left:11%;"><b>subcommand list</b>
(read-write)</p>

<p style="margin-left:22%;">A list of all the subcommand
names for the ensemble, or NULL if this is to be derived
from either the keys of the mapping dictionary (see above)
or (if that is also NULL) from the set of commands exported
by the bound namespace. May be read and written using
<b>Tcl_GetEnsembleSubcommandList</b> and
<b>Tcl_SetEnsembleSubcommandList</b> respectively. The
result of both of those functions is a Tcl result code
(TCL_OK, or TCL_ERROR if the token does not refer to an
ensemble) and the list obtained from
<b>Tcl_GetEnsembleSubcommandList</b> should always be
treated as immutable even if it is unshared.</p>

<p style="margin-left:11%;"><b>unknown subcommand handler
command prefix</b> (read-write)</p>

<p style="margin-left:22%;">A list of words to prepend on
the front of any subcommand when the subcommand is unknown
to the ensemble (according to the current prefix handling
rule); see the <b>namespace ensemble</b> command for more
details. If NULL, the default behavior &minus; generate a
suitable error message &minus; will be used when an unknown
subcommand is encountered. May be read and written using
<b>Tcl_GetEnsembleUnknownHandler</b> and
<b>Tcl_SetEnsembleUnknownHandler</b> respectively. The
result of both functions is a Tcl result code (TCL_OK, or
TCL_ERROR if the token does not refer to an ensemble) and
the list obtained from <b>Tcl_GetEnsembleUnknownHandler</b>
should always be treated as immutable even if it is
unshared.</p>

<p style="margin-left:11%;"><b>bound namespace</b>
(read-only)</p>

<p style="margin-left:22%;">The namespace to which the
ensemble is bound; when the namespace is deleted, so too
will the ensemble, and this namespace is also the namespace
whose list of exported commands is used if both the mapping
dictionary and the subcommand list properties are NULL. May
be read using <b>Tcl_GetEnsembleNamespace</b> which returns
a Tcl result code (TCL_OK, or TCL_ERROR if the token does
not refer to an ensemble).</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">namespace(n),
Tcl_DeleteCommandFromToken(3)</p>
<hr>
</body>
</html>
