<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:24:52 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>IPRCONFIG</title>

</head>
<body>

<h1 align="center">IPRCONFIG</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#OPTIONS">OPTIONS</a><br>
<a href="#AUTHOR">AUTHOR</a><br>
<a href="#NOTES">NOTES</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">iprconfig
&minus; IBM Power RAID storage adapter
configuration/recovery utility</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>iprconfig
[-e editor] [-k dir] [-c command]</b></p>

<p style="margin-left:11%; margin-top: 1em"><b>iprconfig
--version --debug --force</b></p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>iprconfig</b>
is used to configure IBM Power RAID storage adapters,
display information about them, and to perform adapter and
disk unit recovery. The menu options are:</p>

<p style="margin-left:11%; margin-top: 1em"><b>1. Display
hardware status.</b> <br>
This option can be used to display various information
regarding the IBM Power RAID adapters attached to the system
and the disk units controlled by them. For each adapter and
disk unit, their /dev name, physical location, description,
vendor/product ID, and hardware status will be available.
Beside each resource is an OPT field. By entering a 1 beside
any resource, detailed information about that resource can
be obtained. For an adapter resource, this will display the
adapter firmware version and the physical location amongst
other things.</p>

<p style="margin-left:11%; margin-top: 1em"><b>2. Work with
Disk Arrays</b> <br>
This option will present a second menu containing disk array
related commands.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Display disk
array status</b> is used to display the status of disk
arrays on the system.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Create a
disk array</b> is used to create a disk array.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Delete a
disk array</b> is used to delete disk arrays. Selecting this
option will provide you with a list of disk arrays which can
be deleted.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Add a device
to a disk array</b> is used to include devices of similar
capacity into an existing disk array. This function is
currently only supported for RAID 5 and RAID 6 disk
arrays.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Format
device for advanced function</b> is used to format disks to
522 bytes/sector so that they may be used in a disk array.
Only disks which are not formatted for advanced function or
are formatted for advanced function but are not known to be
zeroed will be available for selection for this
function.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Format
device for JBOD function (512)</b> is used to format disks
to 512 bytes/sector so that they may be used as standalone
disks. Only disks which are not formatted for JBOD function
or are formatted for JBOD function and are in the Format
Required state will be available for this function.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Work with
hot spares</b> is used to create a hot spare which
designates a device as a dedicated hot spare. It is also
used to delete a hot spare which unconfigures a previously
configured hot spare.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Work with
asymmetric access</b> is used to select which path of a disk
array will be the primary path in a dual controller
environment. Asymmetric Access must be enabled on the
adapter first. Not all adapters support asymmetric access
and adapters that do provide support may require updated
microcode.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Force RAID
Consistency Check</b> is used to force a consistency check
on a RAID array. All ipr adapters continually perform
background consistency checking when idle. This option can
be used to force a consistency check to be performed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Migrate disk
array protection</b> is used to change the RAID protection
level for an array to another supported level. In some
cases, this will require adding more disks to the array. In
other cases, disks will be freed.</p>

<p style="margin-left:11%; margin-top: 1em"><b>3. Work with
disk unit recovery</b> is used to perform the following disk
unit recovery actions:</p>

<p style="margin-left:11%; margin-top: 1em"><b>Concurrent
add device</b> is used to concurrently add a new disk to a
running system. This feature is only supported with SES
(SCSI Enclosure Services) packaging.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Concurrent
remove device</b> is used to concurrently remove a disk from
a running system. This feature is only supported with SES
(SCSI Enclosure Services) packaging.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Initialize
and format disk unit</b> is used to issue a SCSI format
command to attached devices. A format unit command has
special meaning to the adapter and is used as a service
action for certain error conditions. Formatting a disk unit
will lose all data on that drive. If the disk is attached to
an ipr adapter that does not support RAID, the drive will be
formatted to 512 bytes/sector. If the disk is attached to an
ipr RAID adapter, the block size will not be changed. To
change the block size, use the format menu options under the
disk arrays menu.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Reclaim IOA
cache storage</b> is used to repair cache error conditions.
<b>ATTENTION:</b> Use this option with care. This is used to
discard data from the cache and may result in data loss.
This option is designed to be used by authorized IBM
hardware customer engineers.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Rebuild disk
unit data</b> is generally used following concurrent
maintenance. Select this option after a failing array member
device has been replaced to reconstruct the device as an
active array member.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Work with
resources containing cache battery packs</b> is used to
display information regarding rechargeable cache battery
packs and to force rechargeable cache battery packs into an
error state so that they can be replaced prior to failure.
<b>ATTENTION:</b> Once an error has been forced on a
rechargeable cache battery pack write caching will be
disabled until the battery pack is replaced.</p>

<p style="margin-left:11%; margin-top: 1em"><b>4. Work with
SCSI bus configuration</b> is used to change configurable
SCSI bus attributes, such as maximum SCSI bus speed, SCSI
initiator ID, etc.</p>

<p style="margin-left:11%; margin-top: 1em"><b>5. Work with
driver configuration</b> is used to change driver
configurable attributes, such as log_level.</p>

<p style="margin-left:11%; margin-top: 1em"><b>6. Work with
disk configuration</b> is used to change configurable disk
attributes, such as queue depth.</p>

<p style="margin-left:11%; margin-top: 1em"><b>7. Work with
adapter configuration</b> is used to change configurable
adapter attributes, such as dual adapter settings. Refer to
the following command line options: primary, secondary,
query-ha-mode, set-ha-mode, set-ioa-asymmetric-access and
set-array-asymmetric-access for more information regarding
these settings.</p>

<p style="margin-left:11%; margin-top: 1em"><b>8. Download
microcode</b> is used to download microcode to ipr adapters
and attached SCSI disks.</p>

<p style="margin-left:11%; margin-top: 1em"><b>9. Analyze
Log</b> is an option available to analyze /var/log/messages*
files. By default it will use vi as the editor to open the
concatenated error log files. This can be changed by using
option 6 on the <b>Kernel Messages Log</b> menu. Selecting
option 1 on the Kernel Messages Log menu will display only
the most recent errors logged by the ipr device driver and
may be useful to filter out some of the clutter. Option 2
will display all recorded errors logged by the ipr device
driver. Option 3 will display all kernel messages. Option 4
will display errors logged by the iprconfig utility. This
may be useful for debugging problems. Option 5 can be used
to change where the tool looks to find the kernel messages
files. The default is to look in /var/log.</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>&minus;e
editor</b></p>

<p style="margin-left:22%;">Default editor for viewing
error logs. The default editor is vi, but can be changed
with this parameter.</p>

<p style="margin-left:11%;"><b>-k directory</b></p>

<p style="margin-left:22%;">Kernel messages root directory.
Root directory to look for kernel messages. Default is
/var/log.</p>

<p style="margin-left:11%;"><b>-c command</b></p>

<p style="margin-left:22%;">Command line, non-interactive
commands. Currently supported commands include: <b><br>
show-config</b></p>

<p style="margin-left:32%;">Show ipr configuration.</p>

<p style="margin-left:22%;"><b>show-alt-config</b></p>

<p style="margin-left:32%;">Show alternate ipr
configuration information.</p>

<p style="margin-left:22%;"><b>show-ioas</b></p>

<p style="margin-left:32%;">Show all ipr adapters.</p>

<p style="margin-left:22%;"><b>show-arrays</b></p>

<p style="margin-left:32%;">Show all ipr arrays.</p>

<p style="margin-left:22%;"><b>show-battery-info
[IOA]</b></p>

<p style="margin-left:32%;">Show cache battery information
for specified IOA. Example: <b><br>
iprconfig -c show-battery-info sg5</b></p>

<p style="margin-left:22%;"><b>show-details
[device]</b></p>

<p style="margin-left:32%;">Show device details for
specified device. Example: <b><br>
iprconfig -c show-details sda</b></p>

<p style="margin-left:22%;"><b>show-hot-spares</b></p>

<p style="margin-left:32%;">Show all configured hot
spares.</p>

<p style="margin-left:22%;"><b>show-af-disks</b></p>

<p style="margin-left:32%;">Show disks formatted for
Advanced Function that are not configured in an array or as
a hot spare.</p>

<p style="margin-left:22%;"><b>show-all-af-disks</b></p>

<p style="margin-left:32%;">Show all disks formatted for
Advanced Function</p>

<p style="margin-left:22%;"><b>show-jbod-disks</b></p>

<p style="margin-left:32%;">Show all disks formatted for
JBOD Function.</p>

<p style="margin-left:22%;"><b>show-slots</b></p>

<p style="margin-left:32%;">Show all disks slots available
on the system.</p>

<p style="margin-left:22%;"><b>status [device]</b></p>

<p style="margin-left:32%;">Show the status of the
specified device. This is the same status as which shows up
in the last column of the Display hardware status menu. Can
specify either a /dev/sdX name or a /dev/sgX name. Example:
<b><br>
iprconfig -c status /dev/sda</b></p>

<p style="margin-left:22%;"><b>alt-status [device]</b></p>

<p style="margin-left:32%;">Show the status of the
specified device. This is the same status as above with the
exception of when a long running command is executing to the
device, in which case the percent complete for the long
running command is printed.</p>

<p style="margin-left:22%;"><b>query-raid-create
[IOA]</b></p>

<p style="margin-left:32%;">Show all devices attached to
the specified IOA that are candidates for being used in a
RAID array. Example: <b><br>
iprconfig -c query-raid-create sg5</b></p>

<p style="margin-left:22%;"><b>query-raid-delete
[IOA]</b></p>

<p style="margin-left:32%;">Show all RAID arrays attached
to the specified IOA that can be deleted. <b><br>
iprconfig -c query-raid-delete sg5</b></p>

<p style="margin-left:22%;"><b>query-hot-spare-create
[IOA]</b></p>

<p style="margin-left:32%;">Show all devices attached to
the specified IOA that are candidates for being hot
spares.</p>

<p style="margin-left:22%;"><b>query-hot-spare-delete
[IOA]</b></p>

<p style="margin-left:32%;">Show all hot spares attached to
the specified IOA that can be deleted.</p>


<p style="margin-left:22%;"><b>query-raid-consistency-check</b></p>

<p style="margin-left:32%;">Show all RAID arrays that are
candidates for a RAID consistency check.</p>


<p style="margin-left:22%;"><b>query-format-for-jbod</b></p>

<p style="margin-left:32%;">Show all disks that can be
reformatted for JBOD function.</p>

<p style="margin-left:22%;"><b>query-reclaim</b></p>

<p style="margin-left:32%;">Show all IOAs that may need a
reclaim cache storage.</p>


<p style="margin-left:22%;"><b>query-arrays-raid-include</b></p>

<p style="margin-left:32%;">Show all RAID arrays that can
have disks included in them to increase their capacity.</p>

<p style="margin-left:22%;"><b>query-devices-raid-include
[array]</b></p>

<p style="margin-left:32%;">Show all disks that can be
added to the specified array to increase its capacity.</p>

<p style="margin-left:22%;"><b>query-supported-raid-levels
[IOA]</b></p>

<p style="margin-left:32%;">Show all RAID levels supported
by the specified adapter.</p>

<p style="margin-left:22%;"><b>query-include-allowed [IOA]
[raid level]</b></p>

<p style="margin-left:32%;">Some RAID levels allow for
adding additional disks to existing disk arrays to increase
their capacity. Prints &quot;yes&quot; to stdout if the
specified RAID level supports this function, else prints
&quot;no&quot;.</p>

<p style="margin-left:22%;"><b>query-max-devices-in-array
[IOA] [raid level]</b></p>

<p style="margin-left:32%;">Print the maximum number of
devices allowed in a RAID array of the specified RAID level
for the specified RAID adapter.</p>

<p style="margin-left:22%;"><b>query-min-devices-in-array
[IOA] [raid level]</b></p>

<p style="margin-left:32%;">Print the minimum number of
devices allowed in a RAID array of the specified RAID level
for the specified RAID adapter.</p>

<p style="margin-left:22%;"><b>query-min-mult-in-array
[IOA] [raid level]</b></p>

<p style="margin-left:32%;">Print the minimum multiple of
devices required in a RAID array of the specified RAID level
for the specified RAID adapter.</p>

<p style="margin-left:22%;"><b>query-supp-stripe-sizes
[IOA] [raid level]</b></p>

<p style="margin-left:32%;">Print all supported stripe
sizes supported for RAID arrays of the specified RAID level
on the specified RAID adapter. Stripe sizes are printed in
units of KB.</p>


<p style="margin-left:22%;"><b>query-recommended-stripe-size
[IOA] [raid level]</b></p>

<p style="margin-left:32%;">Print the default/recommended
stripe size for RAID arrays of the specified RAID level on
the specified RAID adapter. Stripe size is in units of
KB.</p>


<p style="margin-left:22%;"><b>query-recovery-format</b></p>

<p style="margin-left:32%;">Show all disks that can be
formatted for error recovery purposes.</p>

<p style="margin-left:22%;"><b>query-raid-rebuild</b></p>

<p style="margin-left:32%;">Show all disks in RAID arrays
that can be rebuilt.</p>


<p style="margin-left:22%;"><b>query-format-for-raid</b></p>

<p style="margin-left:32%;">Show all disks that can be
formatted such that they can be used in a RAID array or as a
hot spare.</p>

<p style="margin-left:22%;"><b>query-ucode-level
[device]</b></p>

<p style="margin-left:32%;">Show the microcode level that
is currently loaded on the specified device. Note: The
device specified may be the sg device associated with an
IOA, in which case the IOA&rsquo;s microcode level will be
shown.</p>

<p style="margin-left:22%;"><b>query-format-timeout
[device]</b></p>

<p style="margin-left:32%;">Show the current format timeout
to be used when formatting the specified disk. This value is
only applicable when the device is currently in Advanced
Function format.</p>

<p style="margin-left:22%;"><b>query-qdepth
[device]</b></p>

<p style="margin-left:32%;">Show the queue depth currently
being used for the specified disk.</p>

<p style="margin-left:22%;"><b>query-tcq-enable
[device]</b></p>

<p style="margin-left:32%;">Print 1 to stdout if tagged
queuing is enabled for the specified device, else print 0 to
stdout.</p>

<p style="margin-left:22%;"><b>query-log-level
[IOA]</b></p>

<p style="margin-left:32%;">Print the current log level
being used for the specified IOA. Can be a number from 0 to
n.</p>

<p style="margin-left:22%;"><b>query-add-device</b></p>

<p style="margin-left:32%;">Show all empty disk slots that
can have a disk concurrently added.</p>

<p style="margin-left:22%;"><b>query-remove-device</b></p>

<p style="margin-left:32%;">Show all disk slots which are
either empty or have disks in them which can be concurrently
removed from the running system.</p>

<p style="margin-left:22%;"><b>query-initiator-id [IOA]
[busno]</b></p>

<p style="margin-left:32%;">Show the current SCSI initiator
ID used by the IOA for the specified SCSI bus.</p>

<p style="margin-left:22%;"><b>query-bus-speed [IOA]
[busno]</b></p>

<p style="margin-left:32%;">Show the current maximum SCSI
bus speed allowed on the specified SCSI bus.</p>

<p style="margin-left:22%;"><b>query-bus-width [IOA]
[busno]</b></p>

<p style="margin-left:32%;">Show the current SCSI bus width
in units of bits for the specified SCSI bus.</p>

<p style="margin-left:22%;"><b>query-path-status
[IOA]</b></p>

<p style="margin-left:32%;">Show the current dual path
state for the SAS devices attached specified IOA.</p>

<p style="margin-left:22%;"><b>query-path-details
[device]</b></p>

<p style="margin-left:32%;">Show the current dual path
details for the specified SAS device.</p>


<p style="margin-left:22%;"><b>query-arrays-raid-migrate</b></p>

<p style="margin-left:32%;">Show the arrays that can be
migrated to a different protection level.</p>

<p style="margin-left:22%;"><b>query-devices-raid-migrate
[array]</b></p>

<p style="margin-left:32%;">Show the AF disks that are
candidates to be used in a migration for a given array.</p>


<p style="margin-left:22%;"><b>query-raid-levels-raid-migrate
[array]</b></p>

<p style="margin-left:32%;">Show the protection levels to
which the given array can be migrated.</p>


<p style="margin-left:22%;"><b>query-stripe-sizes-raid-migrate
[array] [raid level]</b></p>

<p style="margin-left:32%;">Given an array and a protection
level, show the valid stripe sizes to which the array can be
migrated.</p>


<p style="margin-left:22%;"><b>query-devices-min-max-raid-migrate
[array] [raid level]</b></p>

<p style="margin-left:32%;">Show the number of devices that
will be removed for a migration to a protection level that
requires fewer devices. Or, show the minmum number of
devices required, the maximum number of devices allowed and
the multiple of the number of devices required for a
migration that requires more devices.</p>


<p style="margin-left:22%;"><b>query-ioas-asymmetric-access</b></p>

<p style="margin-left:32%;">Show the IOAs that support
asymmetric access.</p>


<p style="margin-left:22%;"><b>query-arrays-asymmetric-access</b></p>

<p style="margin-left:32%;">Show the disk arrays that are
candidates for setting their asymmetric access mode to
Optimized or Non-Optimized.</p>


<p style="margin-left:22%;"><b>query-ioa-asymmetric-access-mode
[IOA]</b></p>

<p style="margin-left:32%;">Show the current asymmetric
access mode for the given IOA.</p>


<p style="margin-left:22%;"><b>query-array-asymmetric-access-mode
[array]</b></p>

<p style="margin-left:32%;">Show the current asymmetric
access mode for the given disk array.</p>

<p style="margin-left:22%;"><b>query-ioa-caching
[IOA]</b></p>

<p style="margin-left:32%;">Show whether or not the user
requested caching mode for the given IOA is set to default
or disabled.</p>

<p style="margin-left:22%;"><b>query-array-label
[label]</b></p>

<p style="margin-left:32%;">Show the device name of the
array with the specified label. Label must have been
specified when creating the RAID array. See raid-create
command.</p>

<p style="margin-left:22%;"><b>query-array-rebuild-rate
[IOA]</b></p>

<p style="margin-left:32%;">Show the array rebuild rate for
the given IOA.</p>

<p style="margin-left:22%;"><b>query-array-rebuild-verify
[IOA]</b></p>

<p style="margin-left:32%;">Show whether array rebuild
verification is enabled for the given IOA.</p>

<p style="margin-left:22%;"><b>query-array
[location]</b></p>

<p style="margin-left:32%;">Show the device name of the
array of which one of the disks in the array has the
specified platform location code.</p>

<p style="margin-left:22%;"><b>query-device
[location]</b></p>

<p style="margin-left:32%;">Show the device name of the
disk that has the specified platform location code.</p>

<p style="margin-left:22%;"><b>query-location
[device]</b></p>

<p style="margin-left:32%;">The device specified can be
either the device name of a disk or the device name of a
single disk RAID 0 array. If the specified device name is a
disk, the platform location code will be displayed. If the
specified device name is a single device RAID 0 array, the
platform location of the disk which is a member of the
specified array will be displayed.</p>

<p style="margin-left:22%;"><b>query-write-cache-policy
[device]</b></p>

<p style="margin-left:32%;">Show the current write cache
policy for [device].</p>

<p style="margin-left:22%;"><b>raid-create [-r raid_level]
[-s stripe_size_in_kb] [-l label] <br>
[--skip-format] [devices...]</b></p>

<p style="margin-left:32%;">Create a RAID array. RAID level
can be any supported RAID level for the given adapter, such
as 0, 10, 5, 6. Currently supported stripe sizes in kb
include 16, 64, and 256. If raid_level is not specified, it
will default to RAID 5. If stripe size is not specified, it
will default to the recommended stripe size for the selected
RAID level. Devices are specified with their full name,
either the /dev/sd name or the /dev/sg name is acceptable.
On some RAID adapters, a label can also be specified.
Example array creation: <b><br>
iprconfig -c raid-create -r 5 -s 64 /dev/sda /dev/sdb
/dev/sdc</b> <br>
This would create a RAID 5 array with a 64k stripe size
using the specified devices.</p>

<p style="margin-left:22%;"><b>raid-delete [RAID
device]</b></p>

<p style="margin-left:32%;">Delete the specified RAID
array. Specify either the /dev/sd name or the /dev/sg name.
Only 1 array can be deleted with a single command. Example:
<b><br>
iprconfig -c raid-delete /dev/sda</b> <br>
This would delete the disk array represented by /dev/sda</p>

<p style="margin-left:22%;"><b>raid-include [array] [disk]
... [disk]</b></p>

<p style="margin-left:32%;">Add the specified devices to
the specified disk array to increase its capacity. Example:
<b><br>
iprconfig -c raid-include sda sg6 sg7</b></p>

<p style="margin-left:22%;"><b>raid-migrate -r raid_level
[-s stripe_size_in_kb] array [disk] <br>
... [disk]</b></p>

<p style="margin-left:32%;">Migrate an existing RAID array
to a new RAID protection level. Optionally, a new stripe
size can be given. In some cases one or more new disks must
be added for the migration to succeed. Example: <b><br>
iprconfig -c raid-migrate -r 10 -s 64 sda sg5 sg6</b></p>

<p style="margin-left:22%;"><b>format-for-raid [disk] ...
[disk]</b></p>

<p style="margin-left:32%;">Format the specified disks for
Advanced Function so they can be used in a RAID array or as
a hot spare.</p>

<p style="margin-left:22%;"><b>format-for-jbod [disk] ...
[disk]</b></p>

<p style="margin-left:32%;">Format the specified disks for
JBOD Function so they can be used as standalone disks.</p>

<p style="margin-left:22%;"><b>recovery-format [disk] ...
[disk]</b></p>

<p style="margin-left:32%;">Format the specified disks as
directed by the reference guide for error recovery
purposes.</p>

<p style="margin-left:22%;"><b>hot-spare-create
[disk]</b></p>

<p style="margin-left:32%;">Create a hot spare using the
specified Advanced Function disk.</p>

<p style="margin-left:22%;"><b>hot-spare-delete
[disk]</b></p>

<p style="margin-left:32%;">Delete the specified hot
spare.</p>

<p style="margin-left:22%;"><b>disrupt-device
[disk]</b></p>

<p style="margin-left:32%;">Force the specified Advanced
Function device failed.</p>

<p style="margin-left:22%;"><b>reclaim-cache [IOA]</b></p>

<p style="margin-left:32%;">Reclaim the specified
IOA&rsquo;s write cache. <b>ATTENTION:</b> Use this option
with care. This is used to discard data from the cache and
may result in data loss. This option is designed to be used
by authorized IBM hardware customer engineers.</p>

<p style="margin-left:22%;"><b>reclaim-unknown-cache
[IOA]</b></p>

<p style="margin-left:32%;">Reclaim the specified
IOA&rsquo;s write cache and allow unknown data loss.
<b>ATTENTION:</b> Use this option with care. This is used to
discard data from the cache and WILL result in data loss.
This option is designed to be used by authorized IBM
hardware customer engineers.</p>

<p style="margin-left:22%;"><b>raid-consistency-check
[array]</b></p>

<p style="margin-left:32%;">Force a full RAID consistency
check on the specified array. This command will return
before the RAID consistency check has completed. Use the
<b>status</b> command to check the status of the
command.</p>

<p style="margin-left:22%;"><b>raid-rebuild [disk]</b></p>

<p style="margin-left:32%;">Following a disk replacement
for a failed disk in a RAID array, use this command to
rebuild the failed disk&rsquo;s data onto the new disk and
return the disk array to the <b>Active</b> state.</p>

<p style="margin-left:22%;"><b>update-ucode [device]
[microcode file]</b></p>

<p style="margin-left:32%;">Update the microcode on the
specified device (IOA or disk) with the specified microcode
file. <b>ATTENTION:</b> Limited checking of the microcode
image is done. Make sure the specified microcode file is the
correct file for the specified device.</p>

<p style="margin-left:22%;"><b>set-format-timeout [disk]
[timeout in hours]</b></p>

<p style="margin-left:32%;">Set the format timeout to be
used when formatting the specified disk.</p>

<p style="margin-left:22%;"><b>set-qdepth [device] [queue
depth]</b></p>

<p style="margin-left:32%;">Set the queue depth for the
specified device or disk array.</p>

<p style="margin-left:22%;"><b>set-tcq-enable [device] [0 =
disable, 1 = enable]</b></p>

<p style="margin-left:32%;">Enable/disable tagged command
queueing for the specified device.</p>

<p style="margin-left:22%;"><b>set-log-level [IOA] [log
level]</b></p>

<p style="margin-left:32%;">Set the error logging verbosity
to use for the specified IOA. Default is 2.</p>

<p style="margin-left:22%;"><b>set-write-cache-policy
[device] [writeback|writethrough]</b></p>

<p style="margin-left:32%;">Set the write cache policy for
[device]. Available policies are writeback and writethrough.
This feature is only supported by JBOD disks. Example:
<b><br>
iprconfig -c set-write-cache-policy sdp writeback</b></p>

<p style="margin-left:22%;"><b>identify-disk [disk] [0 =
turn off identify LED, 1 = turn on <br>
identify LED]</b></p>

<p style="margin-left:32%;">Turn on/off the disk identify
LED for the specified disk. This function may or may not be
available depending on the hardware packaging.</p>

<p style="margin-left:22%;"><b>identify-slot [location] [0
= turn off identify LED, 1 = turn on <br>
identify LED]</b></p>

<p style="margin-left:32%;">Turn on/off the disk identify
LED for the specified location. This function may or may not
be available depending on the hardware packaging. Example:
<b><br>
iprconfig -c identify-slot 0000:d8:01.0/0:1:1: 1</b></p>

<p style="margin-left:22%;"><b>remove-disk [disk] [0 = turn
off identify LED, 1 = turn on <br>
identify LED]</b></p>

<p style="margin-left:32%;">Turn on/off the disk remove
identify LED for the specified device. When 1 is specified
as the second argument, the specified disk is set to the
remove state. When in this state, the disk may be removed.
Once the disk has been physically removed, iprconfig must be
invoked again with the second argument set to 0. This turns
off the slot identifier light and logically removes the disk
from the host operating system.</p>

<p style="margin-left:22%;"><b>remove-slot [location] [0 =
turn off identify LED, 1 = turn on <br>
identify LED]</b></p>

<p style="margin-left:32%;">Turn on/off the disk remove
identify LED for the specified location. When 1 is specified
as the second argument, the specified location is set to the
remove state. When in this state, the disk may be removed.
Once the disk has been physically removed, iprconfig must be
invoked again with the second argument set to 0. This turns
off the slot identifier light and logically removes the disk
from the host operating system. Example: <b><br>
iprconfig -c remove-slot 0000:d8:01.0/0:1:1: 1</b></p>

<p style="margin-left:22%;"><b>add-slot [location] [0 =
turn off identify LED, 1 = turn on <br>
identify LED]</b></p>

<p style="margin-left:32%;">Turn on/off the disk insert
identify LED for the specified location. When 1 is specified
as the second argument, the specified location is set to the
insert state. When in this state, the disk may be inserted.
Once the disk has been physically inserted, iprconfig must
be invoked again with the second argument set to 0. This
turns off the slot identifier light and logically adds the
disk to the host operating system. Example: <b><br>
iprconfig -c add-slot 0000:d8:01.0/0:1:1: 1</b></p>

<p style="margin-left:22%;"><b>set-initiator-id [IOA]
[busno] [initiator id]</b></p>

<p style="margin-left:32%;">Set the IOA&rsquo;s SCSI
initiator ID for the specified bus. Must be a value between
0 and 7 and must not conflict with any other device on the
SCSI bus.</p>

<p style="margin-left:22%;"><b>set-bus-speed [IOA] [busno]
[speed in MB/sec]</b></p>

<p style="margin-left:32%;">Set the maximum SCSI bus speed
allowed on the specified SCSI bus.</p>

<p style="margin-left:22%;"><b>set-bus-width [IOA] [busno]
[bus width in # bits]</b></p>

<p style="margin-left:32%;">Set the SCSI bus width to use
for the specified SCSI bus. Example: <b><br>
iprconfig -c set-bus-width sg5 0 16</b></p>

<p style="margin-left:22%;"><b>primary [IOA]</b></p>

<p style="margin-left:32%;">Set the adapter as the
<b>preferred primary</b> adapter. This is used in dual
initiator RAID configurations to indicate which adapter
should be the <b>primary</b> adapter. The <b>primary</b>
adapter should be the adapter receiving the majority of the
I/O. Example: <b><br>
iprconfig -c primary sg5</b></p>

<p style="margin-left:22%;"><b>secondary [IOA]</b></p>

<p style="margin-left:32%;">Set the adapter to indicate it
is not the <b>preferred primary</b> adapter. See the notes
for the <b>preferred primary</b> for additional information.
Example: <b><br>
iprconfig -c secondary sg5</b></p>

<p style="margin-left:22%;"><b>set-all-primary</b></p>

<p style="margin-left:32%;">Set all attached ipr adapters
as the <b>preferred primary</b> adapter. This can be used
when running a dual initiator RAID HA configuration. This
command can be run on the <b>primary</b> system to quickly
enable the <b>preferred primary</b> mode for all attached
adapters. Refer to /etc/ha.d/resource.d/iprha for an example
of how this might be used. Example: <b><br>
iprconfig -c set-all-primary</b></p>

<p style="margin-left:22%;"><b>set-all-secondary</b></p>

<p style="margin-left:32%;">Set all attached ipr adapters
to indicate they are not the <b>preferred primary</b>
adapter. Example: <b><br>
iprconfig -c set-all-secondary</b></p>

<p style="margin-left:22%;"><b>query-ha-mode [IOA]</b></p>

<p style="margin-left:32%;">When an adapter is configured
in a highly available dual adapter configuration, it may be
able to be configured in one of two ways. The default mode
is <b>Normal.</b> This mode is used for all SCSI adapters
and many SAS adapters. Some SAS adapters also support a
<b>JBOD</b> dual adapter configuration. This mode is to be
used when the dual adapter configuration is to consist of
JBOD disks rather than RAID arrays. If the adapter is
<b>NOT</b> going to be used in a dual adapter configuration,
this mode <b>MUST</b> be set to <b>Normal.</b> Example:
<b><br>
iprconfig -c query-ha-mode sg5</b></p>

<p style="margin-left:22%;"><b>set-ha-mode [IOA] [Normal |
RAID]</b></p>

<p style="margin-left:32%;">Used to set the
high-availability mode of the adapter. Refer to the
<b>query-ha-mode</b> command for more information regarding
these settings. Example: <b><br>
iprconfig -c set-ha-mode sg5 Normal</b></p>


<p style="margin-left:22%;"><b>set-array-asymmetric-access-mode
[array] [Optimized | <br>
Non-Optimized]</b></p>

<p style="margin-left:32%;">Used to set the asymmetric
access mode of the disk array. Example: <b><br>
iprconfig -c set-array-asymmetric-access-mode sda
Optimized</b></p>


<p style="margin-left:22%;"><b>set-ioa-asymmetric-access-mode
[IOA] [Enabled | Disabled]</b></p>

<p style="margin-left:32%;">Used to set the asymmetric
access mode of the IOA. <br>
Example: <b><br>
iprconfig -c set-ioa-asymmetric-access-mode sg5
Enabled</b></p>

<p style="margin-left:22%;"><b>set-ioa-caching [IOA]
[Default | Disabled]</b></p>

<p style="margin-left:32%;">Used to set the requested
caching mode of the IOA. <br>
Example: <b><br>
iprconfig -c set-ioa-caching sg5 Disabled</b></p>

<p style="margin-left:22%;"><b>set-array-rebuild-verify
[IOA] [enable | disable | default]</b></p>

<p style="margin-left:32%;">Used to define whether to
perform verification during an array rebuild. Enabling this
can affect performance. The default value is disabled. <br>
Example: <b><br>
iprconfig -c set-array-rebuild-rate sg5 disable</b></p>

<p style="margin-left:22%;"><b>set-array-rebuild-rate [IOA]
[Rebuild Rate | default]</b></p>

<p style="margin-left:32%;">Used to set the rebuilt rate
ratio of the IOA. [Rebuild Rate] must be in range 0..100. If
&rsquo;default&rsquo; is used, the IOA will reset to the
implementation default rate. <br>
Example: <b><br>
iprconfig -c set-array-rebuild-rate sg5 10</b></p>

<p style="margin-left:22%;"><b>get-live-dump [IOA]</b></p>

<p style="margin-left:32%;">Dump the IOA&rsquo;s
implementation unique critical information. The dump data
will be saved in the /var/log/ directory with the pattern
ipr-CCIN-PCI_ADDRESS-dump-TIMESTAMP. <br>
Example: <b><br>
iprconfig -c get-live-dump sg5</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="22%"></td>
<td width="6%">


<p><b>dump</b></p></td>
<td width="4%"></td>
<td width="68%">


<p>Display detailed hardware and system information on
standard output. In case a report file is needed, the iprsos
command will create one at /var/log/iprsos.log.</p></td></tr>
</table>

<p style="margin-left:32%;">Example: <b><br>
iprconfig -c dump</b></p>


<p style="margin-left:11%;"><b>&minus;&minus;version</b></p>

<p style="margin-left:22%;">Print version number of
<b>iprconfig</b></p>

<p style="margin-left:11%;"><b>&minus;&minus;debug</b></p>

<p style="margin-left:22%;">Enable additional error
logging. Enabling this will result in additional errors
logging to /var/log/messages.</p>

<p style="margin-left:11%;"><b>&minus;&minus;force</b></p>

<p style="margin-left:22%;">Disable safety checks. Use this
to disable safety checks in iprconfig. This will allow you
to format devices that are not at the appropriate code
levels. Only use this option if you really know what you are
doing.</p>

<h2>AUTHOR
<a name="AUTHOR"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Brian King
&lt;brking@us.ibm.com&gt;</p>

<h2>NOTES
<a name="NOTES"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Notes on
using under iSeries 5250 telnet</b></p>

<p style="margin-left:11%; margin-top: 1em">Only use this
utility across 5250 telnet when there are no other options
available to you. Since there may be occasions when 5250
telnet is your only option to access your iSeries Linux
console, every attempt has been made to make this utility
usable under 5250 telnet. By following a few guidelines, you
can make your 5250 telnet experience more productive and
much less frustrating.</p>

<p style="margin-left:11%; margin-top: 1em">1. First of
all, it will be helpful to know how the keys are mapped
under 5250 telnet. From the 5250 telnet window, hit ESC.
This will get you to the <b>Send TELNET Control
Functions</b> menu. Take option 6 to display the keyboard
map. Take note of how TAB, ESC, CTLC, and SENDWOCR are
bound. They will be useful in the future.</p>

<p style="margin-left:11%; margin-top: 1em">2. When
selecting menu options, enter the menu number, followed by
the enter key, same as usual.</p>

<p style="margin-left:11%; margin-top: 1em">3. When typing
single character commands (eg. r=Refresh), type the single
character followed by the SENDWOCR key (F11 by default).</p>

<p style="margin-left:11%; margin-top: 1em">4. When on a
device/array/IOA selection screen (eg. Display Disk Unit
Details), do NOT use the arrow keys to navigate. Instead use
the TAB key (F7 by default) to navigate these screens.</p>

<p style="margin-left:11%; margin-top: 1em">5. Beware of
the backspace and delete keys. As a rule do NOT use
them.</p>

<p style="margin-left:11%; margin-top: 1em">6. When editing
the root kernel message log directory or the default editor,
you may use the arrow keys, but not the backspace and delete
keys. Use the space bar to remove already typed
characters.</p>
<hr>
</body>
</html>
