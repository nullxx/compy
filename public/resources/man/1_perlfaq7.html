<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:59:08 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERLFAQ7</title>

</head>
<body>

<h1 align="center">PERLFAQ7</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#AUTHOR AND COPYRIGHT">AUTHOR AND COPYRIGHT</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perlfaq7
&minus; General Perl Language Issues</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
deals with general Perl language issues that don&rsquo;t
clearly fit into any of the other sections.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Can I get a
BNF/yacc/RE for the Perl language?</b> <br>
There is no <small>BNF</small> , but you can paw your way
through the yacc grammar in perly.y in the source
distribution if you&rsquo;re particularly brave. The grammar
relies on very smart tokenizing code, so be prepared to
venture into toke.c as well.</p>

<p style="margin-left:11%; margin-top: 1em">In the words of
Chaim Frenkel: &quot;Perl&rsquo;s grammar can not be reduced
to <small>BNF</small> . The work of parsing perl is
distributed between yacc, the lexer, smoke and
mirrors.&quot;</p>

<p style="margin-left:11%; margin-top: 1em"><b>What are all
these $@%&amp;* punctuation signs, and how do I know when to
use them?</b> <br>
They are type specifiers, as detailed in perldata:</p>

<pre style="margin-left:11%; margin-top: 1em">    $ for scalar values (number, string or reference)
    @ for arrays
    % for hashes (associative arrays)
    &amp; for subroutines (aka functions, procedures, methods)
    * for all types of that symbol name. In version 4 you used them like
      pointers, but in modern perls you can just use references.</pre>


<p style="margin-left:11%; margin-top: 1em">There are a
couple of other symbols that you&rsquo;re likely to
encounter that aren&rsquo;t really type specifiers:</p>

<pre style="margin-left:11%; margin-top: 1em">    &lt;&gt; are used for inputting a record from a filehandle.
    \  takes a reference to something.</pre>


<p style="margin-left:11%; margin-top: 1em">Note that &lt;
<small>FILE</small> &gt; is <i>neither</i> the type
specifier for files nor the name of the handle. It is the
<tt>&quot;&lt;&gt;&quot;</tt> operator applied to the handle
<small>FILE</small> . It reads one line (well, record--see
&quot;$/&quot; in perlvar) from the handle
<small>FILE</small> in scalar context, or <i>all</i> lines
in list context. When performing open, close, or any other
operation besides <tt>&quot;&lt;&gt;&quot;</tt> on files, or
even when talking about the handle, do <i>not</i> use the
brackets. These are correct: <tt>&quot;eof(FH)&quot;</tt>,
<tt>&quot;seek(FH, 0, 2)&quot;</tt> and &quot;copying from
<small>STDIN</small> to <small>FILE</small> &quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Do I
always/never have to quote my strings or use semicolons and
commas?</b> <br>
Normally, a bareword doesn&rsquo;t need to be quoted, but in
most cases probably should be (and must be under
<tt>&quot;use strict&quot;</tt>). But a hash key consisting
of a simple word and the left-hand operand to the
<tt>&quot;=&gt;&quot;</tt> operator both count as though
they were quoted:</p>

<pre style="margin-left:11%; margin-top: 1em">    This                    is like this
    &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;            &minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;&minus;
    $foo{line}              $foo{'line'}
    bar =&gt; stuff            'bar' =&gt; stuff</pre>


<p style="margin-left:11%; margin-top: 1em">The final
semicolon in a block is optional, as is the final comma in a
list. Good style (see perlstyle) says to put them in except
for one-liners:</p>

<pre style="margin-left:11%; margin-top: 1em">    if ($whoops) { exit 1 }
    my @nums = (1, 2, 3);
    if ($whoops) {
        exit 1;
    }
    my @lines = (
        &quot;There Beren came from mountains cold&quot;,
        &quot;And lost he wandered under leaves&quot;,
    );</pre>


<p style="margin-left:11%; margin-top: 1em"><b>How do I
skip some return values?</b> <br>
One way is to treat the return values as a list and index
into it:</p>

<pre style="margin-left:11%; margin-top: 1em">    $dir = (getpwnam($user))[7];</pre>


<p style="margin-left:11%; margin-top: 1em">Another way is
to use undef as an element on the left-hand-side:</p>

<pre style="margin-left:11%; margin-top: 1em">    ($dev, $ino, undef, undef, $uid, $gid) = stat($file);</pre>


<p style="margin-left:11%; margin-top: 1em">You can also
use a list slice to select only the elements that you
need:</p>

<pre style="margin-left:11%; margin-top: 1em">    ($dev, $ino, $uid, $gid) = ( stat($file) )[0,1,4,5];</pre>


<p style="margin-left:11%; margin-top: 1em"><b>How do I
temporarily block warnings?</b> <br>
If you are running Perl 5.6.0 or better, the <tt>&quot;use
warnings&quot;</tt> pragma allows fine control of what
warnings are produced. See perllexwarn for more details.</p>

<pre style="margin-left:11%; margin-top: 1em">    {
        no warnings;          # temporarily turn off warnings
        $x = $y + $z;         # I know these might be undef
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Additionally,
you can enable and disable categories of warnings. You turn
off the categories you want to ignore and you can still get
other categories of warnings. See perllexwarn for the
complete details, including the category names and
hierarchy.</p>

<pre style="margin-left:11%; margin-top: 1em">    {
        no warnings 'uninitialized';
        $x = $y + $z;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">If you have an
older version of Perl, the <tt>$^W</tt> variable (documented
in perlvar) controls runtime warnings for a block:</p>

<pre style="margin-left:11%; margin-top: 1em">    {
        local $^W = 0;        # temporarily turn off warnings
        $x = $y + $z;         # I know these might be undef
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Note that like
all the punctuation variables, you cannot currently use
<i>my()</i> on <tt>$^W</tt>, only <i>local()</i>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
an extension?</b> <br>
An extension is a way of calling compiled C code from Perl.
Reading perlxstut is a good place to learn more about
extensions.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why do Perl
operators have different precedence than C operators?</b>
<br>
Actually, they don&rsquo;t. All C operators that Perl copies
have the same precedence in Perl as they do in C. The
problem is with operators that C doesn&rsquo;t have,
especially functions that give a list context to everything
on their right, eg. print, chmod, exec, and so on. Such
functions are called &quot;list operators&quot; and appear
as such in the precedence table in perlop.</p>

<p style="margin-left:11%; margin-top: 1em">A common
mistake is to write:</p>

<pre style="margin-left:11%; margin-top: 1em">    unlink $file || die &quot;snafu&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">This gets
interpreted as:</p>

<pre style="margin-left:11%; margin-top: 1em">    unlink ($file || die &quot;snafu&quot;);</pre>


<p style="margin-left:11%; margin-top: 1em">To avoid this
problem, either put in extra parentheses or use the super
low precedence <tt>&quot;or&quot;</tt> operator:</p>

<pre style="margin-left:11%; margin-top: 1em">    (unlink $file) || die &quot;snafu&quot;;
    unlink $file or die &quot;snafu&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">The
&quot;English&quot; operators (<tt>&quot;and&quot;</tt>,
<tt>&quot;or&quot;</tt>, <tt>&quot;xor&quot;</tt>, and
<tt>&quot;not&quot;</tt>) deliberately have precedence lower
than that of list operators for just such situations as the
one above.</p>

<p style="margin-left:11%; margin-top: 1em">Another
operator with surprising precedence is exponentiation. It
binds more tightly even than unary minus, making
<tt>&quot;&minus;2**2&quot;</tt> produce a negative four and
not a positive one. It is also right-associating, meaning
that <tt>&quot;2**3**2&quot;</tt> is two raised to the ninth
power, not eight squared.</p>

<p style="margin-left:11%; margin-top: 1em">Although it has
the same precedence as in C, Perl&rsquo;s
<tt>&quot;?:&quot;</tt> operator produces an lvalue. This
assigns <tt>$x</tt> to either <tt>$if_true</tt> or
<tt>$if_false</tt>, depending on the trueness of
<tt>$maybe:</tt></p>

<p style="margin-left:11%; margin-top: 1em"><tt>($maybe ?
$if_true : $if_false) = $x;</tt></p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
declare/create a structure?</b> <br>
In general, you don&rsquo;t &quot;declare&quot; a structure.
Just use a (probably anonymous) hash reference. See perlref
and perldsc for details. Here&rsquo;s an example:</p>

<pre style="margin-left:11%; margin-top: 1em">    $person = {};                   # new anonymous hash
    $person&minus;&gt;{AGE}  = 24;           # set field AGE to 24
    $person&minus;&gt;{NAME} = &quot;Nat&quot;;        # set field NAME to &quot;Nat&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
looking for something a bit more rigorous, try perltoot.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
create a module?</b> <br>
perlnewmod is a good place to start, ignore the bits about
uploading to <small>CPAN</small> if you don&rsquo;t want to
make your module publicly available.</p>


<p style="margin-left:11%; margin-top: 1em">ExtUtils::ModuleMaker
and Module::Starter are also good places to start. Many
<small>CPAN</small> authors now use Dist::Zilla to automate
as much as possible.</p>

<p style="margin-left:11%; margin-top: 1em">Detailed
documentation about modules can be found at: perlmod,
perlmodlib, perlmodstyle.</p>

<p style="margin-left:11%; margin-top: 1em">If you need to
include C code or C library interfaces use h2xs. h2xs will
create the module distribution structure and the initial
interface files. perlxs and perlxstut explain the
details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
adopt or take over a module already on <small>CPAN</small>
?</b> <br>
Ask the current maintainer to make you a co-maintainer or
transfer the module to you.</p>

<p style="margin-left:11%; margin-top: 1em">If you can not
reach the author for some reason contact the
<small>PAUSE</small> admins at modules@perl.org who may be
able to help, but each case it treated seperatly.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Get a login for the Perl Authors Upload Server (
<small>PAUSE</small> ) if you don&rsquo;t already have one:
&lt;http://pause.perl.org&gt;</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Write to modules@perl.org explaining what you did to
contact the current maintainer. The <small>PAUSE</small>
admins will also try to reach the maintainer.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Post a public message in a heavily trafficked site
announcing your intention to take over the module.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Wait a bit. The <small>PAUSE</small> admins don&rsquo;t
want to act too quickly in case the current maintainer is on
holiday. If there&rsquo;s no response to private
communication or the public post, a <small>PAUSE</small>
admin can transfer it to you.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
create a class?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">In Perl, a
class is just a package, and methods are just subroutines.
Perl doesn&rsquo;t get more formal than that and lets you
set up the package just the way that you like it (that is,
it doesn&rsquo;t set up anything for you).</p>

<p style="margin-left:11%; margin-top: 1em">The Perl
documentation has several tutorials that cover class
creation, including perlboot (Barnyard Object Oriented
Tutorial), perltoot (Tom&rsquo;s Object Oriented Tutorial),
perlbot (Bag o&rsquo; Object Tricks), and perlobj.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
tell if a variable is tainted?</b> <br>
You can use the <i>tainted()</i> function of the
Scalar::Util module, available from <small>CPAN</small> (or
included with Perl since release 5.8.0). See also
&quot;Laundering and Detecting Tainted Data&quot; in
perlsec.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
a closure?</b> <br>
Closures are documented in perlref.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Closure</i>
is a computer science term with a precise but
hard-to-explain meaning. Usually, closures are implemented
in Perl as anonymous subroutines with lasting references to
lexical variables outside their own scopes. These lexicals
magically refer to the variables that were around when the
subroutine was defined (deep binding).</p>

<p style="margin-left:11%; margin-top: 1em">Closures are
most often used in programming languages where you can have
the return value of a function be itself a function, as you
can in Perl. Note that some languages provide anonymous
functions but are not capable of providing proper closures:
the Python language, for example. For more information on
closures, check out any textbook on functional programming.
Scheme is a language that not only supports but encourages
closures.</p>

<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s a
classic non-closure function-generating function:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub add_function_generator {
        return sub { shift() + shift() };
    }
    my $add_sub = add_function_generator();
    my $sum = $add_sub&minus;&gt;(4,5);                # $sum is 9 now.</pre>


<p style="margin-left:11%; margin-top: 1em">The anonymous
subroutine returned by <i>add_function_generator()</i>
isn&rsquo;t technically a closure because it refers to no
lexicals outside its own scope. Using a closure gives you a
<i>function template</i> with some customization slots left
out to be filled later.</p>

<p style="margin-left:11%; margin-top: 1em">Contrast this
with the following <i>make_adder()</i> function, in which
the returned anonymous function contains a reference to a
lexical variable outside the scope of that function itself.
Such a reference requires that Perl return a proper closure,
thus locking in for all time the value that the lexical had
when the function was created.</p>

<pre style="margin-left:11%; margin-top: 1em">    sub make_adder {
        my $addpiece = shift;
        return sub { shift() + $addpiece };
    }
    my $f1 = make_adder(20);
    my $f2 = make_adder(555);</pre>


<p style="margin-left:11%; margin-top: 1em">Now
<tt>&quot;$f1&minus;&gt;($n)&quot;</tt> is always 20 plus
whatever <tt>$n</tt> you pass in, whereas
<tt>&quot;$f2&minus;&gt;($n)&quot;</tt> is always 555 plus
whatever <tt>$n</tt> you pass in. The <tt>$addpiece</tt> in
the closure sticks around.</p>

<p style="margin-left:11%; margin-top: 1em">Closures are
often used for less esoteric purposes. For example, when you
want to pass in a bit of code into a function:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $line;
    timeout( 30, sub { $line = &lt;STDIN&gt; } );</pre>


<p style="margin-left:11%; margin-top: 1em">If the code to
execute had been passed in as a string, <tt>'$line =
&lt;STDIN&gt;'</tt>, there would have been no way for the
hypothetical <i>timeout()</i> function to access the lexical
variable <tt>$line</tt> back in its caller&rsquo;s
scope.</p>

<p style="margin-left:11%; margin-top: 1em">Another use for
a closure is to make a variable <i>private</i> to a named
subroutine, e.g. a counter that gets initialized at creation
time of the sub and can only be modified from within the
sub. This is sometimes used with a <small>BEGIN</small>
block in package files to make sure a variable doesn&rsquo;t
get meddled with during the lifetime of the package:</p>

<pre style="margin-left:11%; margin-top: 1em">    BEGIN {
        my $id = 0;
        sub next_id { ++$id }
    }</pre>


<p style="margin-left:11%; margin-top: 1em">This is
discussed in more detail in perlsub; see the entry on
<i>Persistent Private Variables</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>What is
variable suicide and how can I prevent it?</b> <br>
This problem was fixed in perl 5.004_05, so preventing it
means upgrading your version of perl. ;)</p>

<p style="margin-left:11%; margin-top: 1em">Variable
suicide is when you (temporarily or permanently) lose the
value of a variable. It is caused by scoping through
<i>my()</i> and <i>local()</i> interacting with either
closures or aliased <i>foreach()</i> iterator variables and
subroutine arguments. It used to be easy to inadvertently
lose a variable&rsquo;s value this way, but now it&rsquo;s
much harder. Take this code:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $f = 'foo';
    sub T {
        while ($i++ &lt; 3) { my $f = $f; $f .= &quot;bar&quot;; print $f, &quot;\n&quot; }
    }
    T;
    print &quot;Finally $f\n&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">If you are
experiencing variable suicide, that <tt>&quot;my
$f&quot;</tt> in the subroutine doesn&rsquo;t pick up a
fresh copy of the <tt>$f</tt> whose value is <tt>'foo'</tt>.
The output shows that inside the subroutine the value of
<tt>$f</tt> leaks through when it shouldn&rsquo;t, as in
this output:</p>

<pre style="margin-left:11%; margin-top: 1em">    foobar
    foobarbar
    foobarbarbar
    Finally foo</pre>


<p style="margin-left:11%; margin-top: 1em">The <tt>$f</tt>
that has &quot;bar&quot; added to it three times should be a
new <tt>$f &quot;my $f&quot;</tt> should create a new
lexical variable each time through the loop. The expected
output is:</p>

<pre style="margin-left:11%; margin-top: 1em">    foobar
    foobar
    foobar
    Finally foo</pre>


<p style="margin-left:11%; margin-top: 1em"><b>How can I
pass/return a {Function, FileHandle, Array, Hash, Method,
Regex}?</b> <br>
You need to pass references to these objects. See &quot;Pass
by Reference&quot; in perlsub for this particular question,
and perlref for information on references. <br>
Passing Variables and Functions</p>

<p style="margin-left:17%;">Regular variables and functions
are quite easy to pass: just pass in a reference to an
existing or anonymous variable or function:</p>

<pre style="margin-left:17%; margin-top: 1em">    func( \$some_scalar );
    func( \@some_array  );
    func( [ 1 .. 10 ]   );
    func( \%some_hash   );
    func( { this =&gt; 10, that =&gt; 20 }   );
    func( \&amp;some_func   );
    func( sub { $_[0] ** $_[1] }   );</pre>


<p style="margin-left:11%;">Passing Filehandles</p>

<p style="margin-left:17%;">As of Perl 5.6, you can
represent filehandles with scalar variables which you treat
as any other scalar.</p>

<pre style="margin-left:17%; margin-top: 1em">    open my $fh, $filename or die &quot;Cannot open $filename! $!&quot;;
    func( $fh );
    sub func {
        my $passed_fh = shift;
        my $line = &lt;$passed_fh&gt;;
    }</pre>


<p style="margin-left:17%; margin-top: 1em">Before Perl
5.6, you had to use the <tt>*FH</tt> or
<tt>&quot;\*FH&quot;</tt> notations. These are
&quot;typeglobs&quot;&minus;&minus;see &quot;Typeglobs and
Filehandles&quot; in perldata and especially &quot;Pass by
Reference&quot; in perlsub for more information.</p>

<p style="margin-left:11%;">Passing Regexes</p>

<p style="margin-left:17%;">Here&rsquo;s an example of how
to pass in a string and a regular expression for it to match
against. You construct the pattern with the
<tt>&quot;qr//&quot;</tt> operator:</p>

<pre style="margin-left:17%; margin-top: 1em">    sub compare($$) {
        my ($val1, $regex) = @_;
        my $retval = $val1 =~ /$regex/;
        return $retval;
    }
    $match = compare(&quot;old McDonald&quot;, qr/d.*D/i);</pre>


<p style="margin-left:11%;">Passing Methods</p>

<p style="margin-left:17%;">To pass an object method into a
subroutine, you can do this:</p>

<pre style="margin-left:17%; margin-top: 1em">    call_a_lot(10, $some_obj, &quot;methname&quot;)
    sub call_a_lot {
        my ($count, $widget, $trick) = @_;
        for (my $i = 0; $i &lt; $count; $i++) {
            $widget&minus;&gt;$trick();
        }
    }</pre>


<p style="margin-left:17%; margin-top: 1em">Or, you can use
a closure to bundle up the object, its method call, and
arguments:</p>

<pre style="margin-left:17%; margin-top: 1em">    my $whatnot = sub { $some_obj&minus;&gt;obfuscate(@args) };
    func($whatnot);
    sub func {
        my $code = shift;
        &amp;$code();
    }</pre>


<p style="margin-left:17%; margin-top: 1em">You could also
investigate the <i>can()</i> method in the
<small>UNIVERSAL</small> class (part of the standard perl
distribution).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
create a static variable?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">In Perl 5.10,
declare the variable with <tt>&quot;state&quot;</tt>. The
<tt>&quot;state&quot;</tt> declaration creates the lexical
variable that persists between calls to the subroutine:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub counter { state $count = 1; $count++ }</pre>


<p style="margin-left:11%; margin-top: 1em">You can fake a
static variable by using a lexical variable which goes out
of scope. In this example, you define the subroutine
<tt>&quot;counter&quot;</tt>, and it uses the lexical
variable <tt>$count</tt>. Since you wrap this in a
<small>BEGIN</small> block, <tt>$count</tt> is defined at
compile-time, but also goes out of scope at the end of the
<small>BEGIN</small> block. The <small>BEGIN</small> block
also ensures that the subroutine and the value it uses is
defined at compile-time so the subroutine is ready to use
just like any other subroutine, and you can put this code in
the same place as other subroutines in the program text
(i.e. at the end of the code, typically). The subroutine
<tt>&quot;counter&quot;</tt> still has a reference to the
data, and is the only way you can access the value (and each
time you do, you increment the value). The data in chunk of
memory defined by <tt>$count</tt> is private to
<tt>&quot;counter&quot;</tt>.</p>

<pre style="margin-left:11%; margin-top: 1em">    BEGIN {
        my $count = 1;
        sub counter { $count++ }
    }
    my $start = counter();
    .... # code that calls counter();
    my $end = counter();</pre>


<p style="margin-left:11%; margin-top: 1em">In the previous
example, you created a function-private variable because
only one function remembered its reference. You could define
multiple functions while the variable is in scope, and each
function can share the &quot;private&quot; variable.
It&rsquo;s not really &quot;static&quot; because you can
access it outside the function while the lexical variable is
in scope, and even create references to it. In this example,
<tt>&quot;increment_count&quot;</tt> and
<tt>&quot;return_count&quot;</tt> share the variable. One
function adds to the value and the other simply returns the
value. They can both access <tt>$count</tt>, and since it
has gone out of scope, there is no other way to access
it.</p>

<pre style="margin-left:11%; margin-top: 1em">    BEGIN {
        my $count = 1;
        sub increment_count { $count++ }
        sub return_count    { $count }
    }</pre>


<p style="margin-left:11%; margin-top: 1em">To declare a
file-private variable, you still use a lexical variable. A
file is also a scope, so a lexical variable defined in the
file cannot be seen from any other file.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;Persistent Private Variables&quot; in perlsub for more
information. The discussion of closures in perlref may help
you even though we did not use anonymous subroutines in this
answer. See &quot;Persistent Private Variables&quot; in
perlsub for details.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
the difference between dynamic and lexical (static) scoping?
Between</b> <i>local()</i> <b>and</b> <i>my()</i><b>?</b>
<tt><br>
&quot;local($x)&quot;</tt> saves away the old value of the
global variable <tt>$x</tt> and assigns a new value for the
duration of the subroutine <i>which is visible in other
functions called from that subroutine</i>. This is done at
run-time, so is called dynamic scoping. <i>local()</i>
always affects global variables, also called package
variables or dynamic variables.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;my($x)&quot;</tt>
creates a new variable that is only visible in the current
subroutine. This is done at compile-time, so it is called
lexical or static scoping. <i>my()</i> always affects
private variables, also called lexical variables or
(improperly) static(ly scoped) variables.</p>

<p style="margin-left:11%; margin-top: 1em">For
instance:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub visible {
        print &quot;var has value $var\n&quot;;
    }
    sub dynamic {
        local $var = 'local';    # new temporary value for the still&minus;global
        visible();              #   variable called $var
    }
    sub lexical {
        my $var = 'private';    # new private variable, $var
        visible();              # (invisible outside of sub scope)
    }
    $var = 'global';
    visible();              # prints global
    dynamic();              # prints local
    lexical();              # prints global</pre>


<p style="margin-left:11%; margin-top: 1em">Notice how at
no point does the value &quot;private&quot; get printed.
That&rsquo;s because <tt>$var</tt> only has that value
within the block of the <i>lexical()</i> function, and it is
hidden from the called subroutine.</p>

<p style="margin-left:11%; margin-top: 1em">In summary,
<i>local()</i> doesn&rsquo;t make what you think of as
private, local variables. It gives a global variable a
temporary value. <i>my()</i> is what you&rsquo;re looking
for if you want private variables.</p>

<p style="margin-left:11%; margin-top: 1em">See
&quot;Private Variables via <i>my()</i>&quot; in perlsub and
&quot;Temporary Values via <i>local()</i>&quot; in perlsub
for excruciating details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
access a dynamic variable while a similarly named lexical is
in scope?</b> <br>
If you know your package, you can just mention it
explicitly, as in <tt>$Some_Pack::var</tt>. Note that the
notation <tt>$::var</tt> is <b>not</b> the dynamic
<tt>$var</tt> in the current package, but rather the one in
the &quot;main&quot; package, as though you had written
<tt>$main::var</tt>.</p>

<pre style="margin-left:11%; margin-top: 1em">    use vars '$var';
    local $var = &quot;global&quot;;
    my    $var = &quot;lexical&quot;;
    print &quot;lexical is $var\n&quot;;
    print &quot;global  is $main::var\n&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">Alternatively
you can use the compiler directive <i>our()</i> to bring a
dynamic variable into the current lexical scope.</p>

<pre style="margin-left:11%; margin-top: 1em">    require 5.006; # our() did not exist before 5.6
    use vars '$var';
    local $var = &quot;global&quot;;
    my $var    = &quot;lexical&quot;;
    print &quot;lexical is $var\n&quot;;
    {
        our $var;
        print &quot;global  is $var\n&quot;;
    }</pre>



<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
the difference between deep and shallow binding?</b> <br>
In deep binding, lexical variables mentioned in anonymous
subroutines are the same ones that were in scope when the
subroutine was created. In shallow binding, they are
whichever variables with the same names happen to be in
scope when the subroutine is called. Perl always uses deep
binding of lexical variables (i.e., those created with
<i>my()</i>). However, dynamic variables (aka global, local,
or package variables) are effectively shallowly bound.
Consider this just one more reason not to use them. See the
answer to &quot;What&rsquo;s a closure?&quot;.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Why
doesn&rsquo;t &quot;my($foo) = &lt;$fh&gt;;&quot; work
right?</b> <tt><br>
&quot;my()&quot;</tt> and <tt>&quot;local()&quot;</tt> give
list context to the right hand side of
<tt>&quot;=&quot;</tt>. The &lt;$fh&gt; read operation, like
so many of Perl&rsquo;s functions and operators, can tell
which context it was called in and behaves appropriately. In
general, the <i>scalar()</i> function can help. This
function does nothing to the data itself (contrary to
popular myth) but rather tells its argument to behave in
whatever its scalar fashion is. If that function
doesn&rsquo;t have a defined scalar behavior, this of course
doesn&rsquo;t help you (such as with <i>sort()</i>).</p>

<p style="margin-left:11%; margin-top: 1em">To enforce
scalar context in this particular case, however, you need
merely omit the parentheses:</p>

<pre style="margin-left:11%; margin-top: 1em">    local($foo) = &lt;$fh&gt;;        # WRONG
    local($foo) = scalar(&lt;$fh&gt;);   # ok
    local $foo  = &lt;$fh&gt;;        # right</pre>


<p style="margin-left:11%; margin-top: 1em">You should
probably be using lexical variables anyway, although the
issue is the same here:</p>

<pre style="margin-left:11%; margin-top: 1em">    my($foo) = &lt;$fh&gt;;    # WRONG
    my $foo  = &lt;$fh&gt;;    # right</pre>


<p style="margin-left:11%; margin-top: 1em"><b>How do I
redefine a builtin function, operator, or method?</b> <br>
Why do you want to do that? :&minus;)</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
override a predefined function, such as <i>open()</i>, then
you&rsquo;ll have to import the new definition from a
different module. See &quot;Overriding Built-in
Functions&quot; in perlsub.</p>

<p style="margin-left:11%; margin-top: 1em">If you want to
overload a Perl operator, such as <tt>&quot;+&quot;</tt> or
<tt>&quot;**&quot;</tt>, then you&rsquo;ll want to use the
<tt>&quot;use overload&quot;</tt> pragma, documented in
overload.</p>

<p style="margin-left:11%; margin-top: 1em">If you&rsquo;re
talking about obscuring method calls in parent classes, see
&quot;Overridden Methods&quot; in perltoot.</p>


<p style="margin-left:11%; margin-top: 1em"><b>What&rsquo;s
the difference between calling a function as &amp;foo
and</b> <i>foo()</i><b>?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">Calling a
subroutine as <tt>&amp;foo</tt> with no trailing parentheses
ignores the prototype of <tt>&quot;foo&quot;</tt> and passes
it the current value of the argument list, <tt>@_</tt>.
Here&rsquo;s an example; the <tt>&quot;bar&quot;</tt>
subroutine calls <tt>&amp;foo</tt>, which prints its
arguments list:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub bar { &amp;foo }
    sub foo { print &quot;Args in foo are: @_\n&quot; }
    bar( qw( a b c ) );</pre>


<p style="margin-left:11%; margin-top: 1em">When you call
<tt>&quot;bar&quot;</tt> with arguments, you see that
<tt>&quot;foo&quot;</tt> got the same <tt>@_</tt>:</p>

<pre style="margin-left:11%; margin-top: 1em">    Args in foo are: a b c</pre>


<p style="margin-left:11%; margin-top: 1em">Calling the
subroutine with trailing parentheses, with or without
arguments, does not use the current <tt>@_</tt> and respects
the subroutine prototype. Changing the example to put
parentheses after the call to <tt>&quot;foo&quot;</tt>
changes the program:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub bar { &amp;foo() }
    sub foo { print &quot;Args in foo are: @_\n&quot; }
    bar( qw( a b c ) );</pre>


<p style="margin-left:11%; margin-top: 1em">Now the output
shows that <tt>&quot;foo&quot;</tt> doesn&rsquo;t get the
<tt>@_</tt> from its caller.</p>

<pre style="margin-left:11%; margin-top: 1em">    Args in foo are:</pre>


<p style="margin-left:11%; margin-top: 1em">The main use of
the <tt>@_</tt> pass-through feature is to write subroutines
whose main job it is to call other subroutines for you. For
further details, see perlsub.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
create a switch or case statement?</b> <br>
In Perl 5.10, use the <tt>&quot;given&minus;when&quot;</tt>
construct described in perlsyn:</p>

<pre style="margin-left:11%; margin-top: 1em">    use 5.010;
    given ( $string ) {
        when( 'Fred' )        { say &quot;I found Fred!&quot; }
        when( 'Barney' )      { say &quot;I found Barney!&quot; }
        when( /Bamm&minus;?Bamm/ )  { say &quot;I found Bamm&minus;Bamm!&quot; }
        default               { say &quot;I don't recognize the name!&quot; }
    };</pre>


<p style="margin-left:11%; margin-top: 1em">If one wants to
use pure Perl and to be compatible with Perl versions prior
to 5.10, the general answer is to use
<tt>&quot;if&minus;elsif&minus;else&quot;</tt>:</p>

<pre style="margin-left:11%; margin-top: 1em">    for ($variable_to_test) {
        if    (/pat1/)  { }     # do something
        elsif (/pat2/)  { }     # do something else
        elsif (/pat3/)  { }     # do something else
        else            { }     # default
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Here&rsquo;s a
simple example of a switch based on pattern matching, lined
up in a way to make it look more like a switch statement.
We&rsquo;ll do a multiway conditional based on the type of
reference stored in <tt>$whatchamacallit:</tt></p>

<p style="margin-left:11%; margin-top: 1em"><tt>SWITCH: for
(ref $whatchamacallit) { <br>
/^$/ &amp;&amp; die &quot;not a reference&quot;; <br>
/SCALAR/ &amp;&amp; do { <br>
print_scalar($$ref); <br>
last SWITCH; <br>
}; <br>
/ARRAY/ &amp;&amp; do { <br>
print_array(@$ref); <br>
last SWITCH; <br>
}; <br>
/HASH/ &amp;&amp; do { <br>
print_hash(%$ref); <br>
last SWITCH; <br>
}; <br>
/CODE/ &amp;&amp; do { <br>
warn &quot;can't print function ref&quot;; <br>
last SWITCH; <br>
}; <br>
# DEFAULT <br>
warn &quot;User defined type skipped&quot;; <br>
}</tt></p>

<p style="margin-left:11%; margin-top: 1em">See perlsyn for
other examples in this style.</p>

<p style="margin-left:11%; margin-top: 1em">Sometimes you
should change the positions of the constant and the
variable. For example, let&rsquo;s say you wanted to test
which of many answers you were given, but in a
case-insensitive way that also allows abbreviations. You can
use the following technique if the strings all start with
different characters or if you want to arrange the matches
so that one takes precedence over another, as
<tt>&quot;SEND&quot;</tt> has precedence over
<tt>&quot;STOP&quot;</tt> here:</p>

<pre style="margin-left:11%; margin-top: 1em">    chomp($answer = &lt;&gt;);
    if    (&quot;SEND&quot;  =~ /^\Q$answer/i) { print &quot;Action is send\n&quot;  }
    elsif (&quot;STOP&quot;  =~ /^\Q$answer/i) { print &quot;Action is stop\n&quot;  }
    elsif (&quot;ABORT&quot; =~ /^\Q$answer/i) { print &quot;Action is abort\n&quot; }
    elsif (&quot;LIST&quot;  =~ /^\Q$answer/i) { print &quot;Action is list\n&quot;  }
    elsif (&quot;EDIT&quot;  =~ /^\Q$answer/i) { print &quot;Action is edit\n&quot;  }</pre>


<p style="margin-left:11%; margin-top: 1em">A totally
different approach is to create a hash of function
references.</p>

<pre style="margin-left:11%; margin-top: 1em">    my %commands = (
        &quot;happy&quot; =&gt; \&amp;joy,
        &quot;sad&quot;,  =&gt; \&amp;sullen,
        &quot;done&quot;  =&gt; sub { die &quot;See ya!&quot; },
        &quot;mad&quot;   =&gt; \&amp;angry,
    );
    print &quot;How are you? &quot;;
    chomp($string = &lt;STDIN&gt;);
    if ($commands{$string}) {
        $commands{$string}&minus;&gt;();
    } else {
        print &quot;No such command: $string\n&quot;;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Starting from
Perl 5.8, a source filter module,
<tt>&quot;Switch&quot;</tt>, can also be used to get switch
and case. Its use is now discouraged, because it&rsquo;s not
fully compatible with the native switch of Perl 5.10, and
because, as it&rsquo;s implemented as a source filter, it
doesn&rsquo;t always work as intended when complex syntax is
involved.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
catch accesses to undefined variables, functions, or
methods?</b> <br>
The <small>AUTOLOAD</small> method, discussed in
&quot;Autoloading&quot; in perlsub and &quot;
<small>AUTOLOAD:</small> Proxy Methods&quot; in perltoot,
lets you capture calls to undefined functions and
methods.</p>

<p style="margin-left:11%; margin-top: 1em">When it comes
to undefined variables that would trigger a warning under
<tt>&quot;use warnings&quot;</tt>, you can promote the
warning to an error.</p>

<pre style="margin-left:11%; margin-top: 1em">    use warnings FATAL =&gt; qw(uninitialized);</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Why
can&rsquo;t a method included in this same file be
found?</b> <br>
Some possible reasons: your inheritance is getting confused,
you&rsquo;ve misspelled the method name, or the object is of
the wrong type. Check out perltoot for details about any of
the above cases. You may also use <tt>&quot;print
ref($object)&quot;</tt> to find out the class
<tt>$object</tt> was blessed into.</p>

<p style="margin-left:11%; margin-top: 1em">Another
possible reason for problems is that you&rsquo;ve used the
indirect object syntax (eg, <tt>&quot;find Guru
&quot;Samy&quot;&quot;</tt>) on a class name before Perl has
seen that such a package exists. It&rsquo;s wisest to make
sure your packages are all defined before you start using
them, which will be taken care of if you use the
<tt>&quot;use&quot;</tt> statement instead of
<tt>&quot;require&quot;</tt>. If not, make sure to use arrow
notation (eg.,
<tt>&quot;Guru&minus;&gt;find(&quot;Samy&quot;)&quot;</tt>)
instead. Object notation is explained in perlobj.</p>

<p style="margin-left:11%; margin-top: 1em">Make sure to
read about creating modules in perlmod and the perils of
indirect objects in &quot;Method Invocation&quot; in
perlobj.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
find out my current or calling package?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">To find the
package you are currently in, use the special literal
<tt>&quot;__PACKAGE__&quot;</tt>, as documented in perldata.
You can only use the special literals as separate tokens, so
you can&rsquo;t interpolate them into strings like you can
with variables:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $current_package = __PACKAGE__;
    print &quot;I am in package $current_package\n&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">If you want to
find the package calling your code, perhaps to give better
diagnostics as Carp does, use the
<tt>&quot;caller&quot;</tt> built-in:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub foo {
        my @args = ...;
        my( $package, $filename, $line ) = caller;
        print &quot;I was called from package $package\n&quot;;
        );</pre>


<p style="margin-left:11%; margin-top: 1em">By default,
your program starts in package <tt>&quot;main&quot;</tt>, so
you will always be in some package.</p>

<p style="margin-left:11%; margin-top: 1em">This is
different from finding out the package an object is blessed
into, which might not be the current package. For that, use
<tt>&quot;blessed&quot;</tt> from Scalar::Util, part of the
Standard Library since Perl 5.8:</p>

<pre style="margin-left:11%; margin-top: 1em">    use Scalar::Util qw(blessed);
    my $object_package = blessed( $object );</pre>


<p style="margin-left:11%; margin-top: 1em">Most of the
time, you shouldn&rsquo;t care what package an object is
blessed into, however, as long as it claims to inherit from
that class:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $is_right_class = eval { $object&minus;&gt;isa( $package ) }; # true or false</pre>


<p style="margin-left:11%; margin-top: 1em">And, with Perl
5.10 and later, you don&rsquo;t have to check for an
inheritance to see if the object can handle a role. For
that, you can use <tt>&quot;DOES&quot;</tt>, which comes
from <tt>&quot;UNIVERSAL&quot;</tt>:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $class_does_it = eval { $object&minus;&gt;DOES( $role ) }; # true or false</pre>


<p style="margin-left:11%; margin-top: 1em">You can safely
replace <tt>&quot;isa&quot;</tt> with
<tt>&quot;DOES&quot;</tt> (although the converse is not
true).</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
comment out a large block of Perl code?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">The
quick-and-dirty way to comment out more than one line of
Perl is to surround those lines with Pod directives. You
have to put these directives at the beginning of the line
and somewhere where Perl expects a new statement (so not in
the middle of statements like the <tt>&quot;#&quot;</tt>
comments). You end the comment with
<tt>&quot;=cut&quot;</tt>, ending the Pod section:</p>

<pre style="margin-left:11%; margin-top: 1em">    =pod
    my $object = NotGonnaHappen&minus;&gt;new();
    ignored_sub();
    $wont_be_assigned = 37;
    =cut</pre>


<p style="margin-left:11%; margin-top: 1em">The
quick-and-dirty method only works well when you don&rsquo;t
plan to leave the commented code in the source. If a Pod
parser comes along, you&rsquo;re multiline comment is going
to show up in the Pod translation. A better way hides it
from Pod parsers as well.</p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;=begin&quot;</tt> directive can mark a section for
a particular purpose. If the Pod parser doesn&rsquo;t want
to handle it, it just ignores it. Label the comments with
<tt>&quot;comment&quot;</tt>. End the comment using
<tt>&quot;=end&quot;</tt> with the same label. You still
need the <tt>&quot;=cut&quot;</tt> to go back to Perl code
from the Pod comment:</p>

<pre style="margin-left:11%; margin-top: 1em">    =begin comment
    my $object = NotGonnaHappen&minus;&gt;new();
    ignored_sub();
    $wont_be_assigned = 37;
    =end comment
    =cut</pre>


<p style="margin-left:11%; margin-top: 1em">For more
information on Pod, check out perlpod and perlpodspec.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How do I
clear a package?</b> <br>
Use this code, provided by Mark-Jason Dominus:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub scrub_package {
        no strict 'refs';
        my $pack = shift;
        die &quot;Shouldn't delete main package&quot;
            if $pack eq &quot;&quot; || $pack eq &quot;main&quot;;
        my $stash = *{$pack . '::'}{HASH};
        my $name;
        foreach $name (keys %$stash) {
            my $fullname = $pack . '::' . $name;
            # Get rid of everything with that name.
            undef $$fullname;
            undef @$fullname;
            undef %$fullname;
            undef &amp;$fullname;
            undef *$fullname;
        }
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Or, if
you&rsquo;re using a recent release of Perl, you can just
use the <i>Symbol::delete_package()</i> function
instead.</p>

<p style="margin-left:11%; margin-top: 1em"><b>How can I
use a variable as a variable name?</b> <br>
Beginners often think they want to have a variable contain
the name of a variable.</p>

<pre style="margin-left:11%; margin-top: 1em">    $fred    = 23;
    $varname = &quot;fred&quot;;
    ++$$varname;         # $fred now 24</pre>


<p style="margin-left:11%; margin-top: 1em">This works
<i>sometimes</i>, but it is a very bad idea for two
reasons.</p>

<p style="margin-left:11%; margin-top: 1em">The first
reason is that this technique <i>only works on global
variables</i>. That means that if <tt>$fred</tt> is a
lexical variable created with <i>my()</i> in the above
example, the code wouldn&rsquo;t work at all: you&rsquo;d
accidentally access the global and skip right over the
private lexical altogether. Global variables are bad because
they can easily collide accidentally and in general make for
non-scalable and confusing code.</p>

<p style="margin-left:11%; margin-top: 1em">Symbolic
references are forbidden under the <tt>&quot;use
strict&quot;</tt> pragma. They are not true references and
consequently are not reference-counted or
garbage-collected.</p>

<p style="margin-left:11%; margin-top: 1em">The other
reason why using a variable to hold the name of another
variable is a bad idea is that the question often stems from
a lack of understanding of Perl data structures,
particularly hashes. By using symbolic references, you are
just using the package&rsquo;s symbol-table hash (like
<tt>%main::</tt>) instead of a user-defined hash. The
solution is to use your own hash or a real reference
instead.</p>

<pre style="margin-left:11%; margin-top: 1em">    $USER_VARS{&quot;fred&quot;} = 23;
    my $varname = &quot;fred&quot;;
    $USER_VARS{$varname}++;  # not $$varname++</pre>


<p style="margin-left:11%; margin-top: 1em">There
we&rsquo;re using the <tt>%USER_VARS</tt> hash instead of
symbolic references. Sometimes this comes up in reading
strings from the user with variable references and wanting
to expand them to the values of your perl program&rsquo;s
variables. This is also a bad idea because it conflates the
program-addressable namespace and the user-addressable one.
Instead of reading a string and expanding it to the actual
contents of your program&rsquo;s own variables:</p>

<pre style="margin-left:11%; margin-top: 1em">    $str = 'this has a $fred and $barney in it';
    $str =~ s/(\$\w+)/$1/eeg;          # need double eval</pre>


<p style="margin-left:11%; margin-top: 1em">it would be
better to keep a hash around like <tt>%USER_VARS</tt> and
have variable references actually refer to entries in that
hash:</p>

<pre style="margin-left:11%; margin-top: 1em">    $str =~ s/\$(\w+)/$USER_VARS{$1}/g;   # no /e here at all</pre>


<p style="margin-left:11%; margin-top: 1em">That&rsquo;s
faster, cleaner, and safer than the previous approach. Of
course, you don&rsquo;t need to use a dollar sign. You could
use your own scheme to make it less confusing, like
bracketed percent symbols, etc.</p>

<pre style="margin-left:11%; margin-top: 1em">    $str = 'this has a %fred% and %barney% in it';
    $str =~ s/%(\w+)%/$USER_VARS{$1}/g;   # no /e here at all</pre>


<p style="margin-left:11%; margin-top: 1em">Another reason
that folks sometimes think they want a variable to contain
the name of a variable is that they don&rsquo;t know how to
build proper data structures using hashes. For example,
let&rsquo;s say they wanted two hashes in their program:
<tt>%fred</tt> and <tt>%barney</tt>, and that they wanted to
use another scalar variable to refer to those by name.</p>

<pre style="margin-left:11%; margin-top: 1em">    $name = &quot;fred&quot;;
    $$name{WIFE} = &quot;wilma&quot;;     # set %fred
    $name = &quot;barney&quot;;
    $$name{WIFE} = &quot;betty&quot;;    # set %barney</pre>


<p style="margin-left:11%; margin-top: 1em">This is still a
symbolic reference, and is still saddled with the problems
enumerated above. It would be far better to write:</p>

<pre style="margin-left:11%; margin-top: 1em">    $folks{&quot;fred&quot;}{WIFE}   = &quot;wilma&quot;;
    $folks{&quot;barney&quot;}{WIFE} = &quot;betty&quot;;</pre>


<p style="margin-left:11%; margin-top: 1em">And just use a
multilevel hash to start with.</p>

<p style="margin-left:11%; margin-top: 1em">The only times
that you absolutely <i>must</i> use symbolic references are
when you really must refer to the symbol table. This may be
because it&rsquo;s something that one can&rsquo;t take a
real reference to, such as a format name. Doing so may also
be important for method calls, since these always go through
the symbol table for resolution.</p>

<p style="margin-left:11%; margin-top: 1em">In those cases,
you would turn off <tt>&quot;strict 'refs'&quot;</tt>
temporarily so you can play around with the symbol table.
For example:</p>

<pre style="margin-left:11%; margin-top: 1em">    @colors = qw(red blue green yellow orange purple violet);
    for my $name (@colors) {
        no strict 'refs';  # renege for the block
        *$name = sub { &quot;&lt;FONT COLOR='$name'&gt;@_&lt;/FONT&gt;&quot; };
    }</pre>


<p style="margin-left:11%; margin-top: 1em">All those
functions (<i>red()</i>, <i>blue()</i>, <i>green()</i>,
etc.) appear to be separate, but the real code in the
closure actually was compiled only once.</p>

<p style="margin-left:11%; margin-top: 1em">So, sometimes
you might want to use symbolic references to manipulate the
symbol table directly. This doesn&rsquo;t matter for
formats, handles, and subroutines, because they are always
global--you can&rsquo;t use <i>my()</i> on them. For
scalars, arrays, and hashes, though--and usually for
subroutines-- you probably only want to use hard
references.</p>

<p style="margin-left:11%; margin-top: 1em"><b>What does
&quot;bad interpreter&quot; mean?</b> <br>
(contributed by brian d foy)</p>

<p style="margin-left:11%; margin-top: 1em">The &quot;bad
interpreter&quot; message comes from the shell, not perl.
The actual message may vary depending on your platform,
shell, and locale settings.</p>

<p style="margin-left:11%; margin-top: 1em">If you see
&quot;bad interpreter &minus; no such file or
directory&quot;, the first line in your perl script (the
&quot;shebang&quot; line) does not contain the right path to
perl (or any other program capable of running scripts).
Sometimes this happens when you move the script from one
machine to another and each machine has a different path to
perl&minus;&minus;/usr/bin/perl versus /usr/local/bin/perl
for instance. It may also indicate that the source machine
has <small>CRLF</small> line terminators and the destination
machine has <small>LF</small> only: the shell tries to find
/usr/bin/perl&lt; <small>CR</small> &gt;, but
can&rsquo;t.</p>

<p style="margin-left:11%; margin-top: 1em">If you see
&quot;bad interpreter: Permission denied&quot;, you need to
make your script executable.</p>

<p style="margin-left:11%; margin-top: 1em">In either case,
you should still be able to run the scripts with perl
explicitly:</p>

<pre style="margin-left:11%; margin-top: 1em">    % perl script.pl</pre>


<p style="margin-left:11%; margin-top: 1em">If you get a
message like &quot;perl: command not found&quot;, perl is
not in your <small>PATH</small> , which might also mean that
the location of perl is not where you expect it so you need
to adjust your shebang line.</p>

<h2>AUTHOR AND COPYRIGHT
<a name="AUTHOR AND COPYRIGHT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Copyright (c)
1997&minus;2010 Tom Christiansen, Nathan Torkington, and
other authors as noted. All rights reserved.</p>

<p style="margin-left:11%; margin-top: 1em">This
documentation is free; you can redistribute it and/or modify
it under the same terms as Perl itself.</p>

<p style="margin-left:11%; margin-top: 1em">Irrespective of
its distribution, all code examples in this file are hereby
placed into the public domain. You are permitted and
encouraged to use this code in your own programs for fun or
for profit as you see fit. A simple comment in the code
giving credit would be courteous but is not required.</p>
<hr>
</body>
</html>
