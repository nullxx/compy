<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 14:58:51 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>PERL5160DELTA</title>

</head>
<body>

<h1 align="center">PERL5160DELTA</h1>

<a href="#NAME">NAME</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#Notice">Notice</a><br>
<a href="#Core Enhancements">Core Enhancements</a><br>
<a href="#Security">Security</a><br>
<a href="#Deprecations">Deprecations</a><br>
<a href="#Future Deprecations">Future Deprecations</a><br>
<a href="#Incompatible Changes">Incompatible Changes</a><br>
<a href="#Performance Enhancements">Performance Enhancements</a><br>
<a href="#Modules and Pragmata">Modules and Pragmata</a><br>
<a href="#Documentation">Documentation</a><br>
<a href="#Diagnostics">Diagnostics</a><br>
<a href="#Utility Changes">Utility Changes</a><br>
<a href="#Configuration and Compilation">Configuration and Compilation</a><br>
<a href="#Platform Support">Platform Support</a><br>
<a href="#Internal Changes">Internal Changes</a><br>
<a href="#Selected Bug Fixes">Selected Bug Fixes</a><br>
<a href="#Known Problems">Known Problems</a><br>
<a href="#Acknowledgements">Acknowledgements</a><br>
<a href="#Reporting Bugs">Reporting Bugs</a><br>
<a href="#SEE ALSO">SEE ALSO</a><br>

<hr>


<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">perl5160delta
&minus; what is new for perl v5.16.0</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This document
describes differences between the 5.14.0 release and the
5.16.0 release.</p>

<p style="margin-left:11%; margin-top: 1em">If you are
upgrading from an earlier release such as 5.12.0, first read
perl5140delta, which describes differences between 5.12.0
and 5.14.0.</p>

<p style="margin-left:11%; margin-top: 1em">Some bug fixes
in this release have been backported to later releases of
5.14.x. Those are indicated with the 5.14.x version in
parentheses.</p>

<h2>Notice
<a name="Notice"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">With the
release of Perl 5.16.0, the 5.12.x series of releases is now
out of its support period. There may be future 5.12.x
releases, but only in the event of a critical security
issue. Users of Perl 5.12 or earlier should consider
upgrading to a more recent release of Perl.</p>

<p style="margin-left:11%; margin-top: 1em">This policy is
described in greater detail in perlpolicy.</p>

<h2>Core Enhancements
<a name="Core Enhancements"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>&quot;use</b>
<i>VERSION</i><b>&quot;</b> <br>
As of this release, version declarations like <tt>&quot;use
v5.16&quot;</tt> now disable all features before enabling
the new feature bundle. This means that the following holds
true:</p>

<pre style="margin-left:11%; margin-top: 1em">    use 5.016;
    # only 5.16 features enabled here
    use 5.014;
    # only 5.14 features enabled here (not 5.16)</pre>


<p style="margin-left:11%; margin-top: 1em">&quot;use
v5.12&quot; and higher continue to enable strict, but
explicit <tt>&quot;use strict&quot;</tt> and <tt>&quot;no
strict&quot;</tt> now override the version declaration, even
when they come first:</p>

<pre style="margin-left:11%; margin-top: 1em">    no strict;
    use 5.012;
    # no strict here</pre>


<p style="margin-left:11%; margin-top: 1em">There is a new
&quot;:default&quot; feature bundle that represents the set
of features enabled before any version declaration or
<tt>&quot;use feature&quot;</tt> has been seen. Version
declarations below 5.10 now enable the &quot;:default&quot;
feature set. This does not actually change the behavior of
<tt>&quot;use v5.8&quot;</tt>, because features added to the
&quot;:default&quot; set are those that were traditionally
enabled by default, before they could be turned off.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>&quot;no
feature&quot;</tt> now resets to the default feature set. To
disable all features (which is likely to be a pretty
special-purpose request, since it presumably won&rsquo;t
match any named set of semantics) you can now write
<tt>&quot;no feature ':all'&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><tt>$[</tt> is
now disabled under <tt>&quot;use v5.16&quot;</tt>. It is
part of the default feature set and can be turned on or off
explicitly with <tt>&quot;use feature
'array_base'&quot;</tt>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&quot;__SUB__&quot;</b>
<br>
The new <tt>&quot;__SUB__&quot;</tt> token, available under
the <tt>&quot;current_sub&quot;</tt> feature (see feature)
or <tt>&quot;use v5.16&quot;</tt>, returns a reference to
the current subroutine, making it easier to write recursive
closures.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New and
Improved Built-ins</b> <i><br>
More consistent &quot;eval&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;eval&quot;</tt> operator sometimes treats a string
argument as a sequence of characters and sometimes as a
sequence of bytes, depending on the internal encoding. The
internal encoding is not supposed to make any difference,
but there is code that relies on this inconsistency.</p>

<p style="margin-left:11%; margin-top: 1em">The new
<tt>&quot;unicode_eval&quot;</tt> and
<tt>&quot;evalbytes&quot;</tt> features (enabled under
<tt>&quot;use 5.16.0&quot;</tt>) resolve this. The
<tt>&quot;unicode_eval&quot;</tt> feature causes
<tt>&quot;eval $string&quot;</tt> to treat the string always
as Unicode. The <tt>&quot;evalbytes&quot;</tt> features
provides a function, itself called
<tt>&quot;evalbytes&quot;</tt>, which evaluates its argument
always as a string of bytes.</p>

<p style="margin-left:11%; margin-top: 1em">These features
also fix oddities with source filters leaking to outer
dynamic scopes.</p>

<p style="margin-left:11%; margin-top: 1em">See feature for
more detail.</p>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;substr&quot;
lvalue revamp</i></p>

<p style="margin-left:11%; margin-top: 1em">When
<tt>&quot;substr&quot;</tt> is called in lvalue or potential
lvalue context with two or three arguments, a special lvalue
scalar is returned that modifies the original string (the
first argument) when assigned to.</p>

<p style="margin-left:11%; margin-top: 1em">Previously, the
offsets (the second and third arguments) passed to
<tt>&quot;substr&quot;</tt> would be converted immediately
to match the string, negative offsets being translated to
positive and offsets beyond the end of the string being
truncated.</p>

<p style="margin-left:11%; margin-top: 1em">Now, the
offsets are recorded without modification in the special
lvalue scalar that is returned, and the original string is
not even looked at by <tt>&quot;substr&quot;</tt> itself,
but only when the returned lvalue is read or modified.</p>

<p style="margin-left:11%; margin-top: 1em">These changes
result in an incompatible change:</p>

<p style="margin-left:11%; margin-top: 1em">If the original
string changes length after the call to
<tt>&quot;substr&quot;</tt> but before assignment to its
return value, negative offsets will remember their position
from the end of the string, affecting code like this:</p>

<pre style="margin-left:11%; margin-top: 1em">    my $string = &quot;string&quot;;
    my $lvalue = \substr $string, &minus;4, 2;
    print $$lvalue, &quot;\n&quot;; # prints &quot;ri&quot;
    $string = &quot;bailing twine&quot;;
    print $$lvalue, &quot;\n&quot;; # prints &quot;wi&quot;; used to print &quot;il&quot;</pre>


<p style="margin-left:11%; margin-top: 1em">The same thing
happens with an omitted third argument. The returned lvalue
will always extend to the end of the string, even if the
string becomes longer.</p>

<p style="margin-left:11%; margin-top: 1em">Since this
change also allowed many bugs to be fixed (see &quot;The
<tt>&quot;substr&quot;</tt> operator&quot;), and since the
behavior of negative offsets has never been specified, the
change was deemed acceptable.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Return value
of &quot;tied&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">The value
returned by <tt>&quot;tied&quot;</tt> on a tied variable is
now the actual scalar that holds the object to which the
variable is tied. This lets ties be weakened with
<tt>&quot;Scalar::Util::weaken(tied
$tied_variable)&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unicode
Support</b> <i><br>
Supports (almost) Unicode 6.1</i></p>

<p style="margin-left:11%; margin-top: 1em">Besides the
addition of whole new scripts, and new characters in
existing scripts, this new version of Unicode, as always,
makes some changes to existing characters. One change that
may trip up some applications is that the General Category
of two characters in the Latin&minus;1 range, <small>PILCROW
SIGN</small> and <small>SECTION SIGN</small> , has been
changed from Other_Symbol to Other_Punctuation. The same
change has been made for a character in each of Tibetan,
Ethiopic, and Aegean. The code points U+3248..U+324F (
<small>CIRCLED NUMBER TEN ON BLACK SQUARE</small> through
<small>CIRCLED NUMBER EIGHTY ON BLACK SQUARE</small> ) have
had their General Category changed from Other_Symbol to
Other_Numeric. The Line Break property has changes for
Hebrew and Japanese; and because of other changes in 6.1,
the Perl regular expression construct
<tt>&quot;\X&quot;</tt> now works differently for some
characters in Thai and Lao.</p>

<p style="margin-left:11%; margin-top: 1em">New aliases
(synonyms) have been defined for many property values;
these, along with the previously existing ones, are all
cross-indexed in perluniprops.</p>

<p style="margin-left:11%; margin-top: 1em">The return
value of <tt>&quot;charnames::viacode()&quot;</tt> is
affected by other changes:</p>

<pre style="margin-left:11%; margin-top: 1em"> Code point      Old Name             New Name
   U+000A    LINE FEED (LF)        LINE FEED
   U+000C    FORM FEED (FF)        FORM FEED
   U+000D    CARRIAGE RETURN (CR)  CARRIAGE RETURN
   U+0085    NEXT LINE (NEL)       NEXT LINE
   U+008E    SINGLE&minus;SHIFT 2        SINGLE&minus;SHIFT&minus;2
   U+008F    SINGLE&minus;SHIFT 3        SINGLE&minus;SHIFT&minus;3
   U+0091    PRIVATE USE 1         PRIVATE USE&minus;1
   U+0092    PRIVATE USE 2         PRIVATE USE&minus;2
   U+2118    SCRIPT CAPITAL P      WEIERSTRASS ELLIPTIC FUNCTION</pre>


<p style="margin-left:11%; margin-top: 1em">Perl will
accept any of these names as input, but
<tt>&quot;charnames::viacode()&quot;</tt> now returns the
new name of each pair. The change for U+2118 is considered
by Unicode to be a correction, that is the original name was
a mistake (but again, it will remain forever valid to use it
to refer to U+2118). But most of these changes are the
fallout of the mistake Unicode 6.0 made in naming a
character used in Japanese cell phones to be &quot;
<small>BELL</small> &quot;, which conflicts with the
longstanding industry use of (and Unicode&rsquo;s
recommendation to use) that name to mean the
<small>ASCII</small> control character at U+0007. Therefore,
that name has been deprecated in Perl since v5.14, and any
use of it will raise a warning message (unless turned off).
The name &quot; <small>ALERT</small> &quot; is now the
preferred name for this code point, with &quot;
<small>BEL</small> &quot; an acceptable short form. The name
for the new cell phone character, at code point U+1F514,
remains undefined in this version of Perl (hence we
don&rsquo;t implement quite all of Unicode 6.1), but
starting in v5.18, <small>BELL</small> will mean this
character, and not U+0007.</p>

<p style="margin-left:11%; margin-top: 1em">Unicode has
taken steps to make sure that this sort of mistake does not
happen again. The Standard now includes all generally
accepted names and abbreviations for control characters,
whereas previously it didn&rsquo;t (though there were
recommended names for most of them, which Perl used). This
means that most of those recommended names are now
officially in the Standard. Unicode did not recommend names
for the four code points listed above between U+008E and
U+008F, and in standardizing them Unicode subtly changed the
names that Perl had previously given them, by replacing the
final blank in each name by a hyphen. Unicode also
officially accepts names that Perl had deprecated, such as
<small>FILE SEPARATOR</small> . Now the only deprecated name
is <small>BELL</small> . Finally, Perl now uses the new
official names instead of the old (now considered obsolete)
names for the first four code points in the list above (the
ones which have the parentheses in them).</p>

<p style="margin-left:11%; margin-top: 1em">Now that the
names have been placed in the Unicode standard, these kinds
of changes should not happen again, though corrections, such
as to U+2118, are still possible.</p>

<p style="margin-left:11%; margin-top: 1em">Unicode also
added some name abbreviations, which Perl now accepts:
<small>SP</small> for <small>SPACE</small> ;
<small>TAB</small> for <small>CHARACTER TABULATION</small> ;
<small>NEW LINE</small> , <small>END OF LINE</small> ,
<small>NL</small> , and <small>EOL</small> for <small>LINE
FEED</small> ; LOCKING-SHIFT <small>ONE</small> for
<small>SHIFT OUT</small> ; LOCKING-SHIFT <small>ZERO</small>
for <small>SHIFT IN</small> ; and <small>ZWNBSP</small> for
<small>ZERO WIDTH</small> NO-BREAK <small>SPACE</small>
.</p>

<p style="margin-left:11%; margin-top: 1em">More details on
this version of Unicode are provided in
&lt;http://www.unicode.org/versions/Unicode6.1.0/&gt;.</p>

<p style="margin-left:11%; margin-top: 1em"><i>&quot;use
charnames&quot; is no longer needed for
&quot;\N{name}&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">When
<tt>&quot;\N{</tt><i>name</i><tt>}&quot;</tt> is
encountered, the <tt>&quot;charnames&quot;</tt> module is
now automatically loaded when needed as if the
<tt>&quot;:full&quot;</tt> and <tt>&quot;:short&quot;</tt>
options had been specified. See charnames for more
information.</p>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;\N{...}&quot;
can now have Unicode loose name matching</i></p>

<p style="margin-left:11%; margin-top: 1em">This is
described in the <tt>&quot;charnames&quot;</tt> item in
&quot;Updated Modules and Pragmata&quot; below.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Unicode
Symbol Names</i></p>

<p style="margin-left:11%; margin-top: 1em">Perl now has
proper support for Unicode in symbol names. It used to be
that <tt>&quot;*{$foo}&quot;</tt> would ignore the internal
<small>UTF8</small> flag and use the bytes of the underlying
representation to look up the symbol. That meant that
<tt>&quot;*{&quot;\x{100}&quot;}&quot;</tt> and
<tt>&quot;*{&quot;\xc4\x80&quot;}&quot;</tt> would return
the same thing. All these parts of Perl have been fixed to
account for Unicode:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Method names (including those passed to <tt>&quot;use
overload&quot;</tt>)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Typeglob names (including names of variables,
subroutines, and filehandles)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Package names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;goto&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Symbolic dereferencing</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Second argument to <tt>&quot;bless()&quot;</tt> and
<tt>&quot;tie()&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Return value of <tt>&quot;ref()&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Subroutine prototypes</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Attributes</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Various warnings and error messages that mention
variable names or values, methods, etc.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">In addition, a
parsing bug has been fixed that prevented
<tt>&quot;*{e}&quot;</tt> from implicitly quoting the name,
but instead interpreted it as <tt>&quot;*{+e}&quot;</tt>,
which would cause a strict violation.</p>


<p style="margin-left:11%; margin-top: 1em"><tt>&quot;*{&quot;*a::b&quot;}&quot;</tt>
automatically strips off the * if it is followed by an
<small>ASCII</small> letter. That has been extended to all
Unicode identifier characters.</p>

<p style="margin-left:11%; margin-top: 1em">One-character
non-ASCII non-punctuation variables (like
<tt>&quot;$e&quot;</tt>) are now subject to &quot;Used only
once&quot; warnings. They used to be exempt, as they were
treated as punctuation variables.</p>

<p style="margin-left:11%; margin-top: 1em">Also,
single-character Unicode punctuation variables (like
<tt>$X</tt>) are now supported [perl #69032].</p>

<p style="margin-left:11%; margin-top: 1em"><i>Improved
ability to mix locales and Unicode, including
<small>UTF&minus;8</small> locales</i></p>

<p style="margin-left:11%; margin-top: 1em">An optional
parameter has been added to <tt>&quot;use
locale&quot;</tt></p>

<p style="margin-left:11%; margin-top: 1em"><tt>use locale
':not_characters';</tt></p>

<p style="margin-left:11%; margin-top: 1em">which tells
Perl to use all but the <tt>&quot;LC_CTYPE&quot;</tt> and
<tt>&quot;LC_COLLATE&quot;</tt> portions of the current
locale. Instead, the character set is assumed to be Unicode.
This lets locales and Unicode be seamlessly mixed, including
the increasingly frequent <small>UTF&minus;8</small>
locales. When using this hybrid form of locales, the
<tt>&quot;:locale&quot;</tt> layer to the open pragma can be
used to interface with the file system, and there are
<small>CPAN</small> modules available for
<small>ARGV</small> and environment variable
conversions.</p>

<p style="margin-left:11%; margin-top: 1em">Full details
are in perllocale.</p>

<p style="margin-left:11%; margin-top: 1em"><i>New function
&quot;fc&quot; and corresponding escape sequence
&quot;\F&quot; for Unicode foldcase</i></p>

<p style="margin-left:11%; margin-top: 1em">Unicode
foldcase is an extension to lowercase that gives better
results when comparing two strings case-insensitively. It
has long been used internally in regular expression
<tt>&quot;/i&quot;</tt> matching. Now it is available
explicitly through the new <tt>&quot;fc&quot;</tt> function
call (enabled by
<tt>&quot;use&nbsp;feature&nbsp;'fc'&quot;</tt>, or
<tt>&quot;use v5.16&quot;</tt>, or explicitly callable via
<tt>&quot;CORE::fc&quot;</tt>) or through the new
<tt>&quot;\F&quot;</tt> sequence in double-quotish
strings.</p>

<p style="margin-left:11%; margin-top: 1em">Full details
are in &quot;fc&quot; in perlfunc.</p>

<p style="margin-left:11%; margin-top: 1em"><i>The Unicode
&quot;Script_Extensions&quot; property is now
supported.</i></p>

<p style="margin-left:11%; margin-top: 1em">New in Unicode
6.0, this is an improved <tt>&quot;Script&quot;</tt>
property. Details are in &quot;Scripts&quot; in
perlunicode.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>XS</small>
Changes</b> <i><br>
Improved typemaps for Some Builtin Types</i></p>

<p style="margin-left:11%; margin-top: 1em">Most
<small>XS</small> authors will know there is a longstanding
bug in the <small>OUTPUT</small> typemap for T_AVREF
(<tt>&quot;AV*&quot;</tt>), T_HVREF
(<tt>&quot;HV*&quot;</tt>), T_CVREF
(<tt>&quot;CV*&quot;</tt>), and T_SVREF
(<tt>&quot;SVREF&quot;</tt> or <tt>&quot;\$foo&quot;</tt>)
that requires manually decrementing the reference count of
the return value instead of the typemap taking care of this.
For backwards-compatibility, this cannot be changed in the
default typemaps. But we now provide additional typemaps
<tt>&quot;T_AVREF_REFCOUNT_FIXED&quot;</tt>, etc. that do
not exhibit this bug. Using them in your extension is as
simple as having one line in your
<tt>&quot;TYPEMAP&quot;</tt> section:</p>

<pre style="margin-left:11%; margin-top: 1em">  HV*   T_HVREF_REFCOUNT_FIXED</pre>



<p style="margin-left:11%; margin-top: 1em"><i>&quot;is_utf8_char()&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">The XS-callable
function <tt>&quot;is_utf8_char()&quot;</tt>, when presented
with malformed <small>UTF&minus;8</small> input, can read up
to 12 bytes beyond the end of the string. This cannot be
fixed without changing its <small>API</small> , and so its
use is now deprecated. Use
<tt>&quot;is_utf8_char_buf()&quot;</tt> (described just
below) instead.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Added
&quot;is_utf8_char_buf()&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">This function
is designed to replace the deprecated
&quot;<i>is_utf8_char()</i>&quot; function. It includes an
extra parameter to make sure it doesn&rsquo;t read past the
end of the input buffer.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Other
&quot;is_utf8_foo()&quot; functions, as well as
&quot;utf8_to_foo()&quot;, etc.</i></p>

<p style="margin-left:11%; margin-top: 1em">Most other
XS-callable functions that take <small>UTF&minus;8</small>
encoded input implicitly assume that the
<small>UTF&minus;8</small> is valid (not malformed) with
respect to buffer length. Do not do things such as change a
character&rsquo;s case or see if it is alphanumeric without
first being sure that it is valid <small>UTF&minus;8</small>
. This can be safely done for a whole string by using one of
the functions <tt>&quot;is_utf8_string()&quot;</tt>,
<tt>&quot;is_utf8_string_loc()&quot;</tt>, and
<tt>&quot;is_utf8_string_loclen()&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>New Pad
<small>API</small></i></p>

<p style="margin-left:11%; margin-top: 1em">Many new
functions have been added to the <small>API</small> for
manipulating lexical pads. See &quot;Pad Data
Structures&quot; in perlapi for more information.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changes to
Special Variables</b> <i><br>
$$ can be assigned to</i></p>

<p style="margin-left:11%; margin-top: 1em"><tt>$$</tt> was
made read-only in Perl 5.8.0. But only sometimes:
<tt>&quot;local $$&quot;</tt> would make it writable again.
Some <small>CPAN</small> modules were using <tt>&quot;local
$$&quot;</tt> or <small>XS</small> code to bypass the
read-only check, so there is no reason to keep <tt>$$</tt>
read-only. (This change also allowed a bug to be fixed while
maintaining backward compatibility.)</p>

<p style="margin-left:11%; margin-top: 1em"><i>$^X
converted to an absolute path on FreeBSD, <small>OS</small>
X and Solaris</i></p>

<p style="margin-left:11%; margin-top: 1em"><tt>$^X</tt> is
now converted to an absolute path on <small>OS</small> X,
FreeBSD (without needing <i>/proc</i> mounted) and Solaris
10 and 11. This augments the previous approach of using
<i>/proc</i> on Linux, FreeBSD, and NetBSD (in all cases,
where mounted).</p>

<p style="margin-left:11%; margin-top: 1em">This makes
relocatable perl installations more useful on these
platforms. (See &quot;Relocatable <tt>@INC</tt>&quot; in
<i><small>INSTALL</small></i> )</p>

<p style="margin-left:11%; margin-top: 1em"><b>Debugger
Changes</b> <i><br>
Features inside the debugger</i></p>

<p style="margin-left:11%; margin-top: 1em">The current
Perl&rsquo;s feature bundle is now enabled for commands
entered in the interactive debugger.</p>

<p style="margin-left:11%; margin-top: 1em"><i>New option
for the debugger&rsquo;s</i> <b><i>t</i></b>
<i>command</i></p>

<p style="margin-left:11%; margin-top: 1em">The <b>t</b>
command in the debugger, which toggles tracing mode, now
accepts a numeric argument that determines how many levels
of subroutine calls to trace.</p>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;enable&quot;
and &quot;disable&quot;</i></p>

<p style="margin-left:11%; margin-top: 1em">The debugger
now has <tt>&quot;disable&quot;</tt> and
<tt>&quot;enable&quot;</tt> commands for disabling existing
breakpoints and re-enabling them. See perldebug.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Breakpoints
with file names</i></p>

<p style="margin-left:11%; margin-top: 1em">The
debugger&rsquo;s &quot;b&quot; command for setting
breakpoints now lets a line number be prefixed with a file
name. See &quot;b [file]:[line] [condition]&quot; in
perldebug.</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
&quot;CORE&quot; Namespace</b> <i><br>
The &quot;CORE::&quot; prefix</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;CORE::&quot;</tt> prefix can now be used on
keywords enabled by feature.pm, even outside the scope of
<tt>&quot;use feature&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Subroutines
in the &quot;CORE&quot; namespace</i></p>

<p style="margin-left:11%; margin-top: 1em">Many Perl
keywords are now available as subroutines in the
<small>CORE</small> namespace. This lets them be
aliased:</p>

<pre style="margin-left:11%; margin-top: 1em">    BEGIN { *entangle = \&amp;CORE::tie }
    entangle $variable, $package, @args;</pre>


<p style="margin-left:11%; margin-top: 1em">And for
prototypes to be bypassed:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub mytie(\[%$*@]$@) {
        my ($ref, $pack, @args) = @_;
        ... do something ...
        goto &amp;CORE::tie;
    }</pre>


<p style="margin-left:11%; margin-top: 1em">Some of these
cannot be called through references or via <tt>&amp;foo</tt>
syntax, but must be called as barewords.</p>

<p style="margin-left:11%; margin-top: 1em">See
<small>CORE</small> for details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Other
Changes</b> <i><br>
Anonymous handles</i></p>

<p style="margin-left:11%; margin-top: 1em">Automatically
generated file handles are now named __ANONIO__ when the
variable name cannot be determined, rather than
<tt>$_</tt>_ANONIO__.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Autoloaded
sort Subroutines</i></p>

<p style="margin-left:11%; margin-top: 1em">Custom sort
subroutines can now be autoloaded [perl #30661]:</p>

<pre style="margin-left:11%; margin-top: 1em">    sub AUTOLOAD { ... }
    @sorted = sort foo @list; # uses AUTOLOAD</pre>



<p style="margin-left:11%; margin-top: 1em"><i>&quot;continue&quot;
no longer requires the &quot;switch&quot; feature</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;continue&quot;</tt> keyword has two meanings. It
can introduce a <tt>&quot;continue&quot;</tt> block after a
loop, or it can exit the current <tt>&quot;when&quot;</tt>
block. Up to now, the latter meaning was valid only with the
&quot;switch&quot; feature enabled, and was a syntax error
otherwise. Since the main purpose of feature.pm is to avoid
conflicts with user-defined subroutines, there is no reason
for <tt>&quot;continue&quot;</tt> to depend on it.</p>

<p style="margin-left:11%; margin-top: 1em"><i>DTrace
probes for interpreter phase change</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;phase&minus;change&quot;</tt> probes will fire
when the interpreter&rsquo;s phase changes, which tracks the
<tt>&quot;${^GLOBAL_PHASE}&quot;</tt> variable.
<tt>&quot;arg0&quot;</tt> is the new phase name;
<tt>&quot;arg1&quot;</tt> is the old one. This is useful for
limiting your instrumentation to one or more of: compile
time, run time, or destruct time.</p>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;__FILE__()&quot;
Syntax</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;__FILE__&quot;</tt>, <tt>&quot;__LINE__&quot;</tt>
and <tt>&quot;__PACKAGE__&quot;</tt> tokens can now be
written with an empty pair of parentheses after them. This
makes them parse the same way as <tt>&quot;time&quot;</tt>,
<tt>&quot;fork&quot;</tt> and other built-in functions.</p>

<p style="margin-left:11%; margin-top: 1em"><i>The
&quot;\$&quot; prototype accepts any scalar lvalue</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;\$&quot;</tt> and <tt>&quot;\[$]&quot;</tt>
subroutine prototypes now accept any scalar lvalue argument.
Previously they accepted only scalars beginning with
<tt>&quot;$&quot;</tt> and hash and array elements. This
change makes them consistent with the way the built-in
<tt>&quot;read&quot;</tt> and <tt>&quot;recv&quot;</tt>
functions (among others) parse their arguments. This means
that one can override the built-in functions with custom
subroutines that parse their arguments the same way.</p>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;_&quot;
in subroutine prototypes</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<tt>&quot;_&quot;</tt> character in subroutine prototypes is
now allowed before <tt>&quot;@&quot;</tt> or
<tt>&quot;%&quot;</tt>.</p>

<h2>Security
<a name="Security"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Use
&quot;is_utf8_char_buf()&quot; and not
&quot;is_utf8_char()&quot;</b> <br>
The latter function is now deprecated because its
<small>API</small> is insufficient to guarantee that it
doesn&rsquo;t read (up to 12 bytes in the worst case) beyond
the end of its input string. See
<i>is_utf8_char_buf()</i>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Malformed
<small>UTF&minus;8</small> input could cause attempts to
read beyond the end of the buffer</b> <br>
Two new XS-accessible functions,
<tt>&quot;utf8_to_uvchr_buf()&quot;</tt> and
<tt>&quot;utf8_to_uvuni_buf()&quot;</tt> are now available
to prevent this, and the Perl core has been converted to use
them. See &quot;Internal Changes&quot;.</p>


<p style="margin-left:11%; margin-top: 1em"><b>&quot;File::Glob::bsd_glob()&quot;
memory error with <small>GLOB_ALTDIRFUNC</small> (
<small>CVE&minus;2011&minus;2728</small> ).</b> <br>
Calling <tt>&quot;File::Glob::bsd_glob&quot;</tt> with the
unsupported flag <small>GLOB_ALTDIRFUNC</small> would cause
an access violation / segfault. A Perl program that accepts
a flags value from an external source could expose itself to
denial of service or arbitrary code execution attacks. There
are no known exploits in the wild. The problem has been
corrected by explicitly disabling all unsupported flags and
setting unused function pointers to null. Bug reported by
Clement Lecigne. (5.14.2)</p>

<p style="margin-left:11%; margin-top: 1em"><b>Privileges
are now set correctly when assigning to $(</b> <br>
A hypothetical bug (probably unexploitable in practice)
because the incorrect setting of the effective group
<small>ID</small> while setting <tt>$(</tt> has been fixed.
The bug would have affected only systems that have
<tt>&quot;setresgid()&quot;</tt> but not
<tt>&quot;setregid()&quot;</tt>, but no such systems are
known to exist.</p>

<h2>Deprecations
<a name="Deprecations"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Don&rsquo;t
read the Unicode data base files in</b> <i>lib/unicore</i>
<br>
It is now deprecated to directly read the Unicode data base
files. These are stored in the <i>lib/unicore</i> directory.
Instead, you should use the new functions in Unicode::UCD.
These provide a stable <small>API</small> , and give
complete information.</p>

<p style="margin-left:11%; margin-top: 1em">Perl may at
some point in the future change or remove these files. The
file which applications were most likely to have used is
<i>lib/unicore/ToDigit.pl</i>.
&quot;<i>prop_invmap()</i>&quot; in Unicode::UCD can be used
to get at its data instead.</p>


<p style="margin-left:11%; margin-top: 1em"><b><small>XS</small>
functions &quot;is_utf8_char()&quot;,
&quot;utf8_to_uvchr()&quot; and
&quot;utf8_to_uvuni()&quot;</b> <br>
This function is deprecated because it could read beyond the
end of the input string. Use the new
<i>is_utf8_char_buf()</i>,
<tt>&quot;utf8_to_uvchr_buf()&quot;</tt> and
<tt>&quot;utf8_to_uvuni_buf()&quot;</tt> instead.</p>

<h2>Future Deprecations
<a name="Future Deprecations"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">This section
serves as a notice of features that are <i>likely</i> to be
removed or deprecated in the next release of perl (5.18.0).
If your code depends on these features, you should contact
the Perl 5 Porters via the mailing list
&lt;http://lists.perl.org/list/perl5-porters.html&gt; or
perlbug to explain your use case and inform the deprecation
process.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Core
Modules</b> <br>
These modules may be marked as deprecated <i>from the
core</i>. This only means that they will no longer be
installed by default with the core distribution, but will
remain available on the <small>CPAN</small> .</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p style="margin-top: 1em"><small>CPANPLUS</small></p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>Filter::Simple</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>PerlIO::mmap</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>Pod::LaTeX</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>Pod::Parser</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>SelfLoader</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>Text::Soundex</p></td>
<td width="62%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="21%">


<p>Thread.pm</p></td>
<td width="62%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Platforms
with no supporting programmers:</b> <br>
These platforms will probably have their special build
support removed during the 5.17.0 development series.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p style="margin-top: 1em">BeOS</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p>djgpp</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p>dgux</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p><small>EPOC</small></p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p>MPE/iX</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p>Rhapsody</p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p><small>UTS</small></p></td>
<td width="71%">
</td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="12%">


<p><small>VM/ESA</small></p></td>
<td width="71%">
</td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Other Future
Deprecations</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="32%">


<p style="margin-top: 1em">Swapping of $&lt; and $&gt;</p></td>
<td width="51%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">For more
information about this future deprecation, see the relevant
<small>RT</small> ticket
&lt;https://rt.perl.org/rt3/Ticket/Display.html?id=96212&gt;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="17%">


<p style="margin-top: 1em">sfio, stdio</p></td>
<td width="66%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Perl supports
being built without PerlIO proper, using a stdio or sfio
wrapper instead. A perl build like this will not support
<small>IO</small> layers and thus Unicode <small>IO</small>
, making it rather handicapped.</p>

<p style="margin-left:17%; margin-top: 1em">PerlIO supports
a <tt>&quot;stdio&quot;</tt> layer if stdio use is desired,
and similarly a sfio layer could be produced.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="69%">


<p style="margin-top: 1em">Unescaped literal
<tt>&quot;{&quot;</tt> in regular expressions.</p></td>
<td width="14%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Starting with
v5.20, it is planned to require a literal
<tt>&quot;{&quot;</tt> to be escaped, for example by
preceding it with a backslash. In v5.18, a deprecated
warning message will be emitted for all such uses. This
affects only patterns that are to match a literal
<tt>&quot;{&quot;</tt>. Other uses of this character, such
as part of a quantifier or sequence as in those below, are
completely unaffected:</p>

<pre style="margin-left:17%; margin-top: 1em">    /foo{3,5}/
    /\p{Alphabetic}/
    /\N{DIGIT ZERO}</pre>


<p style="margin-left:17%; margin-top: 1em">Removing this
will permit extensions to Perl&rsquo;s pattern syntax and
better error checking for existing syntax. See
&quot;Quantifiers&quot; in perlre for an example.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Revamping
<tt>&quot;\Q&quot;</tt> semantics in double-quotish strings
when combined with other escapes.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">There are
several bugs and inconsistencies involving combinations of
<tt>&quot;\Q&quot;</tt> and escapes like
<tt>&quot;\x&quot;</tt>, <tt>&quot;\L&quot;</tt>, etc.,
within a <tt>&quot;\Q...\E&quot;</tt> pair. These need to be
fixed, and doing so will necessarily change current
behavior. The changes have not yet been settled.</p>

<h2>Incompatible Changes
<a name="Incompatible Changes"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Special
blocks called in void context</b> <br>
Special blocks (<tt>&quot;BEGIN&quot;</tt>,
<tt>&quot;CHECK&quot;</tt>, <tt>&quot;INIT&quot;</tt>,
<tt>&quot;UNITCHECK&quot;</tt>, <tt>&quot;END&quot;</tt>)
are now called in void context. This avoids wasteful copying
of the result of the last statement [perl #108794].</p>

<p style="margin-left:11%; margin-top: 1em"><b>The
&quot;overloading&quot; pragma and regexp objects</b> <br>
With <tt>&quot;no overloading&quot;</tt>, regular expression
objects returned by <tt>&quot;qr//&quot;</tt> are now
stringified as &quot;Regexp=REGEXP(0xbe600d)&quot; instead
of the regular expression itself [perl #108780].</p>

<p style="margin-left:11%; margin-top: 1em"><b>Two
<small>XS</small> typemap Entries removed</b> <br>
Two presumably unused <small>XS</small> typemap entries have
been removed from the core typemap: T_DATAUNIT and
T_CALLBACK. If you are, against all odds, a user of these,
please see the instructions on how to restore them in
perlxstypemap.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Unicode 6.1
has incompatibilities with Unicode 6.0</b> <br>
These are detailed in &quot;Supports (almost) Unicode
6.1&quot; above. You can compile this version of Perl to use
Unicode 6.0. See &quot;Hacking Perl to work on earlier
Unicode versions (for very serious hackers only)&quot; in
perlunicode.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Borland
compiler</b> <br>
All support for the Borland compiler has been dropped. The
code had not worked for a long time anyway.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Certain
deprecated Unicode properties are no longer supported by
default</b> <br>
Perl should never have exposed certain Unicode properties
that are used by Unicode internally and not meant to be
publicly available. Use of these has generated deprecated
warning messages since Perl 5.12. The removed properties are
Other_Alphabetic, Other_Default_Ignorable_Code_Point,
Other_Grapheme_Extend, Other_ID_Continue, Other_ID_Start,
Other_Lowercase, Other_Math, and Other_Uppercase.</p>

<p style="margin-left:11%; margin-top: 1em">Perl may be
recompiled to include any or all of them; instructions are
given in &quot;Unicode character properties that are
<small>NOT</small> accepted by Perl&quot; in
perluniprops.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Dereferencing
<small>IO</small> thingies as typeglobs</b> <br>
The <tt>&quot;*{...}&quot;</tt> operator, when passed a
reference to an <small>IO</small> thingy (as in
<tt>&quot;*{*STDIN{IO}}&quot;</tt>), creates a new typeglob
containing just that <small>IO</small> object. Previously,
it would stringify as an empty string, but some operators
would treat it as undefined, producing an
&quot;uninitialized&quot; warning. Now it stringifies as
__ANONIO__ [perl #96326].</p>


<p style="margin-left:11%; margin-top: 1em"><b>User-defined
case-changing operations</b> <br>
This feature was deprecated in Perl 5.14, and has now been
removed. The <small>CPAN</small> module Unicode::Casing
provides better functionality without the drawbacks that
this feature had, as are detailed in the 5.14 documentation:
http://perldoc.perl.org/5.14.0/perlunicode.html#User&minus;Defined&minus;Case&minus;Mappings&minus;%28for&minus;serious&minus;hackers&minus;only%29
&lt;http://perldoc.perl.org/5.14.0/perlunicode.html#User-Defined-Case-Mappings-%28for-serious-hackers-only%29&gt;</p>

<p style="margin-left:11%; margin-top: 1em"><b>XSUBs are
now &rsquo;static&rsquo;</b> <small><br>
XSUB</small> C functions are now &rsquo;static&rsquo;, that
is, they are not visible from outside the compilation unit.
Users can use the new <tt>&quot;XS_EXTERNAL(name)&quot;</tt>
and <tt>&quot;XS_INTERNAL(name)&quot;</tt> macros to pick
the desired linking behavior. The ordinary
<tt>&quot;XS(name)&quot;</tt> declaration for XSUBs will
continue to declare non&minus;&rsquo;static&rsquo; XSUBs for
compatibility, but the <small>XS</small> compiler,
ExtUtils::ParseXS (<tt>&quot;xsubpp&quot;</tt>) will emit
&rsquo;static&rsquo; XSUBs by default.
ExtUtils::ParseXS&rsquo;s behavior can be reconfigured from
<small>XS</small> using the
<tt>&quot;EXPORT_XSUB_SYMBOLS&quot;</tt> keyword. See perlxs
for details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Weakening
read-only references</b> <br>
Weakening read-only references is no longer permitted. It
should never have worked anyway, and could sometimes result
in crashes.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tying
scalars that hold typeglobs</b> <br>
Attempting to tie a scalar after a typeglob was assigned to
it would instead tie the handle in the typeglob&rsquo;s
<small>IO</small> slot. This meant that it was impossible to
tie the scalar itself. Similar problems affected
<tt>&quot;tied&quot;</tt> and <tt>&quot;untie&quot;</tt>:
<tt>&quot;tied $scalar&quot;</tt> would return false on a
tied scalar if the last thing returned was a typeglob, and
<tt>&quot;untie $scalar&quot;</tt> on such a tied scalar
would do nothing.</p>

<p style="margin-left:11%; margin-top: 1em">We fixed this
problem before Perl 5.14.0, but it caused problems with some
<small>CPAN</small> modules, so we put in a deprecation
cycle instead.</p>

<p style="margin-left:11%; margin-top: 1em">Now the
deprecation has been removed and this bug has been fixed. So
<tt>&quot;tie $scalar&quot;</tt> will always tie the scalar,
not the handle it holds. To tie the handle, use
<tt>&quot;tie *$scalar&quot;</tt> (with an explicit
asterisk). The same applies to <tt>&quot;tied
*$scalar&quot;</tt> and <tt>&quot;untie
*$scalar&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>IPC::Open3
no longer provides &quot;xfork()&quot;,
&quot;xclose_on_exec()&quot; and
&quot;xpipe_anon()&quot;</b> <br>
All three functions were private, undocumented, and
unexported. They do not appear to be used by any code on
<small>CPAN</small> . Two have been inlined and one deleted
entirely.</p>

<p style="margin-left:11%; margin-top: 1em"><b>$$ no longer
caches <small>PID</small></b> <br>
Previously, if one called <i>fork</i>(3) from C,
Perl&rsquo;s notion of <tt>$$</tt> could go out of sync with
what <i>getpid()</i> returns. By always fetching the value
of <tt>$$</tt> via <i>getpid()</i>, this potential bug is
eliminated. Code that depends on the caching behavior will
break. As described in Core Enhancements, <tt>$$</tt> is now
writable, but it will be reset during a fork.</p>

<p style="margin-left:11%; margin-top: 1em"><b>$$ and
&quot;getppid()&quot; no longer emulate <small>POSIX</small>
semantics under LinuxThreads</b> <br>
The <small>POSIX</small> emulation of <tt>$$</tt> and
<tt>&quot;getppid()&quot;</tt> under the obsolete
LinuxThreads implementation has been removed. This only
impacts users of Linux 2.4 and users of Debian GNU/kFreeBSD
up to and including 6.0, not the vast majority of Linux
installations that use <small>NPTL</small> threads.</p>

<p style="margin-left:11%; margin-top: 1em">This means that
<tt>&quot;getppid()&quot;</tt>, like <tt>$$</tt>, is now
always guaranteed to return the <small>OS</small> &rsquo;s
idea of the current state of the process, not perl&rsquo;s
cached version of it.</p>

<p style="margin-left:11%; margin-top: 1em">See the
documentation for $$ for details.</p>

<p style="margin-left:11%; margin-top: 1em"><b>$&lt;,
$&gt;, $( and $) are no longer cached</b> <br>
Similarly to the changes to <tt>$$</tt> and
<tt>&quot;getppid()&quot;</tt>, the internal caching of
<tt>$&lt;</tt>, <tt>$&gt;</tt>, <tt>$(</tt> and <tt>$)</tt>
has been removed.</p>

<p style="margin-left:11%; margin-top: 1em">When we cached
these values our idea of what they were would drift out of
sync with reality if someone (e.g., someone embedding perl)
called <tt>&quot;sete?[ug]id()&quot;</tt> without updating
<tt>&quot;PL_e?[ug]id&quot;</tt>. Having to deal with this
complexity wasn&rsquo;t worth it given how cheap the
<tt>&quot;gete?[ug]id()&quot;</tt> system call is.</p>

<p style="margin-left:11%; margin-top: 1em">This change
will break a handful of <small>CPAN</small> modules that use
the XS-level <tt>&quot;PL_uid&quot;</tt>,
<tt>&quot;PL_gid&quot;</tt>, <tt>&quot;PL_euid&quot;</tt> or
<tt>&quot;PL_egid&quot;</tt> variables.</p>

<p style="margin-left:11%; margin-top: 1em">The fix for
those breakages is to use
<tt>&quot;PerlProc_gete?[ug]id()&quot;</tt> to retrieve them
(e.g., <tt>&quot;PerlProc_getuid()&quot;</tt>), and not to
assign to <tt>&quot;PL_e?[ug]id&quot;</tt> if you change the
<small>UID/GID/EUID/EGID</small> . There is no longer any
need to do so since perl will always retrieve the up-to-date
version of those values from the <small>OS</small> .</p>

<p style="margin-left:11%; margin-top: 1em"><b>Which
Non-ASCII characters get quoted by &quot;quotemeta&quot; and
&quot;\Q&quot; has changed</b> <br>
This is unlikely to result in a real problem, as Perl does
not attach special meaning to any non-ASCII character, so it
is currently irrelevant which are quoted or not. This change
fixes bug [perl #77654] and brings Perl&rsquo;s behavior
more into line with Unicode&rsquo;s recommendations. See
&quot;quotemeta&quot; in perlfunc.</p>

<h2>Performance Enhancements
<a name="Performance Enhancements"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Improved performance for Unicode
properties in regular expressions</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Matching a code
point against a Unicode property is now done via a binary
search instead of linear. This means for example that the
worst case for a 1000 item property is 10 probes instead of
1000. This inefficiency has been compensated for in the past
by permanently storing in a hash the results of a given
probe plus the results for the adjacent 64 code points,
under the theory that near-by code points are likely to be
searched for. A separate hash was used for each mention of a
Unicode property in each regular expression. Thus,
<tt>&quot;qr/\p{foo}abc\p{foo}/&quot;</tt> would generate
two hashes. Any probes in one instance would be unknown to
the other, and the hashes could expand separately to be
quite large if the regular expression were used on many
different widely-separated code points. Now, however, there
is just one hash shared by all instances of a given
property. This means that if <tt>&quot;\p{foo}&quot;</tt> is
matched against &quot;A&quot; in one regular expression in a
thread, the result will be known immediately to all regular
expressions, and the relentless march of using up memory is
slowed considerably.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Version declarations with the
<tt>&quot;use&quot;</tt> keyword (e.g., <tt>&quot;use
5.012&quot;</tt>) are now faster, as they enable features
without loading <i>feature.pm</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;local $_&quot;</tt> is faster now, as it no
longer iterates through magic that it is not going to copy
anyway.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl 5.12.0 sped up the destruction of objects whose
classes define empty <tt>&quot;DESTROY&quot;</tt> methods
(to prevent autoloading), by simply not calling such empty
methods. This release takes this optimization a step
further, by not calling any <tt>&quot;DESTROY&quot;</tt>
method that begins with a <tt>&quot;return&quot;</tt>
statement. This can be useful for destructors that are only
used for debugging:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    use constant DEBUG =&gt; 1;
    sub DESTROY { return unless DEBUG; ... }</pre>



<p style="margin-left:17%; margin-top: 1em">Constant-folding
will reduce the first statement to
<tt>&quot;return;&quot;</tt> if <small>DEBUG</small> is set
to 0, triggering this optimization.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Assigning to a variable that
holds a typeglob or copy-on-write scalar is now much faster.
Previously the typeglob would be stringified or the
copy-on-write scalar would be copied before being
clobbered.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Assignment to <tt>&quot;substr&quot;</tt> in void
context is now more than twice its previous speed. Instead
of creating and returning a special lvalue scalar that is
then assigned to, <tt>&quot;substr&quot;</tt> modifies the
original string itself.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;substr&quot;</tt> no longer calculates a value
to return when called in void context.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Due to changes in File::Glob, Perl&rsquo;s
<tt>&quot;glob&quot;</tt> function and its
<tt>&quot;&lt;...&gt;&quot;</tt> equivalent are now much
faster. The splitting of the pattern into words has been
rewritten in C, resulting in speed-ups of 20% for some
cases.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This does not
affect <tt>&quot;glob&quot;</tt> on <small>VMS</small> , as
it does not use File::Glob.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The short-circuiting operators
<tt>&quot;&amp;&amp;&quot;</tt>, <tt>&quot;||&quot;</tt>,
and <tt>&quot;//&quot;</tt>, when chained (such as
<tt>&quot;$a || $b || $c&quot;</tt>), are now considerably
faster to short-circuit, due to reduced optree
traversal.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The implementation of <tt>&quot;s///r&quot;</tt> makes
one fewer copy of the scalar&rsquo;s value.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Recursive calls to lvalue subroutines in lvalue scalar
context use less memory.</p></td></tr>
</table>

<h2>Modules and Pragmata
<a name="Modules and Pragmata"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Deprecated
Modules</b> <br>
Version::Requirements</p>

<p style="margin-left:17%;">Version::Requirements is now
<small>DEPRECATED</small> , use CPAN::Meta::Requirements,
which is a drop-in replacement. It will be deleted from
perl.git blead in v5.17.0.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New Modules
and Pragmata</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>arybase -- this new module implements the <tt>$[</tt>
variable.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>PerlIO::mmap 0.010 has been added to the Perl core.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
<tt>&quot;mmap&quot;</tt> PerlIO layer is no longer
implemented by perl itself, but has been moved out into the
new PerlIO::mmap module.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Updated
Modules and Pragmata</b> <br>
This is only an overview of selected module updates. For a
complete list of updates, run:</p>

<pre style="margin-left:11%; margin-top: 1em">    $ corelist &minus;&minus;diff 5.14.0 5.16.0</pre>


<p style="margin-left:11%; margin-top: 1em">You can
substitute your favorite version in place of 5.14.0,
too.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Archive::Extract has been
upgraded from version 0.48 to 0.58.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Includes a fix
for FreeBSD to only use <tt>&quot;unzip&quot;</tt> if it is
located in <tt>&quot;/usr/local/bin&quot;</tt>, as FreeBSD
9.0 will ship with a limited <tt>&quot;unzip&quot;</tt> in
<tt>&quot;/usr/bin&quot;</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Archive::Tar has been upgraded
from version 1.76 to 1.82.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Adjustments to
handle files &gt;8gb (&gt;0777777777777 octal) and a feature
to return the <small>MD5SUM</small> of files in the
archive.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="75%">


<p style="margin-top: 1em">base has been upgraded from
version 2.16 to 2.18.</p></td>
<td width="8%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;base&quot;</tt>
no longer sets a module&rsquo;s <tt>$VERSION</tt> to
&quot;&minus;1&quot; when a module it loads does not define
a <tt>$VERSION</tt>. This change has been made because
&quot;&minus;1&quot; is not a valid version number under the
new &quot;lax&quot; criteria used internally by
<tt>&quot;UNIVERSAL::VERSION&quot;</tt>. (See version for
more on &quot;lax&quot; version criteria.)</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;base&quot;</tt>
no longer internally skips loading modules it has already
loaded and instead relies on <tt>&quot;require&quot;</tt> to
inspect <tt>%INC</tt>. This fixes a bug when
<tt>&quot;base&quot;</tt> is used with code that clear
<tt>%INC</tt> to force a module to be reloaded.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="75%">


<p style="margin-top: 1em">Carp has been upgraded from
version 1.20 to 1.26.</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It now includes
last read filehandle info and puts a dot after the file and
line number, just like errors from <tt>&quot;die&quot;</tt>
[perl #106538].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="81%">


<p style="margin-top: 1em">charnames has been updated from
version 1.18 to 1.30.</p></td>
<td width="2%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;charnames&quot;</tt>
can now be invoked with a new option,
<tt>&quot;:loose&quot;</tt>, which is like the existing
<tt>&quot;:full&quot;</tt> option, but enables Unicode loose
name matching. Details are in &quot; <small>LOOSE
MATCHES</small> &quot; in charnames.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">B::Deparse has been upgraded
from version 1.03 to 1.14. This fixes numerous deparsing
bugs.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><small>CGI</small> has been upgraded from version 3.52
to 3.59.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It uses the
public and documented <small>FCGI</small> .pm
<small>API</small> in CGI::Fast. CGI::Fast was using an
<small>FCGI API</small> that was deprecated and removed from
documentation more than ten years ago. Usage of this
deprecated <small>API</small> with <small>FCGI</small> &gt;=
0.70 or <small>FCGI</small> &lt;= 0.73 introduces a security
issue.
&lt;https://rt.cpan.org/Public/Bug/Display.html?id=68380&gt;
http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE&minus;2011&minus;2766
&lt;http://web.nvd.nist.gov/view/vuln/detail?vulnId=CVE-2011-2766&gt;</p>

<p style="margin-left:17%; margin-top: 1em">Things that may
break your code:</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;url()&quot;</tt>
was fixed to return <tt>&quot;PATH_INFO&quot;</tt> when it
is explicitly requested with either the
<tt>&quot;path=&gt;1&quot;</tt> or
<tt>&quot;path_info=&gt;1&quot;</tt> flag.</p>

<p style="margin-left:17%; margin-top: 1em">If your code is
running under mod_rewrite (or compatible) and you are
calling <tt>&quot;self_url()&quot;</tt> or you are calling
<tt>&quot;url()&quot;</tt> and passing
<tt>&quot;path_info=&gt;1&quot;</tt>, these methods will
actually be returning <tt>&quot;PATH_INFO&quot;</tt> now, as
you have explicitly requested or
<tt>&quot;self_url()&quot;</tt> has requested on your
behalf.</p>

<p style="margin-left:17%; margin-top: 1em">The
<tt>&quot;PATH_INFO&quot;</tt> has been omitted in such URLs
since the issue was introduced in the 3.12 release in
December, 2005.</p>

<p style="margin-left:17%; margin-top: 1em">This bug is so
old your application may have come to depend on it or
workaround it. Check for application before upgrading to
this release.</p>

<p style="margin-left:17%; margin-top: 1em">Examples of
affected method calls:</p>

<pre style="margin-left:17%; margin-top: 1em">  $q&minus;&gt;url(&minus;absolute =&gt; 1, &minus;query =&gt; 1, &minus;path_info =&gt; 1);
  $q&minus;&gt;url(&minus;path=&gt;1);
  $q&minus;&gt;url(&minus;full=&gt;1,&minus;path=&gt;1);
  $q&minus;&gt;url(&minus;rewrite=&gt;1,&minus;path=&gt;1);
  $q&minus;&gt;self_url();</pre>


<p style="margin-left:17%; margin-top: 1em">We no longer
read from <small>STDIN</small> when the Content-Length is
not set, preventing requests with no Content-Length from
sometimes freezing. This is consistent with the <small>CGI
RFC</small> 3875, and is also consistent with CGI::Simple.
However, the old behavior may have been expected by some
command-line uses of <small>CGI</small> .pm.</p>

<p style="margin-left:17%; margin-top: 1em">In addition,
the <small>DELETE HTTP</small> verb is now supported.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Compress::Zlib has been upgraded
from version 2.035 to 2.048.</p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em">IO::Compress::Zip
and IO::Uncompress::Unzip now have support for
<small>LZMA</small> (method 14). There is a fix for a
<small>CRC</small> issue in IO::Compress::Unzip and it
supports Streamed Stored context now. And fixed a Zip64
issue in IO::Compress::Zip when the content size was exactly
0xFFFFFFFF.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Digest::SHA has been upgraded
from version 5.61 to 5.71.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Added
<small>BITS</small> mode to the addfile method and shasum.
This makes partial-byte inputs possible via files/STDIN and
lets shasum check all 8074 <small>NIST</small> Msg vectors,
where previously special programming was required to do
this.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="78%">


<p style="margin-top: 1em">Encode has been upgraded from
version 2.42 to 2.44.</p></td>
<td width="5%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Missing aliases
added, a deep recursion error fixed and various
documentation updates.</p>

<p style="margin-left:17%; margin-top: 1em">Addressed
&rsquo;decode_xs n&minus;byte heap&minus;overflow&rsquo;
security bug in Unicode.xs (
<small>CVE&minus;2011&minus;2939</small> ). (5.14.2)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">ExtUtils::CBuilder updated from
version 0.280203 to 0.280206.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The new version
appends <small>CFLAGS</small> and <small>LDFLAGS</small> to
their Config.pm counterparts.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">ExtUtils::ParseXS has been
upgraded from version 2.2210 to 3.16.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Much of
ExtUtils::ParseXS, the module behind the <small>XS</small>
compiler <tt>&quot;xsubpp&quot;</tt>, was rewritten and
cleaned up. It has been made somewhat more extensible and
now finally uses strictures.</p>

<p style="margin-left:17%; margin-top: 1em">The typemap
logic has been moved into a separate module,
ExtUtils::Typemaps. See &quot;New Modules and
Pragmata&quot;, above.</p>

<p style="margin-left:17%; margin-top: 1em">For a complete
set of changes, please see the ExtUtils::ParseXS changelog,
available on the <small>CPAN</small> .</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">File::Glob has been upgraded
from version 1.12 to 1.17.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">On Windows,
tilde (~) expansion now checks the
<tt>&quot;USERPROFILE&quot;</tt> environment variable, after
checking <tt>&quot;HOME&quot;</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">It has a new
<tt>&quot;:bsd_glob&quot;</tt> export tag, intended to
replace <tt>&quot;:glob&quot;</tt>. Like
<tt>&quot;:glob&quot;</tt> it overrides
<tt>&quot;glob&quot;</tt> with a function that does not
split the glob pattern into words, but, unlike
<tt>&quot;:glob&quot;</tt>, it iterates properly in scalar
context, instead of returning the last file.</p>

<p style="margin-left:17%; margin-top: 1em">There are other
changes affecting Perl&rsquo;s own <tt>&quot;glob&quot;</tt>
operator (which uses File::Glob internally, except on
<small>VMS</small> ). See &quot;Performance
Enhancements&quot; and &quot;Selected Bug Fixes&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="65%">


<p style="margin-top: 1em">FindBin updated from version
1.50 to 1.51.</p></td>
<td width="18%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It no longer
returns a wrong result if a script of the same name as the
current one exists in the path and is executable.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">HTTP::Tiny has been upgraded
from version 0.012 to 0.017.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Added support
for using <tt>$ENV{http_proxy}</tt> to set the default proxy
host.</p>

<p style="margin-left:17%; margin-top: 1em">Adds additional
shorthand methods for all common <small>HTTP</small> verbs,
a <tt>&quot;post_form()&quot;</tt> method for POST-ing
x&minus;www-form-urlencoded data and a
<tt>&quot;www_form_urlencode()&quot;</tt> utility
method.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><small>IO</small> has been
upgraded from version 1.25_04 to 1.25_06, and IO::Handle
from version 1.31 to 1.33.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Together, these
upgrades fix a problem with IO::Handle&rsquo;s
<tt>&quot;getline&quot;</tt> and
<tt>&quot;getlines&quot;</tt> methods. When these methods
are called on the special <small>ARGV</small> handle, the
next file is automatically opened, as happens with the
built-in <tt>&quot;&lt;&gt;&quot;</tt> and
<tt>&quot;readline&quot;</tt> functions. But, unlike the
built-ins, these methods were not respecting the
caller&rsquo;s use of the open pragma and applying the
appropriate I/O layers to the newly-opened file [rt.cpan.org
#66474].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="81%">


<p style="margin-top: 1em">IPC::Cmd has been upgraded from
version 0.70 to 0.76.</p></td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Capturing of
command output (both <tt>&quot;STDOUT&quot;</tt> and
<tt>&quot;STDERR&quot;</tt>) is now supported using
IPC::Open3 on MSWin32 without requiring IPC::Run.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">IPC::Open3 has been upgraded
from version 1.09 to 1.12.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Fixes a bug
which prevented use of <tt>&quot;open3&quot;</tt> on Windows
when <tt>*STDIN</tt>, <tt>*STDOUT</tt> or <tt>*STDERR</tt>
had been localized.</p>

<p style="margin-left:17%; margin-top: 1em">Fixes a bug
which prevented duplicating numeric file descriptors on
Windows.</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;open3&quot;</tt>
with &quot;&minus;&quot; for the program name works once
more. This was broken in version 1.06 (and hence in Perl
5.14.0) [perl #95748].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Locale::Codes has been upgraded
from version 3.16 to 3.21.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Added Language
Extension codes (langext) and Language Variation codes
(langvar) as defined in the <small>IANA</small> language
registry.</p>

<p style="margin-left:17%; margin-top: 1em">Added language
codes from <small>ISO</small> 639&minus;5</p>

<p style="margin-left:17%; margin-top: 1em">Added
language/script codes from the <small>IANA</small> language
subtag registry</p>

<p style="margin-left:17%; margin-top: 1em">Fixed an
uninitialized value warning [rt.cpan.org #67438].</p>

<p style="margin-left:17%; margin-top: 1em">Fixed the
return value for the all_XXX_codes and all_XXX_names
functions [rt.cpan.org #69100].</p>

<p style="margin-left:17%; margin-top: 1em">Reorganized
modules to move Locale::MODULE to Locale::Codes::MODULE to
allow for cleaner future additions. The original four
modules (Locale::Language, Locale::Currency,
Locale::Country, Locale::Script) will continue to work, but
all new sets of codes will be added in the Locale::Codes
namespace.</p>

<p style="margin-left:17%; margin-top: 1em">The code2XXX,
XXX2code, all_XXX_codes, and all_XXX_names functions now
support retired codes. All codesets may be specified by a
constant or by their name now. Previously, they were
specified only by a constant.</p>

<p style="margin-left:17%; margin-top: 1em">The alias_code
function exists for backward compatibility. It has been
replaced by rename_country_code. The alias_code function
will be removed some time after September, 2013.</p>

<p style="margin-left:17%; margin-top: 1em">All work is now
done in the central module (Locale::Codes). Previously, some
was still done in the wrapper modules (Locale::Codes::*).
Added Language Family codes (langfam) as defined in
<small>ISO</small> 639&minus;5.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Math::BigFloat has been upgraded
from version 1.993 to 1.997.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
<tt>&quot;numify&quot;</tt> method has been corrected to
return a normalized Perl number (the result of <tt>&quot;0 +
$thing&quot;</tt>), instead of a string [rt.cpan.org
#66732].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Math::BigInt has been upgraded
from version 1.994 to 1.998.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It provides a
new <tt>&quot;bsgn&quot;</tt> method that complements the
<tt>&quot;babs&quot;</tt> method.</p>

<p style="margin-left:17%; margin-top: 1em">It fixes the
internal <tt>&quot;objectify&quot;</tt> function&rsquo;s
handling of &quot;foreign objects&quot; so they are
converted to the appropriate class (Math::BigInt or
Math::BigFloat).</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Math::BigRat has been upgraded
from version 0.2602 to 0.2603.</p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;int()&quot;</tt>
on a Math::BigRat object containing &minus;1/2 now creates a
Math::BigInt containing 0, rather than &minus;0.
Math::BigInt does not even support negative zero, so the
resulting object was actually malformed [perl #95530].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Math::Complex has been upgraded
from version 1.56 to 1.59 and Math::Trig from version 1.2 to
1.22.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Fixes include:
correct copy constructor usage; fix polarwise formatting
with numeric format specifier; and more stable
<tt>&quot;great_circle_direction&quot;</tt> algorithm.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Module::CoreList has been
upgraded from version 2.51 to 2.66.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
<tt>&quot;corelist&quot;</tt> utility now understands the
<tt>&quot;&minus;r&quot;</tt> option for displaying Perl
release dates and the
<tt>&quot;&minus;&minus;diff&quot;</tt> option to print the
set of modlib changes between two perl distributions.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Module::Metadata has been
upgraded from version 1.000004 to 1.000009.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Adds
<tt>&quot;provides&quot;</tt> method to generate a
<small>CPAN META</small> provides data structure correctly;
use of <tt>&quot;package_versions_from_directory&quot;</tt>
is discouraged.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">ODBM_File has been upgraded from
version 1.10 to 1.12.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
<small>XS</small> code is now compiled with
<tt>&quot;PERL_NO_GET_CONTEXT&quot;</tt>, which will aid
performance under ithreads.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="75%">


<p style="margin-top: 1em">open has been upgraded from
version 1.08 to 1.10.</p></td>
<td width="8%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It no longer
turns off layers on standard handles when invoked without
the &quot;:std&quot; directive. Similarly, when invoked
<i>with</i> the &quot;:std&quot; directive, it now clears
layers on <small>STDERR</small> before applying the new
ones, and not just on <small>STDIN</small> and
<small>STDOUT</small> [perl #92728].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="81%">


<p style="margin-top: 1em">overload has been upgraded from
version 1.13 to 1.18.</p></td>
<td width="2%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;overload::Overloaded&quot;</tt>
no longer calls <tt>&quot;can&quot;</tt> on the class, but
uses another means to determine whether the object has
overloading. It was never correct for it to call
<tt>&quot;can&quot;</tt>, as overloading does not respect
<small>AUTOLOAD</small> . So classes that autoload methods
and implement <tt>&quot;can&quot;</tt> no longer have to
account for overloading [perl #40333].</p>

<p style="margin-left:17%; margin-top: 1em">A warning is
now produced for invalid arguments. See &quot;New
Diagnostics&quot;.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">PerlIO::scalar has been upgraded
from version 0.11 to 0.14.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">(This is the
module that implements <tt>&quot;open $fh, '&gt;',
\$scalar&quot;</tt>.)</p>

<p style="margin-left:17%; margin-top: 1em">It fixes a
problem with <tt>&quot;open my $fh, &quot;&gt;&quot;,
\$scalar&quot;</tt> not working if <tt>$scalar</tt> is a
copy-on-write scalar. (5.14.2)</p>

<p style="margin-left:17%; margin-top: 1em">It also fixes a
hang that occurs with <tt>&quot;readline&quot;</tt> or
<tt>&quot;&lt;$fh&gt;&quot;</tt> if a typeglob has been
assigned to <tt>$scalar</tt> [perl #92258].</p>

<p style="margin-left:17%; margin-top: 1em">It no longer
assumes during <tt>&quot;seek&quot;</tt> that
<tt>$scalar</tt> is a string internally. If it didn&rsquo;t
crash, it was close to doing so [perl #92706]. Also, the
internal print routine no longer assumes that the position
set by <tt>&quot;seek&quot;</tt> is valid, but extends the
string to that position, filling the intervening bytes
(between the old length and the seek position) with nulls
[perl #78980].</p>

<p style="margin-left:17%; margin-top: 1em">Printing to an
in-memory handle now works if the <tt>$scalar</tt> holds a
reference, stringifying the reference before modifying it.
References used to be treated as empty strings.</p>

<p style="margin-left:17%; margin-top: 1em">Printing to an
in-memory handle no longer crashes if the <tt>$scalar</tt>
happens to hold a number internally, but no string
buffer.</p>

<p style="margin-left:17%; margin-top: 1em">Printing to an
in-memory handle no longer creates scalars that confuse the
regular expression engine [perl #108398].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Pod::Functions has been upgraded
from version 1.04 to 1.05.</p></td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><i>Functions.pm</i>
is now generated at perl build time from annotations in
<i>perlfunc.pod</i>. This will ensure that Pod::Functions
and perlfunc remain in synchronisation.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Pod::Html has been upgraded from
version 1.11 to 1.1502.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This is an
extensive rewrite of Pod::Html to use Pod::Simple under the
hood. The output has changed significantly.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Pod::Perldoc has been upgraded
from version 3.15_03 to 3.17.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It corrects the
search paths on <small>VMS</small> [perl #90640].
(5.14.1)</p>

<p style="margin-left:17%; margin-top: 1em">The
<b>&minus;v</b> option now fetches the right section for
<tt>$0</tt>.</p>

<p style="margin-left:17%; margin-top: 1em">This upgrade
has numerous significant fixes. Consult its changelog on the
<small>CPAN</small> for more information.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em"><small>POSIX</small> has been
upgraded from version 1.24 to 1.30.</p></td>
<td width="6%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><small>POSIX</small>
no longer uses AutoLoader. Any code which was relying on
this implementation detail was buggy, and may fail because
of this change. The module&rsquo;s Perl code has been
considerably simplified, roughly halving the number of
lines, with no change in functionality. The
<small>XS</small> code has been refactored to reduce the
size of the shared object by about 12%, with no change in
functionality. More <small>POSIX</small> functions now have
tests.</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;sigsuspend&quot;</tt>
and <tt>&quot;pause&quot;</tt> now run signal handlers
before returning, as the whole point of these two functions
is to wait until a signal has arrived, and then return
<i>after</i> it has been triggered. Delayed, or
&quot;safe&quot;, signals were preventing that from
happening, possibly resulting in race conditions [perl
#107216].</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;POSIX::sleep&quot;</tt>
is now a direct call into the underlying <small>OS</small>
<tt>&quot;sleep&quot;</tt> function, instead of being a Perl
wrapper on <tt>&quot;CORE::sleep&quot;</tt>.
<tt>&quot;POSIX::dup2&quot;</tt> now returns the correct
value on Win32 (<i>i.e.</i>, the file descriptor).
<tt>&quot;POSIX::SigSet&quot; &quot;sigsuspend&quot;</tt>
and <tt>&quot;sigpending&quot;</tt> and
<tt>&quot;POSIX::pause&quot;</tt> now dispatch safe signals
immediately before returning to their caller.</p>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;POSIX::Termios::setattr&quot;</tt>
now defaults the third argument to
<tt>&quot;TCSANOW&quot;</tt>, instead of 0. On most
platforms <tt>&quot;TCSANOW&quot;</tt> is defined to be 0,
but on some 0 is not a valid parameter, which caused a call
with defaults to fail.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="80%">


<p style="margin-top: 1em">Socket has been upgraded from
version 1.94 to 2.001.</p></td>
<td width="3%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It has new
functions and constants for handling IPv6 sockets:</p>

<pre style="margin-left:17%; margin-top: 1em">    pack_ipv6_mreq
    unpack_ipv6_mreq
    IPV6_ADD_MEMBERSHIP
    IPV6_DROP_MEMBERSHIP
    IPV6_MTU
    IPV6_MTU_DISCOVER
    IPV6_MULTICAST_HOPS
    IPV6_MULTICAST_IF
    IPV6_MULTICAST_LOOP
    IPV6_UNICAST_HOPS
    IPV6_V6ONLY</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="81%">


<p style="margin-top: 1em">Storable has been upgraded from
version 2.27 to 2.34.</p></td>
<td width="2%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It no longer
turns copy-on-write scalars into read-only scalars when
freezing and thawing.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Sys::Syslog has been upgraded
from version 0.27 to 0.29.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This upgrade
closes many outstanding bugs.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Term::ANSIColor has been
upgraded from version 3.00 to 3.01.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Only interpret
an initial array reference as a list of colors, not any
initial reference, allowing the colored function to work
properly on objects with stringification defined.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Term::ReadLine has been upgraded
from version 1.07 to 1.09.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Term::ReadLine
now supports any event loop, including unpublished ones and
simple IO::Select, loops without the need to rewrite
existing code for any particular framework [perl
#108470].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">threads::shared has been
upgraded from version 1.37 to 1.40.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Destructors on
shared objects used to be ignored sometimes if the objects
were referenced only by shared data structures. This has
been mostly fixed, but destructors may still be ignored if
the objects still exist at global destruction time [perl
#98204].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Unicode::Collate has been
upgraded from version 0.73 to 0.89.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Updated to
<small>CLDR</small> 1.9.1</p>

<p style="margin-left:17%; margin-top: 1em">Locales updated
to <small>CLDR</small> 2.0: mk, mt, nb, nn, ro, ru, sk, sr,
sv, uk, zh__pinyin, zh__stroke</p>

<p style="margin-left:17%; margin-top: 1em">Newly supported
locales: bn, fa, ml, mr, or, pa, sa, si, si__dictionary,
sr_Latn, sv__reformed, ta, te, th, ur, wae.</p>

<p style="margin-left:17%; margin-top: 1em">Tailored
compatibility ideographs as well as unified ideographs for
the locales: ja, ko, zh__big5han, zh__gb2312han, zh__pinyin,
zh__stroke.</p>

<p style="margin-left:17%; margin-top: 1em">Locale/*.pl
files are now searched for in <tt>@INC</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Unicode::Normalize has been
upgraded from version 1.10 to 1.14.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Fixes for the
removal of <i>unicore/CompositionExclusions.txt</i> from
core.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Unicode::UCD has been upgraded
from version 0.32 to 0.43.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This adds four
new functions: <tt>&quot;prop_aliases()&quot;</tt> and
<tt>&quot;prop_value_aliases()&quot;</tt>, which are used to
find all Unicode-approved synonyms for property names, or to
convert from one name to another;
<tt>&quot;prop_invlist&quot;</tt> which returns all code
points matching a given Unicode binary property; and
<tt>&quot;prop_invmap&quot;</tt> which returns the complete
specification of a given Unicode property.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Win32API::File has been upgraded
from version 0.1101 to 0.1200.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Added
SetStdHandle and GetStdHandle functions</p>

<p style="margin-left:11%; margin-top: 1em"><b>Removed
Modules and Pragmata</b> <br>
As promised in Perl 5.14.0&rsquo;s release notes, the
following modules have been removed from the core
distribution, and if needed should be installed from
<small>CPAN</small> instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Devel::DProf has been removed
from the Perl core. Prior version was 20110228.00.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Shell has been removed from the Perl core. Prior version
was 0.72_01.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Several old perl4&minus;style libraries which have been
deprecated with 5.14 are now removed:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    abbrev.pl assert.pl bigfloat.pl bigint.pl bigrat.pl cacheout.pl
    complete.pl ctime.pl dotsh.pl exceptions.pl fastcwd.pl flush.pl
    getcwd.pl getopt.pl getopts.pl hostname.pl importenv.pl
    lib/find{,depth}.pl look.pl newgetopt.pl open2.pl open3.pl
    pwd.pl shellwords.pl stat.pl tainted.pl termcap.pl timelocal.pl</pre>


<p style="margin-left:17%; margin-top: 1em">They can be
found on <small>CPAN</small> as Perl4::CoreLibs.</p>

<h2>Documentation
<a name="Documentation"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>New
Documentation</b> <i><br>
perldtrace</i></p>

<p style="margin-left:11%; margin-top: 1em">perldtrace
describes Perl&rsquo;s DTrace support, listing the provided
probes and gives examples of their use.</p>


<p style="margin-left:11%; margin-top: 1em"><i>perlexperiment</i></p>

<p style="margin-left:11%; margin-top: 1em">This document
is intended to provide a list of experimental features in
Perl. It is still a work in progress.</p>


<p style="margin-left:11%; margin-top: 1em"><i>perlootut</i></p>

<p style="margin-left:11%; margin-top: 1em">This a new
<small>OO</small> tutorial. It focuses on basic
<small>OO</small> concepts, and then recommends that readers
choose an <small>OO</small> framework from
<small>CPAN</small> .</p>


<p style="margin-left:11%; margin-top: 1em"><i>perlxstypemap</i></p>

<p style="margin-left:11%; margin-top: 1em">The new manual
describes the <small>XS</small> typemapping mechanism in
unprecedented detail and combines new documentation with
information extracted from perlxs and the previously
unofficial list of all core typemaps.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changes to
Existing Documentation</b> <i><br>
perlapi</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The <small>HV API</small> has
long accepted negative lengths to show that the key is in
<small>UTF8</small> . This is now documented.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;boolSV()&quot;</tt> macro is now
documented.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlfunc</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;dbmopen&quot;</tt>
treats a 0 mode as a special case, that prevents a
nonexistent file from being created. This has been the case
since Perl 5.000, but was never documented anywhere. Now the
perlfunc entry mentions it [perl #90064].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>As an accident of history, <tt>&quot;open $fh, '&lt;:',
...&quot;</tt> applies the default layers for the platform
(<tt>&quot;:raw&quot;</tt> on Unix,
<tt>&quot;:crlf&quot;</tt> on Windows), ignoring whatever is
declared by open.pm. This seems such a useful feature it has
been documented in perlfunc and open.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The entry for <tt>&quot;split&quot;</tt> has been
rewritten. It is now far clearer than before.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlguts</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A new section, Autoloading with
XSUBs, has been added, which explains the two APIs for
accessing the name of the autoloaded sub.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Some function descriptions in perlguts were confusing,
as it was not clear whether they referred to the function
above or below the description. This has been clarified
[perl #91790].</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlobj</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">This document has been rewritten
from scratch, and its coverage of various <small>OO</small>
concepts has been expanded.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlop</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Documentation of the smartmatch
operator has been reworked and moved from perlsyn to perlop
where it belongs.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It has also
been corrected for the case of <tt>&quot;undef&quot;</tt> on
the left-hand side. The list of different smart match
behaviors had an item in the wrong place.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Documentation of the ellipsis
statement (<tt>&quot;...&quot;</tt>) has been reworked and
moved from perlop to perlsyn.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The explanation of bitwise operators has been expanded
to explain how they work on Unicode strings (5.14.1).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>More examples for <tt>&quot;m//g&quot;</tt> have been
added (5.14.1).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;&lt;&lt;\FOO&quot;</tt> here-doc syntax
has been documented (5.14.1).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlpragma</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">There is now a standard
convention for naming keys in the <tt>&quot;%^H&quot;</tt>,
documented under Key naming.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>&quot;Laundering
and Detecting Tainted Data&quot; in perlsec</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The example function for
checking for taintedness contained a subtle error.
<tt>$@</tt> needs to be localized to prevent its changing
this global&rsquo;s value outside the function. The
preferred method to check for this remains
&quot;tainted&quot; in Scalar::Util.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perllol</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">perllol has been expanded with
examples using the new <tt>&quot;push $scalar&quot;</tt>
syntax introduced in Perl 5.14.0 (5.14.1).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlmod</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">perlmod now states explicitly
that some types of explicit symbol table manipulation are
not supported. This codifies what was effectively already
the case [perl #78074].</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlpodstyle</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The tips on which formatting
codes to use have been corrected and greatly expanded.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>There are now a couple of example one-liners for
previewing <small>POD</small> files after they have been
edited.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlre</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The
<tt>&quot;(*COMMIT)&quot;</tt> directive is now listed in
the right section (Verbs without an argument).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlrun</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">perlrun has undergone a
significant clean-up. Most notably, the <b>&minus;0x...</b>
form of the <b>&minus;0</b> flag has been clarified, and the
final section on environment variables has been corrected
and expanded (5.14.1).</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlsub</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The ($;) prototype syntax, which
has existed for rather a long time, is now documented in
perlsub. It lets a unary function have the same precedence
as a list operator.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perltie</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The required syntax for tying
handles has been documented.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>perlvar</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The documentation for $! has
been corrected and clarified. It used to state that $! could
be <tt>&quot;undef&quot;</tt>, which is not the case. It was
also unclear whether system calls set C&rsquo;s
<tt>&quot;errno&quot;</tt> or Perl&rsquo;s <tt>$!</tt> [perl
#91614].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Documentation for $$ has been amended with additional
cautions regarding changing the process <small>ID</small>
.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><i>Other
Changes</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">perlxs was extended with
documentation on inline typemaps.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>perlref has a new Circular References section explaining
how circularities may not be freed and how to solve that
with weak references.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Parts of perlapi were clarified, and Perl equivalents of
some C functions have been added as an additional mode of
exposition.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A few parts of perlre and perlrecharclass were
clarified.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Removed
Documentation</b> <i><br>
Old <small>OO</small> Documentation</i></p>

<p style="margin-left:11%; margin-top: 1em">The old
<small>OO</small> tutorials, perltoot, perltooc, and
perlboot, have been removed. The perlbot (bag of object
tricks) document has been removed as well.</p>

<p style="margin-left:11%; margin-top: 1em"><i>Development
Deltas</i></p>

<p style="margin-left:11%; margin-top: 1em">The perldelta
files for development releases are no longer packaged with
perl. These can still be found in the perl source code
repository.</p>

<h2>Diagnostics
<a name="Diagnostics"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The following
additions or changes have been made to diagnostic output,
including warnings and fatal error messages. For the
complete list of diagnostic messages, see perldiag.</p>

<p style="margin-left:11%; margin-top: 1em"><b>New
Diagnostics</b> <i><br>
New Errors</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="38%">


<p style="margin-top: 1em">Cannot set tied
<tt>@DB::args</tt></p> </td>
<td width="45%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This error
occurs when <tt>&quot;caller&quot;</tt> tries to set
<tt>@DB::args</tt> but finds it tied. Before this error was
added, it used to crash instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p style="margin-top: 1em">Cannot tie unreifiable array</p></td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This error is
part of a safety check that the <tt>&quot;tie&quot;</tt>
operator does before tying a special array like <tt>@_</tt>.
You should never see this message.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="54%">


<p style="margin-top: 1em">&amp;CORE::%s cannot be called
directly</p> </td>
<td width="29%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This occurs
when a subroutine in the <tt>&quot;CORE::&quot;</tt>
namespace is called with <tt>&amp;foo</tt> syntax or through
a reference. Some subroutines in this package cannot yet be
called that way, but must be called as barewords. See
&quot;Subroutines in the <tt>&quot;CORE&quot;</tt>
namespace&quot;, above.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="63%">


<p style="margin-top: 1em">Source filters apply only to
byte streams</p></td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This new error
occurs when you try to activate a source filter (usually by
loading a source filter module) within a string passed to
<tt>&quot;eval&quot;</tt> under the
<tt>&quot;unicode_eval&quot;</tt> feature.</p>

<p style="margin-left:11%; margin-top: 1em"><i>New
Warnings</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="45%">


<p style="margin-top: 1em">defined(@array) is
deprecated</p> </td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
long-deprecated <tt>&quot;defined(@array)&quot;</tt> now
also warns for package variables. Previously it issued a
warning for lexical variables only.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="29%">


<p style="margin-top: 1em"><i>length()</i> used on
<tt>%s</tt></p> </td>
<td width="54%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This new
warning occurs when <tt>&quot;length&quot;</tt> is used on
an array or hash, instead of
<tt>&quot;scalar(@array)&quot;</tt> or <tt>&quot;scalar(keys
%hash)&quot;</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="71%">


<p style="margin-top: 1em">lvalue attribute <tt>%s</tt>
already-defined subroutine</p></td>
<td width="12%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">attributes.pm
now emits this warning when the :lvalue attribute is applied
to a Perl subroutine that has already been defined, as doing
so can have unexpected side-effects.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="43%">


<p style="margin-top: 1em">overload arg &rsquo;%s&rsquo; is
invalid</p> </td>
<td width="40%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This warning,
in the &quot;overload&quot; category, is produced when the
overload pragma is given an argument it doesn&rsquo;t
recognize, presumably a mistyped operator.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="51%">


<p style="margin-top: 1em">$[ used in <tt>%s</tt> (did you
mean $] ?)</p></td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This new
warning exists to catch the mistaken use of <tt>$[</tt> in
version checks. <tt>$]</tt>, not <tt>$[</tt>, contains the
version number.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="51%">


<p style="margin-top: 1em">Useless assignment to a
temporary</p> </td>
<td width="32%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Assigning to a
temporary scalar returned from an lvalue subroutine now
produces this warning [perl #31946].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="26%">


<p style="margin-top: 1em">Useless use of \E</p></td>
<td width="57%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;\E&quot;</tt>
does nothing unless preceded by <tt>&quot;\Q&quot;</tt>,
<tt>&quot;\L&quot;</tt> or <tt>&quot;\U&quot;</tt>.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Removed
Errors</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="45%">


<p style="margin-top: 1em">&quot;sort is now a reserved
word&quot;</p> </td>
<td width="38%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This error used
to occur when <tt>&quot;sort&quot;</tt> was called without
arguments, followed by <tt>&quot;;&quot;</tt> or
<tt>&quot;)&quot;</tt>. (E.g., <tt>&quot;sort;&quot;</tt>
would die, but <tt>&quot;{sort}&quot;</tt> was
<small>OK</small> .) This error message was added in Perl 3
to catch code like <tt>&quot;close(sort)&quot;</tt> which
would no longer work. More than two decades later, this
message is no longer appropriate. Now
<tt>&quot;sort&quot;</tt> without arguments is always
allowed, and returns an empty list, as it did in those cases
where it was already allowed [perl #90030].</p>

<p style="margin-left:11%; margin-top: 1em"><b>Changes to
Existing Diagnostics</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The &quot;Applying pattern
match...&quot; or similar warning produced when an array or
hash is on the left-hand side of the <tt>&quot;=~&quot;</tt>
operator now mentions the name of the variable.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &quot;Attempt to free non-existent shared
string&quot; has had the spelling of
&quot;non-existent&quot; corrected to
&quot;nonexistent&quot;. It was already listed with the
correct spelling in perldiag.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The error messages for using
<tt>&quot;default&quot;</tt> and <tt>&quot;when&quot;</tt>
outside a topicalizer have been standardized to match the
messages for <tt>&quot;continue&quot;</tt> and loop
controls. They now read &rsquo;Can&rsquo;t
&quot;default&quot; outside a topicalizer&rsquo; and
&rsquo;Can&rsquo;t &quot;when&quot; outside a
topicalizer&rsquo;. They both used to be &rsquo;Can&rsquo;t
use <i>when()</i> outside a topicalizer&rsquo; [perl
#91514].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The message, &quot;Code point 0x%X is not Unicode, no
properties match it; all inverse properties do&quot; has
been changed to &quot;Code point 0x%X is not Unicode, all
\p{} matches fail; all \P{} matches succeed&quot;.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Redefinition warnings for constant subroutines used to
be mandatory, even occurring under <tt>&quot;no
warnings&quot;</tt>. Now they respect the warnings
pragma.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &quot;glob failed&quot; warning message is now
suppressible via <tt>&quot;no warnings&quot;</tt> [perl
#111656].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The Invalid version format error message now says
&quot;negative version number&quot; within the parentheses,
rather than &quot;non-numeric data&quot;, for negative
numbers.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The two warnings Possible attempt to put comments in
<i>qw()</i> list and Possible attempt to separate words with
commas are no longer mutually exclusive: the same
<tt>&quot;qw&quot;</tt> construct may produce both.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The uninitialized warning for <tt>&quot;y///r&quot;</tt>
when <tt>$_</tt> is implicit and undefined now mentions the
variable name, just like the non&minus;/r variation of the
operator.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &rsquo;Use of &quot;foo&quot; without parentheses is
ambiguous&rsquo; warning has been extended to apply also to
user-defined subroutines with a (;$) prototype, and not just
to built-in functions.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Warnings that mention the names of lexical
(<tt>&quot;my&quot;</tt>) variables with Unicode characters
in them now respect the presence or absence of the
<tt>&quot;:utf8&quot;</tt> layer on the output handle,
instead of outputting <small>UTF8</small> regardless. Also,
the correct names are included in the strings passed to
<tt>$SIG{__WARN__}</tt> handlers, rather than the raw
<small>UTF8</small> bytes.</p></td></tr>
</table>

<h2>Utility Changes
<a name="Utility Changes"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><i>h2ph</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="58%">


<p style="margin-top: 1em">h2ph used to generate code of
the form</p></td>
<td width="25%">
</td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  unless(defined(&amp;FOO)) {
    sub FOO () {42;}
  }</pre>


<p style="margin-left:17%; margin-top: 1em">But the
subroutine is a compile-time declaration, and is hence
unaffected by the condition. It has now been corrected to
emit a string <tt>&quot;eval&quot;</tt> around the
subroutine [perl #99368].</p>


<p style="margin-left:11%; margin-top: 1em"><i>splain</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>splain</i> no longer emits
backtraces with the first line number repeated.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">This:</p>

<pre style="margin-left:17%; margin-top: 1em">    Uncaught exception from user code:
            Cannot fwiddle the fwuddle at &minus;e line 1.
     at &minus;e line 1
            main::baz() called at &minus;e line 1
            main::bar() called at &minus;e line 1
            main::foo() called at &minus;e line 1</pre>


<p style="margin-left:17%; margin-top: 1em">has become
this:</p>

<pre style="margin-left:17%; margin-top: 1em">    Uncaught exception from user code:
            Cannot fwiddle the fwuddle at &minus;e line 1.
            main::baz() called at &minus;e line 1
            main::bar() called at &minus;e line 1
            main::foo() called at &minus;e line 1</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Some error messages consist of
multiple lines that are listed as separate entries in
perldiag. splain has been taught to find the separate
entries in these cases, instead of simply failing to find
the message.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>zipdetails</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">This is a new utility, included
as part of an IO::Compress::Base upgrade.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">zipdetails
displays information about the internal record structure of
the zip file. It is not concerned with displaying any
details of the compressed data stored in the zip file.</p>

<h2>Configuration and Compilation
<a name="Configuration and Compilation"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>regexp.h</i> has been
modified for compatibility with <small>GCC</small> &rsquo;s
<b>&minus;Werror</b> option, as used by some projects that
include perl&rsquo;s header files (5.14.1).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p><tt>&quot;USE_LOCALE{,_COLLATE,_CTYPE,_NUMERIC}&quot;</tt>
have been added the output of perl &minus;V as they have
affect the behavior of the interpreter binary (albeit in
only a small area).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The code and tests for IPC::Open2 have been moved from
<i>ext/IPC&minus;Open2</i> into <i>ext/IPC&minus;Open3</i>,
as <tt>&quot;IPC::Open2::open2()&quot;</tt> is implemented
as a thin wrapper around
<tt>&quot;IPC::Open3::_open3()&quot;</tt>, and hence is very
tightly coupled to it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The magic types and magic vtables are now generated from
data in a new script <i>regen/mg_vtable.pl</i>, instead of
being maintained by hand. As different <small>EBCDIC</small>
variants can&rsquo;t agree on the code point for
&rsquo;~&rsquo;, the character to code point conversion is
done at build time by <i>generate_uudmap</i> to a new
generated header <i>mg_data.h</i>.
<tt>&quot;PL_vtbl_bm&quot;</tt> and
<tt>&quot;PL_vtbl_fm&quot;</tt> are now defined by the
pre-processor as <tt>&quot;PL_vtbl_regexp&quot;</tt>,
instead of being distinct C variables.
<tt>&quot;PL_vtbl_sig&quot;</tt> has been removed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Building with
<tt>&quot;&minus;DPERL_GLOBAL_STRUCT&quot;</tt> works again.
This configuration is not generally used.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl configured with <i><small>MAD</small></i> now
correctly frees <tt>&quot;MADPROP&quot;</tt> structures when
OPs are freed. <tt>&quot;MADPROP&quot;</tt>s are now
allocated with
<tt>&quot;PerlMemShared_malloc()&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>makedef.pl</i> has been refactored. This should have
no noticeable affect on any of the platforms that use it as
part of their build ( <small>AIX</small> ,
<small>VMS</small> , Win32).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;useperlio&quot;</tt> can no longer be
disabled.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The file <i>global.sym</i> is no longer needed, and has
been removed. It contained a list of all exported functions,
one of the files generated by <i>regen/embed.pl</i> from
data in <i>embed.fnc</i> and <i>regen/opcodes</i>. The code
has been refactored so that the only user of
<i>global.sym</i>, <i>makedef.pl</i>, now reads
<i>embed.fnc</i> and <i>regen/opcodes</i> directly, removing
the need to store the list of exported functions in an
intermediate file.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">As
<i>global.sym</i> was never installed, this change should
not be visible outside the build process.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>pod/buildtoc</i>, used by the
build process to build perltoc, has been refactored and
simplified. It now contains only code to build perltoc; the
code to regenerate Makefiles has been moved to
<i>Porting/pod_rules.pl</i>. It&rsquo;s a bug if this change
has any material effect on the build process.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>pod/roffitall</i> is now built by
<i>pod/buildtoc</i>, instead of being shipped with the
distribution. Its list of manpages is now generated (and
therefore current). See also <small>RT</small> #103202 for
an unresolved related issue.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The man page for <tt>&quot;XS::Typemap&quot;</tt> is no
longer installed. <tt>&quot;XS::Typemap&quot;</tt> is a test
module which is not installed, hence installing its
documentation makes no sense.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &minus;Dusesitecustomize and
&minus;Duserelocatableinc options now work together
properly.</p> </td></tr>
</table>

<h2>Platform Support
<a name="Platform Support"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>Platform-Specific
Notes</b> <i><br>
Cygwin</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Since version 1.7, Cygwin
supports native <small>UTF&minus;8</small> paths. If Perl is
built under that environment, directory and filenames will
be <small>UTF&minus;8</small> encoded.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Cygwin does not initialize all original Win32
environment variables. See <i><small>README</small>
.cygwin</i> for a discussion of the newly-added
<tt>&quot;Cygwin::sync_winenv()&quot;</tt> function [perl
#110190] and for further links.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>HP-UX</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="57%">


<p style="margin-top: 1em">HP-UX
<small>PA&minus;RISC/64</small> now supports
gcc&minus;4.x</p> </td>
<td width="26%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">A fix to
correct the socketsize now makes the test suite pass on
HP-UX PA-RISC for 64bitall builds. (5.14.2)</p>


<p style="margin-left:11%; margin-top: 1em"><i><small>VMS</small></i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Remove unnecessary includes, fix
miscellaneous compiler warnings and close some unclosed
comments on <i>vms/vms.c</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Remove sockadapt layer from the <small>VMS</small>
build.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Explicit support for <small>VMS</small> versions before
v7.0 and <small>DEC</small> C versions before v6.0 has been
removed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Since Perl 5.10.1, the home-grown
<tt>&quot;stat&quot;</tt> wrapper has been unable to
distinguish between a directory name containing an
underscore and an otherwise-identical filename containing a
dot in the same position (e.g., t/test_pl as a directory and
t/test.pl as a file). This problem has been corrected.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The build on <small>VMS</small> now permits names of the
resulting symbols in C code for Perl longer than 31
characters. Symbols like
<tt>&quot;Perl__it_was_the_best_of_times_it_was_the_worst_of_times&quot;</tt>
can now be created freely without causing the
<small>VMS</small> linker to seize up.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>GNU/Hurd</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Numerous build and test failures
on GNU/Hurd have been resolved with hints for building
<small>DBM</small> modules, detection of the library search
path, and enabling of large file support.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>OpenVOS</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Perl is now built with dynamic
linking on OpenVOS, the minimum supported version of which
is now Release 17.1.0.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><i>SunOS</i></p>

<p style="margin-left:11%; margin-top: 1em">The
<small>CC</small> workshop C <small>++</small> compiler is
now detected and used on systems that ship without cc.</p>

<h2>Internal Changes
<a name="Internal Changes"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The compiled representation of
formats is now stored via the <tt>&quot;mg_ptr&quot;</tt> of
their <tt>&quot;PERL_MAGIC_fm&quot;</tt>. Previously it was
stored in the string buffer, beyond
<tt>&quot;SvLEN()&quot;</tt>, the regular end of the string.
<tt>&quot;SvCOMPILED()&quot;</tt> and
<tt>&quot;SvCOMPILED_{on,off}()&quot;</tt> now exist solely
for compatibility for <small>XS</small> code. The first is
always 0, the other two now no-ops. (5.14.1)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Some global variables have been marked
<tt>&quot;const&quot;</tt>, members in the interpreter
structure have been re-ordered, and the opcodes have been
re-ordered. The op <tt>&quot;OP_AELEMFAST&quot;</tt> has
been split into <tt>&quot;OP_AELEMFAST&quot;</tt> and
<tt>&quot;OP_AELEMFAST_LEX&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When empting a hash of its elements (e.g., via
undef(%h), or <tt>%h</tt>=()), HvARRAY field is no longer
temporarily zeroed. Any destructors called on the freed
elements see the remaining elements. Thus, <tt>%h</tt>=()
becomes more like <tt>&quot;delete $h{$_} for keys
%h&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Boyer-Moore compiled scalars are now PVMGs, and the
Boyer-Moore tables are now stored via the mg_ptr of their
<tt>&quot;PERL_MAGIC_bm&quot;</tt>. Previously they were
PVGVs, with the tables stored in the string buffer, beyond
<tt>&quot;SvLEN()&quot;</tt>. This eliminates the last place
where the core stores data beyond
<tt>&quot;SvLEN()&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Simplified logic in <tt>&quot;Perl_sv_magic()&quot;</tt>
introduces a small change of behavior for error cases
involving unknown magic types. Previously, if
<tt>&quot;Perl_sv_magic()&quot;</tt> was passed a magic type
unknown to it, it would</p></td></tr>
</table>

<p style="margin-left:17%;">1.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%"></td>
<td width="3%"></td>
<td width="77%">


<p style="margin-top: 1em">Croak &quot;Modification of a
read-only value attempted&quot; if read only</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p>2.</p></td>
<td width="3%"></td>
<td width="77%">


<p>Return without error if the <small>SV</small> happened
to already have this magic</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="3%">


<p>3.</p></td>
<td width="3%"></td>
<td width="77%">


<p>otherwise croak &quot;Don&rsquo;t know how to handle
magic of type \\%o&quot;</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Now it will
always croak &quot;Don&rsquo;t know how to handle magic of
type \\%o&quot;, even on read-only values, or SVs which
already have the unknown magic type.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The experimental
<tt>&quot;fetch_cop_label&quot;</tt> function has been
renamed to <tt>&quot;cop_fetch_label&quot;</tt>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;cop_store_label&quot;</tt> function has
been added to the <small>API</small> , but is
experimental.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><i>embedvar.h</i> has been simplified, and one level of
macro indirection for PL_* variables has been removed for
the default (non-multiplicity) configuration. PERLVAR*()
macros now directly expand their arguments to tokens such as
<tt>&quot;PL_defgv&quot;</tt>, instead of expanding to
<tt>&quot;PL_Idefgv&quot;</tt>, with <i>embedvar.h</i>
defining a macro to map <tt>&quot;PL_Idefgv&quot;</tt> to
<tt>&quot;PL_defgv&quot;</tt>. <small>XS</small> code which
has unwarranted chumminess with the implementation may need
updating.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>An <small>API</small> has been added to explicitly
choose whether to export <small>XSUB</small> symbols. More
detail can be found in the comments for commit e64345f8.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;is_gv_magical_sv&quot;</tt> function has
been eliminated and merged with
<tt>&quot;gv_fetchpvn_flags&quot;</tt>. It used to be called
to determine whether a <small>GV</small> should be
autovivified in rvalue context. Now it has been replaced
with a new <tt>&quot;GV_ADDMG&quot;</tt> flag (not part of
the <small>API</small> ).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The returned code point from the function
<tt>&quot;utf8n_to_uvuni()&quot;</tt> when the input is
malformed <small>UTF&minus;8</small> , malformations are
allowed, and <tt>&quot;utf8&quot;</tt> warnings are off is
now the Unicode <small>REPLACEMENT CHARACTER</small>
whenever the malformation is such that no well-defined code
point can be computed. Previously the returned value was
essentially garbage. The only malformations that have
well-defined values are a zero-length string (0 is the
return), and overlong <small>UTF&minus;8</small>
sequences.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Padlists are now marked <tt>&quot;AvREAL&quot;</tt>;
i.e., reference-counted. They have always been
reference-counted, but were not marked real, because
<i>pad.c</i> did its own clean-up, instead of using the
usual clean-up code in <i>sv.c</i>. That caused problems in
thread cloning, so now the <tt>&quot;AvREAL&quot;</tt> flag
is on, but is turned off in <i>pad.c</i> right before the
padlist is freed (after <i>pad.c</i> has done its custom
freeing of the pads).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>All C files that make up the Perl core have been
converted to <small>UTF&minus;8</small> .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>These new functions have been added as part of the work
on Unicode symbols:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    HvNAMELEN
    HvNAMEUTF8
    HvENAMELEN
    HvENAMEUTF8
    gv_init_pv
    gv_init_pvn
    gv_init_pvsv
    gv_fetchmeth_pv
    gv_fetchmeth_pvn
    gv_fetchmeth_sv
    gv_fetchmeth_pv_autoload
    gv_fetchmeth_pvn_autoload
    gv_fetchmeth_sv_autoload
    gv_fetchmethod_pv_flags
    gv_fetchmethod_pvn_flags
    gv_fetchmethod_sv_flags
    gv_autoload_pv
    gv_autoload_pvn
    gv_autoload_sv
    newGVgen_flags
    sv_derived_from_pv
    sv_derived_from_pvn
    sv_derived_from_sv
    sv_does_pv
    sv_does_pvn
    sv_does_sv
    whichsig_pv
    whichsig_pvn
    whichsig_sv
    newCONSTSUB_flags</pre>


<p style="margin-left:17%; margin-top: 1em">The
gv_fetchmethod_*_flags functions, like gv_fetchmethod_flags,
are experimental and may change in a future release.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The following functions were
added. These are <i>not</i> part of the
<small>API:</small></p> </td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    GvNAMEUTF8
    GvENAMELEN
    GvENAME_HEK
    CopSTASH_flags
    CopSTASH_flags_set
    PmopSTASH_flags
    PmopSTASH_flags_set
    sv_sethek
    HEKfARG</pre>


<p style="margin-left:17%; margin-top: 1em">There is also a
<tt>&quot;HEKf&quot;</tt> macro corresponding to
<tt>&quot;SVf&quot;</tt>, for interpolating HEKs in
formatted strings.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p style="margin-top: 1em"><tt>&quot;sv_catpvn_flags&quot;</tt>
takes a couple of new internal-only flags,
<tt>&quot;SV_CATBYTES&quot;</tt> and
<tt>&quot;SV_CATUTF8&quot;</tt>, which tell it whether the
char array to be concatenated is <small>UTF8</small> . This
allows for more efficient concatenation than creating
temporary SVs to pass to <tt>&quot;sv_catsv&quot;</tt>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>For <small>XS AUTOLOAD</small> subs, <tt>$AUTOLOAD</tt>
is set once more, as it was in 5.6.0. This is in addition to
setting <tt>&quot;SvPVX(cv)&quot;</tt>, for compatibility
with 5.8 to 5.14. See &quot;Autoloading with XSUBs&quot; in
perlguts.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl now checks whether the array (the linearized isa)
returned by a <small>MRO</small> plugin begins with the name
of the class itself, for which the array was created,
instead of assuming that it does. This prevents the first
element from being skipped during method lookup. It also
means that <tt>&quot;mro::get_linear_isa&quot;</tt> may
return an array with one more element than the
<small>MRO</small> plugin provided [perl #94306].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;PL_curstash&quot;</tt> is now
reference-counted.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>There are now feature bundle hints in
<tt>&quot;PL_hints&quot;</tt> (<tt>$^H</tt>) that version
declarations use, to avoid having to load <i>feature.pm</i>.
One setting of the hint bits indicates a &quot;custom&quot;
feature bundle, which means that the entries in
<tt>&quot;%^H&quot;</tt> still apply. <i>feature.pm</i> uses
that.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The
<tt>&quot;HINT_FEATURE_MASK&quot;</tt> macro is defined in
<i>perl.h</i> along with other hints. Other macros for
setting and testing features and bundles are in the new
<i>feature.h</i>. <tt>&quot;FEATURE_IS_ENABLED&quot;</tt>
(which has moved to <i>feature.h</i>) is no longer used
throughout the codebase, but more specific macros, e.g.,
<tt>&quot;FEATURE_SAY_IS_ENABLED&quot;</tt>, that are
defined in <i>feature.h</i>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>lib/feature.pm</i> is now a
generated file, created by the new <i>regen/feature.pl</i>
script, which also generates <i>feature.h</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Tied arrays are now always <tt>&quot;AvREAL&quot;</tt>.
If <tt>@_</tt> or <tt>&quot;DB::args&quot;</tt> is tied, it
is reified first, to make sure this is always the case.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Two new functions
<tt>&quot;utf8_to_uvchr_buf()&quot;</tt> and
<tt>&quot;utf8_to_uvuni_buf()&quot;</tt> have been added.
These are the same as <tt>&quot;utf8_to_uvchr&quot;</tt> and
<tt>&quot;utf8_to_uvuni&quot;</tt> (which are now
deprecated), but take an extra parameter that is used to
guard against reading beyond the end of the input string.
See &quot;utf8_to_uvchr_buf&quot; in perlapi and
&quot;utf8_to_uvuni_buf&quot; in perlapi.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The regular expression engine now does
<small>TRIE</small> case insensitive matches under Unicode.
This may change the output of <tt>&quot;use re
'debug';&quot;</tt>, and will speed up various things.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>There is a new <tt>&quot;wrap_op_checker()&quot;</tt>
function, which provides a thread-safe alternative to
writing to <tt>&quot;PL_check&quot;</tt> directly.</p></td></tr>
</table>

<h2>Selected Bug Fixes
<a name="Selected Bug Fixes"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>Array and
hash</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A bug has been fixed that would
cause a &quot;Use of freed value in iteration&quot; error if
the next two hash elements that would be iterated over are
deleted [perl #85026]. (5.14.1)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Deleting the current hash iterator (the hash element
that would be returned by the next call to
<tt>&quot;each&quot;</tt>) in void context used not to free
it [perl #85026].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Deletion of methods via <tt>&quot;delete
$Class::{method}&quot;</tt> syntax used to update method
caches if called in void context, but not scalar or list
context.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When hash elements are deleted in void context, the
internal hash entry is now freed before the value is freed,
to prevent destructors called by that latter freeing from
seeing the hash in an inconsistent state. It was possible to
cause double-frees if the destructor freed the hash itself
[perl #100340].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A <tt>&quot;keys&quot;</tt> optimization in Perl 5.12.0
to make it faster on empty hashes caused
<tt>&quot;each&quot;</tt> not to reset the iterator if
called after the last element was deleted.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Freeing deeply nested hashes no longer crashes [perl
#44225].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>It is possible from <small>XS</small> code to create
hashes with elements that have no values. The hash element
and slice operators used to crash when handling these in
lvalue context. They now produce a &quot;Modification of
non-creatable hash value attempted&quot; error message.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>If list assignment to a hash or array triggered
destructors that freed the hash or array itself, a crash
would ensue. This is no longer the case [perl #107440].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>It used to be possible to free the typeglob of a
localized array or hash (e.g., <tt>&quot;local
@{&quot;x&quot;}; delete $::{x}&quot;</tt>), resulting in a
crash on scope exit.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Some core bugs affecting Hash::Util have been fixed:
locking a hash element that is a glob copy no longer causes
the next assignment to it to corrupt the glob (5.14.2), and
unlocking a hash element that holds a copy-on-write scalar
no longer causes modifications to that scalar to modify
other scalars that were sharing the same string buffer.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>C
<small>API</small> fixes</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The <tt>&quot;newHVhv&quot;</tt>
<small>XS</small> function now works on tied hashes, instead
of crashing or returning an empty hash.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;SvIsCOW&quot;</tt> C macro now returns
false for read-only copies of typeglobs, such as those
created by:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">  $hash{elem} = *foo;
  Hash::Util::lock_value %hash, 'elem';</pre>


<p style="margin-left:17%; margin-top: 1em">It used to
return true.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The
<tt>&quot;SvPVutf8&quot;</tt> C function no longer tries to
modify its argument, resulting in errors [perl #108994].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;SvPVutf8&quot;</tt> now works properly with
magical variables.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;SvPVbyte&quot;</tt> now works properly
non-PVs.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When presented with malformed <small>UTF&minus;8</small>
input, the XS-callable functions
<tt>&quot;is_utf8_string()&quot;</tt>,
<tt>&quot;is_utf8_string_loc()&quot;</tt>, and
<tt>&quot;is_utf8_string_loclen()&quot;</tt> could read
beyond the end of the input string by up to 12 bytes. This
no longer happens. [perl #32080]. However, currently,
<tt>&quot;is_utf8_char()&quot;</tt> still has this defect,
see &quot;<i>is_utf8_char()</i>&quot; above.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The C&minus;level <tt>&quot;pregcomp&quot;</tt> function
could become confused about whether the pattern was in
<small>UTF8</small> if the pattern was an overloaded, tied,
or otherwise magical scalar [perl #101940].</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Compile-time
hints</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Tying <tt>&quot;%^H&quot;</tt>
no longer causes perl to crash or ignore the contents of
<tt>&quot;%^H&quot;</tt> when entering a compilation scope
[perl #106282].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;eval $string&quot;</tt> and
<tt>&quot;require&quot;</tt> used not to localize
<tt>&quot;%^H&quot;</tt> during compilation if it was empty
at the time the <tt>&quot;eval&quot;</tt> call itself was
compiled. This could lead to scary side effects, like
<tt>&quot;use re &quot;/m&quot;&quot;</tt> enabling other
flags that the surrounding code was trying to enable for its
caller [perl #68750].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;eval $string&quot;</tt> and
<tt>&quot;require&quot;</tt> no longer localize hints
(<tt>$^H</tt> and <tt>&quot;%^H&quot;</tt>) at run time, but
only during compilation of the <tt>$string</tt> or required
file. This makes <tt>&quot;BEGIN { $^H{foo}=7 }&quot;</tt>
equivalent to <tt>&quot;BEGIN { eval '$^H{foo}=7'
}&quot;</tt> [perl #70151].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Creating a <small>BEGIN</small> block from
<small>XS</small> code (via <tt>&quot;newXS&quot;</tt> or
<tt>&quot;newATTRSUB&quot;</tt>) would, on completion, make
the hints of the current compiling code the current hints.
This could cause warnings to occur in a non-warning
scope.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Copy-on-write
scalars</b> <br>
Copy-on-write or shared hash key scalars were introduced in
5.8.0, but most Perl code did not encounter them (they were
used mostly internally). Perl 5.10.0 extended them, such
that assigning <tt>&quot;__PACKAGE__&quot;</tt> or a hash
key to a scalar would make it copy-on-write. Several parts
of Perl were not updated to account for them, but have now
been fixed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p style="margin-top: 1em"><tt>&quot;utf8::decode&quot;</tt>
had a nasty bug that would modify copy-on-write
scalars&rsquo; string buffers in place (i.e., skipping the
copy). This could result in hashes having two elements with
the same key [perl #91834]. (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lvalue subroutines were not allowing <small>COW</small>
scalars to be returned. This was fixed for lvalue scalar
context in Perl 5.12.3 and 5.14.0, but list context was not
fixed until this release.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Elements of restricted hashes (see the fields pragma)
containing copy-on-write values couldn&rsquo;t be deleted,
nor could such hashes be cleared (<tt>&quot;%hash =
()&quot;</tt>). (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Localizing a tied variable used to make it read-only if
it contained a copy-on-write string. (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Assigning a copy-on-write string to a stash element no
longer causes a double free. Regardless of this change, the
results of such assignments are still undefined.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Assigning a copy-on-write string to a tied variable no
longer stops that variable from being tied if it happens to
be a <small>PVMG</small> or <small>PVLV</small>
internally.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Doing a substitution on a tied variable returning a
copy-on-write scalar used to cause an assertion failure or
an &quot;Attempt to free nonexistent shared string&quot;
warning.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>This one is a regression from 5.12: In 5.14.0, the
bitwise assignment operators <tt>&quot;|=&quot;</tt>,
<tt>&quot;^=&quot;</tt> and <tt>&quot;&amp;=&quot;</tt>
started leaving the left-hand side undefined if it happened
to be a copy-on-write string [perl #108480].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Storable, Devel::Peek and PerlIO::scalar had similar
problems. See &quot;Updated Modules and Pragmata&quot;,
above.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>The
debugger</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><i>dumpvar.pl</i>, and therefore
the <tt>&quot;x&quot;</tt> command in the debugger, have
been fixed to handle objects blessed into classes whose
names contain &quot;=&quot;. The contents of such objects
used not to be dumped [perl #101814].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The &quot;R&quot; command for restarting a debugger
session has been fixed to work on Windows, or any other
system lacking a <tt>&quot;POSIX::_SC_OPEN_MAX&quot;</tt>
constant [perl #87740].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;#line 42 foo&quot;</tt> directive used not
to update the arrays of lines used by the debugger if it
occurred in a string eval. This was partially fixed in 5.14,
but it worked only for a single <tt>&quot;#line 42
foo&quot;</tt> in each eval. Now it works for multiple.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When subroutine calls are intercepted by the debugger,
the name of the subroutine or a reference to it is stored in
<tt>$DB::sub</tt>, for the debugger to access. Sometimes
(such as <tt>&quot;$foo = *bar; undef *bar;
&amp;$foo&quot;</tt>) <tt>$DB::sub</tt> would be set to a
name that could not be used to find the subroutine, and so
the debugger&rsquo;s attempt to call it would fail. Now the
check to see whether a reference is needed is more robust,
so those problems should not happen anymore [rt.cpan.org
#69862].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Every subroutine has a filename associated with it that
the debugger uses. The one associated with constant
subroutines used to be misallocated when cloned under
threads. Consequently, debugging threaded applications could
result in memory corruption [perl #96126].</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Dereferencing
operators</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p style="margin-top: 1em"><tt>&quot;defined(${&quot;...&quot;})&quot;</tt>,
<tt>&quot;defined(*{&quot;...&quot;})&quot;</tt>, etc., used
to return true for most, but not all built-in variables, if
they had not been used yet. This bug affected
<tt>&quot;${^GLOBAL_PHASE}&quot;</tt> and
<tt>&quot;${^UTF8CACHE}&quot;</tt>, among others. It also
used to return false if the package name was given as well
(<tt>&quot;${&quot;::!&quot;}&quot;</tt>) [perl #97978,
#97492].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl 5.10.0 introduced a similar bug:
<tt>&quot;defined(*{&quot;foo&quot;})&quot;</tt> where
&quot;foo&quot; represents the name of a built-in global
variable used to return false if the variable had never been
used before, but only on the <i>first</i> call. This, too,
has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Since 5.6.0, <tt>&quot;*{ ... }&quot;</tt> has been
inconsistent in how it treats undefined values. It would die
in strict mode or lvalue context for most undefined values,
but would be treated as the empty string (with a warning)
for the specific scalar return by
<tt>&quot;undef()&quot;</tt> (<tt>&amp;PL_sv_undef</tt>
internally). This has been corrected.
<tt>&quot;undef()&quot;</tt> is now treated like other
undefined scalars, as in Perl 5.005.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Filehandle,
last-accessed</b> <br>
Perl has an internal variable that stores the last
filehandle to be accessed. It is used by <tt>$.</tt> and by
<tt>&quot;tell&quot;</tt> and <tt>&quot;eof&quot;</tt>
without arguments.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">It used to be possible to set
this internal variable to a glob copy and then modify that
glob copy to be something other than a glob, and still have
the last-accessed filehandle associated with the variable
after assigning a glob to it again:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    my $foo = *STDOUT;  # $foo is a glob copy
    &lt;$foo&gt;;             # $foo is now the last&minus;accessed handle
    $foo = 3;           # no longer a glob
    $foo = *STDERR;     # still the last&minus;accessed handle</pre>


<p style="margin-left:17%; margin-top: 1em">Now the
<tt>&quot;$foo = 3&quot;</tt> assignment unsets that
internal variable, so there is no last-accessed filehandle,
just as if <tt>&quot;&lt;$foo&gt;&quot;</tt> had never
happened.</p>

<p style="margin-left:17%; margin-top: 1em">This also
prevents some unrelated handle from becoming the
last-accessed handle if <tt>$foo</tt> falls out of scope and
the same internal <small>SV</small> gets used for another
handle [perl #97988].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A regression in 5.14 caused
these statements not to set that internal variable:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    my $fh = *STDOUT;
    tell $fh;
    eof  $fh;
    seek $fh, 0,0;
    tell     *$fh;
    eof      *$fh;
    seek     *$fh, 0,0;
    readline *$fh;</pre>


<p style="margin-left:17%; margin-top: 1em">This is now
fixed, but <tt>&quot;tell *{ *$fh }&quot;</tt> still has the
problem, and it is not clear how to fix it [perl
#106536].</p>

<p style="margin-left:11%; margin-top: 1em"><b>Filetests
and &quot;stat&quot;</b> <br>
The term &quot;filetests&quot; refers to the operators that
consist of a hyphen followed by a single letter:
<tt>&quot;&minus;r&quot;</tt>,
<tt>&quot;&minus;x&quot;</tt>,
<tt>&quot;&minus;M&quot;</tt>, etc. The term
&quot;stacked&quot; when applied to filetests means followed
by another filetest operator sharing the same operand, as in
<tt>&quot;&minus;r &minus;x &minus;w $fooo&quot;</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;stat&quot;</tt>
produces more consistent warnings. It no longer warns for
&quot;_&quot; [perl #71002] and no longer skips the warning
at times for other unopened handles. It no longer warns
about an unopened handle when the operating system&rsquo;s
<tt>&quot;fstat&quot;</tt> function fails.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;stat&quot;</tt> would sometimes return
negative numbers for large inode numbers, because it was
using the wrong internal C type. [perl #84590]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;lstat&quot;</tt> is documented to fall back to
<tt>&quot;stat&quot;</tt> (with a warning) when given a
filehandle. When passed an <small>IO</small> reference, it
was actually doing the equivalent of
<tt>&quot;stat&nbsp;_&quot;</tt> and ignoring the
handle.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;&minus;T _&quot;</tt> with no preceding
<tt>&quot;stat&quot;</tt> used to produce a confusing
&quot;uninitialized&quot; warning, even though there is no
visible uninitialized value to speak of.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;&minus;T&quot;</tt>,
<tt>&quot;&minus;B&quot;</tt>, <tt>&quot;&minus;l&quot;</tt>
and <tt>&quot;&minus;t&quot;</tt> now work when stacked with
other filetest operators [perl #77388].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In 5.14.0, filetest ops (<tt>&quot;&minus;r&quot;</tt>,
<tt>&quot;&minus;x&quot;</tt>, etc.) started calling
<small>FETCH</small> on a tied argument belonging to the
previous argument to a list operator, if called with a
bareword argument or no argument at all. This has been
fixed, so <tt>&quot;push @foo, $tied, &minus;r&quot;</tt> no
longer calls <small>FETCH</small> on <tt>$tied</tt>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In Perl 5.6, <tt>&quot;&minus;l&quot;</tt> followed by
anything other than a bareword would treat its argument as a
file name. That was changed in 5.8 for glob references
(<tt>&quot;\*foo&quot;</tt>), but not for globs themselves
(<tt>*foo</tt>). <tt>&quot;&minus;l&quot;</tt> started
returning <tt>&quot;undef&quot;</tt> for glob references
without setting the last stat buffer that the &quot;_&quot;
handle uses, but only if warnings were turned on. With
warnings off, it was the same as 5.6. In other words, it was
simply buggy and inconsistent. Now the 5.6 behavior has been
restored.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;&minus;l&quot;</tt> followed by a bareword no
longer &quot;eats&quot; the previous argument to the list
operator in whose argument list it resides. Hence,
<tt>&quot;print &quot;bar&quot;, &minus;l foo&quot;</tt> now
actually prints &quot;bar&quot;, because
<tt>&quot;&minus;l&quot;</tt> on longer eats it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl keeps several internal variables to keep track of
the last stat buffer, from which file(handle) it originated,
what type it was, and whether the last stat succeeded.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">There were
various cases where these could get out of synch, resulting
in inconsistent or erratic behavior in edge cases (every
mention of <tt>&quot;&minus;T&quot;</tt> applies to
<tt>&quot;&minus;B&quot;</tt> as well):</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p style="margin-top: 1em"><tt>&quot;&minus;T</tt>
<i>HANDLE</i><tt>&quot;</tt>, even though it does a
<tt>&quot;stat&quot;</tt>, was not resetting the last stat
type, so an <tt>&quot;lstat _&quot;</tt> following it would
merrily return the wrong results. Also, it was not setting
the success status.</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Freeing the handle last used by
<tt>&quot;stat&quot;</tt> or a filetest could result in
<tt>&quot;&minus;T&nbsp;_&quot;</tt> using an unrelated
handle.</p> </td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;stat&quot;</tt> with an <small>IO</small>
reference would not reset the stat type or record the
filehandle for <tt>&quot;&minus;T&nbsp;_&quot;</tt> to
use.</p> </td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Fatal warnings could cause the stat buffer not to be
reset for a filetest operator on an unopened filehandle or
<tt>&quot;&minus;l&quot;</tt> on any handle. Fatal warnings
also stopped <tt>&quot;&minus;T&quot;</tt> from setting
<tt>$!</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>When the last stat was on an unreadable file,
<tt>&quot;&minus;T _&quot;</tt> is supposed to return
<tt>&quot;undef&quot;</tt>, leaving the last stat buffer
unchanged. But it was setting the stat type, causing
<tt>&quot;lstat _&quot;</tt> to stop working.</p></td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;&minus;T</tt> <i>FILENAME</i><tt>&quot;</tt>
was not resetting the internal stat buffers for unreadable
files.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">These have all
been fixed.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Formats</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Several edge cases have been
fixed with formats and <tt>&quot;formline&quot;</tt>; in
particular, where the format itself is potentially variable
(such as with ties and overloading), and where the format
and data differ in their encoding. In both these cases, it
used to possible for the output to be corrupted [perl
#91032].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;formline&quot;</tt> no longer converts its
argument into a string in-place. So passing a reference to
<tt>&quot;formline&quot;</tt> no longer destroys the
reference [perl #79532].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Assignment to <tt>$^A</tt> (the format output
accumulator) now recalculates the number of lines
output.</p> </td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>&quot;given&quot;
and &quot;when&quot;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;given&quot;</tt> was
not scoping its implicit <tt>$_</tt> properly, resulting in
memory leaks or &quot;Variable is not available&quot;
warnings [perl #94682].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;given&quot;</tt> was not calling set-magic on
the implicit lexical <tt>$_</tt> that it uses. This meant,
for example, that <tt>&quot;pos&quot;</tt> would be
remembered from one execution of the same
<tt>&quot;given&quot;</tt> block to the next, even if the
input were a different variable [perl #84526].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;when&quot;</tt> blocks are now capable of
returning variables declared inside the enclosing
<tt>&quot;given&quot;</tt> block [perl #93548].</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>The
&quot;glob&quot; operator</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">On OSes other than
<small>VMS</small> , Perl&rsquo;s <tt>&quot;glob&quot;</tt>
operator (and the <tt>&quot;&lt;...&gt;&quot;</tt> form) use
File::Glob underneath. File::Glob splits the pattern into
words, before feeding each word to its
<tt>&quot;bsd_glob&quot;</tt> function.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">There were
several inconsistencies in the way the split was done. Now
quotation marks (&rsquo; and &quot;) are always treated as
shell-style word delimiters (that allow whitespace as part
of a word) and backslashes are always preserved, unless they
exist to escape quotation marks. Before, those would only
sometimes be the case, depending on whether the pattern
contained whitespace. Also, escaped whitespace at the end of
the pattern is no longer stripped [perl #40470].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;CORE::glob&quot;</tt>
now works as a way to call the default globbing function. It
used to respect overrides, despite the
<tt>&quot;CORE::&quot;</tt> prefix.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Under miniperl (used to configure modules when perl
itself is built), <tt>&quot;glob&quot;</tt> now clears
<tt>%ENV</tt> before calling csh, since the latter croaks on
some systems if it does not like the contents of the
<small>LS_COLORS</small> environment variable [perl
#98662].</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Lvalue
subroutines</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Explicit return now returns the
actual argument passed to return, instead of copying it
[perl #72724, #72706].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lvalue subroutines used to enforce lvalue syntax (i.e.,
whatever can go on the left-hand side of
<tt>&quot;=&quot;</tt>) for the last statement and the
arguments to return. Since lvalue subroutines are not always
called in lvalue context, this restriction has been
lifted.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lvalue subroutines are less restrictive about what
values can be returned. It used to croak on values returned
by <tt>&quot;shift&quot;</tt> and
<tt>&quot;delete&quot;</tt> and from other subroutines, but
no longer does so [perl #71172].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Empty lvalue subroutines (<tt>&quot;sub :lvalue
{}&quot;</tt>) used to return <tt>@_</tt> in list context.
All subroutines used to do this, but regular subs were fixed
in Perl 5.8.2. Now lvalue subroutines have been likewise
fixed.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Autovivification now works on values returned from
lvalue subroutines [perl #7946], as does returning
<tt>&quot;keys&quot;</tt> in lvalue context.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lvalue subroutines used to copy their return values in
rvalue context. Not only was this a waste of
<small>CPU</small> cycles, but it also caused bugs. A
<tt>&quot;($)&quot;</tt> prototype would cause an lvalue sub
to copy its return value [perl #51408], and
<tt>&quot;while(lvalue_sub() =~ m/.../g) { ... }&quot;</tt>
would loop endlessly [perl #78680].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When called in potential lvalue context (e.g.,
subroutine arguments or a list passed to
<tt>&quot;for&quot;</tt>), lvalue subroutines used to copy
any read-only value that was returned. E.g., <tt>&quot; sub
:lvalue { $] } &quot;</tt> would not return <tt>$]</tt>, but
a copy of it.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When called in potential lvalue context, an lvalue
subroutine returning arrays or hashes used to bind the
arrays or hashes to scalar variables, resulting in bugs.
This was fixed in 5.14.0 if an array were the first thing
returned from the subroutine (but not for <tt>&quot;$scalar,
@array&quot;</tt> or hashes being returned). Now a more
general fix has been applied [perl #23790].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Method calls whose arguments were all surrounded with
<tt>&quot;my()&quot;</tt> or <tt>&quot;our()&quot;</tt> (as
in <tt>&quot;$object&minus;&gt;method(my($a,$b))&quot;</tt>)
used to force lvalue context on the subroutine. This would
prevent lvalue methods from returning certain values.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Lvalue sub calls that are not determined to be such at
compile time (<tt>&amp;$name</tt> or
&amp;{&quot;name&quot;}) are no longer exempt from strict
refs if they occur in the last statement of an lvalue
subroutine [perl #102486].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Sub calls whose subs are not visible at compile time, if
they occurred in the last statement of an lvalue subroutine,
would reject non-lvalue subroutines and die with
&quot;Can&rsquo;t modify non-lvalue subroutine call&quot;
[perl #102486].</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Non-lvalue sub
calls whose subs <i>are</i> visible at compile time
exhibited the opposite bug. If the call occurred in the last
statement of an lvalue subroutine, there would be no error
when the lvalue sub was called in lvalue context. Perl would
blindly assign to the temporary value returned by the
non-lvalue subroutine.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;AUTOLOAD&quot;</tt>
routines used to take precedence over the actual sub being
called (i.e., when autoloading wasn&rsquo;t needed), for sub
calls in lvalue or potential lvalue context, if the
subroutine was not visible at compile time.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Applying the <tt>&quot;:lvalue&quot;</tt> attribute to
an <small>XSUB</small> or to an aliased subroutine stub with
<tt>&quot;sub foo :lvalue;&quot;</tt> syntax stopped working
in Perl 5.12. This has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Applying the :lvalue attribute to subroutine that is
already defined does not work properly, as the attribute
changes the way the sub is compiled. Hence, Perl 5.12 began
warning when an attempt is made to apply the attribute to an
already defined sub. In such cases, the attribute is
discarded.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">But the change
in 5.12 missed the case where custom attributes are also
present: that case still silently and ineffectively applied
the attribute. That omission has now been corrected.
<tt>&quot;sub foo :lvalue :Whatever&quot;</tt> (when
<tt>&quot;foo&quot;</tt> is already defined) now warns about
the :lvalue attribute, and does not apply it.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A bug affecting lvalue context
propagation through nested lvalue subroutine calls has been
fixed. Previously, returning a value in nested rvalue
context would be treated as lvalue context by the inner
subroutine call, resulting in some values (such as read-only
values) being rejected.</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Overloading</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Arithmetic assignment
(<tt>&quot;$left += $right&quot;</tt>) involving overloaded
objects that rely on the &rsquo;nomethod&rsquo; override no
longer segfault when the left operand is not overloaded.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Errors that occur when methods cannot be found during
overloading now mention the correct package name, as they
did in 5.8.x, instead of erroneously mentioning the
&quot;overload&quot; package, as they have since 5.10.0.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Undefining <tt>%overload::</tt> no longer causes a
crash.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Prototypes
of built-in keywords</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The
<tt>&quot;prototype&quot;</tt> function no longer dies for
the <tt>&quot;__FILE__&quot;</tt>,
<tt>&quot;__LINE__&quot;</tt> and
<tt>&quot;__PACKAGE__&quot;</tt> directives. It now returns
an empty-string prototype for them, because they are
syntactically indistinguishable from nullary functions like
<tt>&quot;time&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;prototype&quot;</tt> now returns
<tt>&quot;undef&quot;</tt> for all overridable infix
operators, such as <tt>&quot;eq&quot;</tt>, which are not
callable in any way resembling functions. It used to return
incorrect prototypes for some and die for others [perl
#94984].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The prototypes of several built-in
functions--<tt>&quot;getprotobynumber&quot;</tt>,
<tt>&quot;lock&quot;</tt>, <tt>&quot;not&quot;</tt> and
<tt>&quot;select&quot;</tt>&minus;&minus;have been
corrected, or at least are now closer to reality than
before.</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Regular
expressions</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p style="margin-top: 1em"><tt>&quot;/[[:ascii:]]/&quot;</tt>
and <tt>&quot;/[[:blank:]]/&quot;</tt> now use locale rules
under <tt>&quot;use locale&quot;</tt> when the platform
supports that. Previously, they used the platform&rsquo;s
native character set.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;m/[[:ascii:]]/i&quot;</tt> and
<tt>&quot;/\p{ASCII}/i&quot;</tt> now match identically
(when not under a differing locale). This fixes a regression
introduced in 5.14 in which the first expression could match
characters outside of <small>ASCII</small> , such as the
<small>KELVIN SIGN</small> .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;/.*/g&quot;</tt> would sometimes refuse to
match at the end of a string that ends with &quot;\n&quot;.
This has been fixed [perl #109206].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Starting with 5.12.0, Perl used to get its internal
bookkeeping muddled up after assigning <tt>&quot;${ qr//
}&quot;</tt> to a hash element and locking it with
Hash::Util. This could result in double frees, crashes, or
erratic behavior.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The new (in 5.14.0) regular expression modifier
<tt>&quot;/a&quot;</tt> when repeated like
<tt>&quot;/aa&quot;</tt> forbids the characters outside the
<small>ASCII</small> range that match characters inside that
range from matching under <tt>&quot;/i&quot;</tt>. This did
not work under some circumstances, all involving
alternation, such as:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> &quot;\N{KELVIN SIGN}&quot; =~ /k|foo/iaa;</pre>


<p style="margin-left:17%; margin-top: 1em">succeeded
inappropriately. This is now fixed.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">5.14.0 introduced some memory
leaks in regular expression character classes such as
<tt>&quot;[\w\s]&quot;</tt>, which have now been fixed.
(5.14.1)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>An edge case in regular expression matching could
potentially loop. This happened only under
<tt>&quot;/i&quot;</tt> in bracketed character classes that
have characters with multi-character folds, and the target
string to match against includes the first portion of the
fold, followed by another character that has a
multi-character fold that begins with the remaining portion
of the fold, plus some more.</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em"> &quot;s\N{U+DF}&quot; =~ /[\x{DF}foo]/i</pre>


<p style="margin-left:17%; margin-top: 1em">is one such
case. <tt>&quot;\xDF&quot;</tt> folds to
<tt>&quot;ss&quot;</tt>. (5.14.1)</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">A few characters in regular
expression pattern matches did not match correctly in some
circumstances, all involving <tt>&quot;/i&quot;</tt>. The
affected characters are: <small>COMBINING GREEK
YPOGEGRAMMENI</small> , <small>GREEK CAPITAL LETTER
IOTA</small> , <small>GREEK CAPITAL LETTER UPSILON</small> ,
<small>GREEK PROSGEGRAMMENI</small> , <small>GREEK SMALL
LETTER IOTA WITH DIALYTIKA AND OXIA</small> , <small>GREEK
SMALL LETTER IOTA WITH DIALYTIKA AND TONOS</small> ,
<small>GREEK SMALL LETTER UPSILON WITH DIALYTIKA AND
OXIA</small> , <small>GREEK SMALL LETTER UPSILON WITH
DIALYTIKA AND TONOS</small> , <small>LATIN SMALL LETTER
LONG</small> S, <small>LATIN SMALL LIGATURE LONG</small> S
T, and <small>LATIN SMALL LIGATURE ST</small> .</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A memory leak regression in regular expression
compilation under threading has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A regression introduced in 5.14.0 has been fixed. This
involved an inverted bracketed character class in a regular
expression that consisted solely of a Unicode property. That
property wasn&rsquo;t getting inverted outside the Latin1
range.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Three problematic Unicode characters now work better in
regex pattern matching under <tt>&quot;/i&quot;</tt>.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">In the past,
three Unicode characters: <small>LATIN SMALL LETTER
SHARP</small> S, <small>GREEK SMALL LETTER IOTA WITH
DIALYTIKA AND TONOS</small> , and <small>GREEK SMALL LETTER
UPSILON WITH DIALYTIKA AND TONOS</small> , along with the
sequences that they fold to (including &quot;ss&quot; for
<small>LATIN SMALL LETTER SHARP</small> S), did not properly
match under <tt>&quot;/i&quot;</tt>. 5.14.0 fixed some of
these cases, but introduced others, including a panic when
one of the characters or sequences was used in the
<tt>&quot;(?(DEFINE)&quot;</tt> regular expression
predicate. The known bugs that were introduced in 5.14 have
now been fixed; as well as some other edge cases that have
never worked until now. These all involve using the
characters and sequences outside bracketed character classes
under <tt>&quot;/i&quot;</tt>. This closes [perl
#98546].</p>

<p style="margin-left:17%; margin-top: 1em">There remain
known problems when using certain characters with
multi-character folds inside bracketed character classes,
including such constructs as <tt>&quot;qr/[\N{LATIN SMALL
LETTER SHARP}a&minus;z]/i&quot;</tt>. These remaining bugs
are addressed in [perl #89774].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><small>RT</small> #78266: The
regex engine has been leaking memory when accessing named
captures that weren&rsquo;t matched as part of a regex ever
since 5.10 when they were introduced; e.g., this would
consume over a hundred <small>MB</small> of memory:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    for (1..10_000_000) {
        if (&quot;foo&quot; =~ /(foo|(?&lt;capture&gt;bar))?/) {
            my $capture = $+{capture}
        }
    }
    system &quot;ps &minus;o rss $$&quot;'</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">In 5.14,
<tt>&quot;/[[:lower:]]/i&quot;</tt> and
<tt>&quot;/[[:upper:]]/i&quot;</tt> no longer matched the
opposite case. This has been fixed [perl #101970].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A regular expression match with an overloaded object on
the right-hand side would sometimes stringify the object too
many times.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A regression has been fixed that was introduced in 5.14,
in <tt>&quot;/i&quot;</tt> regular expression matching, in
which a match improperly fails if the pattern is in
<small>UTF&minus;8</small> , the target string is not, and a
Latin&minus;1 character precedes a character in the string
that should match the pattern. [perl #101710]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In case-insensitive regular expression pattern matching,
no longer on <small>UTF&minus;8</small> encoded strings does
the scan for the start of match look only at the first
possible position. This caused matches such as
<tt>&quot;&quot;f\x{FB00}&quot; =~ /ff/i&quot;</tt> to
fail.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The regexp optimizer no longer crashes on debugging
builds when merging fixed-string nodes with inconvenient
contents.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A panic involving the combination of the regular
expression modifiers <tt>&quot;/aa&quot;</tt> and the
<tt>&quot;\b&quot;</tt> escape sequence introduced in 5.14.0
has been fixed [perl #95964]. (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The combination of the regular expression modifiers
<tt>&quot;/aa&quot;</tt> and the <tt>&quot;\b&quot;</tt> and
<tt>&quot;\B&quot;</tt> escape sequences did not work
properly on <small>UTF&minus;8</small> encoded strings. All
non-ASCII characters under <tt>&quot;/aa&quot;</tt> should
be treated as non-word characters, but what was happening
was that Unicode rules were used to determine
wordness/non&minus;wordness for non-ASCII characters. This
is now fixed [perl #95968].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;(?foo: ...)&quot;</tt> no longer loses passed
in character set.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The trie optimization used to have problems with
alternations containing an empty <tt>&quot;(?:)&quot;</tt>,
causing <tt>&quot;&quot;x&quot; =~
/\A(?&gt;(?:(?:)A|B|C?x))\z/&quot;</tt> not to match,
whereas it should [perl #111842].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Use of lexical (<tt>&quot;my&quot;</tt>) variables in
code blocks embedded in regular expressions will no longer
result in memory corruption or crashes.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Nevertheless,
these code blocks are still experimental, as there are still
problems with the wrong variables being closed over (in
loops for instance) and with abnormal exiting (e.g.,
<tt>&quot;die&quot;</tt>) causing memory corruption.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The <tt>&quot;\h&quot;</tt>,
<tt>&quot;\H&quot;</tt>, <tt>&quot;\v&quot;</tt> and
<tt>&quot;\V&quot;</tt> regular expression metacharacters
used to cause a panic error message when trying to match at
the end of the string [perl #96354].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The abbreviations for four C1 control characters
<tt>&quot;MW&quot; &quot;PM&quot;</tt>,
<tt>&quot;RI&quot;</tt>, and <tt>&quot;ST&quot;</tt> were
previously unrecognized by <tt>&quot;\N{}&quot;</tt>,
<i>vianame()</i>, and <i>string_vianame()</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Mentioning a variable named &quot;&amp;&quot; other than
<tt>$&amp;</tt> (i.e., <tt>&quot;@&amp;&quot;</tt> or
<tt>&quot;%&amp;&quot;</tt>) no longer stops <tt>$&amp;</tt>
from working. The same applies to variables named
&quot;&rsquo;&quot; and &quot;&lsquo;&quot; [perl
#24237].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Creating a <tt>&quot;UNIVERSAL::AUTOLOAD&quot;</tt> sub
no longer stops <tt>&quot;%+&quot;</tt>,
<tt>&quot;%&minus;&quot;</tt> and <tt>&quot;%!&quot;</tt>
from working some of the time [perl #105024].</p></td></tr>
</table>


<p style="margin-left:11%; margin-top: 1em"><b>Smartmatching</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;~~&quot;</tt> now
correctly handles the precedence of Any~~Object, and is not
tricked by an overloaded object on the left-hand side.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>In Perl 5.14.0, <tt>&quot;$tainted ~~ @array&quot;</tt>
stopped working properly. Sometimes it would erroneously
fail (when <tt>$tainted</tt> contained a string that occurs
in the array <i>after</i> the first element) or erroneously
succeed (when <tt>&quot;undef&quot;</tt> occurred after the
first element) [perl #93590].</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>The
&quot;sort&quot; operator</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;sort&quot;</tt> was
not treating <tt>&quot;sub {}&quot;</tt> and <tt>&quot;sub
{()}&quot;</tt> as equivalent when such a sub was provided
as the comparison routine. It used to croak on <tt>&quot;sub
{()}&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;sort&quot;</tt> now works once more with
custom sort routines that are XSUBs. It stopped working in
5.10.0.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;sort&quot;</tt> with a constant for a custom
sort routine, although it produces unsorted results, no
longer crashes. It started crashing in 5.10.0.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Warnings emitted by <tt>&quot;sort&quot;</tt> when a
custom comparison routine returns a non-numeric value now
contain &quot;in sort&quot; and show the line number of the
<tt>&quot;sort&quot;</tt> operator, rather than the last
line of the comparison routine. The warnings also now occur
only if warnings are enabled in the scope where
<tt>&quot;sort&quot;</tt> occurs. Previously the warnings
would occur if enabled in the comparison routine&rsquo;s
scope.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;sort { $a &lt;=&gt; $b }&quot;</tt>, which is
optimized internally, now produces &quot;uninitialized&quot;
warnings for NaNs (not-a-number values), since
<tt>&quot;&lt;=&gt;&quot;</tt> returns
<tt>&quot;undef&quot;</tt> for those. This brings it in line
with
<tt>&quot;sort&nbsp;{&nbsp;1;&nbsp;$a&nbsp;&lt;=&gt;&nbsp;$b&nbsp;}&quot;</tt>
and other more complex cases, which are not optimized [perl
#94390].</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>The
&quot;substr&quot; operator</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Tied (and otherwise magical)
variables are no longer exempt from the &quot;Attempt to use
reference as lvalue in substr&quot; warning.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>That warning now occurs when the returned lvalue is
assigned to, not when <tt>&quot;substr&quot;</tt> itself is
called. This makes a difference only if the return value of
<tt>&quot;substr&quot;</tt> is referenced and later assigned
to.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Passing a substring of a read-only value or a typeglob
to a function (potential lvalue context) no longer causes an
immediate &quot;Can&rsquo;t coerce&quot; or
&quot;Modification of a read-only value&quot; error. That
error occurs only if the passed value is assigned to.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">The same thing
happens with the &quot;substr outside of string&quot; error.
If the lvalue is only read from, not written to, it is now
just a warning, as with rvalue
<tt>&quot;substr&quot;</tt>.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;substr&quot;</tt>
assignments no longer call <small>FETCH</small> twice if the
first argument is a tied variable, just once.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Support for
embedded nulls</b> <br>
Some parts of Perl did not work correctly with nulls
(<tt>&quot;chr 0&quot;</tt>) embedded in strings. That meant
that, for instance, <tt>&quot;$m = &quot;a\0b&quot;;
foo&minus;&gt;$m&quot;</tt> would call the &quot;a&quot;
method, instead of the actual method name contained in
<tt>$m</tt>. These parts of perl have been fixed to support
nulls:</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Method names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Typeglob names (including filehandle and subroutine
names)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Package names, including the return value of
<tt>&quot;ref()&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Typeglob elements
(<tt>*foo{&quot;THING\0stuff&quot;}</tt>)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Signal names</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Various warnings and error messages that mention
variable names or values, methods, etc.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em">One side effect
of these changes is that blessing into &quot;\0&quot; no
longer causes <tt>&quot;ref()&quot;</tt> to return
false.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Threading
bugs</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Typeglobs returned from threads
are no longer cloned if the parent thread already has a glob
with the same name. This means that returned subroutines
will now assign to the right package variables [perl
#107366].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Some cases of threads crashing due to memory allocation
during cloning have been fixed [perl #90006].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Thread joining would sometimes emit &quot;Attempt to
free unreferenced scalar&quot; warnings if
<tt>&quot;caller&quot;</tt> had been used from the
<tt>&quot;DB&quot;</tt> package before thread creation [perl
#98092].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Locking a subroutine (via <tt>&quot;lock
&amp;sub&quot;</tt>) is no longer a compile-time error for
regular subs. For lvalue subroutines, it no longer tries to
return the sub as a scalar, resulting in strange side
effects like <tt>&quot;ref \$_&quot;</tt> returning &quot;
<small>CODE</small> &quot; in some instances.</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em"><tt>&quot;lock
&amp;sub&quot;</tt> is now a run-time error if
threads::shared is loaded (a no-op otherwise), but that may
be rectified in a future version.</p>

<p style="margin-left:11%; margin-top: 1em"><b>Tied
variables</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Various cases in which
<small>FETCH</small> was being ignored or called too many
times have been fixed:</p></td></tr>
</table>

<p style="margin-left:17%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%"></td>
<td width="5%"></td>
<td width="77%">



<p style="margin-top: 1em"><tt>&quot;PerlIO::get_layers&quot;</tt>
[perl #97956]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;$tied =~ y/a/b/&quot;</tt>, <tt>&quot;chop
$tied&quot;</tt> and <tt>&quot;chomp $tied&quot;</tt> when
<tt>$tied</tt> holds a reference.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>When calling <tt>&quot;local $_&quot;</tt> [perl
#105912]</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Four-argument <tt>&quot;select&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>A tied buffer passed to <tt>&quot;sysread&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;$tied .= &lt;&gt;&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Three-argument <tt>&quot;open&quot;</tt>, the third
being a tied file handle (as in <tt>&quot;open $fh,
&quot;&gt;&amp;&quot;, $tied&quot;</tt>)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;sort&quot;</tt> with a reference to a tied
glob for the comparison routine.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;..&quot;</tt> and <tt>&quot;...&quot;</tt> in
list context [perl #53554].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;${$tied}&quot;</tt>,
<tt>&quot;@{$tied}&quot;</tt>, <tt>&quot;%{$tied}&quot;</tt>
and <tt>&quot;*{$tied}&quot;</tt> where the tied variable
returns a string (<tt>&quot;&amp;{}&quot;</tt> was
unaffected)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;defined ${ $tied_variable }&quot;</tt></p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Various functions that take a filehandle argument in
rvalue context (<tt>&quot;close&quot;</tt>,
<tt>&quot;readline&quot;</tt>, etc.) [perl #97482]</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Some cases of dereferencing a complex expression, such
as <tt>&quot;${ (), $tied } = 1&quot;</tt>, used to call
<tt>&quot;FETCH&quot;</tt> multiple times, but now call it
once.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;$tied&minus;&gt;method&quot;</tt> where
<tt>$tied</tt> returns a package name--even resulting in a
failure to call the method, due to memory corruption</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p>Assignments like <tt>&quot;*$tied =
\&amp;{&quot;...&quot;}&quot;</tt> and <tt>&quot;*glob =
$tied&quot;</tt></p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">


<p><tt>&quot;chdir&quot;</tt>, <tt>&quot;chmod&quot;</tt>,
<tt>&quot;chown&quot;</tt>, <tt>&quot;utime&quot;</tt>,
<tt>&quot;truncate&quot;</tt>, <tt>&quot;stat&quot;</tt>,
<tt>&quot;lstat&quot;</tt> and the filetest ops
(<tt>&quot;&minus;r&quot;</tt>,
<tt>&quot;&minus;x&quot;</tt>, etc.)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="7%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="77%">
</td></tr>
</table>


<p style="margin-left:17%; margin-top: 1em"><tt>&quot;caller&quot;</tt>
sets <tt>@DB::args</tt> to the subroutine arguments when
called from the <small>DB</small> package. It used to crash
when doing so if <tt>@DB::args</tt> happened to be tied. Now
it croaks instead.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Tying an element of
<tt>%ENV</tt> or <tt>&quot;%^H&quot;</tt> and then deleting
that element would result in a call to the tie
object&rsquo;s <small>DELETE</small> method, even though
tying the element itself is supposed to be equivalent to
tying a scalar (the element is, of course, a scalar) [perl
#67490].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When Perl autovivifies an element of a tied array or
hash (which entails calling <small>STORE</small> with a new
reference), it now calls <small>FETCH</small> immediately
after the <small>STORE</small> , instead of assuming that
<small>FETCH</small> would have returned the same reference.
This can make it easier to implement tied objects [perl
#35865, #43011].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Four-argument <tt>&quot;select&quot;</tt> no longer
produces its &quot;Non-string passed as bitmask&quot;
warning on tied or tainted variables that are strings.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Localizing a tied scalar that returns a typeglob no
longer stops it from being tied till the end of the
scope.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Attempting to <tt>&quot;goto&quot;</tt> out of a tied
handle method used to cause memory corruption or crashes.
Now it produces an error message instead [perl #8611].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A bug has been fixed that occurs when a tied variable is
used as a subroutine reference: if the last thing assigned
to or returned from the variable was a reference or
typeglob, the <tt>&quot;\&amp;$tied&quot;</tt> could either
crash or return the wrong subroutine. The reference case is
a regression introduced in Perl 5.10.0. For typeglobs, it
has probably never worked till now.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Version
objects and vstrings</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The bitwise complement operator
(and possibly other operators, too) when passed a vstring
would leave vstring magic attached to the return value, even
though the string had changed. This meant that
<tt>&quot;version&minus;&gt;new(~v1.2.3)&quot;</tt> would
create a version looking like &quot;v1.2.3&quot; even though
the string passed to
<tt>&quot;version&minus;&gt;new&quot;</tt> was actually
&quot;\376\375\374&quot;. This also caused B::Deparse to
deparse <tt>&quot;~v1.2.3&quot;</tt> incorrectly, without
the <tt>&quot;~&quot;</tt> [perl #29070].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Assigning a vstring to a magic (e.g., tied, <tt>$!</tt>)
variable and then assigning something else used to blow away
all magic. This meant that tied variables would come undone,
<tt>$!</tt> would stop getting updated on failed system
calls, <tt>$|</tt> would stop setting autoflush, and other
mischief would take place. This has been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">



<p><tt>&quot;version&minus;&gt;new(&quot;version&quot;)&quot;</tt>
and <tt>&quot;printf &quot;%vd&quot;,
&quot;version&quot;&quot;</tt> no longer crash [perl
#102586].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Version comparisons, such as those that happen
implicitly with <tt>&quot;use v5.43&quot;</tt>, no longer
cause locale settings to change [perl #105784].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Version objects no longer cause memory leaks in boolean
context [perl #109762].</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Warnings,
redefinition</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Subroutines from the
<tt>&quot;autouse&quot;</tt> namespace are once more exempt
from redefinition warnings. This used to work in 5.005, but
was broken in 5.6 for most subroutines. For subs created via
<small>XS</small> that redefine subroutines from the
<tt>&quot;autouse&quot;</tt> package, this stopped working
in 5.10.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>New XSUBs now produce redefinition warnings if they
overwrite existing subs, as they did in 5.8.x. (The
<tt>&quot;autouse&quot;</tt> logic was reversed in
5.10&minus;14. Only subroutines from the
<tt>&quot;autouse&quot;</tt> namespace would warn when
clobbered.)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;newCONSTSUB&quot;</tt> used to use
compile-time warning hints, instead of run-time hints. The
following code should never produce a redefinition warning,
but it used to, if <tt>&quot;newCONSTSUB&quot;</tt>
redefined an existing subroutine:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    use warnings;
    BEGIN {
        no warnings;
        some_XS_function_that_calls_new_CONSTSUB();
    }</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Redefinition warnings for
constant subroutines are on by default (what are known as
severe warnings in perldiag). This occurred only when it was
a glob assignment or declaration of a Perl subroutine that
caused the warning. If the creation of XSUBs triggered the
warning, it was not a default warning. This has been
corrected.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The internal check to see whether a redefinition warning
should occur used to emit &quot;uninitialized&quot; warnings
in cases like this:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    use warnings &quot;uninitialized&quot;;
    use constant {u =&gt; undef, v =&gt; undef};
    sub foo(){u}
    sub foo(){v}</pre>


<p style="margin-left:11%; margin-top: 1em"><b>Warnings,
&quot;Uninitialized&quot;</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Various functions that take a
filehandle argument in rvalue context
(<tt>&quot;close&quot;</tt>, <tt>&quot;readline&quot;</tt>,
etc.) used to warn twice for an undefined handle [perl
#97482].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;dbmopen&quot;</tt> now only warns once, rather
than three times, if the mode argument is
<tt>&quot;undef&quot;</tt> [perl #90064].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>&quot;+=&quot;</tt> operator does not usually
warn when the left-hand side is <tt>&quot;undef&quot;</tt>,
but it was doing so for tied variables. This has been fixed
[perl #44895].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A bug fix in Perl 5.14 introduced a new bug, causing
&quot;uninitialized&quot; warnings to report the wrong
variable if the operator in question had two operands and
one was <tt>&quot;%{...}&quot;</tt> or
<tt>&quot;@{...}&quot;</tt>. This has been fixed [perl
#103766].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;..&quot;</tt> and <tt>&quot;...&quot;</tt> in
list context now mention the name of the variable in
&quot;uninitialized&quot; warnings for string (as opposed to
numeric) ranges.</p></td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Weak
references</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Weakening the first argument to
an automatically-invoked <tt>&quot;DESTROY&quot;</tt> method
could result in erroneous &quot; <small>DESTROY</small>
created new reference&quot; errors or crashes. Now it is an
error to weaken a read-only reference.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Weak references to lexical hashes going out of scope
were not going stale (becoming undefined), but continued to
point to the hash.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Weak references to lexical variables going out of scope
are now broken before any magical methods (e.g.,
<small>DESTROY</small> on a tie object) are called. This
prevents such methods from modifying the variable that will
be seen the next time the scope is entered.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Creating a weak reference to an <tt>@ISA</tt> array or
accessing the array index (<tt>$#ISA</tt>) could result in
confused internal bookkeeping for elements later added to
the <tt>@ISA</tt> array. For instance, creating a weak
reference to the element itself could push that weak
reference on to <tt>@ISA</tt>; and elements added after use
of <tt>$#ISA</tt> would be ignored by method lookup [perl
#85670].</p> </td></tr>
</table>

<p style="margin-left:11%; margin-top: 1em"><b>Other
notable fixes</b></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;quotemeta&quot;</tt>
now quotes consistently the same non-ASCII characters under
<tt>&quot;use feature 'unicode_strings'&quot;</tt>,
regardless of whether the string is encoded in
<small>UTF&minus;8</small> or not, hence fixing the last
vestiges (we hope) of the notorious &quot;The &quot;Unicode
Bug&quot;&quot; in perlunicode. [perl #77654].</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Which of these
code points is quoted has changed, based on Unicode&rsquo;s
recommendations. See &quot;quotemeta&quot; in perlfunc for
details.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;study&quot;</tt> is
now a no-op, presumably fixing all outstanding bugs related
to study causing regex matches to behave incorrectly!</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When one writes <tt>&quot;open foo || die&quot;</tt>,
which used to work in Perl 4, a &quot;Precedence
problem&quot; warning is produced. This warning used
erroneously to apply to fully-qualified bareword handle
names not followed by <tt>&quot;||&quot;</tt>. This has been
corrected.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>After package aliasing (<tt>&quot;*foo:: =
*bar::&quot;</tt>), <tt>&quot;select&quot;</tt> with 0 or 1
argument would sometimes return a name that could not be
used to refer to the filehandle, or sometimes it would
return <tt>&quot;undef&quot;</tt> even when a filehandle was
selected. Now it returns a typeglob reference in such
cases.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;PerlIO::get_layers&quot;</tt> no longer
ignores some arguments that it thinks are numeric, while
treating others as filehandle names. It is now consistent
for flat scalars (i.e., not references).</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Unrecognized switches on <tt>&quot;#!&quot;</tt>
line</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">If a switch,
such as <b>&minus;x</b>, that cannot occur on the
<tt>&quot;#!&quot;</tt> line is used there, perl dies with
&quot;Can&rsquo;t emulate...&quot;.</p>

<p style="margin-left:17%; margin-top: 1em">It used to
produce the same message for switches that perl did not
recognize at all, whether on the command line or the
<tt>&quot;#!&quot;</tt> line.</p>

<p style="margin-left:17%; margin-top: 1em">Now it produces
the &quot;Unrecognized switch&quot; error message [perl
#104288].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>&quot;system&quot;</tt> now
temporarily blocks the <small>SIGCHLD</small> signal
handler, to prevent the signal handler from stealing the
exit status [perl #105700].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The <tt>%n</tt> formatting code for
<tt>&quot;printf&quot;</tt> and
<tt>&quot;sprintf&quot;</tt>, which causes the number of
characters to be assigned to the next argument, now actually
assigns the number of characters, instead of the number of
bytes.</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">It also works
now with special lvalue functions like
<tt>&quot;substr&quot;</tt> and with nonexistent hash and
array elements [perl #3471, #103492].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Perl skips copying values
returned from a subroutine, for the sake of speed, if doing
so would make no observable difference. Because of faulty
logic, this would happen with the result of
<tt>&quot;delete&quot;</tt>, <tt>&quot;shift&quot;</tt> or
<tt>&quot;splice&quot;</tt>, even if the result was
referenced elsewhere. It also did so with tied variables
about to be freed [perl #91844, #95548].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;utf8::decode&quot;</tt> now refuses to modify
read-only scalars [perl #91850].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Freeing <tt>$_</tt> inside a <tt>&quot;grep&quot;</tt>
or <tt>&quot;map&quot;</tt> block, a code block embedded in
a regular expression, or an <tt>@INC</tt> filter (a
subroutine returned by a subroutine in <tt>@INC</tt>) used
to result in double frees or crashes [perl #91880, #92254,
#92256].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;eval&quot;</tt> returns
<tt>&quot;undef&quot;</tt> in scalar context or an empty
list in list context when there is a run-time error. When
<tt>&quot;eval&quot;</tt> was passed a string in list
context and a syntax error occurred, it used to return a
list containing a single undefined element. Now it returns
an empty list in list context for all errors [perl
#80630].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;goto &amp;func&quot;</tt> no longer crashes,
but produces an error message, when the unwinding of the
current subroutine&rsquo;s scope fires a destructor that
undefines the subroutine being &quot;goneto&quot; [perl
#99850].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl now holds an extra reference count on the package
that code is currently compiling in. This means that the
following code no longer crashes [perl #101486]:</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    package Foo;
    BEGIN {*Foo:: = *Bar::}
    sub foo;</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The <tt>&quot;x&quot;</tt>
repetition operator no longer crashes on 64&minus;bit builds
with large repeat counts [perl #94560].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Calling <tt>&quot;require&quot;</tt> on an implicit
<tt>$_</tt> when <tt>*CORE::GLOBAL::require</tt> has been
overridden does not segfault anymore, and <tt>$_</tt> is now
passed to the overriding subroutine [perl #78260].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;use&quot;</tt> and
<tt>&quot;require&quot;</tt> are no longer affected by the
I/O layers active in the caller&rsquo;s scope (enabled by
open.pm) [perl #96008].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;our $::e; $e&quot;</tt> (which is invalid) no
longer produces the &quot;Compilation error at
lib/utf8_heavy.pl...&quot; error message, which it started
emitting in 5.10.0 [perl #99984].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>On 64&minus;bit systems, <tt>&quot;read()&quot;</tt> now
understands large string offsets beyond the 32&minus;bit
range.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Errors that occur when processing subroutine attributes
no longer cause the subroutine&rsquo;s op tree to leak.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Passing the same constant subroutine to both
<tt>&quot;index&quot;</tt> and <tt>&quot;formline&quot;</tt>
no longer causes one or the other to fail [perl #89218].
(5.14.1)</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>List assignment to lexical variables declared with
attributes in the same statement (<tt>&quot;my ($x,@y) :
blimp = (72,94)&quot;</tt>) stopped working in Perl 5.8.0.
It has now been fixed.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl 5.10.0 introduced some faulty logic that made
&quot;U*&quot; in the middle of a pack template equivalent
to &quot;U0&quot; if the input string was empty. This has
been fixed [perl #90160]. (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Destructors on objects were not called during global
destruction on objects that were not referenced by any
scalars. This could happen if an array element were blessed
(e.g., <tt>&quot;bless \$a[0]&quot;</tt>) or if a closure
referenced a blessed variable (<tt>&quot;bless \my @a; sub
foo { @a }&quot;</tt>).</p></td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">Now there is an
extra pass during global destruction to fire destructors on
any objects that might be left after the usual passes that
check for objects referenced by scalars [perl #36347].</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">Fixed a case where it was
possible that a freed buffer may have been read from when
parsing a here document [perl #90128]. (5.14.1)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;each(</tt><i>ARRAY</i><tt>)&quot;</tt> is now
wrapped in <tt>&quot;defined(...)&quot;</tt>, like
<tt>&quot;each(</tt><i>HASH</i><tt>)&quot;</tt>, inside a
<tt>&quot;while&quot;</tt> condition [perl #90888].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>A problem with context propagation when a
<tt>&quot;do&quot;</tt> block is an argument to
<tt>&quot;return&quot;</tt> has been fixed. It used to cause
<tt>&quot;undef&quot;</tt> to be returned in certain cases
of a <tt>&quot;return&quot;</tt> inside an
<tt>&quot;if&quot;</tt> block which itself is followed by
another <tt>&quot;return&quot;</tt>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Calling <tt>&quot;index&quot;</tt> with a tainted
constant no longer causes constants in subsequently compiled
code to become tainted [perl #64804].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Infinite loops like <tt>&quot;1 while 1&quot;</tt> used
to stop <tt>&quot;strict 'subs'&quot;</tt> mode from working
for the rest of the block.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>For list assignments like <tt>&quot;($a,$b) =
($b,$a)&quot;</tt>, Perl has to make a copy of the items on
the right-hand side before assignment them to the left. For
efficiency&rsquo;s sake, it assigns the values on the right
straight to the items on the left if no one variable is
mentioned on both sides, as in <tt>&quot;($a,$b) =
($c,$d)&quot;</tt>. The logic for determining when it can
cheat was faulty, in that <tt>&quot;&amp;&amp;&quot;</tt>
and <tt>&quot;||&quot;</tt> on the right-hand side could
fool it. So <tt>&quot;($a,$b) = $some_true_value &amp;&amp;
($b,$a)&quot;</tt> would end up assigning the value of
<tt>$b</tt> to both scalars.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Perl no longer tries to apply lvalue context to the
string in <tt>&quot;(&quot;string&quot;, $variable) ||=
1&quot;</tt> (which used to be an error). Since the
left-hand side of <tt>&quot;||=&quot;</tt> is evaluated in
scalar context, that&rsquo;s a scalar comma operator, which
gives all but the last item void context. There is no such
thing as void lvalue context, so it was a mistake for Perl
to try to force it [perl #96942].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;caller&quot;</tt> no longer leaks memory when
called from the <small>DB</small> package if
<tt>@DB::args</tt> was assigned to after the first call to
<tt>&quot;caller&quot;</tt>. Carp was triggering this bug
[perl #97010]. (5.14.2)</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;close&quot;</tt> and similar filehandle
functions, when called on built-in global variables (like
<tt>$+</tt>), used to die if the variable happened to hold
the undefined value, instead of producing the usual
&quot;Use of uninitialized value&quot; warning.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When autovivified file handles were introduced in Perl
5.6.0, <tt>&quot;readline&quot;</tt> was inadvertently made
to autovivify when called as
<tt>&quot;readline($foo)&quot;</tt> (but not as
<tt>&quot;&lt;$foo&gt;&quot;</tt>). It has now been fixed
never to autovivify.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Calling an undefined anonymous subroutine (e.g., what
<tt>$x</tt> holds after <tt>&quot;undef &amp;{$x =
sub{}}&quot;</tt>) used to cause a &quot;Not a
<small>CODE</small> reference&quot; error, which has been
corrected to &quot;Undefined subroutine called&quot; [perl
#71154].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Causing <tt>@DB::args</tt> to be freed between uses of
<tt>&quot;caller&quot;</tt> no longer results in a crash
[perl #93320].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;setpgrp($foo)&quot;</tt> used to be equivalent
to <tt>&quot;($foo, setpgrp)&quot;</tt>, because
<tt>&quot;setpgrp&quot;</tt> was ignoring its argument if
there was just one. Now it is equivalent to
<tt>&quot;setpgrp($foo,0)&quot;</tt>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;shmread&quot;</tt> was not setting the scalar
flags correctly when reading from shared memory, causing the
existing cached numeric representation in the scalar to
persist [perl #98480].</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;++&quot;</tt> and
<tt>&quot;&minus;&minus;&quot;</tt> now work on copies of
globs, instead of dying.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;splice()&quot;</tt> doesn&rsquo;t warn when
truncating</p> </td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">You can now
limit the size of an array using
<tt>&quot;splice(@a,MAX_LEN)&quot;</tt> without worrying
about warnings.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em"><tt>$$</tt> is no longer
tainted. Since this value comes directly from
<tt>&quot;getpid()&quot;</tt>, it is always safe.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>The parser no longer leaks a filehandle if
<small>STDIN</small> was closed before parsing started [perl
#37033].</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p><tt>&quot;die;&quot;</tt> with a non-reference,
non-string, or magical (e.g., tainted) value in $@ now
properly propagates that value [perl #111654].</p></td></tr>
</table>

<h2>Known Problems
<a name="Known Problems"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="63%">


<p style="margin-top: 1em">On Solaris, we have two kinds of
failure.</p> </td>
<td width="20%">
</td></tr>
</table>

<p style="margin-left:17%; margin-top: 1em">If <i>make</i>
is Sun&rsquo;s <i>make</i>, we get an error about a badly
formed macro assignment in the <i>Makefile</i>. That happens
when <i>./Configure</i> tries to make depends.
<i>Configure</i> then exits 0, but further
<i>make</i>&minus;ing fails.</p>

<p style="margin-left:17%; margin-top: 1em">If <i>make</i>
is <i>gmake</i>, <i>Configure</i> completes, then we get
errors related to <i>/usr/include/stdbool.h</i></p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">On Win32, a number of tests hang
unless <small>STDERR</small> is redirected. The cause of
this is still under investigation.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>When building as root with a umask that prevents files
from being other-readable, <i>t/op/filetest.t</i> will fail.
This is a test bug, not a bug in perl&rsquo;s behavior.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p>Configuring with a recent gcc and
link-time-optimization, such as <tt>&quot;Configure
&minus;Doptimize='&minus;O2 &minus;flto'&quot;</tt> fails
because the optimizer optimizes away some of
Configure&rsquo;s tests. A workaround is to omit the
<tt>&quot;&minus;flto&quot;</tt> flag when running
Configure, but add it back in while actually building,
something like</p></td></tr>
</table>

<pre style="margin-left:17%; margin-top: 1em">    sh Configure &minus;Doptimize=&minus;O2
    make OPTIMIZE='&minus;O2 &minus;flto'</pre>



<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="83%">


<p style="margin-top: 1em">The following
<small>CPAN</small> modules have test failures with perl
5.16. Patches have been submitted for all of these, so
hopefully there will be new releases soon:</p></td></tr>
</table>

<p style="margin-left:17%;">&bull;</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%"></td>
<td width="5%"></td>
<td width="55%">


<p style="margin-top: 1em">Date::Pcalc version 6.1</p></td>
<td width="22%">
</td></tr>
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p>&bull;</p></td>
<td width="5%"></td>
<td width="55%">


<p>Module::CPANTS::Analyse version 0.85</p></td>
<td width="22%">
</td></tr>
</table>

<p style="margin-left:23%; margin-top: 1em">This fails due
to problems in Module::Find 0.10 and File::MMagic 1.27.</p>

<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="17%"></td>
<td width="1%">


<p style="margin-top: 1em">&bull;</p></td>
<td width="5%"></td>
<td width="39%">


<p style="margin-top: 1em">PerlIO::Util version 0.72</p></td>
<td width="38%">
</td></tr>
</table>

<h2>Acknowledgements
<a name="Acknowledgements"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Perl 5.16.0
represents approximately 12 months of development since Perl
5.14.0 and contains approximately 590,000 lines of changes
across 2,500 files from 139 authors.</p>

<p style="margin-left:11%; margin-top: 1em">Perl continues
to flourish into its third decade thanks to a vibrant
community of users and developers. The following people are
known to have contributed the improvements that became Perl
5.16.0:</p>

<p style="margin-left:11%; margin-top: 1em">Aaron Crane,
Abhijit Menon-Sen, Abigail, Alan Haggai Alavi, Alberto
Simo~es, Alexandr Ciornii, Andreas Koenig, Andy Dougherty,
Aristotle Pagaltzis, Bo Johansson, Bo Lindbergh, Breno G. de
Oliveira, brian d foy, Brian Fraser, Brian Greenfield, Carl
Hayter, Chas. Owens, Chia-liang Kao, Chip Salzenberg, Chris
&rsquo;BinGOs&rsquo; Williams, Christian Hansen, Christopher
J. Madsen, chromatic, Claes Jacobsson, Claudio Ramirez,
Craig A. Berry, Damian Conway, Daniel Kahn Gillmor, Darin
McBride, Dave Rolsky, David Cantrell, David Golden, David
Leadbeater, David Mitchell, Dee Newcum, Dennis Kaarsemaker,
Dominic Hargreaves, Douglas Christopher Wilson, Eric Brine,
Father Chrysostomos, Florian Ragwitz, Frederic Briere,
George Greer, Gerard Goossen, Gisle Aas, H.Merijn Brand,
Hojung Youn, Ian Goodacre, James E Keenan, Jan Dubois, Jerry
D. Hedden, Jesse Luehrs, Jesse Vincent, Jilles Tjoelker, Jim
Cromie, Jim Meyering, Joel Berger, Johan Vromans, Johannes
Plunien, John Hawkinson, John P. Linderman, John Peacock,
Joshua ben Jore, Juerd Waalboer, Karl Williamson, Karthik
Rajagopalan, Keith Thompson, Kevin J. Woolley, Kevin Ryde,
Laurent Dami, Leo Lapworth, Leon Brocard, Leon Timmermans,
Louis Strous, Lukas Mai, Marc Green, Marcel Gruenauer, Mark
A. Stratman, Mark Dootson, Mark Jason Dominus, Martin Hasch,
Matthew Horsfall, Max Maischein, Michael G Schwern, Michael
Witten, Mike Sheldrake, Moritz Lenz, Nicholas Clark, Niko
Tyni, Nuno Carvalho, Pau Amma, Paul Evans, Paul Green, Paul
Johnson, Perlover, Peter John Acklam, Peter Martini, Peter
Scott, Phil Monsen, Pino Toscano, Rafael Garcia-Suarez,
Rainer Tammer, Reini Urban, Ricardo Signes, Robin Barker,
Rodolfo Carvalho, Salvador Fandin~o, Sam Kimbrel, Samuel
Thibault, Shawn M Moore, Shigeya Suzuki, Shirakata Kentaro,
Shlomi Fish, Sisyphus, Slaven Rezic, Spiros Denaxas, Steffen
Mueller, Steffen Schwigon, Stephen Bennett, Stephen
Oberholtzer, Stevan Little, Steve Hay, Steve Peters, Thomas
Sibley, Thorsten Glaser, Timothe Litt, Todd Rinaldo, Tom
Christiansen, Tom Hukins, Tony Cook, Vadim Konovalov,
Vincent Pit, Vladimir Timofeev, Walt Mankowski, Yves Orton,
Zefram, Zsban Ambrus, var Arnfjoer` Bjarmason.</p>

<p style="margin-left:11%; margin-top: 1em">The list above
is almost certainly incomplete as it is automatically
generated from version control history. In particular, it
does not include the names of the (very much appreciated)
contributors who reported issues to the Perl bug
tracker.</p>

<p style="margin-left:11%; margin-top: 1em">Many of the
changes included in this version originated in the
<small>CPAN</small> modules included in Perl&rsquo;s core.
We&rsquo;re grateful to the entire <small>CPAN</small>
community for helping Perl to flourish.</p>

<p style="margin-left:11%; margin-top: 1em">For a more
complete list of all of Perl&rsquo;s historical
contributors, please see the <i><small>AUTHORS</small></i>
file in the Perl source distribution.</p>

<h2>Reporting Bugs
<a name="Reporting Bugs"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">If you find
what you think is a bug, you might check the articles
recently posted to the comp.lang.perl.misc newsgroup and the
perl bug database at &lt;http://rt.perl.org/perlbug/&gt;.
There may also be information at
&lt;http://www.perl.org/&gt;, the Perl Home Page.</p>

<p style="margin-left:11%; margin-top: 1em">If you believe
you have an unreported bug, please run the perlbug program
included with your release. Be sure to trim your bug down to
a tiny but sufficient test case. Your bug report, along with
the output of <tt>&quot;perl &minus;V&quot;</tt>, will be
sent off to perlbug@perl.org to be analysed by the Perl
porting team.</p>

<p style="margin-left:11%; margin-top: 1em">If the bug you
are reporting has security implications, which make it
inappropriate to send to a publicly archived mailing list,
then please send it to
perl5&minus;security&minus;report@perl.org. This points to a
closed subscription unarchived mailing list, which includes
all core committers, who will be able to help assess the
impact of issues, figure out a resolution, and help
co-ordinate the release of patches to mitigate or fix the
problem across all platforms on which Perl is supported.
Please use this address only for security issues in the Perl
core, not for modules independently distributed on
<small>CPAN</small> .</p>

<h2>SEE ALSO
<a name="SEE ALSO"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">The
<i>Changes</i> file for an explanation of how to view
exhaustive details on what changed.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i><small>INSTALL</small></i> file for how to build
Perl.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i><small>README</small></i> file for general stuff.</p>

<p style="margin-left:11%; margin-top: 1em">The
<i>Artistic</i> and <i>Copying</i> files for copyright
information.</p>
<hr>
</body>
</html>
