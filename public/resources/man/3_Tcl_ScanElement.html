<!-- Creator     : groff version 1.22.2 -->
<!-- CreationDate: Thu Aug 18 15:04:06 2016 -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="generator" content="groff -Thtml, see www.gnu.org">
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="Content-Style" content="text/css">
<style type="text/css">
       p       { margin-top: 0; margin-bottom: 0; vertical-align: top }
       pre     { margin-top: 0; margin-bottom: 0; vertical-align: top }
       table   { margin-top: 0; margin-bottom: 0; vertical-align: top }
       h1      { text-align: center }
</style>
<title>Tcl_SplitList</title>

</head>
<body>

<h1 align="center">Tcl_SplitList</h1>

<a href="#NAME">NAME</a><br>
<a href="#SYNOPSIS">SYNOPSIS</a><br>
<a href="#ARGUMENTS">ARGUMENTS</a><br>
<a href="#DESCRIPTION">DESCRIPTION</a><br>
<a href="#KEYWORDS">KEYWORDS</a><br>

<hr>



<p>______________________________________________________________________________</p>

<h2>NAME
<a name="NAME"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">Tcl_SplitList,
Tcl_Merge, Tcl_ScanElement, Tcl_ConvertElement,
Tcl_ScanCountedElement, Tcl_ConvertCountedElement &minus;
manipulate Tcl lists</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>#include
&lt;tcl.h&gt;</b></p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_SplitList</b>(<i>interp, list, argcPtr, argvPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">char * <b><br>
Tcl_Merge</b>(<i>argc, argv</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_ScanElement</b>(<i>src, flagsPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_ScanCountedElement</b>(<i>src, length, flagsPtr</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_ConvertElement</b>(<i>src, dst, flags</i>)</p>

<p style="margin-left:11%; margin-top: 1em">int <b><br>
Tcl_ConvertCountedElement</b>(<i>src, length, dst,
flags</i>)</p>

<h2>ARGUMENTS
<a name="ARGUMENTS"></a>
</h2>


<table width="100%" border="0" rules="none" frame="void"
       cellspacing="0" cellpadding="0">
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p style="margin-top: 1em">Tcl_Interp <i>*interp</i>
(out)</p> </td>
<td width="23%"></td>
<td width="23%">


<p style="margin-top: 1em">Interpreter to use for error
reporting. If NULL, then no error message is left.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>char <i>*list</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Pointer to a string with proper list structure.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>int <i>*argcPtr</i> (out)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Filled in with number of elements in <i>list</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>const char <i>***argvPtr</i> (out)</p></td>
<td width="23%"></td>
<td width="23%">


<p><i>*argvPtr</i> will be filled in with the address of an
array of pointers to the strings that are the extracted
elements of <i>list</i>. There will be <i>*argcPtr</i> valid
entries in the array, followed by a NULL entry.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>int <i>argc</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Number of elements in <i>argv</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>const char *const <i>*argv</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Array of strings to merge together into a single list.
Each string will become a separate element of the list.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>const char <i>*src</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>String that is to become an element of a list.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>int <i>*flagsPtr</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Pointer to word to fill in with information about
<i>src</i>. The value of *<i>flagsPtr</i> must be passed to
<b>Tcl_ConvertElement</b>.</p> </td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>int <i>length</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Number of bytes in string <i>src</i>.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>char <i>*dst</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Place to copy converted list element. Must contain
enough characters to hold converted string.</p></td></tr>
<tr valign="top" align="left">
<td width="11%"></td>
<td width="43%">


<p>int <i>flags</i> (in)</p></td>
<td width="23%"></td>
<td width="23%">


<p>Information about <i>src</i>. Must be value returned by
previous call to <b>Tcl_ScanElement</b>, possibly OR-ed with
<b>TCL_DONT_USE_BRACES</b>.</p> </td></tr>
</table>


<p style="margin-left:77%;">_________________________________________________________________</p>

<h2>DESCRIPTION
<a name="DESCRIPTION"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
procedures may be used to disassemble and reassemble Tcl
lists. <b>Tcl_SplitList</b> breaks a list up into its
constituent elements, returning an array of pointers to the
elements using <i>argcPtr</i> and <i>argvPtr</i>. While
extracting the arguments, <b>Tcl_SplitList</b> obeys the
usual rules for backslash substitutions and braces. The area
of memory pointed to by <i>*argvPtr</i> is dynamically
allocated; in addition to the array of pointers, it also
holds copies of all the list elements. It is the
caller&rsquo;s responsibility to free up all of this
storage. For example, suppose that you have called
<b>Tcl_SplitList</b> with the following code:</p>

<p style="margin-left:22%;">int argc, code; <br>
char *string; <br>
char **argv; <br>
... <br>
code = Tcl_SplitList(interp, string, &amp;argc,
&amp;argv);</p>

<p style="margin-left:11%;">Then you should eventually free
the storage with a call like the following:</p>

<p style="margin-left:22%;">Tcl_Free((char *) argv);</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_SplitList</b>
normally returns <b>TCL_OK</b>, which means the list was
successfully parsed. If there was a syntax error in
<i>list</i>, then <b>TCL_ERROR</b> is returned and the
interpreter&rsquo;s result will point to an error message
describing the problem (if <i>interp</i> was not NULL). If
<b>TCL_ERROR</b> is returned then no memory is allocated and
<i>*argvPtr</i> is not modified.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_Merge</b>
is the inverse of <b>Tcl_SplitList</b>: it takes a
collection of strings given by <i>argc</i> and <i>argv</i>
and generates a result string that has proper list
structure. This means that commands like <b>index</b> may be
used to extract the original elements again. In addition, if
the result of <b>Tcl_Merge</b> is passed to <b>Tcl_Eval</b>,
it will be parsed into <i>argc</i> words whose values will
be the same as the <i>argv</i> strings passed to
<b>Tcl_Merge</b>. <b>Tcl_Merge</b> will modify the list
elements with braces and/or backslashes in order to produce
proper Tcl list structure. The result string is dynamically
allocated using <b>Tcl_Alloc</b>; the caller must eventually
release the space using <b>Tcl_Free</b>.</p>

<p style="margin-left:11%; margin-top: 1em">If the result
of <b>Tcl_Merge</b> is passed to <b>Tcl_SplitList</b>, the
elements returned by <b>Tcl_SplitList</b> will be identical
to those passed into <b>Tcl_Merge</b>. However, the converse
is not true: if <b>Tcl_SplitList</b> is passed a given
string, and the resulting <i>argc</i> and <i>argv</i> are
passed to <b>Tcl_Merge</b>, the resulting string may not be
the same as the original string passed to
<b>Tcl_SplitList</b>. This is because <b>Tcl_Merge</b> may
use backslashes and braces differently than the original
string.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_ScanElement</b>
and <b>Tcl_ConvertElement</b> are the procedures that do all
of the real work of <b>Tcl_Merge</b>. <b>Tcl_ScanElement</b>
scans its <i>src</i> argument and determines how to use
backslashes and braces when converting it to a list element.
It returns an overestimate of the number of characters
required to represent <i>src</i> as a list element, and it
stores information in <i>*flagsPtr</i> that is needed by
<b>Tcl_ConvertElement</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_ConvertElement</b>
is a companion procedure to <b>Tcl_ScanElement</b>. It does
the actual work of converting a string to a list element.
Its <i>flags</i> argument must be the same as the value
returned by <b>Tcl_ScanElement</b>.
<b>Tcl_ConvertElement</b> writes a proper list element to
memory starting at *<i>dst</i> and returns a count of the
total number of characters written, which will be no more
than the result returned by <b>Tcl_ScanElement</b>.
<b>Tcl_ConvertElement</b> writes out only the actual list
element without any leading or trailing spaces: it is up to
the caller to include spaces between adjacent list
elements.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_ConvertElement</b>
uses one of two different approaches to handle the special
characters in <i>src</i>. Wherever possible, it handles
special characters by surrounding the string with braces.
This produces clean-looking output, but cannot be used in
some situations, such as when <i>src</i> contains unmatched
braces. In these situations, <b>Tcl_ConvertElement</b>
handles special characters by generating backslash sequences
for them. The caller may insist on the second approach by
OR-ing the flag value returned by <b>Tcl_ScanElement</b>
with <b>TCL_DONT_USE_BRACES</b>. Although this will produce
an uglier result, it is useful in some special situations,
such as when <b>Tcl_ConvertElement</b> is being used to
generate a portion of an argument for a Tcl command. In this
case, surrounding <i>src</i> with curly braces would cause
the command not to be parsed correctly.</p>

<p style="margin-left:11%; margin-top: 1em">By default,
<b>Tcl_ConvertElement</b> will use quoting in its output to
be <big>&#9474;</big> sure the first character of an element
is not the hash character (&ldquo;#&rdquo;.)
<big>&#9474;</big> This is to be sure the first element of
any list passed to <b>eval</b> is not <big>&#9474;</big>
mis-parsed as the beginning of a comment. When a list
element is not <big>&#9474;</big> the first element of a
list, this quoting is not necessary. When the
<big>&#9474;</big> caller can be sure that the element is
not the first element of a list, <big>&#9474;</big> it can
disable quoting of the leading hash character by OR-ing the
flag <big>&#9474;</big> value returned by
<b>Tcl_ScanElement</b> with <b>TCL_DONT_QUOTE_HASH</b>.</p>


<p style="margin-left:11%; margin-top: 1em"><b>Tcl_ScanCountedElement</b>
and <b>Tcl_ConvertCountedElement</b> are the same as
<b>Tcl_ScanElement</b> and <b>Tcl_ConvertElement</b>, except
the length of string <i>src</i> is specified by the
<i>length</i> argument, and the string may contain embedded
nulls.</p>

<h2>KEYWORDS
<a name="KEYWORDS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">backslash,
convert, element, list, merge, split, strings</p>
<hr>
</body>
</html>
